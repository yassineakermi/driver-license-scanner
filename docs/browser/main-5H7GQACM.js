import{$ as ot,$a as rl,$b as jv,A as gv,Aa as Zc,Ab as ni,B as vv,Ba as Av,Bb as Ci,C as pi,Ca as Fo,Cb as Ki,D as $f,Da as Zi,Db as Ar,E as Hn,Ea as Js,Eb as Sr,F as Ro,Fa,Fb as il,G as Yc,Ga as ka,Gb as Dt,H as Zf,Ha as Sv,Hb as gi,I as qi,Ia as Tv,Ib as Ni,J as _v,Ja as Dv,Jb as mr,K as Kf,Ka as Ov,Kb as ih,L as Mo,La as Rv,Lb as nl,M as Wn,Ma as Mv,Mb as nh,N as Qf,Na as Pv,Nb as oh,O as yv,Oa as wi,Ob as ah,P as bv,Pa as eh,Pb as nu,Q as xv,Qa as el,Qb as ou,R as qc,Ra as Ue,Rb as Vv,S as $i,Sa as _e,Sb as ol,T as mi,Ta as tl,Tb as sh,U as $r,Ua as cn,Ub as Uv,V as lr,Va as Nv,Vb as oi,W as Yt,Wa as Kc,Wb as Gv,X as Na,Xa as Qc,Xb as Mr,Y as Re,Ya as qn,Yb as Lo,Z as Ze,Za as Fv,Zb as al,_ as Ev,_a as th,_b as dn,a as se,aa as Jf,ab as ri,ac as lh,b as Tt,ba as ne,bb as zr,bc as zv,c as Hf,ca as Se,cb as kv,cc as Hv,da as $s,db as Lv,dc as ut,e as Wf,ea as $c,eb as hr,ec as La,f as zc,fa as Zs,fb as Bv,fc as Wv,g as Oe,ga as or,gb as Jc,gc as Xv,h as Mi,ha as Ke,hb as kr,hc as au,i as pv,ia as xt,ib as _t,ic as Yv,j as Ys,ja as Ks,jb as eu,jc as qv,k as Xf,ka as wv,kb as cr,kc as Qi,l as Yf,la as Po,lb as $n,lc as $v,m as gt,ma as wn,mb as rh,mc as Zv,n as fi,na as Ei,nb as ii,nc as ch,o as zn,oa as Zr,ob as tu,oc as Kv,p as hi,pa as Kr,pb as ru,q as Ve,qa as In,qb as iu,r as Oo,ra as Qs,rb as Le,rc as uh,s as Hc,sa as Xn,sb as He,sc as dh,t as mv,ta as Iv,tb as Qt,tc as fh,u as Xe,ua as Je,ub as ko,v as qs,va as dt,vb as un,vc as Bo,w as Pi,wa as No,wb as Cn,wc as Vo,x as Wc,xa as vt,xb as pr,xc as hh,y as qf,ya as Yn,yb as It,yc as ph,z as Xc,za as Cv,zb as Ii,zc as mh}from"./chunk-TITYDGFB.js";var Dm=Wf((gd,nb)=>{"use strict";(function(r,e){typeof gd=="object"&&typeof nb<"u"?e(gd):typeof define=="function"&&define.amd?define(["exports"],e):(r=r||self,e(r.FilePond={}))})(gd,function(r){"use strict";var e=function(c){return c instanceof HTMLElement},t=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],m=Object.assign({},c),y=[],x=[],w=function(){return Object.assign({},m)},C=function(){var X=[].concat(y);return y.length=0,X},R=function(){var X=[].concat(x);x.length=0,X.forEach(function(oe){var be=oe.type,Ae=oe.data;M(be,Ae)})},M=function(X,oe,be){if(be&&!document.hidden){x.push({type:X,data:oe});return}ee[X]&&ee[X](oe),y.push({type:X,data:oe})},B=function(X){for(var oe,be=arguments.length,Ae=new Array(be>1?be-1:0),de=1;de<be;de++)Ae[de-1]=arguments[de];return K[X]?(oe=K)[X].apply(oe,Ae):null},V={getState:w,processActionQueue:C,processDispatchQueue:R,dispatch:M,query:B},K={};u.forEach(function(te){K=Object.assign({},te(m),{},K)});var ee={};return f.forEach(function(te){ee=Object.assign({},te(M,B,m),{},ee)}),V},i=function(c,u,f){if(typeof f=="function"){c[u]=f;return}Object.defineProperty(c,u,Object.assign({},f))},n=function(c,u){for(var f in c)c.hasOwnProperty(f)&&u(f,c[f])},o=function(c){var u={};return n(c,function(f){i(u,f,c[f])}),u},a=function(c,u){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(f===null)return c.getAttribute(u)||c.hasAttribute(u);c.setAttribute(u,f)},s="http://www.w3.org/2000/svg",l=["svg","path"],d=function(c){return l.includes(c)},h=function(c,u){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};typeof u=="object"&&(f=u,u=null);var m=d(c)?document.createElementNS(s,c):document.createElement(c);return u&&(d(c)?a(m,"class",u):m.className=u),n(f,function(y,x){a(m,y,x)}),m},p=function(c){return function(u,f){typeof f<"u"&&c.children[f]?c.insertBefore(u,c.children[f]):c.appendChild(u)}},v=function(c,u){return function(f,m){return typeof m<"u"?u.splice(m,0,f):u.push(f),f}},_=function(c,u){return function(f){return u.splice(u.indexOf(f),1),f.element.parentNode&&c.removeChild(f.element),f}},E=function(){return typeof window<"u"&&typeof window.document<"u"}(),A=function(){return E},N=A()?h("svg"):{},F="children"in N?function(g){return g.children.length}:function(g){return g.childNodes.length},P=function(c,u,f,m){var y=f[0]||c.left,x=f[1]||c.top,w=y+c.width,C=x+c.height*(m[1]||1),R={element:Object.assign({},c),inner:{left:c.left,top:c.top,right:c.right,bottom:c.bottom},outer:{left:y,top:x,right:w,bottom:C}};return u.filter(function(M){return!M.isRectIgnored()}).map(function(M){return M.rect}).forEach(function(M){L(R.inner,Object.assign({},M.inner)),L(R.outer,Object.assign({},M.outer))}),G(R.inner),R.outer.bottom+=R.element.marginBottom,R.outer.right+=R.element.marginRight,G(R.outer),R},L=function(c,u){u.top+=c.top,u.right+=c.left,u.bottom+=c.top,u.left+=c.left,u.bottom>c.bottom&&(c.bottom=u.bottom),u.right>c.right&&(c.right=u.right)},G=function(c){c.width=c.right-c.left,c.height=c.bottom-c.top},Y=function(c){return typeof c=="number"},Q=function(c,u,f){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.001;return Math.abs(c-u)<m&&Math.abs(f)<m},ie=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=c.stiffness,f=u===void 0?.5:u,m=c.damping,y=m===void 0?.75:m,x=c.mass,w=x===void 0?10:x,C=null,R=null,M=0,B=!1,V=function(X,oe){if(!B){if(!(Y(C)&&Y(R))){B=!0,M=0;return}var be=-(R-C)*f;M+=be/w,R+=M,M*=y,Q(R,C,M)||oe?(R=C,M=0,B=!0,ee.onupdate(R),ee.oncomplete(R)):ee.onupdate(R)}},K=function(X){if(Y(X)&&!Y(R)&&(R=X),C===null&&(C=X,R=X),C=X,R===C||typeof C>"u"){B=!0,M=0,ee.onupdate(R),ee.oncomplete(R);return}B=!1},ee=o({interpolate:V,target:{set:K,get:function(){return C}},resting:{get:function(){return B}},onupdate:function(X){},oncomplete:function(X){}});return ee},ye=function(c){return c},Ne=function(c){return c<.5?2*c*c:-1+(4-2*c)*c},Ge=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=c.duration,f=u===void 0?500:u,m=c.easing,y=m===void 0?Ne:m,x=c.delay,w=x===void 0?0:x,C=null,R,M,B=!0,V=!1,K=null,ee=function(oe,be){B||K===null||(C===null&&(C=oe),!(oe-C<w)&&(R=oe-C-w,R>=f||be?(R=1,M=V?0:1,te.onupdate(M*K),te.oncomplete(M*K),B=!0):(M=R/f,te.onupdate((R>=0?y(V?1-M:M):0)*K))))},te=o({interpolate:ee,target:{get:function(){return V?0:K},set:function(oe){if(K===null){K=oe,te.onupdate(oe),te.oncomplete(oe);return}oe<K?(K=1,V=!0):(V=!1,K=oe),B=!1,C=null}},resting:{get:function(){return B}},onupdate:function(oe){},oncomplete:function(oe){}});return te},At={spring:ie,tween:Ge},nt=function(c,u,f){var m=c[u]&&typeof c[u][f]=="object"?c[u][f]:c[u]||c,y=typeof m=="string"?m:m.type,x=typeof m=="object"?Object.assign({},m):{};return At[y]?At[y](x):null},wt=function(c,u,f){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;u=Array.isArray(u)?u:[u],u.forEach(function(y){c.forEach(function(x){var w=x,C=function(){return f[x]},R=function(B){return f[x]=B};typeof x=="object"&&(w=x.key,C=x.getter||C,R=x.setter||R),!(y[w]&&!m)&&(y[w]={get:C,set:R})})})},Ur=function(c){var u=c.mixinConfig,f=c.viewProps,m=c.viewInternalAPI,y=c.viewExternalAPI,x=Object.assign({},f),w=[];return n(u,function(C,R){var M=nt(R);if(M){M.onupdate=function(V){f[C]=V},M.target=x[C];var B={key:C,setter:function(K){M.target!==K&&(M.target=K)},getter:function(){return f[C]}};wt([B],[m,y],f,!0),w.push(M)}}),{write:function(R){var M=document.hidden,B=!0;return w.forEach(function(V){V.resting||(B=!1),V.interpolate(R,M)}),B},destroy:function(){}}},ji=function(c){return function(u,f){c.addEventListener(u,f)}},ha=function(c){return function(u,f){c.removeEventListener(u,f)}},ho=function(c){var u=c.mixinConfig,f=c.viewProps,m=c.viewInternalAPI,y=c.viewExternalAPI,x=c.viewState,w=c.view,C=[],R=ji(w.element),M=ha(w.element);return y.on=function(B,V){C.push({type:B,fn:V}),R(B,V)},y.off=function(B,V){C.splice(C.findIndex(function(K){return K.type===B&&K.fn===V}),1),M(B,V)},{write:function(){return!0},destroy:function(){C.forEach(function(V){M(V.type,V.fn)})}}},pa=function(c){var u=c.mixinConfig,f=c.viewProps,m=c.viewExternalAPI;wt(u,m,f)},Gr=function(c){return c!=null},wg={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},hc=function(c){var u=c.mixinConfig,f=c.viewProps,m=c.viewInternalAPI,y=c.viewExternalAPI,x=c.view,w=Object.assign({},f),C={};wt(u,[m,y],f);var R=function(){return[f.translateX||0,f.translateY||0]},M=function(){return[f.scaleX||0,f.scaleY||0]},B=function(){return x.rect?P(x.rect,x.childViews,R(),M()):null};return m.rect={get:B},y.rect={get:B},u.forEach(function(V){f[V]=typeof w[V]>"u"?wg[V]:w[V]}),{write:function(){if(Ps(C,f))return ma(x.element,f),Object.assign(C,Object.assign({},f)),!0},destroy:function(){}}},Ps=function(c,u){if(Object.keys(c).length!==Object.keys(u).length)return!0;for(var f in u)if(u[f]!==c[f])return!0;return!1},ma=function(c,u){var f=u.opacity,m=u.perspective,y=u.translateX,x=u.translateY,w=u.scaleX,C=u.scaleY,R=u.rotateX,M=u.rotateY,B=u.rotateZ,V=u.originX,K=u.originY,ee=u.width,te=u.height,X="",oe="";(Gr(V)||Gr(K))&&(oe+="transform-origin: "+(V||0)+"px "+(K||0)+"px;"),Gr(m)&&(X+="perspective("+m+"px) "),(Gr(y)||Gr(x))&&(X+="translate3d("+(y||0)+"px, "+(x||0)+"px, 0) "),(Gr(w)||Gr(C))&&(X+="scale3d("+(Gr(w)?w:1)+", "+(Gr(C)?C:1)+", 1) "),Gr(B)&&(X+="rotateZ("+B+"rad) "),Gr(R)&&(X+="rotateX("+R+"rad) "),Gr(M)&&(X+="rotateY("+M+"rad) "),X.length&&(oe+="transform:"+X+";"),Gr(f)&&(oe+="opacity:"+f+";",f===0&&(oe+="visibility:hidden;"),f<1&&(oe+="pointer-events:none;")),Gr(te)&&(oe+="height:"+te+"px;"),Gr(ee)&&(oe+="width:"+ee+"px;");var be=c.elementCurrentStyle||"";(oe.length!==be.length||oe!==be)&&(c.style.cssText=oe,c.elementCurrentStyle=oe)},Ig={styles:hc,listeners:ho,animations:Ur,apis:pa},Yd=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return u.layoutCalculated||(c.paddingTop=parseInt(f.paddingTop,10)||0,c.marginTop=parseInt(f.marginTop,10)||0,c.marginRight=parseInt(f.marginRight,10)||0,c.marginBottom=parseInt(f.marginBottom,10)||0,c.marginLeft=parseInt(f.marginLeft,10)||0,u.layoutCalculated=!0),c.left=u.offsetLeft||0,c.top=u.offsetTop||0,c.width=u.offsetWidth||0,c.height=u.offsetHeight||0,c.right=c.left+c.width,c.bottom=c.top+c.height,c.scrollTop=u.scrollTop,c.hidden=u.offsetParent===null,c},br=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=c.tag,f=u===void 0?"div":u,m=c.name,y=m===void 0?null:m,x=c.attributes,w=x===void 0?{}:x,C=c.read,R=C===void 0?function(){}:C,M=c.write,B=M===void 0?function(){}:M,V=c.create,K=V===void 0?function(){}:V,ee=c.destroy,te=ee===void 0?function(){}:ee,X=c.filterFrameActionsForChild,oe=X===void 0?function(ge,xe){return xe}:X,be=c.didCreateView,Ae=be===void 0?function(){}:be,de=c.didWriteView,Qe=de===void 0?function(){}:de,me=c.ignoreRect,Pt=me===void 0?!1:me,Nt=c.ignoreRectUpdate,ve=Nt===void 0?!1:Nt,De=c.mixins,Me=De===void 0?[]:De;return function(ge){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ke=h(f,"filepond--"+y,w),Bt=window.getComputedStyle(ke,null),St=Yd(),Be=null,re=!1,W=[],Ie=[],$e={},it={},ft=[B],bt=[R],nr=[te],fr=function(){return ke},Ma=function(){return W.concat()},cv=function(){return $e},UI=function(ht){return function(xn,En){return xn(ht,En)}},uv=function(){return Be||(Be=P(St,W,[0,0],[1,1]),Be)},GI=function(){return Bt},jI=function(){Be=null,W.forEach(function(En){return En._read()});var ht=!(ve&&St.width&&St.height);ht&&Yd(St,ke,Bt);var xn={root:jn,props:xe,rect:St};bt.forEach(function(En){return En(xn)})},zI=function(ht,xn,En){var Pa=xn.length===0;return ft.forEach(function(di){var Do=di({props:xe,root:jn,actions:xn,timestamp:ht,shouldOptimize:En});Do===!1&&(Pa=!1)}),Ie.forEach(function(di){var Do=di.write(ht);Do===!1&&(Pa=!1)}),W.filter(function(di){return!!di.element.parentNode}).forEach(function(di){var Do=di._write(ht,oe(di,xn),En);Do||(Pa=!1)}),W.forEach(function(di,Do){di.element.parentNode||(jn.appendChild(di.element,Do),di._read(),di._write(ht,oe(di,xn),En),Pa=!1)}),re=Pa,Qe({props:xe,root:jn,actions:xn,timestamp:ht}),Pa},HI=function(){Ie.forEach(function(ht){return ht.destroy()}),nr.forEach(function(ht){ht({root:jn,props:xe})}),W.forEach(function(ht){return ht._destroy()})},dv={element:{get:fr},style:{get:GI},childViews:{get:Ma}},fv=Object.assign({},dv,{rect:{get:uv},ref:{get:cv},is:function(ht){return y===ht},appendChild:p(ke),createChildView:UI(ge),linkView:function(ht){return W.push(ht),ht},unlinkView:function(ht){W.splice(W.indexOf(ht),1)},appendChildView:v(ke,W),removeChildView:_(ke,W),registerWriter:function(ht){return ft.push(ht)},registerReader:function(ht){return bt.push(ht)},registerDestroyer:function(ht){return nr.push(ht)},invalidateLayout:function(){return ke.layoutCalculated=!1},dispatch:ge.dispatch,query:ge.query}),hv={element:{get:fr},childViews:{get:Ma},rect:{get:uv},resting:{get:function(){return re}},isRectIgnored:function(){return Pt},_read:jI,_write:zI,_destroy:HI},WI=Object.assign({},dv,{rect:{get:function(){return St}}});Object.keys(Me).sort(function(tr,ht){return tr==="styles"?1:ht==="styles"?-1:0}).forEach(function(tr){var ht=Ig[tr]({mixinConfig:Me[tr],viewProps:xe,viewState:it,viewInternalAPI:fv,viewExternalAPI:hv,view:o(WI)});ht&&Ie.push(ht)});var jn=o(fv);K({root:jn,props:xe});var XI=F(ke);return W.forEach(function(tr,ht){jn.appendChild(tr.element,XI+ht)}),Ae(jn),o(hv)}},Cg=function(c,u){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:60,m="__framePainter";if(window[m]){window[m].readers.push(c),window[m].writers.push(u);return}window[m]={readers:[c],writers:[u]};var y=window[m],x=1e3/f,w=null,C=null,R=null,M=null,B=function(){document.hidden?(R=function(){return window.setTimeout(function(){return V(performance.now())},x)},M=function(){return window.clearTimeout(C)}):(R=function(){return window.requestAnimationFrame(V)},M=function(){return window.cancelAnimationFrame(C)})};document.addEventListener("visibilitychange",function(){M&&M(),B(),V(performance.now())});var V=function K(ee){C=R(K),w||(w=ee);var te=ee-w;te<=x||(w=ee-te%x,y.readers.forEach(function(X){return X()}),y.writers.forEach(function(X){return X(ee)}))};return B(),V(performance.now()),{pause:function(){M(C)}}},Yr=function(c,u){return function(f){var m=f.root,y=f.props,x=f.actions,w=x===void 0?[]:x,C=f.timestamp,R=f.shouldOptimize;w.filter(function(M){return c[M.type]}).forEach(function(M){return c[M.type]({root:m,props:y,action:M.data,timestamp:C,shouldOptimize:R})}),u&&u({root:m,props:y,actions:w,timestamp:C,shouldOptimize:R})}},qd=function(c,u){return u.parentNode.insertBefore(c,u)},pc=function(c,u){return u.parentNode.insertBefore(c,u.nextSibling)},po=function(c){return Array.isArray(c)},on=function(c){return c==null},$d=function(c){return c.trim()},Ns=function(c){return""+c},Zd=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return on(c)?[]:po(c)?c:Ns(c).split(u).map($d).filter(function(f){return f.length})},ga=function(c){return typeof c=="boolean"},Fs=function(c){return ga(c)?c:c==="true"},jr=function(c){return typeof c=="string"},mc=function(c){return Y(c)?c:jr(c)?Ns(c).replace(/[a-z]+/gi,""):0},va=function(c){return parseInt(mc(c),10)},_a=function(c){return parseFloat(mc(c))},mo=function(c){return Y(c)&&isFinite(c)&&Math.floor(c)===c},gc=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(mo(c))return c;var f=Ns(c).trim();return/MB$/i.test(f)?(f=f.replace(/MB$i/,"").trim(),va(f)*u*u):/KB/i.test(f)?(f=f.replace(/KB$i/,"").trim(),va(f)*u):va(f)},an=function(c){return typeof c=="function"},Ag=function(c){for(var u=self,f=c.split("."),m=null;m=f.shift();)if(u=u[m],!u)return null;return u},Kd={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},Sg=function(c){var u={};return u.url=jr(c)?c:c.url||"",u.timeout=c.timeout?parseInt(c.timeout,10):0,u.headers=c.headers?c.headers:{},n(Kd,function(f){u[f]=Qd(f,c[f],Kd[f],u.timeout,u.headers)}),u.process=c.process||jr(c)||c.url?u.process:null,u.remove=c.remove||null,delete u.headers,u},Qd=function(c,u,f,m,y){if(u===null)return null;if(typeof u=="function")return u;var x={url:f==="GET"||f==="PATCH"?"?"+c+"=":"",method:f,headers:y,withCredentials:!1,timeout:m,onload:null,ondata:null,onerror:null};if(jr(u))return x.url=u,x;if(Object.assign(x,u),jr(x.headers)){var w=x.headers.split(/:(.+)/);x.headers={header:w[0],value:w[1]}}return x.withCredentials=Fs(x.withCredentials),x},Tg=function(c){return Sg(c)},Dg=function(c){return c===null},Rr=function(c){return typeof c=="object"&&c!==null},Og=function(c){return Rr(c)&&jr(c.url)&&Rr(c.process)&&Rr(c.revert)&&Rr(c.restore)&&Rr(c.fetch)},vc=function(c){return po(c)?"array":Dg(c)?"null":mo(c)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(c)?"bytes":Og(c)?"api":typeof c},Rg=function(c){return c.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",')},Mg={array:Zd,boolean:Fs,int:function(c){return vc(c)==="bytes"?gc(c):va(c)},number:_a,float:_a,bytes:gc,string:function(c){return an(c)?c:Ns(c)},function:function(c){return Ag(c)},serverapi:Tg,object:function(c){try{return JSON.parse(Rg(c))}catch{return null}}},Pg=function(c,u){return Mg[u](c)},Jd=function(c,u,f){if(c===u)return c;var m=vc(c);if(m!==f){var y=Pg(c,f);if(m=vc(y),y===null)throw'Trying to assign value with incorrect type to "'+option+'", allowed type: "'+f+'"';c=y}return c},_c=function(c,u){var f=c;return{enumerable:!0,get:function(){return f},set:function(y){f=Jd(y,c,u)}}},ef=function(c){var u={};return n(c,function(f){var m=c[f];u[f]=_c(m[0],m[1])}),o(u)},tf=function(c){return{items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:ef(c)}},ya=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"-";return c.split(/(?=[A-Z])/).map(function(f){return f.toLowerCase()}).join(u)},go=function(c,u){var f={};return n(u,function(m){f[m]={get:function(){return c.getState().options[m]},set:function(x){c.dispatch("SET_"+ya(m,"_").toUpperCase(),{value:x})}}}),f},yc=function(c){return function(u,f,m){var y={};return n(c,function(x){var w=ya(x,"_").toUpperCase();y["SET_"+w]=function(C){try{m.options[x]=C.value}catch{}u("DID_SET_"+w,{value:m.options[x]})}}),y}},bc=function(c){return function(u){var f={};return n(c,function(m){f["GET_"+ya(m,"_").toUpperCase()]=function(y){return u.options[m]}}),f}},yi={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},xc=function(){return Math.random().toString(36).substring(2,11)};function ba(g){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ba=function(c){return typeof c}:ba=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},ba(g)}var xa;function rf(g,c,u,f){xa||(xa=typeof Symbol=="function"&&Symbol.for&&Symbol.for("react.element")||60103);var m=g&&g.defaultProps,y=arguments.length-3;if(!c&&y!==0&&(c={children:void 0}),c&&m)for(var x in m)c[x]===void 0&&(c[x]=m[x]);else c||(c=m||{});if(y===1)c.children=f;else if(y>1){for(var w=new Array(y),C=0;C<y;C++)w[C]=arguments[C+3];c.children=w}return{$$typeof:xa,type:g,key:u===void 0?null:""+u,ref:null,props:c,_owner:null}}function Ng(g){var c;if(typeof Symbol<"u"&&(Symbol.asyncIterator&&(c=g[Symbol.asyncIterator],c!=null)||Symbol.iterator&&(c=g[Symbol.iterator],c!=null)))return c.call(g);throw new TypeError("Object is not async iterable")}function vo(g){this.wrapped=g}function zi(g){var c,u;function f(x,w){return new Promise(function(C,R){var M={key:x,arg:w,resolve:C,reject:R,next:null};u?u=u.next=M:(c=u=M,m(x,w))})}function m(x,w){try{var C=g[x](w),R=C.value,M=R instanceof vo;Promise.resolve(M?R.wrapped:R).then(function(B){if(M){m("next",B);return}y(C.done?"return":"normal",B)},function(B){m("throw",B)})}catch(B){y("throw",B)}}function y(x,w){switch(x){case"return":c.resolve({value:w,done:!0});break;case"throw":c.reject(w);break;default:c.resolve({value:w,done:!1});break}c=c.next,c?m(c.key,c.arg):u=null}this._invoke=f,typeof g.return!="function"&&(this.return=void 0)}typeof Symbol=="function"&&Symbol.asyncIterator&&(zi.prototype[Symbol.asyncIterator]=function(){return this}),zi.prototype.next=function(g){return this._invoke("next",g)},zi.prototype.throw=function(g){return this._invoke("throw",g)},zi.prototype.return=function(g){return this._invoke("return",g)};function ti(g){return function(){return new zi(g.apply(this,arguments))}}function Fg(g){return new vo(g)}function bi(g,c){var u={},f=!1;function m(y,x){return f=!0,x=new Promise(function(w){w(g[y](x))}),{done:!1,value:c(x)}}return typeof Symbol=="function"&&Symbol.iterator&&(u[Symbol.iterator]=function(){return this}),u.next=function(y){return f?(f=!1,y):m("next",y)},typeof g.throw=="function"&&(u.throw=function(y){if(f)throw f=!1,y;return m("throw",y)}),typeof g.return=="function"&&(u.return=function(y){return m("return",y)}),u}function Ec(g,c,u,f,m,y,x){try{var w=g[y](x),C=w.value}catch(R){u(R);return}w.done?c(C):Promise.resolve(C).then(f,m)}function kg(g){return function(){var c=this,u=arguments;return new Promise(function(f,m){var y=g.apply(c,u);function x(C){Ec(y,f,m,x,w,"next",C)}function w(C){Ec(y,f,m,x,w,"throw",C)}x(void 0)})}}function Hi(g,c){if(!(g instanceof c))throw new TypeError("Cannot call a class as a function")}function wc(g,c){for(var u=0;u<c.length;u++){var f=c[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(g,f.key,f)}}function _o(g,c,u){return c&&wc(g.prototype,c),u&&wc(g,u),g}function Lg(g,c){for(var u in c){var f=c[u];f.configurable=f.enumerable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(g,u,f)}if(Object.getOwnPropertySymbols)for(var m=Object.getOwnPropertySymbols(c),y=0;y<m.length;y++){var x=m[y],f=c[x];f.configurable=f.enumerable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(g,x,f)}return g}function Bg(g,c){for(var u=Object.getOwnPropertyNames(c),f=0;f<u.length;f++){var m=u[f],y=Object.getOwnPropertyDescriptor(c,m);y&&y.configurable&&g[m]===void 0&&Object.defineProperty(g,m,y)}return g}function ks(g,c,u){return c in g?Object.defineProperty(g,c,{value:u,enumerable:!0,configurable:!0,writable:!0}):g[c]=u,g}function Ic(){return Ic=Object.assign||function(g){for(var c=1;c<arguments.length;c++){var u=arguments[c];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(g[f]=u[f])}return g},Ic.apply(this,arguments)}function Vg(g){for(var c=1;c<arguments.length;c++){var u=arguments[c]!=null?arguments[c]:{},f=Object.keys(u);typeof Object.getOwnPropertySymbols=="function"&&(f=f.concat(Object.getOwnPropertySymbols(u).filter(function(m){return Object.getOwnPropertyDescriptor(u,m).enumerable}))),f.forEach(function(m){ks(g,m,u[m])})}return g}function Cc(g,c){var u=Object.keys(g);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(g);c&&(f=f.filter(function(m){return Object.getOwnPropertyDescriptor(g,m).enumerable})),u.push.apply(u,f)}return u}function Ug(g){for(var c=1;c<arguments.length;c++){var u=arguments[c]!=null?arguments[c]:{};c%2?Cc(u,!0).forEach(function(f){ks(g,f,u[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(u)):Cc(u).forEach(function(f){Object.defineProperty(g,f,Object.getOwnPropertyDescriptor(u,f))})}return g}function nf(g,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(c&&c.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),c&&yo(g,c)}function Ls(g,c){g.prototype=Object.create(c.prototype),g.prototype.constructor=g,g.__proto__=c}function Ea(g){return Ea=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},Ea(g)}function yo(g,c){return yo=Object.setPrototypeOf||function(f,m){return f.__proto__=m,f},yo(g,c)}function of(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function wa(g,c,u){return of()?wa=Reflect.construct:wa=function(m,y,x){var w=[null];w.push.apply(w,y);var C=Function.bind.apply(m,w),R=new C;return x&&yo(R,x.prototype),R},wa.apply(null,arguments)}function af(g){return Function.toString.call(g).indexOf("[native code]")!==-1}function Bs(g){var c=typeof Map=="function"?new Map:void 0;return Bs=function(f){if(f===null||!af(f))return f;if(typeof f!="function")throw new TypeError("Super expression must either be null or a function");if(typeof c<"u"){if(c.has(f))return c.get(f);c.set(f,m)}function m(){return wa(f,arguments,Ea(this).constructor)}return m.prototype=Object.create(f.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),yo(m,f)},Bs(g)}function Gg(g,c){return c!=null&&typeof Symbol<"u"&&c[Symbol.hasInstance]?!!c[Symbol.hasInstance](g):g instanceof c}function jg(g){return g&&g.__esModule?g:{default:g}}function zg(g){if(g&&g.__esModule)return g;var c={};if(g!=null){for(var u in g)if(Object.prototype.hasOwnProperty.call(g,u)){var f=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(g,u):{};f.get||f.set?Object.defineProperty(c,u,f):c[u]=g[u]}}return c.default=g,c}function Hg(g,c){if(g!==c)throw new TypeError("Cannot instantiate an arrow function")}function Wg(g){if(g==null)throw new TypeError("Cannot destructure undefined")}function bo(g,c){if(g==null)return{};var u={},f=Object.keys(g),m,y;for(y=0;y<f.length;y++)m=f[y],!(c.indexOf(m)>=0)&&(u[m]=g[m]);return u}function sf(g,c){if(g==null)return{};var u=bo(g,c),f,m;if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(g);for(m=0;m<y.length;m++)f=y[m],!(c.indexOf(f)>=0)&&Object.prototype.propertyIsEnumerable.call(g,f)&&(u[f]=g[f])}return u}function Ac(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function Xg(g,c){return c&&(typeof c=="object"||typeof c=="function")?c:Ac(g)}function Vs(g,c){for(;!Object.prototype.hasOwnProperty.call(g,c)&&(g=Ea(g),g!==null););return g}function Ia(g,c,u){return typeof Reflect<"u"&&Reflect.get?Ia=Reflect.get:Ia=function(m,y,x){var w=Vs(m,y);if(w){var C=Object.getOwnPropertyDescriptor(w,y);return C.get?C.get.call(x):C.value}},Ia(g,c,u||g)}function Ca(g,c,u,f){return typeof Reflect<"u"&&Reflect.set?Ca=Reflect.set:Ca=function(y,x,w,C){var R=Vs(y,x),M;if(R){if(M=Object.getOwnPropertyDescriptor(R,x),M.set)return M.set.call(C,w),!0;if(!M.writable)return!1}if(M=Object.getOwnPropertyDescriptor(C,x),M){if(!M.writable)return!1;M.value=w,Object.defineProperty(C,x,M)}else ks(C,x,w);return!0},Ca(g,c,u,f)}function Yg(g,c,u,f,m){var y=Ca(g,c,u,f||g);if(!y&&m)throw new Error("failed to set property");return u}function lf(g,c){return c||(c=g.slice(0)),Object.freeze(Object.defineProperties(g,{raw:{value:Object.freeze(c)}}))}function cf(g,c){return c||(c=g.slice(0)),g.raw=c,g}function qg(g,c){if(g===uf)throw new ReferenceError(c+" is not defined - temporal dead zone");return g}function Wi(g){throw new Error('"'+g+'" is read-only')}function $g(g){throw new Error('Class "'+g+'" cannot be referenced in computed property keys.')}var uf={};function Zg(g,c){return Us(g)||hf(g,c)||Gs()}function Kg(g,c){return Us(g)||pf(g,c)||Gs()}function df(g){return Us(g)||Sc(g)||Gs()}function xo(g){return ff(g)||Sc(g)||mf()}function ff(g){if(Array.isArray(g)){for(var c=0,u=new Array(g.length);c<g.length;c++)u[c]=g[c];return u}}function Us(g){if(Array.isArray(g))return g}function Sc(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}function hf(g,c){var u=[],f=!0,m=!1,y=void 0;try{for(var x=g[Symbol.iterator](),w;!(f=(w=x.next()).done)&&(u.push(w.value),!(c&&u.length===c));f=!0);}catch(C){m=!0,y=C}finally{try{!f&&x.return!=null&&x.return()}finally{if(m)throw y}}return u}function pf(g,c){for(var u=[],f=g[Symbol.iterator](),m;!(m=f.next()).done&&(u.push(m.value),!(c&&u.length===c)););return u}function mf(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Gs(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function gf(g){return function(){var c=g.apply(this,arguments);return c.next(),c}}function vf(g,c){if(typeof g!="object"||g===null)return g;var u=g[Symbol.toPrimitive];if(u!==void 0){var f=u.call(g,c||"default");if(typeof f!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(g)}function Tc(g){var c=vf(g,"string");return typeof c=="symbol"?c:String(c)}function Qg(g,c){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and set to use loose mode. To use proposal-class-properties in spec mode with decorators, wait for the next major version of decorators in stage 2.")}function Dc(g,c,u,f){u&&Object.defineProperty(g,c,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(f):void 0})}function Jg(g,c,u,f,m){var y={};return Object.keys(f).forEach(function(x){y[x]=f[x]}),y.enumerable=!!y.enumerable,y.configurable=!!y.configurable,("value"in y||y.initializer)&&(y.writable=!0),y=u.slice().reverse().reduce(function(x,w){return w(g,c,x)||x},y),m&&y.initializer!==void 0&&(y.value=y.initializer?y.initializer.call(m):void 0,y.initializer=void 0),y.initializer===void 0&&(Object.defineProperty(g,c,y),y=null),y}var _f=0;function e0(g){return"__private_"+_f+++"_"+g}function t0(g,c){if(!Object.prototype.hasOwnProperty.call(g,c))throw new TypeError("attempted to use private field on non-instance");return g}function yf(g,c){var u=c.get(g);if(!u)throw new TypeError("attempted to get private field on non-instance");return u.get?u.get.call(g):u.value}function r0(g,c,u){var f=c.get(g);if(!f)throw new TypeError("attempted to set private field on non-instance");if(f.set)f.set.call(g,u);else{if(!f.writable)throw new TypeError("attempted to set read only private field");f.value=u}return u}function S(g,c){if(!c.has(g))throw new TypeError("attempted to set private field on non-instance");var u=c.get(g);if(u.set)return"__destrObj"in u||(u.__destrObj={set value(f){u.set.call(g,f)}}),u.__destrObj;if(!u.writable)throw new TypeError("attempted to set read only private field");return u}function b(g,c,u){if(g!==c)throw new TypeError("Private static access of wrong provenance");return u.value}function I(g,c,u,f){if(g!==c)throw new TypeError("Private static access of wrong provenance");if(!u.writable)throw new TypeError("attempted to set read only private field");return u.value=f,f}function T(g,c,u){if(g!==c)throw new TypeError("Private static access of wrong provenance");return u}function D(){throw new TypeError("attempted to set read only static private field")}function k(g,c,u,f){var m=H();if(f)for(var y=0;y<f.length;y++)m=f[y](m);var x=c(function(R){m.initializeInstanceElements(R,w.elements)},u),w=m.decorateClass(he(x.d.map(z)),g);return m.initializeClassElements(x.F,w.elements),m.runClassFinishers(x.F,w.finishers)}function H(){H=function(){return g};var g={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(c,u){["method","field"].forEach(function(f){u.forEach(function(m){m.kind===f&&m.placement==="own"&&this.defineClassElement(c,m)},this)},this)},initializeClassElements:function(c,u){var f=c.prototype;["method","field"].forEach(function(m){u.forEach(function(y){var x=y.placement;if(y.kind===m&&(x==="static"||x==="prototype")){var w=x==="static"?c:f;this.defineClassElement(w,y)}},this)},this)},defineClassElement:function(c,u){var f=u.descriptor;if(u.kind==="field"){var m=u.initializer;f={enumerable:f.enumerable,writable:f.writable,configurable:f.configurable,value:m===void 0?void 0:m.call(c)}}Object.defineProperty(c,u.key,f)},decorateClass:function(c,u){var f=[],m=[],y={static:[],prototype:[],own:[]};if(c.forEach(function(w){this.addElementPlacement(w,y)},this),c.forEach(function(w){if(!Te(w))return f.push(w);var C=this.decorateElement(w,y);f.push(C.element),f.push.apply(f,C.extras),m.push.apply(m,C.finishers)},this),!u)return{elements:f,finishers:m};var x=this.decorateConstructor(f,u);return m.push.apply(m,x.finishers),x.finishers=m,x},addElementPlacement:function(c,u,f){var m=u[c.placement];if(!f&&m.indexOf(c.key)!==-1)throw new TypeError("Duplicated element ("+c.key+")");m.push(c.key)},decorateElement:function(c,u){for(var f=[],m=[],y=c.decorators,x=y.length-1;x>=0;x--){var w=u[c.placement];w.splice(w.indexOf(c.key),1);var C=this.fromElementDescriptor(c),R=this.toElementFinisherExtras((0,y[x])(C)||C);c=R.element,this.addElementPlacement(c,u),R.finisher&&m.push(R.finisher);var M=R.extras;if(M){for(var B=0;B<M.length;B++)this.addElementPlacement(M[B],u);f.push.apply(f,M)}}return{element:c,finishers:m,extras:f}},decorateConstructor:function(c,u){for(var f=[],m=u.length-1;m>=0;m--){var y=this.fromClassDescriptor(c),x=this.toClassDescriptor((0,u[m])(y)||y);if(x.finisher!==void 0&&f.push(x.finisher),x.elements!==void 0){c=x.elements;for(var w=0;w<c.length-1;w++)for(var C=w+1;C<c.length;C++)if(c[w].key===c[C].key&&c[w].placement===c[C].placement)throw new TypeError("Duplicated element ("+c[w].key+")")}}return{elements:c,finishers:f}},fromElementDescriptor:function(c){var u={kind:c.kind,key:c.key,placement:c.placement,descriptor:c.descriptor},f={value:"Descriptor",configurable:!0};return Object.defineProperty(u,Symbol.toStringTag,f),c.kind==="field"&&(u.initializer=c.initializer),u},toElementDescriptors:function(c){if(c!==void 0)return df(c).map(function(u){var f=this.toElementDescriptor(u);return this.disallowProperty(u,"finisher","An element descriptor"),this.disallowProperty(u,"extras","An element descriptor"),f},this)},toElementDescriptor:function(c){var u=String(c.kind);if(u!=="method"&&u!=="field")throw new TypeError(`An element descriptor's .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "`+u+'"');var f=Tc(c.key),m=String(c.placement);if(m!=="static"&&m!=="prototype"&&m!=="own")throw new TypeError(`An element descriptor's .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "`+m+'"');var y=c.descriptor;this.disallowProperty(c,"elements","An element descriptor");var x={kind:u,key:f,placement:m,descriptor:Object.assign({},y)};return u!=="field"?this.disallowProperty(c,"initializer","A method descriptor"):(this.disallowProperty(y,"get","The property descriptor of a field descriptor"),this.disallowProperty(y,"set","The property descriptor of a field descriptor"),this.disallowProperty(y,"value","The property descriptor of a field descriptor"),x.initializer=c.initializer),x},toElementFinisherExtras:function(c){var u=this.toElementDescriptor(c),f=et(c,"finisher"),m=this.toElementDescriptors(c.extras);return{element:u,finisher:f,extras:m}},fromClassDescriptor:function(c){var u={kind:"class",elements:c.map(this.fromElementDescriptor,this)},f={value:"Descriptor",configurable:!0};return Object.defineProperty(u,Symbol.toStringTag,f),u},toClassDescriptor:function(c){var u=String(c.kind);if(u!=="class")throw new TypeError(`A class descriptor's .kind property must be "class", but a decorator created a class descriptor with .kind "`+u+'"');this.disallowProperty(c,"key","A class descriptor"),this.disallowProperty(c,"placement","A class descriptor"),this.disallowProperty(c,"descriptor","A class descriptor"),this.disallowProperty(c,"initializer","A class descriptor"),this.disallowProperty(c,"extras","A class descriptor");var f=et(c,"finisher"),m=this.toElementDescriptors(c.elements);return{elements:m,finisher:f}},runClassFinishers:function(c,u){for(var f=0;f<u.length;f++){var m=(0,u[f])(c);if(m!==void 0){if(typeof m!="function")throw new TypeError("Finishers must return a constructor.");c=m}}return c},disallowProperty:function(c,u,f){if(c[u]!==void 0)throw new TypeError(f+" can't have a ."+u+" property.")}};return g}function z(g){var c=Tc(g.key),u;g.kind==="method"?u={value:g.value,writable:!0,configurable:!0,enumerable:!1}:g.kind==="get"?u={get:g.value,configurable:!0,enumerable:!1}:g.kind==="set"?u={set:g.value,configurable:!0,enumerable:!1}:g.kind==="field"&&(u={configurable:!0,writable:!0,enumerable:!0});var f={kind:g.kind==="field"?"field":"method",key:c,placement:g.static?"static":g.kind==="field"?"own":"prototype",descriptor:u};return g.decorators&&(f.decorators=g.decorators),g.kind==="field"&&(f.initializer=g.value),f}function Z(g,c){g.descriptor.get!==void 0?c.descriptor.get=g.descriptor.get:c.descriptor.set=g.descriptor.set}function he(g){for(var c=[],u=function(x){return x.kind==="method"&&x.key===m.key&&x.placement===m.placement},f=0;f<g.length;f++){var m=g[f],y;if(m.kind==="method"&&(y=c.find(u)))if(Ce(m.descriptor)||Ce(y.descriptor)){if(Te(m)||Te(y))throw new ReferenceError("Duplicated methods ("+m.key+") can't be decorated.");y.descriptor=m.descriptor}else{if(Te(m)){if(Te(y))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+m.key+").");y.decorators=m.decorators}Z(m,y)}else c.push(m)}return c}function Te(g){return g.decorators&&g.decorators.length}function Ce(g){return g!==void 0&&!(g.value===void 0&&g.writable===void 0)}function et(g,c){var u=g[c];if(u!==void 0&&typeof u!="function")throw new TypeError("Expected '"+c+"' to be a function");return u}function sr(g,c,u){if(!c.has(g))throw new TypeError("attempted to get private field on non-instance");return u}function yt(){throw new TypeError("attempted to reassign private method")}function Gt(g,c){Gt=function(w,C){return new y(w,C)};var u=Bs(RegExp),f=RegExp.prototype,m=new WeakMap;function y(w,C){var R=u.call(this,w);return m.set(R,C),R}nf(y,u),y.prototype.exec=function(w){var C=f.exec.call(this,w);return C&&(C.groups=x(C,this)),C},y.prototype[Symbol.replace]=function(w,C){if(typeof C=="string"){var R=m.get(this);return f[Symbol.replace].call(this,w,C.replace(/\$<([^>]+)>/g,function(B,V){return"$"+R[V]}))}else if(typeof C=="function"){var M=this;return f[Symbol.replace].call(this,w,function(){var B=[];return B.push.apply(B,arguments),typeof B[B.length-1]!="object"&&B.push(x(B,M)),C.apply(this,B)})}else return f[Symbol.replace].call(this,w,C)};function x(w,C){var R=m.get(C);return Object.keys(R).reduce(function(M,B){return M[B]=w[R[B]],M},Object.create(null))}return Gt.apply(this,arguments)}var ir=function(c,u){return c.splice(u,1)},er=function(c,u){u?c():document.hidden?Promise.resolve(1).then(c):setTimeout(c,0)},ze=function(){var c=[],u=function(y,x){ir(c,c.findIndex(function(w){return w.event===y&&(w.cb===x||!x)}))},f=function(y,x,w){c.filter(function(C){return C.event===y}).map(function(C){return C.cb}).forEach(function(C){return er(function(){return C.apply(void 0,xo(x))},w)})};return{fireSync:function(y){for(var x=arguments.length,w=new Array(x>1?x-1:0),C=1;C<x;C++)w[C-1]=arguments[C];f(y,w,!0)},fire:function(y){for(var x=arguments.length,w=new Array(x>1?x-1:0),C=1;C<x;C++)w[C-1]=arguments[C];f(y,w,!1)},on:function(y,x){c.push({event:y,cb:x})},onOnce:function(y,x){c.push({event:y,cb:function(){u(y,x),x.apply(void 0,arguments)}})},off:u}},je=function(c,u,f){Object.getOwnPropertyNames(c).filter(function(m){return!f.includes(m)}).forEach(function(m){return Object.defineProperty(u,m,Object.getOwnPropertyDescriptor(c,m))})},Ee=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],$=function(c){var u={};return je(c,u,Ee),u},fe=function(c){c.forEach(function(u,f){u.released&&ir(c,f)})},ce={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},Fe={INPUT:1,LIMBO:2,LOCAL:3},Xt=function(c){return/[^0-9]+/.exec(c)},ct=function(){return Xt(1.1.toLocaleString())[0]},Mt=function(){var c=ct(),u=1e3.toLocaleString(),f="1000";return u!==f?Xt(u)[0]:c==="."?",":"."},q={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},dr=[],jt=function(c,u,f){return new Promise(function(m,y){var x=dr.filter(function(C){return C.key===c}).map(function(C){return C.cb});if(x.length===0){m(u);return}var w=x.shift();x.reduce(function(C,R){return C.then(function(M){return R(M,f)})},w(u,f)).then(function(C){return m(C)}).catch(function(C){return y(C)})})},Fr=function(c,u,f){return dr.filter(function(m){return m.key===c}).map(function(m){return m.cb(u,f)})},Un=function(c,u){return dr.push({key:c,cb:u})},sn=function(c){return Object.assign(ln,c)},Di=function(){return Object.assign({},ln)},Aa=function(c){n(c,function(u,f){ln[u]&&(ln[u][0]=Jd(f,ln[u][0],ln[u][1]))})},ln={id:[null,q.STRING],name:["filepond",q.STRING],disabled:[!1,q.BOOLEAN],className:[null,q.STRING],required:[!1,q.BOOLEAN],captureMethod:[null,q.STRING],allowSyncAcceptAttribute:[!0,q.BOOLEAN],allowDrop:[!0,q.BOOLEAN],allowBrowse:[!0,q.BOOLEAN],allowPaste:[!0,q.BOOLEAN],allowMultiple:[!1,q.BOOLEAN],allowReplace:[!0,q.BOOLEAN],allowRevert:[!0,q.BOOLEAN],allowRemove:[!0,q.BOOLEAN],allowProcess:[!0,q.BOOLEAN],allowReorder:[!1,q.BOOLEAN],allowDirectoriesOnly:[!1,q.BOOLEAN],storeAsFile:[!1,q.BOOLEAN],forceRevert:[!1,q.BOOLEAN],maxFiles:[null,q.INT],checkValidity:[!1,q.BOOLEAN],itemInsertLocationFreedom:[!0,q.BOOLEAN],itemInsertLocation:["before",q.STRING],itemInsertInterval:[75,q.INT],dropOnPage:[!1,q.BOOLEAN],dropOnElement:[!0,q.BOOLEAN],dropValidation:[!1,q.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],q.ARRAY],instantUpload:[!0,q.BOOLEAN],maxParallelUploads:[2,q.INT],allowMinimumUploadDuration:[!0,q.BOOLEAN],chunkUploads:[!1,q.BOOLEAN],chunkForce:[!1,q.BOOLEAN],chunkSize:[5e6,q.INT],chunkRetryDelays:[[500,1e3,3e3],q.ARRAY],server:[null,q.SERVER_API],fileSizeBase:[1e3,q.INT],labelFileSizeBytes:["bytes",q.STRING],labelFileSizeKilobytes:["KB",q.STRING],labelFileSizeMegabytes:["MB",q.STRING],labelFileSizeGigabytes:["GB",q.STRING],labelDecimalSeparator:[ct(),q.STRING],labelThousandsSeparator:[Mt(),q.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',q.STRING],labelInvalidField:["Field contains invalid files",q.STRING],labelFileWaitingForSize:["Waiting for size",q.STRING],labelFileSizeNotAvailable:["Size not available",q.STRING],labelFileCountSingular:["file in list",q.STRING],labelFileCountPlural:["files in list",q.STRING],labelFileLoading:["Loading",q.STRING],labelFileAdded:["Added",q.STRING],labelFileLoadError:["Error during load",q.STRING],labelFileRemoved:["Removed",q.STRING],labelFileRemoveError:["Error during remove",q.STRING],labelFileProcessing:["Uploading",q.STRING],labelFileProcessingComplete:["Upload complete",q.STRING],labelFileProcessingAborted:["Upload cancelled",q.STRING],labelFileProcessingError:["Error during upload",q.STRING],labelFileProcessingRevertError:["Error during revert",q.STRING],labelTapToCancel:["tap to cancel",q.STRING],labelTapToRetry:["tap to retry",q.STRING],labelTapToUndo:["tap to undo",q.STRING],labelButtonRemoveItem:["Remove",q.STRING],labelButtonAbortItemLoad:["Abort",q.STRING],labelButtonRetryItemLoad:["Retry",q.STRING],labelButtonAbortItemProcessing:["Cancel",q.STRING],labelButtonUndoItemProcessing:["Undo",q.STRING],labelButtonRetryItemProcessing:["Retry",q.STRING],labelButtonProcessItem:["Upload",q.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',q.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',q.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',q.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',q.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',q.STRING],oninit:[null,q.FUNCTION],onwarning:[null,q.FUNCTION],onerror:[null,q.FUNCTION],onactivatefile:[null,q.FUNCTION],oninitfile:[null,q.FUNCTION],onaddfilestart:[null,q.FUNCTION],onaddfileprogress:[null,q.FUNCTION],onaddfile:[null,q.FUNCTION],onprocessfilestart:[null,q.FUNCTION],onprocessfileprogress:[null,q.FUNCTION],onprocessfileabort:[null,q.FUNCTION],onprocessfilerevert:[null,q.FUNCTION],onprocessfile:[null,q.FUNCTION],onprocessfiles:[null,q.FUNCTION],onremovefile:[null,q.FUNCTION],onpreparefile:[null,q.FUNCTION],onupdatefiles:[null,q.FUNCTION],onreorderfiles:[null,q.FUNCTION],beforeDropFile:[null,q.FUNCTION],beforeAddFile:[null,q.FUNCTION],beforeRemoveFile:[null,q.FUNCTION],beforePrepareFile:[null,q.FUNCTION],stylePanelLayout:[null,q.STRING],stylePanelAspectRatio:[null,q.STRING],styleItemPanelAspectRatio:[null,q.STRING],styleButtonRemoveItemPosition:["left",q.STRING],styleButtonProcessItemPosition:["right",q.STRING],styleLoadIndicatorPosition:["right",q.STRING],styleProgressIndicatorPosition:["right",q.STRING],styleButtonRemoveItemAlign:[!1,q.BOOLEAN],files:[[],q.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],q.ARRAY]},Xi=function(c,u){return on(u)?c[0]||null:mo(u)?c[u]||null:(typeof u=="object"&&(u=u.id),c.find(function(f){return f.id===u})||null)},Eo=function(c){if(on(c))return c;if(/:/.test(c)){var u=c.split(":");return u[1]/u[0]}return parseFloat(c)},qr=function(c){return c.filter(function(u){return!u.archived})},yn={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4},Sa=null,wo=function(){if(Sa===null)try{var c=new DataTransfer;c.items.add(new File(["hello world"],"This_Works.txt"));var u=document.createElement("input");u.setAttribute("type","file"),u.files=c.files,Sa=u.files.length===1}catch{Sa=!1}return Sa},Ta=[ce.LOAD_ERROR,ce.PROCESSING_ERROR,ce.PROCESSING_REVERT_ERROR],Oc=[ce.LOADING,ce.PROCESSING,ce.PROCESSING_QUEUED,ce.INIT],Rc=[ce.PROCESSING_COMPLETE],Mc=function(c){return Ta.includes(c.status)},i0=function(c){return Oc.includes(c.status)},bf=function(c){return Rc.includes(c.status)},n0=function(c){return Rr(c.options.server)&&(Rr(c.options.server.process)||an(c.options.server.process))},Lx=function(c){return{GET_STATUS:function(){var f=qr(c.items),m=yn.EMPTY,y=yn.ERROR,x=yn.BUSY,w=yn.IDLE,C=yn.READY;return f.length===0?m:f.some(Mc)?y:f.some(i0)?x:f.some(bf)?C:w},GET_ITEM:function(f){return Xi(c.items,f)},GET_ACTIVE_ITEM:function(f){return Xi(qr(c.items),f)},GET_ACTIVE_ITEMS:function(){return qr(c.items)},GET_ITEMS:function(){return c.items},GET_ITEM_NAME:function(f){var m=Xi(c.items,f);return m?m.filename:null},GET_ITEM_SIZE:function(f){var m=Xi(c.items,f);return m?m.fileSize:null},GET_STYLES:function(){return Object.keys(c.options).filter(function(f){return/^style/.test(f)}).map(function(f){return{name:f,value:c.options[f]}})},GET_PANEL_ASPECT_RATIO:function(){var f=/circle/.test(c.options.stylePanelLayout),m=f?1:Eo(c.options.stylePanelAspectRatio);return m},GET_ITEM_PANEL_ASPECT_RATIO:function(){return c.options.styleItemPanelAspectRatio},GET_ITEMS_BY_STATUS:function(f){return qr(c.items).filter(function(m){return m.status===f})},GET_TOTAL_ITEMS:function(){return qr(c.items).length},SHOULD_UPDATE_FILE_INPUT:function(){return c.options.storeAsFile&&wo()&&!n0(c)},IS_ASYNC:function(){return n0(c)},GET_FILE_SIZE_LABELS:function(f){return{labelBytes:f("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:f("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:f("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:f("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0}}}},Bx=function(c){var u=qr(c.items).length;if(!c.options.allowMultiple)return u===0;var f=c.options.maxFiles;return f===null||u<f},o0=function(c,u,f){return Math.max(Math.min(f,c),u)},Vx=function(c,u,f){return c.splice(u,0,f)},Ux=function(c,u,f){return on(u)?null:typeof f>"u"?(c.push(u),u):(f=o0(f,0,c.length),Vx(c,f,u),u)},xf=function(c){return/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(c)},js=function(c){return(""+c).split("/").pop().split("?").shift()},Pc=function(c){return c.split(".").pop()},Gx=function(c){if(typeof c!="string")return"";var u=c.split("/").pop();return/svg/.test(u)?"svg":/zip|compressed/.test(u)?"zip":/plain/.test(u)?"txt":/msword/.test(u)?"doc":/[a-z]+/.test(u)?u==="jpeg"?"jpg":u:""},zs=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(u+c).slice(-u.length)},a0=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date;return c.getFullYear()+"-"+zs(c.getMonth()+1,"00")+"-"+zs(c.getDate(),"00")+"_"+zs(c.getHours(),"00")+"-"+zs(c.getMinutes(),"00")+"-"+zs(c.getSeconds(),"00")},Da=function(c,u){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,y=typeof f=="string"?c.slice(0,c.size,f):c.slice(0,c.size,c.type);return y.lastModifiedDate=new Date,c._relativePath&&(y._relativePath=c._relativePath),jr(u)||(u=a0()),u&&m===null&&Pc(u)?y.name=u:(m=m||Gx(y.type),y.name=u+(m?"."+m:"")),y},jx=function(){return window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder},s0=function(c,u){var f=jx();if(f){var m=new f;return m.append(c),m.getBlob(u)}return new Blob([c],{type:u})},zx=function(c,u){for(var f=new ArrayBuffer(c.length),m=new Uint8Array(f),y=0;y<c.length;y++)m[y]=c.charCodeAt(y);return s0(f,u)},l0=function(c){return(/^data:(.+);/.exec(c)||[])[1]||null},Hx=function(c){var u=c.split(",")[1];return u.replace(/\s/g,"")},Wx=function(c){return atob(Hx(c))},Xx=function(c){var u=l0(c),f=Wx(c);return zx(f,u)},Yx=function(c,u,f){return Da(Xx(c),u,null,f)},qx=function(c){if(!/^content-disposition:/i.test(c))return null;var u=c.split(/filename=|filename\*=.+''/).splice(1).map(function(f){return f.trim().replace(/^["']|[;"']{0,2}$/g,"")}).filter(function(f){return f.length});return u.length?decodeURI(u[u.length-1]):null},$x=function(c){if(/content-length:/i.test(c)){var u=c.match(/[0-9]+/)[0];return u?parseInt(u,10):null}return null},Zx=function(c){if(/x-content-transfer-id:/i.test(c)){var u=(c.split(":")[1]||"").trim();return u||null}return null},Ef=function(c){var u={source:null,name:null,size:null},f=c.split(`
`),m=!0,y=!1,x=void 0;try{for(var w=f[Symbol.iterator](),C;!(m=(C=w.next()).done);m=!0){var R=C.value,M=qx(R);if(M){u.name=M;continue}var B=$x(R);if(B){u.size=B;continue}var V=Zx(R);if(V){u.source=V;continue}}}catch(K){y=!0,x=K}finally{try{!m&&w.return!=null&&w.return()}finally{if(y)throw x}}return u},Kx=function(c){var u={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},f=function(){return u.progress},m=function(){u.request&&u.request.abort&&u.request.abort()},y=function(){var R=u.source;w.fire("init",R),R instanceof File?w.fire("load",R):R instanceof Blob?w.fire("load",Da(R,R.name)):xf(R)?w.fire("load",Yx(R)):x(R)},x=function(R){if(!c){w.fire("error",{type:"error",body:"Can't load URL",code:400});return}u.timestamp=Date.now(),u.request=c(R,function(M){u.duration=Date.now()-u.timestamp,u.complete=!0,M instanceof Blob&&(M=Da(M,M.name||js(R))),w.fire("load",M instanceof Blob?M:M?M.body:null)},function(M){w.fire("error",typeof M=="string"?{type:"error",code:0,body:M}:M)},function(M,B,V){if(V&&(u.size=V),u.duration=Date.now()-u.timestamp,!M){u.progress=null;return}u.progress=B/V,w.fire("progress",u.progress)},function(){w.fire("abort")},function(M){var B=Ef(typeof M=="string"?M:M.headers);w.fire("meta",{size:u.size||B.size,filename:B.name,source:B.source})})},w=Object.assign({},ze(),{setSource:function(R){return u.source=R},getProgress:f,abort:m,load:y});return w},c0=function(c){return/GET|HEAD/.test(c)},Io=function(c,u,f){var m={onheaders:function(){},onprogress:function(){},onload:function(){},ontimeout:function(){},onerror:function(){},onabort:function(){},abort:function(){y=!0,w.abort()}},y=!1,x=!1;f=Object.assign({method:"POST",headers:{},withCredentials:!1},f),u=encodeURI(u),c0(f.method)&&c&&(u=""+u+encodeURIComponent(typeof c=="string"?c:JSON.stringify(c)));var w=new XMLHttpRequest,C=c0(f.method)?w:w.upload;return C.onprogress=function(R){y||m.onprogress(R.lengthComputable,R.loaded,R.total)},w.onreadystatechange=function(){w.readyState<2||w.readyState===4&&w.status===0||x||(x=!0,m.onheaders(w))},w.onload=function(){w.status>=200&&w.status<300?m.onload(w):m.onerror(w)},w.onerror=function(){return m.onerror(w)},w.onabort=function(){y=!0,m.onabort()},w.ontimeout=function(){return m.ontimeout(w)},w.open(f.method,u,!0),mo(f.timeout)&&(w.timeout=f.timeout),Object.keys(f.headers).forEach(function(R){var M=unescape(encodeURIComponent(f.headers[R]));w.setRequestHeader(R,M)}),f.responseType&&(w.responseType=f.responseType),f.withCredentials&&(w.withCredentials=!0),w.send(c),m},xr=function(c,u,f,m){return{type:c,code:u,body:f,headers:m}},Co=function(c){return function(u){c(xr("error",0,"Timeout",u.getAllResponseHeaders()))}},u0=function(c){return/\?/.test(c)},Hs=function(){for(var c="",u=arguments.length,f=new Array(u),m=0;m<u;m++)f[m]=arguments[m];return f.forEach(function(y){c+=u0(c)&&u0(y)?y.replace(/\?/,"&"):y}),c},wf=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",u=arguments.length>1?arguments[1]:void 0;if(typeof u=="function")return u;if(!u||!jr(u.url))return null;var f=u.onload||function(y){return y},m=u.onerror||function(y){return null};return function(y,x,w,C,R,M){var B=Io(y,Hs(c,u.url),Object.assign({},u,{responseType:"blob"}));return B.onload=function(V){var K=V.getAllResponseHeaders(),ee=Ef(K).name||js(y);x(xr("load",V.status,u.method==="HEAD"?null:Da(f(V.response),ee),K))},B.onerror=function(V){w(xr("error",V.status,m(V.response)||V.statusText,V.getAllResponseHeaders()))},B.onheaders=function(V){M(xr("headers",V.status,null,V.getAllResponseHeaders()))},B.ontimeout=Co(w),B.onprogress=C,B.onabort=R,B}},Oi={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},Qx=function(c,u,f,m,y,x,w,C,R,M,B){for(var V=[],K=B.chunkTransferId,ee=B.chunkServer,te=B.chunkSize,X=B.chunkRetryDelays,oe={serverId:K,aborted:!1},be=u.ondata||function(re){return re},Ae=u.onload||function(re,W){return W==="HEAD"?re.getResponseHeader("Upload-Offset"):re.response},de=u.onerror||function(re){return null},Qe=function(W){var Ie=new FormData;Rr(y)&&Ie.append(f,JSON.stringify(y));var $e=typeof u.headers=="function"?u.headers(m,y):Object.assign({},u.headers,{"Upload-Length":m.size}),it=Object.assign({},u,{headers:$e}),ft=Io(be(Ie),Hs(c,u.url),it);ft.onload=function(bt){return W(Ae(bt,it.method))},ft.onerror=function(bt){return w(xr("error",bt.status,de(bt.response)||bt.statusText,bt.getAllResponseHeaders()))},ft.ontimeout=Co(w)},me=function(W){var Ie=Hs(c,ee.url,oe.serverId),$e=typeof u.headers=="function"?u.headers(oe.serverId):Object.assign({},u.headers),it={headers:$e,method:"HEAD"},ft=Io(null,Ie,it);ft.onload=function(bt){return W(Ae(bt,it.method))},ft.onerror=function(bt){return w(xr("error",bt.status,de(bt.response)||bt.statusText,bt.getAllResponseHeaders()))},ft.ontimeout=Co(w)},Pt=Math.floor(m.size/te),Nt=0;Nt<=Pt;Nt++){var ve=Nt*te,De=m.slice(ve,ve+te,"application/offset+octet-stream");V[Nt]={index:Nt,size:De.size,offset:ve,data:De,file:m,progress:0,retries:xo(X),status:Oi.QUEUED,error:null,request:null,timeout:null}}var Me=function(){return x(oe.serverId)},ge=function(W){return W.status===Oi.QUEUED||W.status===Oi.ERROR},xe=function(W){if(!oe.aborted){if(W=W||V.find(ge),!W){V.every(function(fr){return fr.status===Oi.COMPLETE})&&Me();return}W.status=Oi.PROCESSING,W.progress=null;var Ie=ee.ondata||function(fr){return fr},$e=ee.onerror||function(fr){return null},it=ee.onload||function(){},ft=Hs(c,ee.url,oe.serverId),bt=typeof ee.headers=="function"?ee.headers(W):Object.assign({},ee.headers,{"Content-Type":"application/offset+octet-stream","Upload-Offset":W.offset,"Upload-Length":m.size,"Upload-Name":m.name}),nr=W.request=Io(Ie(W.data),ft,Object.assign({},ee,{headers:bt}));nr.onload=function(fr){it(fr,W.index,V.length),W.status=Oi.COMPLETE,W.request=null,St()},nr.onprogress=function(fr,Ma,cv){W.progress=fr?Ma:null,Bt()},nr.onerror=function(fr){W.status=Oi.ERROR,W.request=null,W.error=$e(fr.response)||fr.statusText,ke(W)||w(xr("error",fr.status,$e(fr.response)||fr.statusText,fr.getAllResponseHeaders()))},nr.ontimeout=function(fr){W.status=Oi.ERROR,W.request=null,ke(W)||Co(w)(fr)},nr.onabort=function(){W.status=Oi.QUEUED,W.request=null,R()}}},ke=function(W){return W.retries.length===0?!1:(W.status=Oi.WAITING,clearTimeout(W.timeout),W.timeout=setTimeout(function(){xe(W)},W.retries.shift()),!0)},Bt=function(){var W=V.reduce(function($e,it){return $e===null||it.progress===null?null:$e+it.progress},0);if(W===null)return C(!1,0,0);var Ie=V.reduce(function($e,it){return $e+it.size},0);C(!0,W,Ie)},St=function(){var W=V.filter(function(Ie){return Ie.status===Oi.PROCESSING}).length;W>=1||xe()},Be=function(){V.forEach(function(W){clearTimeout(W.timeout),W.request&&W.request.abort()})};return oe.serverId?me(function(re){oe.aborted||(V.filter(function(W){return W.offset<re}).forEach(function(W){W.status=Oi.COMPLETE,W.progress=W.size}),St())}):Qe(function(re){oe.aborted||(M(re),oe.serverId=re,St())}),{abort:function(){oe.aborted=!0,Be()}}},Jx=function(c,u,f,m){return function(y,x,w,C,R,M,B){if(y){var V=m.chunkUploads,K=V&&y.size>m.chunkSize,ee=V&&(K||m.chunkForce);if(y instanceof Blob&&ee)return Qx(c,u,f,y,x,w,C,R,M,B,m);var te=u.ondata||function(me){return me},X=u.onload||function(me){return me},oe=u.onerror||function(me){return null},be=typeof u.headers=="function"?u.headers(y,x)||{}:Object.assign({},u.headers),Ae=Object.assign({},u,{headers:be}),de=new FormData;Rr(x)&&de.append(f,JSON.stringify(x)),(y instanceof Blob?[{name:null,file:y}]:y).forEach(function(me){de.append(f,me.file,me.name===null?me.file.name:""+me.name+me.file.name)});var Qe=Io(te(de),Hs(c,u.url),Ae);return Qe.onload=function(me){w(xr("load",me.status,X(me.response),me.getAllResponseHeaders()))},Qe.onerror=function(me){C(xr("error",me.status,oe(me.response)||me.statusText,me.getAllResponseHeaders()))},Qe.ontimeout=Co(C),Qe.onprogress=R,Qe.onabort=M,Qe}}},eE=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",u=arguments.length>1?arguments[1]:void 0,f=arguments.length>2?arguments[2]:void 0,m=arguments.length>3?arguments[3]:void 0;return typeof u=="function"?function(){for(var y=arguments.length,x=new Array(y),w=0;w<y;w++)x[w]=arguments[w];return u.apply(void 0,[f].concat(x,[m]))}:!u||!jr(u.url)?null:Jx(c,u,f,m)},Ws=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",u=arguments.length>1?arguments[1]:void 0;if(typeof u=="function")return u;if(!u||!jr(u.url))return function(y,x){return x()};var f=u.onload||function(y){return y},m=u.onerror||function(y){return null};return function(y,x,w){var C=Io(y,c+u.url,u);return C.onload=function(R){x(xr("load",R.status,f(R.response),R.getAllResponseHeaders()))},C.onerror=function(R){w(xr("error",R.status,m(R.response)||R.statusText,R.getAllResponseHeaders()))},C.ontimeout=Co(w),C}},d0=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return c+Math.random()*(u-c)},tE=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:25,y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:250,x=null,w=Date.now(),C=function R(){var M=Date.now()-w,B=d0(m,y);M+B>u&&(B=M+B-u);var V=M/u;if(V>=1||document.hidden){c(1);return}c(V),x=setTimeout(R,B)};return u>0&&C(),{clear:function(){clearTimeout(x)}}},rE=function(c,u){var f={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},m=u.allowMinimumUploadDuration,y=function(V,K){var ee=function(){f.duration===0||f.progress===null||M.fire("progress",M.getProgress())},te=function(){f.complete=!0,M.fire("load-perceived",f.response.body)};M.fire("start"),f.timestamp=Date.now(),f.perceivedPerformanceUpdater=tE(function(X){f.perceivedProgress=X,f.perceivedDuration=Date.now()-f.timestamp,ee(),f.response&&f.perceivedProgress===1&&!f.complete&&te()},m?d0(750,1500):0),f.request=c(V,K,function(X){f.response=Rr(X)?X:{type:"load",code:200,body:""+X,headers:{}},f.duration=Date.now()-f.timestamp,f.progress=1,M.fire("load",f.response.body),(!m||m&&f.perceivedProgress===1)&&te()},function(X){f.perceivedPerformanceUpdater.clear(),M.fire("error",Rr(X)?X:{type:"error",code:0,body:""+X})},function(X,oe,be){f.duration=Date.now()-f.timestamp,f.progress=X?oe/be:null,ee()},function(){f.perceivedPerformanceUpdater.clear(),M.fire("abort",f.response?f.response.body:null)},function(X){M.fire("transfer",X)})},x=function(){f.request&&(f.perceivedPerformanceUpdater.clear(),f.request.abort&&f.request.abort(),f.complete=!0)},w=function(){x(),f.complete=!1,f.perceivedProgress=0,f.progress=0,f.timestamp=null,f.perceivedDuration=0,f.duration=0,f.request=null,f.response=null},C=m?function(){return f.progress?Math.min(f.progress,f.perceivedProgress):null}:function(){return f.progress||null},R=m?function(){return Math.min(f.duration,f.perceivedDuration)}:function(){return f.duration},M=Object.assign({},ze(),{process:y,abort:x,getProgress:C,getDuration:R,reset:w});return M},f0=function(c){return c.substring(0,c.lastIndexOf("."))||c},iE=function(c){var u=[c.name,c.size,c.type];return c instanceof Blob||xf(c)?u[0]=c.name||a0():xf(c)?(u[1]=c.length,u[2]=l0(c)):jr(c)&&(u[0]=js(c),u[1]=0,u[2]="application/octet-stream"),{name:u[0],size:u[1],type:u[2]}},Ao=function(c){return!!(c instanceof File||c instanceof Blob&&c.name)},nE=function g(c){if(!Rr(c))return c;var u=po(c)?[]:{};for(var f in c)if(c.hasOwnProperty(f)){var m=c[f];u[f]=m&&Rr(m)?g(m):m}return u},oE=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,m=xc(),y={archived:!1,frozen:!1,released:!1,source:null,file:f,serverFileReference:u,transferId:null,processingAborted:!1,status:u?ce.PROCESSING_COMPLETE:ce.INIT,activeLoader:null,activeProcessor:null},x=null,w={},C=function(De){return y.status=De},R=function(De){if(!(y.released||y.frozen)){for(var Me=arguments.length,ge=new Array(Me>1?Me-1:0),xe=1;xe<Me;xe++)ge[xe-1]=arguments[xe];Pt.fire.apply(Pt,[De].concat(ge))}},M=function(){return Pc(y.file.name)},B=function(){return y.file.type},V=function(){return y.file.size},K=function(){return y.file},ee=function(De,Me,ge){if(y.source=De,Pt.fireSync("init"),y.file){Pt.fireSync("load-skip");return}y.file=iE(De),Me.on("init",function(){R("load-init")}),Me.on("meta",function(xe){y.file.size=xe.size,y.file.filename=xe.filename,xe.source&&(c=Fe.LIMBO,y.serverFileReference=xe.source,y.status=ce.PROCESSING_COMPLETE),R("load-meta")}),Me.on("progress",function(xe){C(ce.LOADING),R("load-progress",xe)}),Me.on("error",function(xe){C(ce.LOAD_ERROR),R("load-request-error",xe)}),Me.on("abort",function(){C(ce.INIT),R("load-abort")}),Me.on("load",function(xe){y.activeLoader=null;var ke=function(Be){y.file=Ao(Be)?Be:y.file,c===Fe.LIMBO&&y.serverFileReference?C(ce.PROCESSING_COMPLETE):C(ce.IDLE),R("load")},Bt=function(Be){y.file=xe,R("load-meta"),C(ce.LOAD_ERROR),R("load-file-error",Be)};if(y.serverFileReference){ke(xe);return}ge(xe,ke,Bt)}),Me.setSource(De),y.activeLoader=Me,Me.load()},te=function(){y.activeLoader&&y.activeLoader.load()},X=function(){if(y.activeLoader){y.activeLoader.abort();return}C(ce.INIT),R("load-abort")},oe=function ve(De,Me){if(y.processingAborted){y.processingAborted=!1;return}if(C(ce.PROCESSING),x=null,!(y.file instanceof Blob)){Pt.on("load",function(){ve(De,Me)});return}De.on("load",function(ke){y.transferId=null,y.serverFileReference=ke}),De.on("transfer",function(ke){y.transferId=ke}),De.on("load-perceived",function(ke){y.activeProcessor=null,y.transferId=null,y.serverFileReference=ke,C(ce.PROCESSING_COMPLETE),R("process-complete",ke)}),De.on("start",function(){R("process-start")}),De.on("error",function(ke){y.activeProcessor=null,C(ce.PROCESSING_ERROR),R("process-error",ke)}),De.on("abort",function(ke){y.activeProcessor=null,y.serverFileReference=ke,C(ce.IDLE),R("process-abort"),x&&x()}),De.on("progress",function(ke){R("process-progress",ke)});var ge=function(Bt){y.archived||De.process(Bt,Object.assign({},w))},xe=console.error;Me(y.file,ge,xe),y.activeProcessor=De},be=function(){y.processingAborted=!1,C(ce.PROCESSING_QUEUED)},Ae=function(){return new Promise(function(De){if(!y.activeProcessor){y.processingAborted=!0,C(ce.IDLE),R("process-abort"),De();return}x=function(){De()},y.activeProcessor.abort()})},de=function(De,Me){return new Promise(function(ge,xe){var ke=y.serverFileReference!==null?y.serverFileReference:y.transferId;if(ke===null){ge();return}De(ke,function(){y.serverFileReference=null,y.transferId=null,ge()},function(Bt){if(!Me){ge();return}C(ce.PROCESSING_REVERT_ERROR),R("process-revert-error"),xe(Bt)}),C(ce.IDLE),R("process-revert")})},Qe=function(De,Me,ge){var xe=De.split("."),ke=xe[0],Bt=xe.pop(),St=w;xe.forEach(function(Be){return St=St[Be]}),JSON.stringify(St[Bt])!==JSON.stringify(Me)&&(St[Bt]=Me,R("metadata-update",{key:ke,value:w[ke],silent:ge}))},me=function(De){return nE(De?w[De]:w)},Pt=Object.assign({id:{get:function(){return m}},origin:{get:function(){return c},set:function(De){return c=De}},serverId:{get:function(){return y.serverFileReference}},transferId:{get:function(){return y.transferId}},status:{get:function(){return y.status}},filename:{get:function(){return y.file.name}},filenameWithoutExtension:{get:function(){return f0(y.file.name)}},fileExtension:{get:M},fileType:{get:B},fileSize:{get:V},file:{get:K},relativePath:{get:function(){return y.file._relativePath}},source:{get:function(){return y.source}},getMetadata:me,setMetadata:function(De,Me,ge){if(Rr(De)){var xe=De;return Object.keys(xe).forEach(function(ke){Qe(ke,xe[ke],Me)}),De}return Qe(De,Me,ge),Me},extend:function(De,Me){return Nt[De]=Me},abortLoad:X,retryLoad:te,requestProcessing:be,abortProcessing:Ae,load:ee,process:oe,revert:de},ze(),{freeze:function(){return y.frozen=!0},release:function(){return y.released=!0},released:{get:function(){return y.released}},archive:function(){return y.archived=!0},archived:{get:function(){return y.archived}},setFile:function(De){return y.file=De}}),Nt=o(Pt);return Nt},aE=function(c,u){return on(u)?0:jr(u)?c.findIndex(function(f){return f.id===u}):-1},h0=function(c,u){var f=aE(c,u);if(!(f<0))return c[f]||null},p0=function(c,u,f,m,y,x){var w=Io(null,c,{method:"GET",responseType:"blob"});return w.onload=function(C){var R=C.getAllResponseHeaders(),M=Ef(R).name||js(c);u(xr("load",C.status,Da(C.response,M),R))},w.onerror=function(C){f(xr("error",C.status,C.statusText,C.getAllResponseHeaders()))},w.onheaders=function(C){x(xr("headers",C.status,null,C.getAllResponseHeaders()))},w.ontimeout=Co(f),w.onprogress=m,w.onabort=y,w},m0=function(c){return c.indexOf("//")===0&&(c=location.protocol+c),c.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]},sE=function(c){return(c.indexOf(":")>-1||c.indexOf("//")>-1)&&m0(location.href)!==m0(c)},Nc=function(c){return function(){return an(c)?c.apply(void 0,arguments):c}},lE=function(c){return!Ao(c.file)},If=function(c,u){clearTimeout(u.listUpdateTimeout),u.listUpdateTimeout=setTimeout(function(){c("DID_UPDATE_ITEMS",{items:qr(u.items)})},0)},g0=function(c){for(var u=arguments.length,f=new Array(u>1?u-1:0),m=1;m<u;m++)f[m-1]=arguments[m];return new Promise(function(y){if(!c)return y(!0);var x=c.apply(void 0,f);if(x==null)return y(!0);if(typeof x=="boolean")return y(x);typeof x.then=="function"&&x.then(y)})},Cf=function(c,u){c.items.sort(function(f,m){return u($(f),$(m))})},Ri=function(c,u){return function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=f.query,y=f.success,x=y===void 0?function(){}:y,w=f.failure,C=w===void 0?function(){}:w,R=sf(f,["query","success","failure"]),M=Xi(c.items,m);if(!M){C({error:xr("error",0,"Item not found"),file:null});return}u(M,x,C,R||{})}},cE=function(c,u,f){return{ABORT_ALL:function(){qr(f.items).forEach(function(y){y.freeze(),y.abortLoad(),y.abortProcessing()})},DID_SET_FILES:function(y){var x=y.value,w=x===void 0?[]:x,C=w.map(function(M){return{source:M.source?M.source:M,options:M.options}}),R=qr(f.items);R.forEach(function(M){C.find(function(B){return B.source===M.source||B.source===M.file})||c("REMOVE_ITEM",{query:M,remove:!1})}),R=qr(f.items),C.forEach(function(M,B){R.find(function(V){return V.source===M.source||V.file===M.source})||c("ADD_ITEM",Object.assign({},M,{interactionMethod:yi.NONE,index:B}))})},DID_UPDATE_ITEM_METADATA:function(y){var x=y.id,w=y.action,C=y.change;C.silent||(clearTimeout(f.itemUpdateTimeout),f.itemUpdateTimeout=setTimeout(function(){var R=h0(f.items,x);if(!u("IS_ASYNC")){jt("SHOULD_PREPARE_OUTPUT",!1,{item:R,query:u,action:w,change:C}).then(function(K){var ee=u("GET_BEFORE_PREPARE_FILE");ee&&(K=ee(R,K)),K&&c("REQUEST_PREPARE_OUTPUT",{query:x,item:R,success:function(X){c("DID_PREPARE_OUTPUT",{id:x,file:X})}},!0)});return}R.origin===Fe.LOCAL&&c("DID_LOAD_ITEM",{id:R.id,error:null,serverFileReference:R.source});var M=function(){setTimeout(function(){c("REQUEST_ITEM_PROCESSING",{query:x})},32)},B=function(ee){R.revert(Ws(f.options.server.url,f.options.server.revert),u("GET_FORCE_REVERT")).then(ee?M:function(){}).catch(function(){})},V=function(ee){R.abortProcessing().then(ee?M:function(){})};if(R.status===ce.PROCESSING_COMPLETE)return B(f.options.instantUpload);if(R.status===ce.PROCESSING)return V(f.options.instantUpload);f.options.instantUpload&&M()},0))},MOVE_ITEM:function(y){var x=y.query,w=y.index,C=Xi(f.items,x);if(C){var R=f.items.indexOf(C);w=o0(w,0,f.items.length-1),R!==w&&f.items.splice(w,0,f.items.splice(R,1)[0])}},SORT:function(y){var x=y.compare;Cf(f,x),c("DID_SORT_ITEMS",{items:u("GET_ACTIVE_ITEMS")})},ADD_ITEMS:function(y){var x=y.items,w=y.index,C=y.interactionMethod,R=y.success,M=R===void 0?function(){}:R,B=y.failure,V=B===void 0?function(){}:B,K=w;if(w===-1||typeof w>"u"){var ee=u("GET_ITEM_INSERT_LOCATION"),te=u("GET_TOTAL_ITEMS");K=ee==="before"?0:te}var X=u("GET_IGNORED_FILES"),oe=function(Qe){return Ao(Qe)?!X.includes(Qe.name.toLowerCase()):!on(Qe)},be=x.filter(oe),Ae=be.map(function(de){return new Promise(function(Qe,me){c("ADD_ITEM",{interactionMethod:C,source:de.source||de,success:Qe,failure:me,index:K++,options:de.options||{}})})});Promise.all(Ae).then(M).catch(V)},ADD_ITEM:function(y){var x=y.source,w=y.index,C=w===void 0?-1:w,R=y.interactionMethod,M=y.success,B=M===void 0?function(){}:M,V=y.failure,K=V===void 0?function(){}:V,ee=y.options,te=ee===void 0?{}:ee;if(on(x)){K({error:xr("error",0,"No source"),file:null});return}if(!(Ao(x)&&f.options.ignoredFiles.includes(x.name.toLowerCase()))){if(!Bx(f)){if(f.options.allowMultiple||!f.options.allowMultiple&&!f.options.allowReplace){var X=xr("warning",0,"Max files");c("DID_THROW_MAX_FILES",{source:x,error:X}),K({error:X,file:null});return}var oe=qr(f.items)[0];if(oe.status===ce.PROCESSING_COMPLETE||oe.status===ce.PROCESSING_REVERT_ERROR){var be=u("GET_FORCE_REVERT");if(oe.revert(Ws(f.options.server.url,f.options.server.revert),be).then(function(){be&&c("ADD_ITEM",{source:x,index:C,interactionMethod:R,success:B,failure:K,options:te})}).catch(function(){}),be)return}c("REMOVE_ITEM",{query:oe.id})}var Ae=te.type==="local"?Fe.LOCAL:te.type==="limbo"?Fe.LIMBO:Fe.INPUT,de=oE(Ae,Ae===Fe.INPUT?null:x,te.file);Object.keys(te.metadata||{}).forEach(function(ge){de.setMetadata(ge,te.metadata[ge])}),Fr("DID_CREATE_ITEM",de,{query:u,dispatch:c});var Qe=u("GET_ITEM_INSERT_LOCATION");f.options.itemInsertLocationFreedom||(C=Qe==="before"?-1:f.items.length),Ux(f.items,de,C),an(Qe)&&x&&Cf(f,Qe);var me=de.id;de.on("init",function(){c("DID_INIT_ITEM",{id:me})}),de.on("load-init",function(){c("DID_START_ITEM_LOAD",{id:me})}),de.on("load-meta",function(){c("DID_UPDATE_ITEM_META",{id:me})}),de.on("load-progress",function(ge){c("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:me,progress:ge})}),de.on("load-request-error",function(ge){var xe=Nc(f.options.labelFileLoadError)(ge);if(ge.code>=400&&ge.code<500){c("DID_THROW_ITEM_INVALID",{id:me,error:ge,status:{main:xe,sub:ge.code+" ("+ge.body+")"}}),K({error:ge,file:$(de)});return}c("DID_THROW_ITEM_LOAD_ERROR",{id:me,error:ge,status:{main:xe,sub:f.options.labelTapToRetry}})}),de.on("load-file-error",function(ge){c("DID_THROW_ITEM_INVALID",{id:me,error:ge.status,status:ge.status}),K({error:ge.status,file:$(de)})}),de.on("load-abort",function(){c("REMOVE_ITEM",{query:me})}),de.on("load-skip",function(){de.on("metadata-update",function(ge){Ao(de.file)&&c("DID_UPDATE_ITEM_METADATA",{id:me,change:ge})}),c("COMPLETE_LOAD_ITEM",{query:me,item:de,data:{source:x,success:B}})}),de.on("load",function(){var ge=function(ke){if(!ke){c("REMOVE_ITEM",{query:me});return}de.on("metadata-update",function(Bt){c("DID_UPDATE_ITEM_METADATA",{id:me,change:Bt})}),jt("SHOULD_PREPARE_OUTPUT",!1,{item:de,query:u}).then(function(Bt){var St=u("GET_BEFORE_PREPARE_FILE");St&&(Bt=St(de,Bt));var Be=function(){c("COMPLETE_LOAD_ITEM",{query:me,item:de,data:{source:x,success:B}}),If(c,f)};if(Bt){c("REQUEST_PREPARE_OUTPUT",{query:me,item:de,success:function(W){c("DID_PREPARE_OUTPUT",{id:me,file:W}),Be()}},!0);return}Be()})};jt("DID_LOAD_ITEM",de,{query:u,dispatch:c}).then(function(){g0(u("GET_BEFORE_ADD_FILE"),$(de)).then(ge)}).catch(function(xe){if(!xe||!xe.error||!xe.status)return ge(!1);c("DID_THROW_ITEM_INVALID",{id:me,error:xe.error,status:xe.status})})}),de.on("process-start",function(){c("DID_START_ITEM_PROCESSING",{id:me})}),de.on("process-progress",function(ge){c("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:me,progress:ge})}),de.on("process-error",function(ge){c("DID_THROW_ITEM_PROCESSING_ERROR",{id:me,error:ge,status:{main:Nc(f.options.labelFileProcessingError)(ge),sub:f.options.labelTapToRetry}})}),de.on("process-revert-error",function(ge){c("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:me,error:ge,status:{main:Nc(f.options.labelFileProcessingRevertError)(ge),sub:f.options.labelTapToRetry}})}),de.on("process-complete",function(ge){c("DID_COMPLETE_ITEM_PROCESSING",{id:me,error:null,serverFileReference:ge}),c("DID_DEFINE_VALUE",{id:me,value:ge})}),de.on("process-abort",function(){c("DID_ABORT_ITEM_PROCESSING",{id:me})}),de.on("process-revert",function(){c("DID_REVERT_ITEM_PROCESSING",{id:me}),c("DID_DEFINE_VALUE",{id:me,value:null})}),c("DID_ADD_ITEM",{id:me,index:C,interactionMethod:R}),If(c,f);var Pt=f.options.server||{},Nt=Pt.url,ve=Pt.load,De=Pt.restore,Me=Pt.fetch;de.load(x,Kx(Ae===Fe.INPUT?jr(x)&&sE(x)&&Me?wf(Nt,Me):p0:Ae===Fe.LIMBO?wf(Nt,De):wf(Nt,ve)),function(ge,xe,ke){jt("LOAD_FILE",ge,{query:u}).then(xe).catch(ke)})}},REQUEST_PREPARE_OUTPUT:function(y){var x=y.item,w=y.success,C=y.failure,R=C===void 0?function(){}:C,M={error:xr("error",0,"Item not found"),file:null};if(x.archived)return R(M);jt("PREPARE_OUTPUT",x.file,{query:u,item:x}).then(function(B){jt("COMPLETE_PREPARE_OUTPUT",B,{query:u,item:x}).then(function(V){if(x.archived)return R(M);w(V)})})},COMPLETE_LOAD_ITEM:function(y){var x=y.item,w=y.data,C=w.success,R=w.source,M=u("GET_ITEM_INSERT_LOCATION");if(an(M)&&R&&Cf(f,M),c("DID_LOAD_ITEM",{id:x.id,error:null,serverFileReference:x.origin===Fe.INPUT?null:R}),C($(x)),x.origin===Fe.LOCAL){c("DID_LOAD_LOCAL_ITEM",{id:x.id});return}if(x.origin===Fe.LIMBO){c("DID_COMPLETE_ITEM_PROCESSING",{id:x.id,error:null,serverFileReference:R}),c("DID_DEFINE_VALUE",{id:x.id,value:x.serverId||R});return}u("IS_ASYNC")&&f.options.instantUpload&&c("REQUEST_ITEM_PROCESSING",{query:x.id})},RETRY_ITEM_LOAD:Ri(f,function(m){m.retryLoad()}),REQUEST_ITEM_PREPARE:Ri(f,function(m,y,x){c("REQUEST_PREPARE_OUTPUT",{query:m.id,item:m,success:function(C){c("DID_PREPARE_OUTPUT",{id:m.id,file:C}),y({file:m,output:C})},failure:x},!0)}),REQUEST_ITEM_PROCESSING:Ri(f,function(m,y,x){var w=m.status===ce.IDLE||m.status===ce.PROCESSING_ERROR;if(!w){var C=function(){return c("REQUEST_ITEM_PROCESSING",{query:m,success:y,failure:x})},R=function(){return document.hidden?C():setTimeout(C,32)};m.status===ce.PROCESSING_COMPLETE||m.status===ce.PROCESSING_REVERT_ERROR?m.revert(Ws(f.options.server.url,f.options.server.revert),u("GET_FORCE_REVERT")).then(R).catch(function(){}):m.status===ce.PROCESSING&&m.abortProcessing().then(R);return}m.status!==ce.PROCESSING_QUEUED&&(m.requestProcessing(),c("DID_REQUEST_ITEM_PROCESSING",{id:m.id}),c("PROCESS_ITEM",{query:m,success:y,failure:x},!0))}),PROCESS_ITEM:Ri(f,function(m,y,x){var w=u("GET_MAX_PARALLEL_UPLOADS"),C=u("GET_ITEMS_BY_STATUS",ce.PROCESSING).length;if(C===w){f.processingQueue.push({id:m.id,success:y,failure:x});return}if(m.status!==ce.PROCESSING){var R=function B(){var V=f.processingQueue.shift();if(V){var K=V.id,ee=V.success,te=V.failure,X=Xi(f.items,K);if(!X||X.archived){B();return}c("PROCESS_ITEM",{query:K,success:ee,failure:te},!0)}};m.onOnce("process-complete",function(){y($(m)),R();var B=f.options.server,V=f.options.instantUpload;if(V&&m.origin===Fe.LOCAL&&an(B.remove)){var K=function(){};m.origin=Fe.LIMBO,f.options.server.remove(m.source,K,K)}var ee=u("GET_ITEMS_BY_STATUS",ce.PROCESSING_COMPLETE).length===f.items.length;ee&&c("DID_COMPLETE_ITEM_PROCESSING_ALL")}),m.onOnce("process-error",function(B){x({error:B,file:$(m)}),R()});var M=f.options;m.process(rE(eE(M.server.url,M.server.process,M.name,{chunkTransferId:m.transferId,chunkServer:M.server.patch,chunkUploads:M.chunkUploads,chunkForce:M.chunkForce,chunkSize:M.chunkSize,chunkRetryDelays:M.chunkRetryDelays}),{allowMinimumUploadDuration:u("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),function(B,V,K){jt("PREPARE_OUTPUT",B,{query:u,item:m}).then(function(ee){c("DID_PREPARE_OUTPUT",{id:m.id,file:ee}),V(ee)}).catch(K)})}}),RETRY_ITEM_PROCESSING:Ri(f,function(m){c("REQUEST_ITEM_PROCESSING",{query:m})}),REQUEST_REMOVE_ITEM:Ri(f,function(m){g0(u("GET_BEFORE_REMOVE_FILE"),$(m)).then(function(y){y&&c("REMOVE_ITEM",{query:m})})}),RELEASE_ITEM:Ri(f,function(m){m.release()}),REMOVE_ITEM:Ri(f,function(m,y,x,w){var C=function(){var B=m.id;h0(f.items,B).archive(),c("DID_REMOVE_ITEM",{error:null,id:B,item:m}),If(c,f),y($(m))},R=f.options.server;m.origin===Fe.LOCAL&&R&&an(R.remove)&&w.remove!==!1?(c("DID_START_ITEM_REMOVE",{id:m.id}),R.remove(m.source,function(){return C()},function(M){c("DID_THROW_ITEM_REMOVE_ERROR",{id:m.id,error:xr("error",0,M,null),status:{main:Nc(f.options.labelFileRemoveError)(M),sub:f.options.labelTapToRetry}})})):((w.revert&&m.origin!==Fe.LOCAL&&m.serverId!==null||f.options.chunkUploads&&m.file.size>f.options.chunkSize||f.options.chunkUploads&&f.options.chunkForce)&&m.revert(Ws(f.options.server.url,f.options.server.revert),u("GET_FORCE_REVERT")),C())}),ABORT_ITEM_LOAD:Ri(f,function(m){m.abortLoad()}),ABORT_ITEM_PROCESSING:Ri(f,function(m){if(m.serverId){c("REVERT_ITEM_PROCESSING",{id:m.id});return}m.abortProcessing().then(function(){var y=f.options.instantUpload;y&&c("REMOVE_ITEM",{query:m.id})})}),REQUEST_REVERT_ITEM_PROCESSING:Ri(f,function(m){if(!f.options.instantUpload){c("REVERT_ITEM_PROCESSING",{query:m});return}var y=function(R){R&&c("REVERT_ITEM_PROCESSING",{query:m})},x=u("GET_BEFORE_REMOVE_FILE");if(!x)return y(!0);var w=x($(m));if(w==null)return y(!0);if(typeof w=="boolean")return y(w);typeof w.then=="function"&&w.then(y)}),REVERT_ITEM_PROCESSING:Ri(f,function(m){m.revert(Ws(f.options.server.url,f.options.server.revert),u("GET_FORCE_REVERT")).then(function(){var y=f.options.instantUpload||lE(m);y&&c("REMOVE_ITEM",{query:m.id})}).catch(function(){})}),SET_OPTIONS:function(y){var x=y.options,w=Object.keys(x),C=uE.filter(function(M){return w.includes(M)}),R=[].concat(xo(C),xo(Object.keys(x).filter(function(M){return!C.includes(M)})));R.forEach(function(M){c("SET_"+ya(M,"_").toUpperCase(),{value:x[M]})})}}},uE=["server"],Af=function(c){return c},bn=function(c){return document.createElement(c)},Er=function(c,u){var f=c.childNodes[0];f?u!==f.nodeValue&&(f.nodeValue=u):(f=document.createTextNode(u),c.appendChild(f))},v0=function(c,u,f,m){var y=(m%360-90)*Math.PI/180;return{x:c+f*Math.cos(y),y:u+f*Math.sin(y)}},dE=function(c,u,f,m,y,x){var w=v0(c,u,f,y),C=v0(c,u,f,m);return["M",w.x,w.y,"A",f,f,0,x,0,C.x,C.y].join(" ")},fE=function(c,u,f,m,y){var x=1;return y>m&&y-m<=.5&&(x=0),m>y&&m-y>=.5&&(x=0),dE(c,u,f,Math.min(.9999,m)*360,Math.min(.9999,y)*360,x)},hE=function(c){var u=c.root,f=c.props;f.spin=!1,f.progress=0,f.opacity=0;var m=h("svg");u.ref.path=h("path",{"stroke-width":2,"stroke-linecap":"round"}),m.appendChild(u.ref.path),u.ref.svg=m,u.appendChild(m)},pE=function(c){var u=c.root,f=c.props;if(f.opacity!==0){f.align&&(u.element.dataset.align=f.align);var m=parseInt(a(u.ref.path,"stroke-width"),10),y=u.rect.element.width*.5,x=0,w=0;f.spin?(x=0,w=.5):(x=0,w=f.progress);var C=fE(y,y,y-m,x,w);a(u.ref.path,"d",C),a(u.ref.path,"stroke-opacity",f.spin||f.progress>0?1:0)}},_0=br({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:hE,write:pE,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),mE=function(c){var u=c.root,f=c.props;u.element.innerHTML=(f.icon||"")+("<span>"+f.label+"</span>"),f.isDisabled=!1},gE=function(c){var u=c.root,f=c.props,m=f.isDisabled,y=u.query("GET_DISABLED")||f.opacity===0;y&&!m?(f.isDisabled=!0,a(u.element,"disabled","disabled")):!y&&m&&(f.isDisabled=!1,u.element.removeAttribute("disabled"))},y0=br({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:mE,write:gE}),b0=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:".",f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e3,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},y=m.labelBytes,x=y===void 0?"bytes":y,w=m.labelKilobytes,C=w===void 0?"KB":w,R=m.labelMegabytes,M=R===void 0?"MB":R,B=m.labelGigabytes,V=B===void 0?"GB":B;c=Math.round(Math.abs(c));var K=f,ee=f*f,te=f*f*f;return c<K?c+" "+x:c<ee?Math.floor(c/K)+" "+C:c<te?x0(c/ee,1,u)+" "+M:x0(c/te,2,u)+" "+V},x0=function(c,u,f){return c.toFixed(u).split(".").filter(function(m){return m!=="0"}).join(f)},vE=function(c){var u=c.root,f=c.props,m=bn("span");m.className="filepond--file-info-main",a(m,"aria-hidden","true"),u.appendChild(m),u.ref.fileName=m;var y=bn("span");y.className="filepond--file-info-sub",u.appendChild(y),u.ref.fileSize=y,Er(y,u.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),Er(m,Af(u.query("GET_ITEM_NAME",f.id)))},Sf=function(c){var u=c.root,f=c.props;Er(u.ref.fileSize,b0(u.query("GET_ITEM_SIZE",f.id),".",u.query("GET_FILE_SIZE_BASE"),u.query("GET_FILE_SIZE_LABELS",u.query))),Er(u.ref.fileName,Af(u.query("GET_ITEM_NAME",f.id)))},E0=function(c){var u=c.root,f=c.props;if(mo(u.query("GET_ITEM_SIZE",f.id))){Sf({root:u,props:f});return}Er(u.ref.fileSize,u.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},_E=br({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:Yr({DID_LOAD_ITEM:Sf,DID_UPDATE_ITEM_META:Sf,DID_THROW_ITEM_LOAD_ERROR:E0,DID_THROW_ITEM_INVALID:E0}),didCreateView:function(c){Fr("CREATE_VIEW",Object.assign({},c,{view:c}))},create:vE,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),w0=function(c){return Math.round(c*100)},yE=function(c){var u=c.root,f=bn("span");f.className="filepond--file-status-main",u.appendChild(f),u.ref.main=f;var m=bn("span");m.className="filepond--file-status-sub",u.appendChild(m),u.ref.sub=m,I0({root:u,action:{progress:null}})},I0=function(c){var u=c.root,f=c.action,m=f.progress===null?u.query("GET_LABEL_FILE_LOADING"):u.query("GET_LABEL_FILE_LOADING")+" "+w0(f.progress)+"%";Er(u.ref.main,m),Er(u.ref.sub,u.query("GET_LABEL_TAP_TO_CANCEL"))},bE=function(c){var u=c.root,f=c.action,m=f.progress===null?u.query("GET_LABEL_FILE_PROCESSING"):u.query("GET_LABEL_FILE_PROCESSING")+" "+w0(f.progress)+"%";Er(u.ref.main,m),Er(u.ref.sub,u.query("GET_LABEL_TAP_TO_CANCEL"))},xE=function(c){var u=c.root;Er(u.ref.main,u.query("GET_LABEL_FILE_PROCESSING")),Er(u.ref.sub,u.query("GET_LABEL_TAP_TO_CANCEL"))},EE=function(c){var u=c.root;Er(u.ref.main,u.query("GET_LABEL_FILE_PROCESSING_ABORTED")),Er(u.ref.sub,u.query("GET_LABEL_TAP_TO_RETRY"))},wE=function(c){var u=c.root;Er(u.ref.main,u.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),Er(u.ref.sub,u.query("GET_LABEL_TAP_TO_UNDO"))},C0=function(c){var u=c.root;Er(u.ref.main,""),Er(u.ref.sub,"")},Xs=function(c){var u=c.root,f=c.action;Er(u.ref.main,f.status.main),Er(u.ref.sub,f.status.sub)},IE=br({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:Yr({DID_LOAD_ITEM:C0,DID_REVERT_ITEM_PROCESSING:C0,DID_REQUEST_ITEM_PROCESSING:xE,DID_ABORT_ITEM_PROCESSING:EE,DID_COMPLETE_ITEM_PROCESSING:wE,DID_UPDATE_ITEM_PROCESS_PROGRESS:bE,DID_UPDATE_ITEM_LOAD_PROGRESS:I0,DID_THROW_ITEM_LOAD_ERROR:Xs,DID_THROW_ITEM_INVALID:Xs,DID_THROW_ITEM_PROCESSING_ERROR:Xs,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:Xs,DID_THROW_ITEM_REMOVE_ERROR:Xs}),didCreateView:function(c){Fr("CREATE_VIEW",Object.assign({},c,{view:c}))},create:yE,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),Tf={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},Df=[];n(Tf,function(g){Df.push(g)});var xi=function(c){if(Of(c)==="right")return 0;var u=c.ref.buttonRemoveItem.rect.element;return u.hidden?null:u.width+u.left},CE=function(c){var u=c.ref.buttonAbortItemLoad.rect.element;return u.width},Fc=function(c){return Math.floor(c.ref.buttonRemoveItem.rect.element.height/4)},AE=function(c){return Math.floor(c.ref.buttonRemoveItem.rect.element.left/2)},SE=function(c){return c.query("GET_STYLE_LOAD_INDICATOR_POSITION")},TE=function(c){return c.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")},Of=function(c){return c.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION")},DE={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:SE},processProgressIndicator:{opacity:0,align:TE},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},A0={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:xi},status:{translateX:xi}},Rf={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},Oa={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:xi},status:{translateX:xi,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:xi},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:Of},info:{translateX:xi},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:Of},buttonRemoveItem:{opacity:1},info:{translateX:xi},status:{opacity:1,translateX:xi}},DID_LOAD_ITEM:A0,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:xi},status:{translateX:xi}},DID_START_ITEM_PROCESSING:Rf,DID_REQUEST_ITEM_PROCESSING:Rf,DID_UPDATE_ITEM_PROCESS_PROGRESS:Rf,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:xi}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:xi},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:A0},OE=br({create:function(c){var u=c.root;u.element.innerHTML=u.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),RE=function(c){var u=c.root,f=c.props,m=Object.keys(Tf).reduce(function(be,Ae){return be[Ae]=Object.assign({},Tf[Ae]),be},{}),y=f.id,x=u.query("GET_ALLOW_REVERT"),w=u.query("GET_ALLOW_REMOVE"),C=u.query("GET_ALLOW_PROCESS"),R=u.query("GET_INSTANT_UPLOAD"),M=u.query("IS_ASYNC"),B=u.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN"),V;M?C&&!x?V=function(Ae){return!/RevertItemProcessing/.test(Ae)}:!C&&x?V=function(Ae){return!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(Ae)}:!C&&!x&&(V=function(Ae){return!/Process/.test(Ae)}):V=function(Ae){return!/Process/.test(Ae)};var K=V?Df.filter(V):Df.concat();if(R&&x&&(m.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",m.RevertItemProcessing.icon="GET_ICON_REMOVE"),M&&!x){var ee=Oa.DID_COMPLETE_ITEM_PROCESSING;ee.info.translateX=AE,ee.info.translateY=Fc,ee.status.translateY=Fc,ee.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(M&&!C&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(function(be){Oa[be].status.translateY=Fc}),Oa.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=CE),B&&x){m.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";var te=Oa.DID_COMPLETE_ITEM_PROCESSING;te.info.translateX=xi,te.status.translateY=Fc,te.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}w||(m.RemoveItem.disabled=!0),n(m,function(be,Ae){var de=u.createChildView(y0,{label:u.query(Ae.label),icon:u.query(Ae.icon),opacity:0});K.includes(be)&&u.appendChildView(de),Ae.disabled&&(de.element.setAttribute("disabled","disabled"),de.element.setAttribute("hidden","hidden")),de.element.dataset.align=u.query("GET_STYLE_"+Ae.align),de.element.classList.add(Ae.className),de.on("click",function(Qe){Qe.stopPropagation(),!Ae.disabled&&u.dispatch(Ae.action,{query:y})}),u.ref["button"+be]=de}),u.ref.processingCompleteIndicator=u.appendChildView(u.createChildView(OE)),u.ref.processingCompleteIndicator.element.dataset.align=u.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),u.ref.info=u.appendChildView(u.createChildView(_E,{id:y})),u.ref.status=u.appendChildView(u.createChildView(IE,{id:y}));var X=u.appendChildView(u.createChildView(_0,{opacity:0,align:u.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));X.element.classList.add("filepond--load-indicator"),u.ref.loadProgressIndicator=X;var oe=u.appendChildView(u.createChildView(_0,{opacity:0,align:u.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));oe.element.classList.add("filepond--process-indicator"),u.ref.processProgressIndicator=oe,u.ref.activeStyles=[]},ME=function(c){var u=c.root,f=c.actions,m=c.props;PE({root:u,actions:f,props:m});var y=f.concat().filter(function(w){return/^DID_/.test(w.type)}).reverse().find(function(w){return Oa[w.type]});if(y){u.ref.activeStyles=[];var x=Oa[y.type];n(DE,function(w,C){var R=u.ref[w];n(C,function(M,B){var V=x[w]&&typeof x[w][M]<"u"?x[w][M]:B;u.ref.activeStyles.push({control:R,key:M,value:V})})})}u.ref.activeStyles.forEach(function(w){var C=w.control,R=w.key,M=w.value;C[R]=typeof M=="function"?M(u):M})},PE=Yr({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:function(c){var u=c.root,f=c.action;u.ref.buttonAbortItemProcessing.label=f.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:function(c){var u=c.root,f=c.action;u.ref.buttonAbortItemLoad.label=f.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:function(c){var u=c.root,f=c.action;u.ref.buttonAbortItemRemoval.label=f.value},DID_REQUEST_ITEM_PROCESSING:function(c){var u=c.root;u.ref.processProgressIndicator.spin=!0,u.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:function(c){var u=c.root;u.ref.loadProgressIndicator.spin=!0,u.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:function(c){var u=c.root;u.ref.processProgressIndicator.spin=!0,u.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:function(c){var u=c.root,f=c.action;u.ref.loadProgressIndicator.spin=!1,u.ref.loadProgressIndicator.progress=f.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:function(c){var u=c.root,f=c.action;u.ref.processProgressIndicator.spin=!1,u.ref.processProgressIndicator.progress=f.progress}}),NE=br({create:RE,write:ME,didCreateView:function(c){Fr("CREATE_VIEW",Object.assign({},c,{view:c}))},name:"file"}),FE=function(c){var u=c.root,f=c.props;u.ref.fileName=bn("legend"),u.appendChild(u.ref.fileName),u.ref.file=u.appendChildView(u.createChildView(NE,{id:f.id})),u.ref.data=!1},kE=function(c){var u=c.root,f=c.props;Er(u.ref.fileName,Af(u.query("GET_ITEM_NAME",f.id)))},LE=br({create:FE,ignoreRect:!0,write:Yr({DID_LOAD_ITEM:kE}),didCreateView:function(c){Fr("CREATE_VIEW",Object.assign({},c,{view:c}))},tag:"fieldset",name:"file-wrapper"}),S0={type:"spring",damping:.6,mass:7},BE=function(c){var u=c.root,f=c.props;[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:S0},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:S0},styles:["translateY"]}}].forEach(function(m){VE(u,m,f.name)}),u.element.classList.add("filepond--"+f.name),u.ref.scalable=null},VE=function(c,u,f){var m=br({name:"panel-"+u.name+" filepond--"+f,mixins:u.mixins,ignoreRectUpdate:!0}),y=c.createChildView(m,u.props);c.ref[u.name]=c.appendChildView(y)},UE=function(c){var u=c.root,f=c.props;if((u.ref.scalable===null||f.scalable!==u.ref.scalable)&&(u.ref.scalable=ga(f.scalable)?f.scalable:!0,u.element.dataset.scalable=u.ref.scalable),!!f.height){var m=u.ref.top.rect.element,y=u.ref.bottom.rect.element,x=Math.max(m.height+y.height,f.height);u.ref.center.translateY=m.height,u.ref.center.scaleY=(x-m.height-y.height)/100,u.ref.bottom.translateY=x-y.height}},T0=br({name:"panel",read:function(c){var u=c.root,f=c.props;return f.heightCurrent=u.ref.bottom.translateY},write:UE,create:BE,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),GE=function(c){var u=c.map(function(m){return m.id}),f=void 0;return{setIndex:function(y){f=y},getIndex:function(){return f},getItemIndex:function(y){return u.indexOf(y.id)}}},D0={type:"spring",stiffness:.75,damping:.45,mass:10},O0="spring",R0={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},jE=function(c){var u=c.root,f=c.props;if(u.ref.handleClick=function(y){return u.dispatch("DID_ACTIVATE_ITEM",{id:f.id})},u.element.id="filepond--item-"+f.id,u.element.addEventListener("click",u.ref.handleClick),u.ref.container=u.appendChildView(u.createChildView(LE,{id:f.id})),u.ref.panel=u.appendChildView(u.createChildView(T0,{name:"item-panel"})),u.ref.panel.height=null,f.markedForRemoval=!1,!!u.query("GET_ALLOW_REORDER")){u.element.dataset.dragState="idle";var m=function(x){if(x.isPrimary){var w=!1,C={x:x.pageX,y:x.pageY};f.dragOrigin={x:u.translateX,y:u.translateY},f.dragCenter={x:x.offsetX,y:x.offsetY};var R=GE(u.query("GET_ACTIVE_ITEMS"));u.dispatch("DID_GRAB_ITEM",{id:f.id,dragState:R});var M=function(te){if(te.isPrimary){te.stopPropagation(),te.preventDefault(),f.dragOffset={x:te.pageX-C.x,y:te.pageY-C.y};var X=f.dragOffset.x*f.dragOffset.x+f.dragOffset.y*f.dragOffset.y;X>16&&!w&&(w=!0,u.element.removeEventListener("click",u.ref.handleClick)),u.dispatch("DID_DRAG_ITEM",{id:f.id,dragState:R})}},B=function(te){te.isPrimary&&(f.dragOffset={x:te.pageX-C.x,y:te.pageY-C.y},K())},V=function(){K()},K=function(){document.removeEventListener("pointercancel",V),document.removeEventListener("pointermove",M),document.removeEventListener("pointerup",B),u.dispatch("DID_DROP_ITEM",{id:f.id,dragState:R}),w&&setTimeout(function(){return u.element.addEventListener("click",u.ref.handleClick)},0)};document.addEventListener("pointercancel",V),document.addEventListener("pointermove",M),document.addEventListener("pointerup",B)}};u.element.addEventListener("pointerdown",m)}},zE=Yr({DID_UPDATE_PANEL_HEIGHT:function(c){var u=c.root,f=c.action;u.height=f.height}}),HE=Yr({DID_GRAB_ITEM:function(c){var u=c.root,f=c.props;f.dragOrigin={x:u.translateX,y:u.translateY}},DID_DRAG_ITEM:function(c){var u=c.root;u.element.dataset.dragState="drag"},DID_DROP_ITEM:function(c){var u=c.root,f=c.props;f.dragOffset=null,f.dragOrigin=null,u.element.dataset.dragState="drop"}},function(g){var c=g.root,u=g.actions,f=g.props,m=g.shouldOptimize;c.element.dataset.dragState==="drop"&&c.scaleX<=1&&(c.element.dataset.dragState="idle");var y=u.concat().filter(function(w){return/^DID_/.test(w.type)}).reverse().find(function(w){return R0[w.type]});y&&y.type!==f.currentState&&(f.currentState=y.type,c.element.dataset.filepondItemState=R0[f.currentState]||"");var x=c.query("GET_ITEM_PANEL_ASPECT_RATIO")||c.query("GET_PANEL_ASPECT_RATIO");x?m||(c.height=c.rect.element.width*x):(zE({root:c,actions:u,props:f}),!c.height&&c.ref.container.rect.element.height>0&&(c.height=c.ref.container.rect.element.height)),m&&(c.ref.panel.height=null),c.ref.panel.height=c.height}),WE=br({create:jE,write:HE,destroy:function(c){var u=c.root,f=c.props;u.element.removeEventListener("click",u.ref.handleClick),u.dispatch("RELEASE_ITEM",{query:f.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:O0,scaleY:O0,translateX:D0,translateY:D0,opacity:{type:"tween",duration:150}}}}),Mf=function(g,c){return Math.max(1,Math.floor((g+1)/c))},Pf=function(c,u,f){if(f){var m=c.rect.element.width,y=u.length,x=null;if(y===0||f.top<u[0].rect.element.top)return-1;var w=u[0],C=w.rect.element,R=C.marginLeft+C.marginRight,M=C.width+R,B=Mf(m,M);if(B===1){for(var V=0;V<y;V++){var K=u[V],ee=K.rect.outer.top+K.rect.element.height*.5;if(f.top<ee)return V}return y}for(var te=C.marginTop+C.marginBottom,X=C.height+te,oe=0;oe<y;oe++){var be=oe%B,Ae=Math.floor(oe/B),de=be*M,Qe=Ae*X,me=Qe-C.marginTop,Pt=de+M,Nt=Qe+X+C.marginBottom;if(f.top<Nt&&f.top>me){if(f.left<Pt)return oe;oe!==y-1?x=oe:x=null}}return x!==null?x:y}},kc={height:0,width:0,get getHeight(){return this.height},set setHeight(g){(this.height===0||g===0)&&(this.height=g)},get getWidth(){return this.width},set setWidth(g){(this.width===0||g===0)&&(this.width=g)},setDimensions:function(c,u){(this.height===0||c===0)&&(this.height=c),(this.width===0||u===0)&&(this.width=u)}},XE=function(c){var u=c.root;a(u.element,"role","list"),u.ref.lastItemSpanwDate=Date.now()},YE=function(c){var u=c.root,f=c.action,m=f.id,y=f.index,x=f.interactionMethod;u.ref.addIndex=y;var w=Date.now(),C=w,R=1;if(x!==yi.NONE){R=0;var M=u.query("GET_ITEM_INSERT_INTERVAL"),B=w-u.ref.lastItemSpanwDate;C=B<M?w+(M-B):w}u.ref.lastItemSpanwDate=C,u.appendChildView(u.createChildView(WE,{spawnDate:C,id:m,opacity:R,interactionMethod:x}),y)},M0=function(c,u,f){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1;c.dragOffset?(c.translateX=null,c.translateY=null,c.translateX=c.dragOrigin.x+c.dragOffset.x,c.translateY=c.dragOrigin.y+c.dragOffset.y,c.scaleX=1.025,c.scaleY=1.025):(c.translateX=u,c.translateY=f,Date.now()>c.spawnDate&&(c.opacity===0&&qE(c,u,f,m,y),c.scaleX=1,c.scaleY=1,c.opacity=1))},qE=function(c,u,f,m,y){c.interactionMethod===yi.NONE?(c.translateX=null,c.translateX=u,c.translateY=null,c.translateY=f):c.interactionMethod===yi.DROP?(c.translateX=null,c.translateX=u-m*20,c.translateY=null,c.translateY=f-y*10,c.scaleX=.8,c.scaleY=.8):c.interactionMethod===yi.BROWSE?(c.translateY=null,c.translateY=f-30):c.interactionMethod===yi.API&&(c.translateX=null,c.translateX=u-30,c.translateY=null)},$E=function(c){var u=c.root,f=c.action,m=f.id,y=u.childViews.find(function(x){return x.id===m});y&&(y.scaleX=.9,y.scaleY=.9,y.opacity=0,y.markedForRemoval=!0)},Nf=function(c){return c.rect.element.height+c.rect.element.marginBottom*.5+c.rect.element.marginTop*.5},ZE=function(c){return c.rect.element.width+c.rect.element.marginLeft*.5+c.rect.element.marginRight*.5},KE=function(c){var u=c.root,f=c.action,m=f.id,y=f.dragState,x=u.query("GET_ITEM",{id:m}),w=u.childViews.find(function(be){return be.id===m}),C=u.childViews.length,R=y.getItemIndex(x);if(w){var M={x:w.dragOrigin.x+w.dragOffset.x+w.dragCenter.x,y:w.dragOrigin.y+w.dragOffset.y+w.dragCenter.y},B=Nf(w),V=ZE(w),K=Math.floor(u.rect.outer.width/V);K>C&&(K=C);var ee=Math.floor(C/K+1);kc.setHeight=B*ee,kc.setWidth=V*K;var te={y:Math.floor(M.y/B),x:Math.floor(M.x/V),getGridIndex:function(){return M.y>kc.getHeight||M.y<0||M.x>kc.getWidth||M.x<0?R:this.y*K+this.x},getColIndex:function(){for(var Ae=u.query("GET_ACTIVE_ITEMS"),de=u.childViews.filter(function(ke){return ke.rect.element.height}),Qe=Ae.map(function(ke){return de.find(function(Bt){return Bt.id===ke.id})}),me=Qe.findIndex(function(ke){return ke===w}),Pt=Nf(w),Nt=Qe.length,ve=Nt,De=0,Me=0,ge=0,xe=0;xe<Nt;xe++)if(De=Nf(Qe[xe]),ge=Me,Me=ge+De,M.y<Me){if(me>xe){if(M.y<ge+Pt){ve=xe;break}continue}ve=xe;break}return ve}},X=K>1?te.getGridIndex():te.getColIndex();u.dispatch("MOVE_ITEM",{query:w,index:X});var oe=y.getIndex();if(oe===void 0||oe!==X){if(y.setIndex(X),oe===void 0)return;u.dispatch("DID_REORDER_ITEMS",{items:u.query("GET_ACTIVE_ITEMS"),origin:R,target:X})}}},QE=Yr({DID_ADD_ITEM:YE,DID_REMOVE_ITEM:$E,DID_DRAG_ITEM:KE}),JE=function(c){var u=c.root,f=c.props,m=c.actions,y=c.shouldOptimize;QE({root:u,props:f,actions:m});var x=f.dragCoordinates,w=u.rect.element.width,C=u.childViews.filter(function(ve){return ve.rect.element.height}),R=u.query("GET_ACTIVE_ITEMS").map(function(ve){return C.find(function(De){return De.id===ve.id})}).filter(function(ve){return ve}),M=x?Pf(u,R,x):null,B=u.ref.addIndex||null;u.ref.addIndex=null;var V=0,K=0,ee=0;if(R.length!==0){var te=R[0].rect.element,X=te.marginTop+te.marginBottom,oe=te.marginLeft+te.marginRight,be=te.width+oe,Ae=te.height+X,de=Mf(w,be);if(de===1){var Qe=0,me=0;R.forEach(function(ve,De){if(M){var Me=De-M;Me===-2?me=-X*.25:Me===-1?me=-X*.75:Me===0?me=X*.75:Me===1?me=X*.25:me=0}y&&(ve.translateX=null,ve.translateY=null),ve.markedForRemoval||M0(ve,0,Qe+me);var ge=ve.rect.element.height+X,xe=ge*(ve.markedForRemoval?ve.opacity:1);Qe+=xe})}else{var Pt=0,Nt=0;R.forEach(function(ve,De){De===M&&(V=1),De===B&&(ee+=1),ve.markedForRemoval&&ve.opacity<.5&&(K-=1);var Me=De+ee+V+K,ge=Me%de,xe=Math.floor(Me/de),ke=ge*be,Bt=xe*Ae,St=Math.sign(ke-Pt),Be=Math.sign(Bt-Nt);Pt=ke,Nt=Bt,!ve.markedForRemoval&&(y&&(ve.translateX=null,ve.translateY=null),M0(ve,ke,Bt,St,Be))})}}},ew=function(c,u){return u.filter(function(f){return f.data&&f.data.id?c.id===f.data.id:!0})},tw=br({create:XE,write:JE,tag:"ul",name:"list",didWriteView:function(c){var u=c.root;u.childViews.filter(function(f){return f.markedForRemoval&&f.opacity===0&&f.resting}).forEach(function(f){f._destroy(),u.removeChildView(f)})},filterFrameActionsForChild:ew,mixins:{apis:["dragCoordinates"]}}),rw=function(c){var u=c.root,f=c.props;u.ref.list=u.appendChildView(u.createChildView(tw)),f.dragCoordinates=null,f.overflowing=!1},iw=function(c){var u=c.root,f=c.props,m=c.action;u.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(f.dragCoordinates={left:m.position.scopeLeft-u.ref.list.rect.element.left,top:m.position.scopeTop-(u.rect.outer.top+u.rect.element.marginTop+u.rect.element.scrollTop)})},nw=function(c){var u=c.props;u.dragCoordinates=null},ow=Yr({DID_DRAG:iw,DID_END_DRAG:nw}),aw=function(c){var u=c.root,f=c.props,m=c.actions;if(ow({root:u,props:f,actions:m}),u.ref.list.dragCoordinates=f.dragCoordinates,f.overflowing&&!f.overflow&&(f.overflowing=!1,u.element.dataset.state="",u.height=null),f.overflow){var y=Math.round(f.overflow);y!==u.height&&(f.overflowing=!0,u.element.dataset.state="overflow",u.height=y)}},sw=br({create:rw,write:aw,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),Yi=function(c,u,f){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"";f?a(c,u,m):c.removeAttribute(u)},lw=function(c){if(!(!c||c.value==="")){try{c.value=""}catch{}if(c.value){var u=bn("form"),f=c.parentNode,m=c.nextSibling;u.appendChild(c),u.reset(),m?f.insertBefore(c,m):f.appendChild(c)}}},cw=function(c){var u=c.root,f=c.props;u.element.id="filepond--browser-"+f.id,a(u.element,"name",u.query("GET_NAME")),a(u.element,"aria-controls","filepond--assistant-"+f.id),a(u.element,"aria-labelledby","filepond--drop-label-"+f.id),P0({root:u,action:{value:u.query("GET_ACCEPTED_FILE_TYPES")}}),N0({root:u,action:{value:u.query("GET_ALLOW_MULTIPLE")}}),F0({root:u,action:{value:u.query("GET_ALLOW_DIRECTORIES_ONLY")}}),Ff({root:u}),k0({root:u,action:{value:u.query("GET_REQUIRED")}}),L0({root:u,action:{value:u.query("GET_CAPTURE_METHOD")}}),u.ref.handleChange=function(m){if(u.element.value){var y=Array.from(u.element.files).map(function(x){return x._relativePath=x.webkitRelativePath,x});setTimeout(function(){f.onload(y),lw(u.element)},250)}},u.element.addEventListener("change",u.ref.handleChange)},P0=function(c){var u=c.root,f=c.action;u.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&Yi(u.element,"accept",!!f.value,f.value?f.value.join(","):"")},N0=function(c){var u=c.root,f=c.action;Yi(u.element,"multiple",f.value)},F0=function(c){var u=c.root,f=c.action;Yi(u.element,"webkitdirectory",f.value)},Ff=function(c){var u=c.root,f=u.query("GET_DISABLED"),m=u.query("GET_ALLOW_BROWSE"),y=f||!m;Yi(u.element,"disabled",y)},k0=function(c){var u=c.root,f=c.action;f.value?u.query("GET_TOTAL_ITEMS")===0&&Yi(u.element,"required",!0):Yi(u.element,"required",!1)},L0=function(c){var u=c.root,f=c.action;Yi(u.element,"capture",!!f.value,f.value===!0?"":f.value)},B0=function(c){var u=c.root,f=u.element;if(u.query("GET_TOTAL_ITEMS")>0)Yi(f,"required",!1),Yi(f,"name",!1);else{Yi(f,"name",!0,u.query("GET_NAME"));var m=u.query("GET_CHECK_VALIDITY");m&&f.setCustomValidity(""),u.query("GET_REQUIRED")&&Yi(f,"required",!0)}},uw=function(c){var u=c.root,f=u.query("GET_CHECK_VALIDITY");f&&u.element.setCustomValidity(u.query("GET_LABEL_INVALID_FIELD"))},dw=br({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:cw,destroy:function(c){var u=c.root;u.element.removeEventListener("change",u.ref.handleChange)},write:Yr({DID_LOAD_ITEM:B0,DID_REMOVE_ITEM:B0,DID_THROW_ITEM_INVALID:uw,DID_SET_DISABLED:Ff,DID_SET_ALLOW_BROWSE:Ff,DID_SET_ALLOW_DIRECTORIES_ONLY:F0,DID_SET_ALLOW_MULTIPLE:N0,DID_SET_ACCEPTED_FILE_TYPES:P0,DID_SET_CAPTURE_METHOD:L0,DID_SET_REQUIRED:k0})}),V0={ENTER:13,SPACE:32},fw=function(c){var u=c.root,f=c.props,m=bn("label");a(m,"for","filepond--browser-"+f.id),a(m,"id","filepond--drop-label-"+f.id),u.ref.handleKeyDown=function(y){var x=y.keyCode===V0.ENTER||y.keyCode===V0.SPACE;x&&(y.preventDefault(),u.ref.label.click())},u.ref.handleClick=function(y){var x=y.target===m||m.contains(y.target);x||u.ref.label.click()},m.addEventListener("keydown",u.ref.handleKeyDown),u.element.addEventListener("click",u.ref.handleClick),U0(m,f.caption),u.appendChild(m),u.ref.label=m},U0=function(c,u){c.innerHTML=u;var f=c.querySelector(".filepond--label-action");return f&&a(f,"tabindex","0"),u},hw=br({name:"drop-label",ignoreRect:!0,create:fw,destroy:function(c){var u=c.root;u.ref.label.addEventListener("keydown",u.ref.handleKeyDown),u.element.removeEventListener("click",u.ref.handleClick)},write:Yr({DID_SET_LABEL_IDLE:function(c){var u=c.root,f=c.action;U0(u.ref.label,f.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),pw=br({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),mw=function(c){var u=c.root,f=u.rect.element.width*.5,m=u.rect.element.height*.5;u.ref.blob=u.appendChildView(u.createChildView(pw,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:f,translateY:m}))},gw=function(c){var u=c.root,f=c.action;if(!u.ref.blob){mw({root:u});return}u.ref.blob.translateX=f.position.scopeLeft,u.ref.blob.translateY=f.position.scopeTop,u.ref.blob.scaleX=1,u.ref.blob.scaleY=1,u.ref.blob.opacity=1},vw=function(c){var u=c.root;u.ref.blob&&(u.ref.blob.opacity=0)},_w=function(c){var u=c.root;u.ref.blob&&(u.ref.blob.scaleX=2.5,u.ref.blob.scaleY=2.5,u.ref.blob.opacity=0)},yw=function(c){var u=c.root,f=c.props,m=c.actions;bw({root:u,props:f,actions:m});var y=u.ref.blob;m.length===0&&y&&y.opacity===0&&(u.removeChildView(y),u.ref.blob=null)},bw=Yr({DID_DRAG:gw,DID_DROP:_w,DID_END_DRAG:vw}),xw=br({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:yw}),G0=function(c,u){try{var f=new DataTransfer;u.forEach(function(m){m instanceof File?f.items.add(m):f.items.add(new File([m],m.name,{type:m.type}))}),c.files=f.files}catch{return!1}return!0},Ew=function(c){var u=c.root;return u.ref.fields={}},Lc=function(c,u){return c.ref.fields[u]},kf=function(c){c.query("GET_ACTIVE_ITEMS").forEach(function(u){c.ref.fields[u.id]&&c.element.appendChild(c.ref.fields[u.id])})},j0=function(c){var u=c.root;return kf(u)},ww=function(c){var u=c.root,f=c.action,m=u.query("GET_ITEM",f.id),y=m.origin===Fe.LOCAL,x=!y&&u.query("SHOULD_UPDATE_FILE_INPUT"),w=bn("input");w.type=x?"file":"hidden",w.name=u.query("GET_NAME"),u.ref.fields[f.id]=w,kf(u)},Iw=function(c){var u=c.root,f=c.action,m=Lc(u,f.id);if(m&&(f.serverFileReference!==null&&(m.value=f.serverFileReference),!!u.query("SHOULD_UPDATE_FILE_INPUT"))){var y=u.query("GET_ITEM",f.id);G0(m,[y.file])}},Cw=function(c){var u=c.root,f=c.action;u.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(function(){var m=Lc(u,f.id);m&&G0(m,[f.file])},0)},Aw=function(c){var u=c.root;u.element.disabled=u.query("GET_DISABLED")},Sw=function(c){var u=c.root,f=c.action,m=Lc(u,f.id);m&&(m.parentNode&&m.parentNode.removeChild(m),delete u.ref.fields[f.id])},Tw=function(c){var u=c.root,f=c.action,m=Lc(u,f.id);m&&(f.value===null?m.removeAttribute("value"):m.type!="file"&&(m.value=f.value),kf(u))},Dw=Yr({DID_SET_DISABLED:Aw,DID_ADD_ITEM:ww,DID_LOAD_ITEM:Iw,DID_REMOVE_ITEM:Sw,DID_DEFINE_VALUE:Tw,DID_PREPARE_OUTPUT:Cw,DID_REORDER_ITEMS:j0,DID_SORT_ITEMS:j0}),Ow=br({tag:"fieldset",name:"data",create:Ew,write:Dw,ignoreRect:!0}),Rw=function(c){return"getRootNode"in c?c.getRootNode():document},Mw=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],Pw=["css","csv","html","txt"],Nw={zip:"zip|compressed",epub:"application/epub+zip"},z0=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return c=c.toLowerCase(),Mw.includes(c)?"image/"+(c==="jpg"?"jpeg":c==="svg"?"svg+xml":c):Pw.includes(c)?"text/"+c:Nw[c]||""},Lf=function(c){return new Promise(function(u,f){var m=jw(c);if(m.length&&!Fw(c))return u(m);kw(c).then(u)})},Fw=function(c){return c.files?c.files.length>0:!1},kw=function(c){return new Promise(function(u,f){var m=(c.items?Array.from(c.items):[]).filter(function(y){return Lw(y)}).map(function(y){return Bw(y)});if(!m.length){u(c.files?Array.from(c.files):[]);return}Promise.all(m).then(function(y){var x=[];y.forEach(function(w){x.push.apply(x,w)}),u(x.filter(function(w){return w}).map(function(w){return w._relativePath||(w._relativePath=w.webkitRelativePath),w}))}).catch(console.error)})},Lw=function(c){if(H0(c)){var u=Bf(c);if(u)return u.isFile||u.isDirectory}return c.kind==="file"},Bw=function(c){return new Promise(function(u,f){if(Gw(c)){Vw(Bf(c)).then(u).catch(f);return}u([c.getAsFile()])})},Vw=function(c){return new Promise(function(u,f){var m=[],y=0,x=0,w=function(){x===0&&y===0&&u(m)},C=function R(M){y++;var B=M.createReader(),V=function K(){B.readEntries(function(ee){if(ee.length===0){y--,w();return}ee.forEach(function(te){te.isDirectory?R(te):(x++,te.file(function(X){var oe=Uw(X);te.fullPath&&(oe._relativePath=te.fullPath),m.push(oe),x--,w()}))}),K()},f)};V()};C(c)})},Uw=function(c){if(c.type.length)return c;var u=c.lastModifiedDate,f=c.name,m=z0(Pc(c.name));return m.length&&(c=c.slice(0,c.size,m),c.name=f,c.lastModifiedDate=u),c},Gw=function(c){return H0(c)&&(Bf(c)||{}).isDirectory},H0=function(c){return"webkitGetAsEntry"in c},Bf=function(c){return c.webkitGetAsEntry()},jw=function(c){var u=[];try{if(u=Hw(c),u.length)return u;u=zw(c)}catch{}return u},zw=function(c){var u=c.getData("url");return typeof u=="string"&&u.length?[u]:[]},Hw=function(c){var u=c.getData("text/html");if(typeof u=="string"&&u.length){var f=u.match(/src\s*=\s*"(.+?)"/);if(f)return[f[1]]}return[]},Bc=[],So=function(c){return{pageLeft:c.pageX,pageTop:c.pageY,scopeLeft:c.offsetX||c.layerX,scopeTop:c.offsetY||c.layerY}},Ww=function(c,u,f){var m=Xw(u),y={element:c,filterElement:f,state:null,ondrop:function(){},onenter:function(){},ondrag:function(){},onexit:function(){},onload:function(){},allowdrop:function(){}};return y.destroy=m.addListener(y),y},Xw=function(c){var u=Bc.find(function(m){return m.element===c});if(u)return u;var f=Yw(c);return Bc.push(f),f},Yw=function(c){var u=[],f={dragenter:$w,dragover:Zw,dragleave:Qw,drop:Kw},m={};n(f,function(x,w){m[x]=w(c,u),c.addEventListener(x,m[x],!1)});var y={element:c,addListener:function(w){return u.push(w),function(){u.splice(u.indexOf(w),1),u.length===0&&(Bc.splice(Bc.indexOf(y),1),n(f,function(C){c.removeEventListener(C,m[C],!1)}))}}};return y},qw=function(c,u){return"elementFromPoint"in c||(c=document),c.elementFromPoint(u.x,u.y)},Vf=function(c,u){var f=Rw(u),m=qw(f,{x:c.pageX-window.pageXOffset,y:c.pageY-window.pageYOffset});return m===u||u.contains(m)},W0=null,Vc=function(c,u){try{c.dropEffect=u}catch{}},$w=function(c,u){return function(f){f.preventDefault(),W0=f.target,u.forEach(function(m){var y=m.element,x=m.onenter;Vf(f,y)&&(m.state="enter",x(So(f)))})}},Zw=function(c,u){return function(f){f.preventDefault();var m=f.dataTransfer;Lf(m).then(function(y){var x=!1;u.some(function(w){var C=w.filterElement,R=w.element,M=w.onenter,B=w.onexit,V=w.ondrag,K=w.allowdrop;Vc(m,"copy");var ee=K(y);if(!ee){Vc(m,"none");return}if(Vf(f,R)){if(x=!0,w.state===null){w.state="enter",M(So(f));return}if(w.state="over",C&&!ee){Vc(m,"none");return}V(So(f))}else C&&!x&&Vc(m,"none"),w.state&&(w.state=null,B(So(f)))})})}},Kw=function(c,u){return function(f){f.preventDefault();var m=f.dataTransfer;Lf(m).then(function(y){u.forEach(function(x){var w=x.filterElement,C=x.element,R=x.ondrop,M=x.onexit,B=x.allowdrop;if(x.state=null,!(w&&!Vf(f,C))){if(!B(y))return M(So(f));R(So(f),y)}})})}},Qw=function(c,u){return function(f){W0===f.target&&u.forEach(function(m){var y=m.onexit;m.state=null,y(So(f))})}},Jw=function(c,u,f){c.classList.add("filepond--hopper");var m=f.catchesDropsOnPage,y=f.requiresDropOnElement,x=f.filterItems,w=x===void 0?function(V){return V}:x,C=Ww(c,m?document.documentElement:c,y),R="",M="";C.allowdrop=function(V){return u(w(V))},C.ondrop=function(V,K){var ee=w(K);if(!u(ee)){B.ondragend(V);return}M="drag-drop",B.onload(ee,V)},C.ondrag=function(V){B.ondrag(V)},C.onenter=function(V){M="drag-over",B.ondragstart(V)},C.onexit=function(V){M="drag-exit",B.ondragend(V)};var B={updateHopperState:function(){R!==M&&(c.dataset.hopperState=M,R=M)},onload:function(){},ondragstart:function(){},ondrag:function(){},ondragend:function(){},destroy:function(){C.destroy()}};return B},Uf=!1,Ra=[],X0=function(c){var u=document.activeElement,f=u&&(/textarea|input/i.test(u.nodeName)||u.getAttribute("contenteditable")==="true");if(f){for(var m=!1,y=u;y!==document.body;){if(y.classList.contains("filepond--root")){m=!0;break}y=y.parentNode}if(!m)return}Lf(c.clipboardData).then(function(x){x.length&&Ra.forEach(function(w){return w(x)})})},eI=function(c){Ra.includes(c)||(Ra.push(c),!Uf&&(Uf=!0,document.addEventListener("paste",X0)))},tI=function(c){ir(Ra,Ra.indexOf(c)),Ra.length===0&&(document.removeEventListener("paste",X0),Uf=!1)},rI=function(){var c=function(m){u.onload(m)},u={destroy:function(){tI(c)},onload:function(){}};return eI(c),u},iI=function(c){var u=c.root,f=c.props;u.element.id="filepond--assistant-"+f.id,a(u.element,"role","alert"),a(u.element,"aria-live","polite"),a(u.element,"aria-relevant","additions")},Y0=null,q0=null,Gf=[],Uc=function(c,u){c.element.textContent=u},nI=function(c){c.element.textContent=""},$0=function(c,u,f){var m=c.query("GET_TOTAL_ITEMS");Uc(c,f+" "+u+", "+m+" "+(m===1?c.query("GET_LABEL_FILE_COUNT_SINGULAR"):c.query("GET_LABEL_FILE_COUNT_PLURAL"))),clearTimeout(q0),q0=setTimeout(function(){nI(c)},1500)},Z0=function(c){return c.element.parentNode.contains(document.activeElement)},oI=function(c){var u=c.root,f=c.action;if(Z0(u)){u.element.textContent="";var m=u.query("GET_ITEM",f.id);Gf.push(m.filename),clearTimeout(Y0),Y0=setTimeout(function(){$0(u,Gf.join(", "),u.query("GET_LABEL_FILE_ADDED")),Gf.length=0},750)}},aI=function(c){var u=c.root,f=c.action;if(Z0(u)){var m=f.item;$0(u,m.filename,u.query("GET_LABEL_FILE_REMOVED"))}},sI=function(c){var u=c.root,f=c.action,m=u.query("GET_ITEM",f.id),y=m.filename,x=u.query("GET_LABEL_FILE_PROCESSING_COMPLETE");Uc(u,y+" "+x)},K0=function(c){var u=c.root,f=c.action,m=u.query("GET_ITEM",f.id),y=m.filename,x=u.query("GET_LABEL_FILE_PROCESSING_ABORTED");Uc(u,y+" "+x)},Gc=function(c){var u=c.root,f=c.action,m=u.query("GET_ITEM",f.id),y=m.filename;Uc(u,f.status.main+" "+y+" "+f.status.sub)},lI=br({create:iI,ignoreRect:!0,ignoreRectUpdate:!0,write:Yr({DID_LOAD_ITEM:oI,DID_REMOVE_ITEM:aI,DID_COMPLETE_ITEM_PROCESSING:sI,DID_ABORT_ITEM_PROCESSING:K0,DID_REVERT_ITEM_PROCESSING:K0,DID_THROW_ITEM_REMOVE_ERROR:Gc,DID_THROW_ITEM_LOAD_ERROR:Gc,DID_THROW_ITEM_INVALID:Gc,DID_THROW_ITEM_PROCESSING_ERROR:Gc}),tag:"span",name:"assistant"}),Q0=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"-";return c.replace(new RegExp(u+".","g"),function(f){return f.charAt(1).toUpperCase()})},J0=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,m=Date.now(),y=null;return function(){for(var x=arguments.length,w=new Array(x),C=0;C<x;C++)w[C]=arguments[C];clearTimeout(y);var R=Date.now()-m,M=function(){m=Date.now(),c.apply(void 0,w)};R<u?f||(y=setTimeout(M,u-R)):M()}},cI=1e6,jc=function(c){return c.preventDefault()},uI=function(c){var u=c.root,f=c.props,m=u.query("GET_ID");m&&(u.element.id=m);var y=u.query("GET_CLASS_NAME");y&&y.split(" ").filter(function(B){return B.length}).forEach(function(B){u.element.classList.add(B)}),u.ref.label=u.appendChildView(u.createChildView(hw,Object.assign({},f,{translateY:null,caption:u.query("GET_LABEL_IDLE")}))),u.ref.list=u.appendChildView(u.createChildView(sw,{translateY:null})),u.ref.panel=u.appendChildView(u.createChildView(T0,{name:"panel-root"})),u.ref.assistant=u.appendChildView(u.createChildView(lI,Object.assign({},f))),u.ref.data=u.appendChildView(u.createChildView(Ow,Object.assign({},f))),u.ref.measure=bn("div"),u.ref.measure.style.height="100%",u.element.appendChild(u.ref.measure),u.ref.bounds=null,u.query("GET_STYLES").filter(function(B){return!on(B.value)}).map(function(B){var V=B.name,K=B.value;u.element.dataset[V]=K}),u.ref.widthPrevious=null,u.ref.widthUpdated=J0(function(){u.ref.updateHistory=[],u.dispatch("DID_RESIZE_ROOT")},250),u.ref.previousAspectRatio=null,u.ref.updateHistory=[];var x=window.matchMedia("(pointer: fine) and (hover: hover)").matches,w="PointerEvent"in window;u.query("GET_ALLOW_REORDER")&&w&&!x&&(u.element.addEventListener("touchmove",jc,{passive:!1}),u.element.addEventListener("gesturestart",jc));var C=u.query("GET_CREDITS"),R=C.length===2;if(R){var M=document.createElement("a");M.className="filepond--credits",M.href=C[0],M.tabIndex=-1,M.target="_blank",M.rel="noopener noreferrer",M.textContent=C[1],u.element.appendChild(M),u.ref.credits=M}},dI=function(c){var u=c.root,f=c.props,m=c.actions;if(gI({root:u,props:f,actions:m}),m.filter(function(bt){return/^DID_SET_STYLE_/.test(bt.type)}).filter(function(bt){return!on(bt.data.value)}).map(function(bt){var nr=bt.type,fr=bt.data,Ma=Q0(nr.substring(8).toLowerCase(),"_");u.element.dataset[Ma]=fr.value,u.invalidateLayout()}),!u.rect.element.hidden){u.rect.element.width!==u.ref.widthPrevious&&(u.ref.widthPrevious=u.rect.element.width,u.ref.widthUpdated());var y=u.ref.bounds;y||(y=u.ref.bounds=pI(u),u.element.removeChild(u.ref.measure),u.ref.measure=null);var x=u.ref,w=x.hopper,C=x.label,R=x.list,M=x.panel;w&&w.updateHopperState();var B=u.query("GET_PANEL_ASPECT_RATIO"),V=u.query("GET_ALLOW_MULTIPLE"),K=u.query("GET_TOTAL_ITEMS"),ee=V?u.query("GET_MAX_FILES")||cI:1,te=K===ee,X=m.find(function(bt){return bt.type==="DID_ADD_ITEM"});if(te&&X){var oe=X.data.interactionMethod;C.opacity=0,V?C.translateY=-40:oe===yi.API?C.translateX=40:oe===yi.BROWSE?C.translateY=40:C.translateY=30}else te||(C.opacity=1,C.translateX=0,C.translateY=0);var be=fI(u),Ae=hI(u),de=C.rect.element.height,Qe=!V||te?0:de,me=te?R.rect.element.marginTop:0,Pt=K===0?0:R.rect.element.marginBottom,Nt=Qe+me+Ae.visual+Pt,ve=Qe+me+Ae.bounds+Pt;if(R.translateY=Math.max(0,Qe-R.rect.element.marginTop)-be.top,B){var De=u.rect.element.width,Me=De*B;B!==u.ref.previousAspectRatio&&(u.ref.previousAspectRatio=B,u.ref.updateHistory=[]);var ge=u.ref.updateHistory;ge.push(De);var xe=2;if(ge.length>xe*2){for(var ke=ge.length,Bt=ke-10,St=0,Be=ke;Be>=Bt;Be--)if(ge[Be]===ge[Be-2]&&St++,St>=xe)return}M.scalable=!1,M.height=Me;var re=Me-Qe-(Pt-be.bottom)-(te?me:0);Ae.visual>re?R.overflow=re:R.overflow=null,u.height=Me}else if(y.fixedHeight){M.scalable=!1;var W=y.fixedHeight-Qe-(Pt-be.bottom)-(te?me:0);Ae.visual>W?R.overflow=W:R.overflow=null}else if(y.cappedHeight){var Ie=Nt>=y.cappedHeight,$e=Math.min(y.cappedHeight,Nt);M.scalable=!0,M.height=Ie?$e:$e-be.top-be.bottom;var it=$e-Qe-(Pt-be.bottom)-(te?me:0);Nt>y.cappedHeight&&Ae.visual>it?R.overflow=it:R.overflow=null,u.height=Math.min(y.cappedHeight,ve-be.top-be.bottom)}else{var ft=K>0?be.top+be.bottom:0;M.scalable=!0,M.height=Math.max(de,Nt-ft),u.height=Math.max(de,ve-ft)}u.ref.credits&&M.heightCurrent&&(u.ref.credits.style.transform="translateY("+M.heightCurrent+"px)")}},fI=function(c){var u=c.ref.list.childViews[0].childViews[0];return u?{top:u.rect.element.marginTop,bottom:u.rect.element.marginBottom}:{top:0,bottom:0}},hI=function(c){var u=0,f=0,m=c.ref.list,y=m.childViews[0],x=y.childViews.filter(function(Ae){return Ae.rect.element.height}),w=c.query("GET_ACTIVE_ITEMS").map(function(Ae){return x.find(function(de){return de.id===Ae.id})}).filter(function(Ae){return Ae});if(w.length===0)return{visual:u,bounds:f};var C=y.rect.element.width,R=Pf(y,w,m.dragCoordinates),M=w[0].rect.element,B=M.marginTop+M.marginBottom,V=M.marginLeft+M.marginRight,K=M.width+V,ee=M.height+B,te=typeof R<"u"&&R>=0?1:0,X=w.find(function(Ae){return Ae.markedForRemoval&&Ae.opacity<.45})?-1:0,oe=w.length+te+X,be=Mf(C,K);return be===1?w.forEach(function(Ae){var de=Ae.rect.element.height+B;f+=de,u+=de*Ae.opacity}):(f=Math.ceil(oe/be)*ee,u=f),{visual:u,bounds:f}},pI=function(c){var u=c.ref.measureHeight||null,f=parseInt(c.style.maxHeight,10)||null,m=u===0?null:u;return{cappedHeight:f,fixedHeight:m}},jf=function(c,u){var f=c.query("GET_ALLOW_REPLACE"),m=c.query("GET_ALLOW_MULTIPLE"),y=c.query("GET_TOTAL_ITEMS"),x=c.query("GET_MAX_FILES"),w=u.length;if(!m&&w>1)return c.dispatch("DID_THROW_MAX_FILES",{source:u,error:xr("warning",0,"Max files")}),!0;if(x=m?x:1,!m&&f)return!1;var C=mo(x);return C&&y+w>x?(c.dispatch("DID_THROW_MAX_FILES",{source:u,error:xr("warning",0,"Max files")}),!0):!1},mI=function(c,u,f){var m=c.childViews[0];return Pf(m,u,{left:f.scopeLeft-m.rect.element.left,top:f.scopeTop-(c.rect.outer.top+c.rect.element.marginTop+c.rect.element.scrollTop)})},ev=function(c){var u=c.query("GET_ALLOW_DROP"),f=c.query("GET_DISABLED"),m=u&&!f;if(m&&!c.ref.hopper){var y=Jw(c.element,function(x){var w=c.query("GET_BEFORE_DROP_FILE")||function(){return!0},C=c.query("GET_DROP_VALIDATION");return C?x.every(function(R){return Fr("ALLOW_HOPPER_ITEM",R,{query:c.query}).every(function(M){return M===!0})&&w(R)}):!0},{filterItems:function(w){var C=c.query("GET_IGNORED_FILES");return w.filter(function(R){return Ao(R)?!C.includes(R.name.toLowerCase()):!0})},catchesDropsOnPage:c.query("GET_DROP_ON_PAGE"),requiresDropOnElement:c.query("GET_DROP_ON_ELEMENT")});y.onload=function(x,w){var C=c.ref.list.childViews[0],R=C.childViews.filter(function(B){return B.rect.element.height}),M=c.query("GET_ACTIVE_ITEMS").map(function(B){return R.find(function(V){return V.id===B.id})}).filter(function(B){return B});jt("ADD_ITEMS",x,{dispatch:c.dispatch}).then(function(B){if(jf(c,B))return!1;c.dispatch("ADD_ITEMS",{items:B,index:mI(c.ref.list,M,w),interactionMethod:yi.DROP})}),c.dispatch("DID_DROP",{position:w}),c.dispatch("DID_END_DRAG",{position:w})},y.ondragstart=function(x){c.dispatch("DID_START_DRAG",{position:x})},y.ondrag=J0(function(x){c.dispatch("DID_DRAG",{position:x})}),y.ondragend=function(x){c.dispatch("DID_END_DRAG",{position:x})},c.ref.hopper=y,c.ref.drip=c.appendChildView(c.createChildView(xw))}else!m&&c.ref.hopper&&(c.ref.hopper.destroy(),c.ref.hopper=null,c.removeChildView(c.ref.drip))},tv=function(c,u){var f=c.query("GET_ALLOW_BROWSE"),m=c.query("GET_DISABLED"),y=f&&!m;y&&!c.ref.browser?c.ref.browser=c.appendChildView(c.createChildView(dw,Object.assign({},u,{onload:function(w){jt("ADD_ITEMS",w,{dispatch:c.dispatch}).then(function(C){if(jf(c,C))return!1;c.dispatch("ADD_ITEMS",{items:C,index:-1,interactionMethod:yi.BROWSE})})}})),0):!y&&c.ref.browser&&(c.removeChildView(c.ref.browser),c.ref.browser=null)},rv=function(c){var u=c.query("GET_ALLOW_PASTE"),f=c.query("GET_DISABLED"),m=u&&!f;m&&!c.ref.paster?(c.ref.paster=rI(),c.ref.paster.onload=function(y){jt("ADD_ITEMS",y,{dispatch:c.dispatch}).then(function(x){if(jf(c,x))return!1;c.dispatch("ADD_ITEMS",{items:x,index:-1,interactionMethod:yi.PASTE})})}):!m&&c.ref.paster&&(c.ref.paster.destroy(),c.ref.paster=null)},gI=Yr({DID_SET_ALLOW_BROWSE:function(c){var u=c.root,f=c.props;tv(u,f)},DID_SET_ALLOW_DROP:function(c){var u=c.root;ev(u)},DID_SET_ALLOW_PASTE:function(c){var u=c.root;rv(u)},DID_SET_DISABLED:function(c){var u=c.root,f=c.props;ev(u),rv(u),tv(u,f);var m=u.query("GET_DISABLED");m?u.element.dataset.disabled="disabled":u.element.removeAttribute("data-disabled")}}),vI=br({name:"root",read:function(c){var u=c.root;u.ref.measure&&(u.ref.measureHeight=u.ref.measure.offsetHeight)},create:uI,write:dI,destroy:function(c){var u=c.root;u.ref.paster&&u.ref.paster.destroy(),u.ref.hopper&&u.ref.hopper.destroy(),u.element.removeEventListener("touchmove",jc),u.element.removeEventListener("gesturestart",jc)},mixins:{styles:["height"]}}),_I=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=null,f=Di(),m=t(tf(f),[Lx,bc(f)],[cE,yc(f)]);m.dispatch("SET_OPTIONS",{options:c});var y=function(){document.hidden||m.dispatch("KICK")};document.addEventListener("visibilitychange",y);var x=null,w=!1,C=!1,R=null,M=null,B=function(){w||(w=!0),clearTimeout(x),x=setTimeout(function(){w=!1,R=null,M=null,C&&(C=!1,m.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",B);var V=vI(m,{id:xc()}),K=!1,ee=!1,te={_read:function(){w&&(M=window.innerWidth,R||(R=M),!C&&M!==R&&(m.dispatch("DID_START_RESIZE"),C=!0)),ee&&K&&(K=V.element.offsetParent===null),!K&&(V._read(),ee=V.rect.element.hidden)},_write:function(re){var W=m.processActionQueue().filter(function(Ie){return!/^SET_/.test(Ie.type)});K&&!W.length||(Ae(W),K=V._write(re,W,C),fe(m.query("GET_ITEMS")),K&&m.processDispatchQueue())}},X=function(re){return function(W){var Ie={type:re};if(!W)return Ie;if(W.hasOwnProperty("error")&&(Ie.error=W.error?Object.assign({},W.error):null),W.status&&(Ie.status=Object.assign({},W.status)),W.file&&(Ie.output=W.file),W.source)Ie.file=W.source;else if(W.item||W.id){var $e=W.item?W.item:m.query("GET_ITEM",W.id);Ie.file=$e?$($e):null}return W.items&&(Ie.items=W.items.map($)),/progress/.test(re)&&(Ie.progress=W.progress),W.hasOwnProperty("origin")&&W.hasOwnProperty("target")&&(Ie.origin=W.origin,Ie.target=W.target),Ie}},oe={DID_DESTROY:X("destroy"),DID_INIT:X("init"),DID_THROW_MAX_FILES:X("warning"),DID_INIT_ITEM:X("initfile"),DID_START_ITEM_LOAD:X("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:X("addfileprogress"),DID_LOAD_ITEM:X("addfile"),DID_THROW_ITEM_INVALID:[X("error"),X("addfile")],DID_THROW_ITEM_LOAD_ERROR:[X("error"),X("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[X("error"),X("removefile")],DID_PREPARE_OUTPUT:X("preparefile"),DID_START_ITEM_PROCESSING:X("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:X("processfileprogress"),DID_ABORT_ITEM_PROCESSING:X("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:X("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:X("processfiles"),DID_REVERT_ITEM_PROCESSING:X("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[X("error"),X("processfile")],DID_REMOVE_ITEM:X("removefile"),DID_UPDATE_ITEMS:X("updatefiles"),DID_ACTIVATE_ITEM:X("activatefile"),DID_REORDER_ITEMS:X("reorderfiles")},be=function(re){var W=Object.assign({pond:St},re);delete W.type,V.element.dispatchEvent(new CustomEvent("FilePond:"+re.type,{detail:W,bubbles:!0,cancelable:!0,composed:!0}));var Ie=[];re.hasOwnProperty("error")&&Ie.push(re.error),re.hasOwnProperty("file")&&Ie.push(re.file);var $e=["type","error","file"];Object.keys(re).filter(function(ft){return!$e.includes(ft)}).forEach(function(ft){return Ie.push(re[ft])}),St.fire.apply(St,[re.type].concat(Ie));var it=m.query("GET_ON"+re.type.toUpperCase());it&&it.apply(void 0,Ie)},Ae=function(re){re.length&&re.filter(function(W){return oe[W.type]}).forEach(function(W){var Ie=oe[W.type];(Array.isArray(Ie)?Ie:[Ie]).forEach(function($e){W.type==="DID_INIT_ITEM"?be($e(W.data)):setTimeout(function(){be($e(W.data))},0)})})},de=function(re){return m.dispatch("SET_OPTIONS",{options:re})},Qe=function(re){return m.query("GET_ACTIVE_ITEM",re)},me=function(re){return new Promise(function(W,Ie){m.dispatch("REQUEST_ITEM_PREPARE",{query:re,success:function(it){W(it)},failure:function(it){Ie(it)}})})},Pt=function(re){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(Ie,$e){De([{source:re,options:W}],{index:W.index}).then(function(it){return Ie(it&&it[0])}).catch($e)})},Nt=function(re){return re.file&&re.id},ve=function(re,W){return typeof re=="object"&&!Nt(re)&&!W&&(W=re,re=void 0),m.dispatch("REMOVE_ITEM",Object.assign({},W,{query:re})),m.query("GET_ACTIVE_ITEM",re)===null},De=function(){for(var re=arguments.length,W=new Array(re),Ie=0;Ie<re;Ie++)W[Ie]=arguments[Ie];return new Promise(function($e,it){var ft=[],bt={};if(po(W[0]))ft.push.apply(ft,W[0]),Object.assign(bt,W[1]||{});else{var nr=W[W.length-1];typeof nr=="object"&&!(nr instanceof Blob)&&Object.assign(bt,W.pop()),ft.push.apply(ft,W)}m.dispatch("ADD_ITEMS",{items:ft,index:bt.index,interactionMethod:yi.API,success:$e,failure:it})})},Me=function(){return m.query("GET_ACTIVE_ITEMS")},ge=function(re){return new Promise(function(W,Ie){m.dispatch("REQUEST_ITEM_PROCESSING",{query:re,success:function(it){W(it)},failure:function(it){Ie(it)}})})},xe=function(){for(var re=arguments.length,W=new Array(re),Ie=0;Ie<re;Ie++)W[Ie]=arguments[Ie];var $e=Array.isArray(W[0])?W[0]:W,it=$e.length?$e:Me();return Promise.all(it.map(me))},ke=function(){for(var re=arguments.length,W=new Array(re),Ie=0;Ie<re;Ie++)W[Ie]=arguments[Ie];var $e=Array.isArray(W[0])?W[0]:W;if(!$e.length){var it=Me().filter(function(ft){return!(ft.status===ce.IDLE&&ft.origin===Fe.LOCAL)&&ft.status!==ce.PROCESSING&&ft.status!==ce.PROCESSING_COMPLETE&&ft.status!==ce.PROCESSING_REVERT_ERROR});return Promise.all(it.map(ge))}return Promise.all($e.map(ge))},Bt=function(){for(var re=arguments.length,W=new Array(re),Ie=0;Ie<re;Ie++)W[Ie]=arguments[Ie];var $e=Array.isArray(W[0])?W[0]:W,it;typeof $e[$e.length-1]=="object"?it=$e.pop():Array.isArray(W[0])&&(it=W[1]);var ft=Me();if(!$e.length)return Promise.all(ft.map(function(nr){return ve(nr,it)}));var bt=$e.map(function(nr){return Y(nr)?ft[nr]?ft[nr].id:null:nr}).filter(function(nr){return nr});return bt.map(function(nr){return ve(nr,it)})},St=Object.assign({},ze(),{},te,{},go(m,f),{setOptions:de,addFile:Pt,addFiles:De,getFile:Qe,processFile:ge,prepareFile:me,removeFile:ve,moveFile:function(re,W){return m.dispatch("MOVE_ITEM",{query:re,index:W})},getFiles:Me,processFiles:ke,removeFiles:Bt,prepareFiles:xe,sort:function(re){return m.dispatch("SORT",{compare:re})},browse:function(){var re=V.element.querySelector("input[type=file]");re&&re.click()},destroy:function(){St.fire("destroy",V.element),m.dispatch("ABORT_ALL"),V._destroy(),window.removeEventListener("resize",B),document.removeEventListener("visibilitychange",y),m.dispatch("DID_DESTROY")},insertBefore:function(re){return qd(V.element,re)},insertAfter:function(re){return pc(V.element,re)},appendTo:function(re){return re.appendChild(V.element)},replaceElement:function(re){qd(V.element,re),re.parentNode.removeChild(re),u=re},restoreElement:function(){u&&(pc(u,V.element),V.element.parentNode.removeChild(V.element),u=null)},isAttachedTo:function(re){return V.element===re||u===re},element:{get:function(){return V.element}},status:{get:function(){return m.query("GET_STATUS")}}});return m.dispatch("DID_INIT"),o(St)},iv=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u={};n(Di(),function(m,y){u[m]=y[0]});var f=_I(Object.assign({},u,{},c));return f},yI=function(c){return c.charAt(0).toLowerCase()+c.slice(1)},bI=function(c){return Q0(c.replace(/^data-/,""))},xI=function g(c,u){n(u,function(f,m){n(c,function(y,x){var w=new RegExp(f),C=w.test(y);if(C&&(delete c[y],m!==!1)){if(jr(m)){c[m]=x;return}var R=m.group;Rr(m)&&!c[R]&&(c[R]={}),c[R][yI(y.replace(w,""))]=x}}),m.mapping&&g(c[m.group],m.mapping)})},EI=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=[];n(c.attributes,function(y){f.push(c.attributes[y])});var m=f.filter(function(y){return y.name}).reduce(function(y,x){var w=a(c,x.name);return y[bI(x.name)]=w===x.name?!0:w,y},{});return xI(m,u),m},wI=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};Fr("SET_ATTRIBUTE_TO_OPTION_MAP",f);var m=Object.assign({},u),y=EI(c.nodeName==="FIELDSET"?c.querySelector("input[type=file]"):c,f);Object.keys(y).forEach(function(w){Rr(y[w])?(Rr(m[w])||(m[w]={}),Object.assign(m[w],y[w])):m[w]=y[w]}),m.files=(u.files||[]).concat(Array.from(c.querySelectorAll("input:not([type=file])")).map(function(w){return{source:w.value,options:{type:w.dataset.type}}}));var x=iv(m);return c.files&&Array.from(c.files).forEach(function(w){x.addFile(w)}),x.replaceElement(c),x},II=function(){return e(arguments.length<=0?void 0:arguments[0])?wI.apply(void 0,arguments):iv.apply(void 0,arguments)},CI=["fire","_read","_write"],nv=function(c){var u={};return je(c,u,CI),u},AI=function(c,u){return c.replace(/(?:{([a-zA-Z]+)})/g,function(f,m){return u[m]})},SI=function(c){var u=new Blob(["(",c.toString(),")()"],{type:"application/javascript"}),f=URL.createObjectURL(u),m=new Worker(f);return{transfer:function(x,w){},post:function(x,w,C){var R=xc();m.onmessage=function(M){M.data.id===R&&w(M.data.message)},m.postMessage({id:R,message:x},C)},terminate:function(){m.terminate(),URL.revokeObjectURL(f)}}},TI=function(c){return new Promise(function(u,f){var m=new Image;m.onload=function(){u(m)},m.onerror=function(y){f(y)},m.src=c})},ov=function(c,u){var f=c.slice(0,c.size,c.type);return f.lastModifiedDate=c.lastModifiedDate,f.name=u,f},DI=function(c){return ov(c,c.name)},av=[],OI=function(c){if(!av.includes(c)){av.push(c);var u=c({addFilter:Un,utils:{Type:q,forin:n,isString:jr,isFile:Ao,toNaturalFileSize:b0,replaceInString:AI,getExtensionFromFilename:Pc,getFilenameWithoutExtension:f0,guesstimateMimeType:z0,getFileFromBlob:Da,getFilenameFromURL:js,createRoute:Yr,createWorker:SI,createView:br,createItemAPI:$,loadImage:TI,copyFile:DI,renameFile:ov,createBlob:s0,applyFilterChain:jt,text:Er,getNumericAspectRatioFromString:Eo},views:{fileActionButton:y0}});sn(u.options)}},RI=function(){return Object.prototype.toString.call(window.operamini)==="[object OperaMini]"},MI=function(){return"Promise"in window},PI=function(){return"slice"in Blob.prototype},NI=function(){return"URL"in window&&"createObjectURL"in window.URL},FI=function(){return"visibilityState"in document},kI=function(){return"performance"in window},LI=function(){return"supports"in(window.CSS||{})},BI=function(){return/MSIE|Trident/.test(window.navigator.userAgent)},zf=function(){var g=A()&&!RI()&&FI()&&MI()&&PI()&&NI()&&kI()&&(LI()||BI());return function(){return g}}(),Gn={apps:[]},VI="filepond",To=function(){};if(r.Status={},r.FileStatus={},r.FileOrigin={},r.OptionTypes={},r.create=To,r.destroy=To,r.parse=To,r.find=To,r.registerPlugin=To,r.getOptions=To,r.setOptions=To,zf()){Cg(function(){Gn.apps.forEach(function(g){return g._read()})},function(g){Gn.apps.forEach(function(c){return c._write(g)})});var sv=function g(){document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:zf,create:r.create,destroy:r.destroy,parse:r.parse,find:r.find,registerPlugin:r.registerPlugin,setOptions:r.setOptions}})),document.removeEventListener("DOMContentLoaded",g)};document.readyState!=="loading"?setTimeout(function(){return sv()},0):document.addEventListener("DOMContentLoaded",sv);var lv=function(){return n(Di(),function(c,u){r.OptionTypes[c]=u[1]})};r.Status=Object.assign({},yn),r.FileOrigin=Object.assign({},Fe),r.FileStatus=Object.assign({},ce),r.OptionTypes={},lv(),r.create=function(){var c=II.apply(void 0,arguments);return c.on("destroy",r.destroy),Gn.apps.push(c),nv(c)},r.destroy=function(c){var u=Gn.apps.findIndex(function(m){return m.isAttachedTo(c)});if(u>=0){var f=Gn.apps.splice(u,1)[0];return f.restoreElement(),!0}return!1},r.parse=function(c){var u=Array.from(c.querySelectorAll("."+VI)),f=u.filter(function(m){return!Gn.apps.find(function(y){return y.isAttachedTo(m)})});return f.map(function(m){return r.create(m)})},r.find=function(c){var u=Gn.apps.find(function(f){return f.isAttachedTo(c)});return u?nv(u):null},r.registerPlugin=function(){for(var c=arguments.length,u=new Array(c),f=0;f<c;f++)u[f]=arguments[f];u.forEach(OI),lv()},r.getOptions=function(){var c={};return n(Di(),function(u,f){c[u]=f[0]}),c},r.setOptions=function(c){return Rr(c)&&(Gn.apps.forEach(function(u){u.setOptions(c)}),Aa(c)),r.getOptions()}}r.supported=zf,Object.defineProperty(r,"__esModule",{value:!0})})});var lb=Wf((Rm,Mm)=>{"use strict";(function(r,e){typeof Rm=="object"&&typeof Mm<"u"?Mm.exports=e():typeof define=="function"&&define.amd?define(e):(r=r||self,r.FilePondPluginImagePreview=e())})(Rm,function(){"use strict";var r=function(b){return/^image/.test(b.type)};function e(S){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(b){return typeof b}:e=function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},e(S)}var t;function i(S,b,I,T){t||(t=typeof Symbol=="function"&&Symbol.for&&Symbol.for("react.element")||60103);var D=S&&S.defaultProps,k=arguments.length-3;if(!b&&k!==0&&(b={children:void 0}),b&&D)for(var H in D)b[H]===void 0&&(b[H]=D[H]);else b||(b=D||{});if(k===1)b.children=T;else if(k>1){for(var z=new Array(k),Z=0;Z<k;Z++)z[Z]=arguments[Z+3];b.children=z}return{$$typeof:t,type:S,key:I===void 0?null:""+I,ref:null,props:b,_owner:null}}function n(S){var b;if(typeof Symbol=="function"&&(Symbol.asyncIterator&&(b=S[Symbol.asyncIterator],b!=null)||Symbol.iterator&&(b=S[Symbol.iterator],b!=null)))return b.call(S);throw new TypeError("Object is not async iterable")}function o(S){this.wrapped=S}function a(S){var b,I;function T(H,z){return new Promise(function(Z,he){var Te={key:H,arg:z,resolve:Z,reject:he,next:null};I?I=I.next=Te:(b=I=Te,D(H,z))})}function D(H,z){try{var Z=S[H](z),he=Z.value,Te=he instanceof o;Promise.resolve(Te?he.wrapped:he).then(function(Ce){if(Te){D("next",Ce);return}k(Z.done?"return":"normal",Ce)},function(Ce){D("throw",Ce)})}catch(Ce){k("throw",Ce)}}function k(H,z){switch(H){case"return":b.resolve({value:z,done:!0});break;case"throw":b.reject(z);break;default:b.resolve({value:z,done:!1});break}b=b.next,b?D(b.key,b.arg):I=null}this._invoke=T,typeof S.return!="function"&&(this.return=void 0)}typeof Symbol=="function"&&Symbol.asyncIterator&&(a.prototype[Symbol.asyncIterator]=function(){return this}),a.prototype.next=function(S){return this._invoke("next",S)},a.prototype.throw=function(S){return this._invoke("throw",S)},a.prototype.return=function(S){return this._invoke("return",S)};function s(S){return function(){return new a(S.apply(this,arguments))}}function l(S){return new o(S)}function d(S,b){var I={},T=!1;function D(k,H){return T=!0,H=new Promise(function(z){z(S[k](H))}),{done:!1,value:b(H)}}return typeof Symbol=="function"&&Symbol.iterator&&(I[Symbol.iterator]=function(){return this}),I.next=function(k){return T?(T=!1,k):D("next",k)},typeof S.throw=="function"&&(I.throw=function(k){if(T)throw T=!1,k;return D("throw",k)}),typeof S.return=="function"&&(I.return=function(k){return D("return",k)}),I}function h(S,b,I,T,D,k,H){try{var z=S[k](H),Z=z.value}catch(he){I(he);return}z.done?b(Z):Promise.resolve(Z).then(T,D)}function p(S){return function(){var b=this,I=arguments;return new Promise(function(T,D){var k=S.apply(b,I);function H(Z){h(k,T,D,H,z,"next",Z)}function z(Z){h(k,T,D,H,z,"throw",Z)}H(void 0)})}}function v(S,b){if(!(S instanceof b))throw new TypeError("Cannot call a class as a function")}function _(S,b){for(var I=0;I<b.length;I++){var T=b[I];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(S,T.key,T)}}function E(S,b,I){return b&&_(S.prototype,b),I&&_(S,I),S}function A(S,b){for(var I in b){var T=b[I];T.configurable=T.enumerable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(S,I,T)}if(Object.getOwnPropertySymbols)for(var D=Object.getOwnPropertySymbols(b),k=0;k<D.length;k++){var H=D[k],T=b[H];T.configurable=T.enumerable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(S,H,T)}return S}function N(S,b){for(var I=Object.getOwnPropertyNames(b),T=0;T<I.length;T++){var D=I[T],k=Object.getOwnPropertyDescriptor(b,D);k&&k.configurable&&S[D]===void 0&&Object.defineProperty(S,D,k)}return S}function F(S,b,I){return b in S?Object.defineProperty(S,b,{value:I,enumerable:!0,configurable:!0,writable:!0}):S[b]=I,S}function P(){return P=Object.assign||function(S){for(var b=1;b<arguments.length;b++){var I=arguments[b];for(var T in I)Object.prototype.hasOwnProperty.call(I,T)&&(S[T]=I[T])}return S},P.apply(this,arguments)}function L(S){for(var b=1;b<arguments.length;b++){var I=arguments[b]!=null?arguments[b]:{},T=Object.keys(I);typeof Object.getOwnPropertySymbols=="function"&&(T=T.concat(Object.getOwnPropertySymbols(I).filter(function(D){return Object.getOwnPropertyDescriptor(I,D).enumerable}))),T.forEach(function(D){F(S,D,I[D])})}return S}function G(S,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(b&&b.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),b&&ie(S,b)}function Y(S,b){S.prototype=Object.create(b.prototype),S.prototype.constructor=S,S.__proto__=b}function Q(S){return Q=Object.setPrototypeOf?Object.getPrototypeOf:function(I){return I.__proto__||Object.getPrototypeOf(I)},Q(S)}function ie(S,b){return ie=Object.setPrototypeOf||function(T,D){return T.__proto__=D,T},ie(S,b)}function ye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Ne(S,b,I){return ye()?Ne=Reflect.construct:Ne=function(D,k,H){var z=[null];z.push.apply(z,k);var Z=Function.bind.apply(D,z),he=new Z;return H&&ie(he,H.prototype),he},Ne.apply(null,arguments)}function Ge(S){return Function.toString.call(S).indexOf("[native code]")!==-1}function At(S){var b=typeof Map=="function"?new Map:void 0;return At=function(T){if(T===null||!Ge(T))return T;if(typeof T!="function")throw new TypeError("Super expression must either be null or a function");if(typeof b<"u"){if(b.has(T))return b.get(T);b.set(T,D)}function D(){return Ne(T,arguments,Q(this).constructor)}return D.prototype=Object.create(T.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),ie(D,T)},At(S)}function nt(S,b){return b!=null&&typeof Symbol<"u"&&b[Symbol.hasInstance]?b[Symbol.hasInstance](S):S instanceof b}function wt(S){return S&&S.__esModule?S:{default:S}}function Ur(S){if(S&&S.__esModule)return S;var b={};if(S!=null){for(var I in S)if(Object.prototype.hasOwnProperty.call(S,I)){var T=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(S,I):{};T.get||T.set?Object.defineProperty(b,I,T):b[I]=S[I]}}return b.default=S,b}function ji(S,b){if(S!==b)throw new TypeError("Cannot instantiate an arrow function")}function ha(S){if(S==null)throw new TypeError("Cannot destructure undefined")}function ho(S,b){if(S==null)return{};var I={},T=Object.keys(S),D,k;for(k=0;k<T.length;k++)D=T[k],!(b.indexOf(D)>=0)&&(I[D]=S[D]);return I}function pa(S,b){if(S==null)return{};var I=ho(S,b),T,D;if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(S);for(D=0;D<k.length;D++)T=k[D],!(b.indexOf(T)>=0)&&Object.prototype.propertyIsEnumerable.call(S,T)&&(I[T]=S[T])}return I}function Gr(S){if(S===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function wg(S,b){return b&&(typeof b=="object"||typeof b=="function")?b:Gr(S)}function hc(S,b){for(;!Object.prototype.hasOwnProperty.call(S,b)&&(S=Q(S),S!==null););return S}function Ps(S,b,I){return typeof Reflect<"u"&&Reflect.get?Ps=Reflect.get:Ps=function(D,k,H){var z=hc(D,k);if(z){var Z=Object.getOwnPropertyDescriptor(z,k);return Z.get?Z.get.call(H):Z.value}},Ps(S,b,I||S)}function ma(S,b,I,T){return typeof Reflect<"u"&&Reflect.set?ma=Reflect.set:ma=function(k,H,z,Z){var he=hc(k,H),Te;if(he){if(Te=Object.getOwnPropertyDescriptor(he,H),Te.set)return Te.set.call(Z,z),!0;if(!Te.writable)return!1}if(Te=Object.getOwnPropertyDescriptor(Z,H),Te){if(!Te.writable)return!1;Te.value=z,Object.defineProperty(Z,H,Te)}else F(Z,H,z);return!0},ma(S,b,I,T)}function Ig(S,b,I,T,D){var k=ma(S,b,I,T||S);if(!k&&D)throw new Error("failed to set property");return I}function Yd(S,b){return b||(b=S.slice(0)),Object.freeze(Object.defineProperties(S,{raw:{value:Object.freeze(b)}}))}function br(S,b){return b||(b=S.slice(0)),S.raw=b,S}function Cg(S,b){if(S===pc)throw new ReferenceError(b+" is not defined - temporal dead zone");return S}function Yr(S){throw new Error('"'+S+'" is read-only')}function qd(S){throw new Error('Class "'+S+'" cannot be referenced in computed property keys.')}var pc={};function po(S,b){return ga(S)||jr(S,b)||_a()}function on(S,b){return ga(S)||mc(S,b)||_a()}function $d(S){return ga(S)||Fs(S)||_a()}function Ns(S){return Zd(S)||Fs(S)||va()}function Zd(S){if(Array.isArray(S)){for(var b=0,I=new Array(S.length);b<S.length;b++)I[b]=S[b];return I}}function ga(S){if(Array.isArray(S))return S}function Fs(S){if(Symbol.iterator in Object(S)||Object.prototype.toString.call(S)==="[object Arguments]")return Array.from(S)}function jr(S,b){var I=[],T=!0,D=!1,k=void 0;try{for(var H=S[Symbol.iterator](),z;!(T=(z=H.next()).done)&&(I.push(z.value),!(b&&I.length===b));T=!0);}catch(Z){D=!0,k=Z}finally{try{!T&&H.return!=null&&H.return()}finally{if(D)throw k}}return I}function mc(S,b){for(var I=[],T=S[Symbol.iterator](),D;!(D=T.next()).done&&(I.push(D.value),!(b&&I.length===b)););return I}function va(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function mo(S){return function(){var b=S.apply(this,arguments);return b.next(),b}}function gc(S,b){if(typeof S!="object"||S===null)return S;var I=S[Symbol.toPrimitive];if(I!==void 0){var T=I.call(S,b||"default");if(typeof T!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(S)}function an(S){var b=gc(S,"string");return typeof b=="symbol"?b:String(b)}function Ag(S,b){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and set to use loose mode. To use proposal-class-properties in spec mode with decorators, wait for the next major version of decorators in stage 2.")}function Kd(S,b,I,T){I&&Object.defineProperty(S,b,{enumerable:I.enumerable,configurable:I.configurable,writable:I.writable,value:I.initializer?I.initializer.call(T):void 0})}function Sg(S,b,I,T,D){var k={};return Object.keys(T).forEach(function(H){k[H]=T[H]}),k.enumerable=!!k.enumerable,k.configurable=!!k.configurable,("value"in k||k.initializer)&&(k.writable=!0),k=I.slice().reverse().reduce(function(H,z){return z(S,b,H)||H},k),D&&k.initializer!==void 0&&(k.value=k.initializer?k.initializer.call(D):void 0,k.initializer=void 0),k.initializer===void 0&&(Object.defineProperty(S,b,k),k=null),k}var Qd=0;function Tg(S){return"__private_"+Qd+++"_"+S}function Dg(S,b){if(!Object.prototype.hasOwnProperty.call(S,b))throw new TypeError("attempted to use private field on non-instance");return S}function Rr(S,b){if(!b.has(S))throw new TypeError("attempted to get private field on non-instance");var I=b.get(S);return I.get?I.get.call(S):I.value}function Og(S,b,I){if(!b.has(S))throw new TypeError("attempted to set private field on non-instance");var T=b.get(S);if(T.set)T.set.call(S,I);else{if(!T.writable)throw new TypeError("attempted to set read only private field");T.value=I}return I}function vc(S,b,I){if(S!==b)throw new TypeError("Private static access of wrong provenance");return I.value}function Rg(S,b,I,T){if(S!==b)throw new TypeError("Private static access of wrong provenance");if(!I.writable)throw new TypeError("attempted to set read only private field");return I.value=T,T}function Mg(S,b,I){if(S!==b)throw new TypeError("Private static access of wrong provenance");return I}function Pg(){throw new TypeError("attempted to set read only static private field")}function Jd(S,b,I,T){var D=_c();if(T)for(var k=0;k<T.length;k++)D=T[k](D);var H=b(function(he){D.initializeInstanceElements(he,z.elements)},I),z=D.decorateClass(ya(H.d.map(ef)),S);return D.initializeClassElements(H.F,z.elements),D.runClassFinishers(H.F,z.finishers)}function _c(){_c=function(){return S};var S={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(b,I){["method","field"].forEach(function(T){I.forEach(function(D){D.kind===T&&D.placement==="own"&&this.defineClassElement(b,D)},this)},this)},initializeClassElements:function(b,I){var T=b.prototype;["method","field"].forEach(function(D){I.forEach(function(k){var H=k.placement;if(k.kind===D&&(H==="static"||H==="prototype")){var z=H==="static"?b:T;this.defineClassElement(z,k)}},this)},this)},defineClassElement:function(b,I){var T=I.descriptor;if(I.kind==="field"){var D=I.initializer;T={enumerable:T.enumerable,writable:T.writable,configurable:T.configurable,value:D===void 0?void 0:D.call(b)}}Object.defineProperty(b,I.key,T)},decorateClass:function(b,I){var T=[],D=[],k={static:[],prototype:[],own:[]};if(b.forEach(function(z){this.addElementPlacement(z,k)},this),b.forEach(function(z){if(!go(z))return T.push(z);var Z=this.decorateElement(z,k);T.push(Z.element),T.push.apply(T,Z.extras),D.push.apply(D,Z.finishers)},this),!I)return{elements:T,finishers:D};var H=this.decorateConstructor(T,I);return D.push.apply(D,H.finishers),H.finishers=D,H},addElementPlacement:function(b,I,T){var D=I[b.placement];if(!T&&D.indexOf(b.key)!==-1)throw new TypeError("Duplicated element ("+b.key+")");D.push(b.key)},decorateElement:function(b,I){for(var T=[],D=[],k=b.decorators,H=k.length-1;H>=0;H--){var z=I[b.placement];z.splice(z.indexOf(b.key),1);var Z=this.fromElementDescriptor(b),he=this.toElementFinisherExtras((0,k[H])(Z)||Z);b=he.element,this.addElementPlacement(b,I),he.finisher&&D.push(he.finisher);var Te=he.extras;if(Te){for(var Ce=0;Ce<Te.length;Ce++)this.addElementPlacement(Te[Ce],I);T.push.apply(T,Te)}}return{element:b,finishers:D,extras:T}},decorateConstructor:function(b,I){for(var T=[],D=I.length-1;D>=0;D--){var k=this.fromClassDescriptor(b),H=this.toClassDescriptor((0,I[D])(k)||k);if(H.finisher!==void 0&&T.push(H.finisher),H.elements!==void 0){b=H.elements;for(var z=0;z<b.length-1;z++)for(var Z=z+1;Z<b.length;Z++)if(b[z].key===b[Z].key&&b[z].placement===b[Z].placement)throw new TypeError("Duplicated element ("+b[z].key+")")}}return{elements:b,finishers:T}},fromElementDescriptor:function(b){var I={kind:b.kind,key:b.key,placement:b.placement,descriptor:b.descriptor},T={value:"Descriptor",configurable:!0};return Object.defineProperty(I,Symbol.toStringTag,T),b.kind==="field"&&(I.initializer=b.initializer),I},toElementDescriptors:function(b){if(b!==void 0)return $d(b).map(function(I){var T=this.toElementDescriptor(I);return this.disallowProperty(I,"finisher","An element descriptor"),this.disallowProperty(I,"extras","An element descriptor"),T},this)},toElementDescriptor:function(b){var I=String(b.kind);if(I!=="method"&&I!=="field")throw new TypeError(`An element descriptor's .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "`+I+'"');var T=an(b.key),D=String(b.placement);if(D!=="static"&&D!=="prototype"&&D!=="own")throw new TypeError(`An element descriptor's .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "`+D+'"');var k=b.descriptor;this.disallowProperty(b,"elements","An element descriptor");var H={kind:I,key:T,placement:D,descriptor:Object.assign({},k)};return I!=="field"?this.disallowProperty(b,"initializer","A method descriptor"):(this.disallowProperty(k,"get","The property descriptor of a field descriptor"),this.disallowProperty(k,"set","The property descriptor of a field descriptor"),this.disallowProperty(k,"value","The property descriptor of a field descriptor"),H.initializer=b.initializer),H},toElementFinisherExtras:function(b){var I=this.toElementDescriptor(b),T=bc(b,"finisher"),D=this.toElementDescriptors(b.extras);return{element:I,finisher:T,extras:D}},fromClassDescriptor:function(b){var I={kind:"class",elements:b.map(this.fromElementDescriptor,this)},T={value:"Descriptor",configurable:!0};return Object.defineProperty(I,Symbol.toStringTag,T),I},toClassDescriptor:function(b){var I=String(b.kind);if(I!=="class")throw new TypeError(`A class descriptor's .kind property must be "class", but a decorator created a class descriptor with .kind "`+I+'"');this.disallowProperty(b,"key","A class descriptor"),this.disallowProperty(b,"placement","A class descriptor"),this.disallowProperty(b,"descriptor","A class descriptor"),this.disallowProperty(b,"initializer","A class descriptor"),this.disallowProperty(b,"extras","A class descriptor");var T=bc(b,"finisher"),D=this.toElementDescriptors(b.elements);return{elements:D,finisher:T}},runClassFinishers:function(b,I){for(var T=0;T<I.length;T++){var D=(0,I[T])(b);if(D!==void 0){if(typeof D!="function")throw new TypeError("Finishers must return a constructor.");b=D}}return b},disallowProperty:function(b,I,T){if(b[I]!==void 0)throw new TypeError(T+" can't have a ."+I+" property.")}};return S}function ef(S){var b=an(S.key),I;S.kind==="method"?I={value:S.value,writable:!0,configurable:!0,enumerable:!1}:S.kind==="get"?I={get:S.value,configurable:!0,enumerable:!1}:S.kind==="set"?I={set:S.value,configurable:!0,enumerable:!1}:S.kind==="field"&&(I={configurable:!0,writable:!0,enumerable:!0});var T={kind:S.kind==="field"?"field":"method",key:b,placement:S.static?"static":S.kind==="field"?"own":"prototype",descriptor:I};return S.decorators&&(T.decorators=S.decorators),S.kind==="field"&&(T.initializer=S.value),T}function tf(S,b){S.descriptor.get!==void 0?b.descriptor.get=S.descriptor.get:b.descriptor.set=S.descriptor.set}function ya(S){for(var b=[],I=function(H){return H.kind==="method"&&H.key===D.key&&H.placement===D.placement},T=0;T<S.length;T++){var D=S[T],k;if(D.kind==="method"&&(k=b.find(I)))if(yc(D.descriptor)||yc(k.descriptor)){if(go(D)||go(k))throw new ReferenceError("Duplicated methods ("+D.key+") can't be decorated.");k.descriptor=D.descriptor}else{if(go(D)){if(go(k))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+D.key+").");k.decorators=D.decorators}tf(D,k)}else b.push(D)}return b}function go(S){return S.decorators&&S.decorators.length}function yc(S){return S!==void 0&&!(S.value===void 0&&S.writable===void 0)}function bc(S,b){var I=S[b];if(I!==void 0&&typeof I!="function")throw new TypeError("Expected '"+b+"' to be a function");return I}function yi(S,b,I){if(!b.has(S))throw new TypeError("attempted to get private field on non-instance");return I}function xc(){throw new TypeError("attempted to reassign private method")}function ba(S,b){ba=function(z,Z){return new k(z,Z)};var I=At(RegExp),T=RegExp.prototype,D=new WeakMap;function k(z,Z){var he=I.call(this,z);return D.set(he,Z),he}G(k,I),k.prototype.exec=function(z){var Z=T.exec.call(this,z);return Z&&(Z.groups=H(Z,this)),Z},k.prototype[Symbol.replace]=function(z,Z){if(typeof Z=="string"){var he=D.get(this);return T[Symbol.replace].call(this,z,Z.replace(/\$<([^>]+)>/g,function(Ce,et){return"$"+he[et]}))}else if(typeof Z=="function"){var Te=this;return T[Symbol.replace].call(this,z,function(){var Ce=[];return Ce.push.apply(Ce,arguments),typeof Ce[Ce.length-1]!="object"&&Ce.push(H(Ce,Te)),Z.apply(this,Ce)})}else return T[Symbol.replace].call(this,z,Z)};function H(z,Z){var he=D.get(Z);return Object.keys(he).reduce(function(Te,Ce){return Te[Ce]=z[he[Ce]],Te},Object.create(null))}return ba.apply(this,arguments)}var xa=function(b,I){return zi(b.x*I,b.y*I)},rf=function(b,I){return zi(b.x+I.x,b.y+I.y)},Ng=function(b){var I=Math.sqrt(b.x*b.x+b.y*b.y);return I===0?{x:0,y:0}:zi(b.x/I,b.y/I)},vo=function(b,I,T){var D=Math.cos(I),k=Math.sin(I),H=zi(b.x-T.x,b.y-T.y);return zi(T.x+D*H.x-k*H.y,T.y+k*H.x+D*H.y)},zi=function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return{x:b,y:I}},ti=function(b,I){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,D=arguments.length>3?arguments[3]:void 0;if(typeof b=="string")return parseFloat(b)*T;if(typeof b=="number")return b*(D?I[D]:Math.min(I.width,I.height))},Fg=function(b,I,T){var D=b.borderStyle||b.lineStyle||"solid",k=b.backgroundColor||b.fontColor||"transparent",H=b.borderColor||b.lineColor||"transparent",z=ti(b.borderWidth||b.lineWidth,I,T),Z=b.lineCap||"round",he=b.lineJoin||"round",Te=typeof D=="string"?"":D.map(function(et){return ti(et,I,T)}).join(","),Ce=b.opacity||1;return{"stroke-linecap":Z,"stroke-linejoin":he,"stroke-width":z||0,"stroke-dasharray":Te,stroke:H,fill:k,opacity:Ce}},bi=function(b){return b!=null},Ec=function(b,I){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,D=ti(b.x,I,T,"width")||ti(b.left,I,T,"width"),k=ti(b.y,I,T,"height")||ti(b.top,I,T,"height"),H=ti(b.width,I,T,"width"),z=ti(b.height,I,T,"height"),Z=ti(b.right,I,T,"width"),he=ti(b.bottom,I,T,"height");return bi(k)||(bi(z)&&bi(he)?k=I.height-z-he:k=he),bi(D)||(bi(H)&&bi(Z)?D=I.width-H-Z:D=Z),bi(H)||(bi(D)&&bi(Z)?H=I.width-D-Z:H=0),bi(z)||(bi(k)&&bi(he)?z=I.height-k-he:z=0),{x:D||0,y:k||0,width:H||0,height:z||0}},kg=function(b){return b.map(function(I,T){return"".concat(T===0?"M":"L"," ").concat(I.x," ").concat(I.y)}).join(" ")},Hi=function(b,I){return Object.keys(I).forEach(function(T){return b.setAttribute(T,I[T])})},wc="http://www.w3.org/2000/svg",_o=function(b,I){var T=document.createElementNS(wc,b);return I&&Hi(T,I),T},Lg=function(b){return Hi(b,Object.assign({},b.rect,b.styles))},Bg=function(b){var I=b.rect.x+b.rect.width*.5,T=b.rect.y+b.rect.height*.5,D=b.rect.width*.5,k=b.rect.height*.5;return Hi(b,Object.assign({cx:I,cy:T,rx:D,ry:k},b.styles))},ks={contain:"xMidYMid meet",cover:"xMidYMid slice"},Ic=function(b,I){Hi(b,Object.assign({},b.rect,b.styles,{preserveAspectRatio:ks[I.fit]||"none"}))},Vg={left:"start",center:"middle",right:"end"},Cc=function(b,I,T,D){var k=ti(I.fontSize,T,D),H=I.fontFamily||"sans-serif",z=I.fontWeight||"normal",Z=Vg[I.textAlign]||"start";Hi(b,Object.assign({},b.rect,b.styles,{"stroke-width":0,"font-weight":z,"font-size":k,"font-family":H,"text-anchor":Z})),b.text!==I.text&&(b.text=I.text,b.textContent=I.text.length?I.text:" ")},Ug=function(b,I,T,D){Hi(b,Object.assign({},b.rect,b.styles,{fill:"none"}));var k=b.childNodes[0],H=b.childNodes[1],z=b.childNodes[2],Z=b.rect,he={x:b.rect.x+b.rect.width,y:b.rect.y+b.rect.height};if(Hi(k,{x1:Z.x,y1:Z.y,x2:he.x,y2:he.y}),!!I.lineDecoration){H.style.display="none",z.style.display="none";var Te=Ng({x:he.x-Z.x,y:he.y-Z.y}),Ce=ti(.05,T,D);if(I.lineDecoration.indexOf("arrow-begin")!==-1){var et=xa(Te,Ce),sr=rf(Z,et),yt=vo(Z,2,sr),Gt=vo(Z,-2,sr);Hi(H,{style:"display:block;",d:"M".concat(yt.x,",").concat(yt.y," L").concat(Z.x,",").concat(Z.y," L").concat(Gt.x,",").concat(Gt.y)})}if(I.lineDecoration.indexOf("arrow-end")!==-1){var ir=xa(Te,-Ce),er=rf(he,ir),ze=vo(he,2,er),je=vo(he,-2,er);Hi(z,{style:"display:block;",d:"M".concat(ze.x,",").concat(ze.y," L").concat(he.x,",").concat(he.y," L").concat(je.x,",").concat(je.y)})}}},nf=function(b,I,T,D){Hi(b,Object.assign({},b.styles,{fill:"none",d:kg(I.points.map(function(k){return{x:ti(k.x,T,D,"width"),y:ti(k.y,T,D,"height")}}))}))},Ls=function(b){return function(I){return _o(b,{id:I.id})}},Ea=function(b){var I=_o("image",{id:b.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return I.onload=function(){I.setAttribute("opacity",b.opacity||1)},I.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b.src),I},yo=function(b){var I=_o("g",{id:b.id,"stroke-linecap":"round","stroke-linejoin":"round"}),T=_o("line");I.appendChild(T);var D=_o("path");I.appendChild(D);var k=_o("path");return I.appendChild(k),I},of={image:Ea,rect:Ls("rect"),ellipse:Ls("ellipse"),text:Ls("text"),path:Ls("path"),line:yo},wa={rect:Lg,ellipse:Bg,image:Ic,text:Cc,path:nf,line:Ug},af=function(b,I){return of[b](I)},Bs=function(b,I,T,D,k){I!=="path"&&(b.rect=Ec(T,D,k)),b.styles=Fg(T,D,k),wa[I](b,T,D,k)},Gg=["x","y","left","top","right","bottom","width","height"],jg=function(b){return typeof b=="string"&&/%/.test(b)?parseFloat(b)/100:b},zg=function(b){var I=po(b,2),T=I[0],D=I[1],k=D.points?{}:Gg.reduce(function(H,z){return H[z]=jg(D[z]),H},{});return[T,Object.assign({zIndex:0},D,k)]},Hg=function(b,I){return b[1].zIndex>I[1].zIndex?1:b[1].zIndex<I[1].zIndex?-1:0},Wg=function(b){return b.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:function(T){var D=T.root,k=T.props;if(k.dirty){var H=k.crop,z=k.resize,Z=k.markup,he=k.width,Te=k.height,Ce=H.width,et=H.height;if(z){var sr=z.size,yt=sr&&sr.width,Gt=sr&&sr.height,ir=z.mode,er=z.upscale;yt&&!Gt&&(Gt=yt),Gt&&!yt&&(yt=Gt);var ze=Ce<yt&&et<Gt;if(!ze||ze&&er){var je=yt/Ce,Ee=Gt/et;if(ir==="force")Ce=yt,et=Gt;else{var $;ir==="cover"?$=Math.max(je,Ee):ir==="contain"&&($=Math.min(je,Ee)),Ce=Ce*$,et=et*$}}}var fe={width:he,height:Te};D.element.setAttribute("width",fe.width),D.element.setAttribute("height",fe.height);var ce=Math.min(he/Ce,Te/et);D.element.innerHTML="";var Fe=D.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");Z.filter(Fe).map(zg).sort(Hg).forEach(function(Xt){var ct=po(Xt,2),Mt=ct[0],q=ct[1],dr=af(Mt,q);Bs(dr,Mt,q,fe,ce),D.element.appendChild(dr)})}}})},bo=function(b,I){return{x:b,y:I}},sf=function(b,I){return b.x*I.x+b.y*I.y},Ac=function(b,I){return bo(b.x-I.x,b.y-I.y)},Xg=function(b,I){return sf(Ac(b,I),Ac(b,I))},Vs=function(b,I){return Math.sqrt(Xg(b,I))},Ia=function(b,I){var T=b,D=1.5707963267948966,k=I,H=1.5707963267948966-I,z=Math.sin(D),Z=Math.sin(k),he=Math.sin(H),Te=Math.cos(H),Ce=T/z,et=Ce*Z,sr=Ce*he;return bo(Te*et,Te*sr)},Ca=function(b,I){var T=b.width,D=b.height,k=Ia(T,I),H=Ia(D,I),z=bo(b.x+Math.abs(k.x),b.y-Math.abs(k.y)),Z=bo(b.x+b.width+Math.abs(H.y),b.y+Math.abs(H.x)),he=bo(b.x-Math.abs(H.y),b.y+b.height-Math.abs(H.x));return{width:Vs(z,Z),height:Vs(z,he)}},Yg=function(b,I){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,D=b.height/b.width,k=1,H=I,z=1,Z=D;Z>H&&(Z=H,z=Z/D);var he=Math.max(k/z,H/Z),Te=b.width/(T*he*z),Ce=Te*I;return{width:Te,height:Ce}},lf=function(b,I,T,D){var k=D.x>.5?1-D.x:D.x,H=D.y>.5?1-D.y:D.y,z=k*2*b.width,Z=H*2*b.height,he=Ca(I,T);return Math.max(he.width/z,he.height/Z)},cf=function(b,I){var T=b.width,D=T*I;D>b.height&&(D=b.height,T=D/I);var k=(b.width-T)*.5,H=(b.height-D)*.5;return{x:k,y:H,width:T,height:D}},qg=function(b){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},T=I.zoom,D=I.rotation,k=I.center,H=I.aspectRatio;H||(H=b.height/b.width);var z=Yg(b,H,T),Z={x:z.width*.5,y:z.height*.5},he={x:0,y:0,width:z.width,height:z.height,center:Z},Te=typeof I.scaleToFit>"u"||I.scaleToFit,Ce=lf(b,cf(he,H),D,Te?k:{x:.5,y:.5}),et=T*Ce;return{widthFloat:z.width/et,heightFloat:z.height/et,width:Math.round(z.width/et),height:Math.round(z.height/et)}},Wi={type:"spring",stiffness:.5,damping:.45,mass:10},$g=function(b){return b.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:function(T){var D=T.root,k=T.props;D.appendChild(k.image)}})},uf=function(b){return b.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:Wi,originY:Wi,scaleX:Wi,scaleY:Wi,translateX:Wi,translateY:Wi,rotateZ:Wi}},create:function(T){var D=T.root,k=T.props;k.width=k.image.width,k.height=k.image.height,D.ref.bitmap=D.appendChildView(D.createChildView($g(b),{image:k.image}))},write:function(T){var D=T.root,k=T.props,H=k.crop.flip,z=D.ref.bitmap;z.scaleX=H.horizontal?-1:1,z.scaleY=H.vertical?-1:1}})},Zg=function(b){return b.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function(T){var D=T.root,k=T.props;k.background&&(D.element.style.backgroundColor=k.background)},create:function(T){var D=T.root,k=T.props;D.ref.image=D.appendChildView(D.createChildView(uf(b),Object.assign({},k))),D.ref.createMarkup=function(){D.ref.markup||(D.ref.markup=D.appendChildView(D.createChildView(Wg(b),Object.assign({},k))))},D.ref.destroyMarkup=function(){D.ref.markup&&(D.removeChildView(D.ref.markup),D.ref.markup=null)};var H=D.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");H!==null&&(H==="grid"?D.element.dataset.transparencyIndicator=H:D.element.dataset.transparencyIndicator="color")},write:function(T){var D=T.root,k=T.props,H=T.shouldOptimize,z=k.crop,Z=k.markup,he=k.resize,Te=k.dirty,Ce=k.width,et=k.height;D.ref.image.crop=z;var sr={x:0,y:0,width:Ce,height:et,center:{x:Ce*.5,y:et*.5}},yt={width:D.ref.image.width,height:D.ref.image.height},Gt={x:z.center.x*yt.width,y:z.center.y*yt.height},ir={x:sr.center.x-yt.width*z.center.x,y:sr.center.y-yt.height*z.center.y},er=Math.PI*2+z.rotation%(Math.PI*2),ze=z.aspectRatio||yt.height/yt.width,je=typeof z.scaleToFit>"u"||z.scaleToFit,Ee=lf(yt,cf(sr,ze),er,je?z.center:{x:.5,y:.5}),$=z.zoom*Ee;Z&&Z.length?(D.ref.createMarkup(),D.ref.markup.width=Ce,D.ref.markup.height=et,D.ref.markup.resize=he,D.ref.markup.dirty=Te,D.ref.markup.markup=Z,D.ref.markup.crop=qg(yt,z)):D.ref.markup&&D.ref.destroyMarkup();var fe=D.ref.image;if(H){fe.originX=null,fe.originY=null,fe.translateX=null,fe.translateY=null,fe.rotateZ=null,fe.scaleX=null,fe.scaleY=null;return}fe.originX=Gt.x,fe.originY=Gt.y,fe.translateX=ir.x,fe.translateY=ir.y,fe.rotateZ=er,fe.scaleX=$,fe.scaleY=$}})},Kg=function(b){return b.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:Wi,scaleY:Wi,translateY:Wi,opacity:{type:"tween",duration:400}}},create:function(T){var D=T.root,k=T.props;D.ref.clip=D.appendChildView(D.createChildView(Zg(b),{id:k.id,image:k.image,crop:k.crop,markup:k.markup,resize:k.resize,dirty:k.dirty,background:k.background}))},write:function(T){var D=T.root,k=T.props,H=T.shouldOptimize,z=D.ref.clip,Z=k.image,he=k.crop,Te=k.markup,Ce=k.resize,et=k.dirty;if(z.crop=he,z.markup=Te,z.resize=Ce,z.dirty=et,z.opacity=H?0:1,!(H||D.rect.element.hidden)){var sr=Z.height/Z.width,yt=he.aspectRatio||sr,Gt=D.rect.inner.width,ir=D.rect.inner.height,er=D.query("GET_IMAGE_PREVIEW_HEIGHT"),ze=D.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),je=D.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),Ee=D.query("GET_PANEL_ASPECT_RATIO"),$=D.query("GET_ALLOW_MULTIPLE");Ee&&!$&&(er=Gt*Ee,yt=Ee);var fe=er!==null?er:Math.max(ze,Math.min(Gt*yt,je)),ce=fe/yt;ce>Gt&&(ce=Gt,fe=ce*yt),fe>ir&&(fe=ir,ce=ir/yt),z.width=ce,z.height=fe}}})},df=`<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">
    <defs>
        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">
            <stop offset='50%' stop-color='#000000'/>
            <stop offset='56%' stop-color='#0a0a0a'/>
            <stop offset='63%' stop-color='#262626'/>
            <stop offset='69%' stop-color='#4f4f4f'/>
            <stop offset='75%' stop-color='#808080'/>
            <stop offset='81%' stop-color='#b1b1b1'/>
            <stop offset='88%' stop-color='#dadada'/>
            <stop offset='94%' stop-color='#f6f6f6'/>
            <stop offset='100%' stop-color='#ffffff'/>
        </radialGradient>
        <mask id="mask-__UID__">
            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>
        </mask>
    </defs>
    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>
</svg>`,xo=0,ff=function(b){return b.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:function(T){var D=T.root,k=T.props,H=df;if(document.querySelector("base")){var z=new URL(window.location.href.replace(window.location.hash,"")).href;H=H.replace(/url\(\#/g,"url("+z+"#")}xo++,D.element.classList.add("filepond--image-preview-overlay-".concat(k.status)),D.element.innerHTML=H.replace(/__UID__/g,xo)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}})},Us=function(){self.onmessage=function(b){createImageBitmap(b.data.message.file).then(function(I){self.postMessage({id:b.data.id,message:I},[I])})}},Sc=function(){self.onmessage=function(b){for(var I=b.data.message.imageData,T=b.data.message.colorMatrix,D=I.data,k=D.length,H=T[0],z=T[1],Z=T[2],he=T[3],Te=T[4],Ce=T[5],et=T[6],sr=T[7],yt=T[8],Gt=T[9],ir=T[10],er=T[11],ze=T[12],je=T[13],Ee=T[14],$=T[15],fe=T[16],ce=T[17],Fe=T[18],Xt=T[19],ct=0,Mt=0,q=0,dr=0,jt=0;ct<k;ct+=4)Mt=D[ct]/255,q=D[ct+1]/255,dr=D[ct+2]/255,jt=D[ct+3]/255,D[ct]=Math.max(0,Math.min((Mt*H+q*z+dr*Z+jt*he+Te)*255,255)),D[ct+1]=Math.max(0,Math.min((Mt*Ce+q*et+dr*sr+jt*yt+Gt)*255,255)),D[ct+2]=Math.max(0,Math.min((Mt*ir+q*er+dr*ze+jt*je+Ee)*255,255)),D[ct+3]=Math.max(0,Math.min((Mt*$+q*fe+dr*ce+jt*Fe+Xt)*255,255));self.postMessage({id:b.data.id,message:I},[I.data.buffer])}},hf=function(b,I){var T=new Image;T.onload=function(){var D=T.naturalWidth,k=T.naturalHeight;T=null,I(D,k)},T.src=b},pf={1:function(){return[1,0,0,1,0,0]},2:function(b){return[-1,0,0,1,b,0]},3:function(b,I){return[-1,0,0,-1,b,I]},4:function(b,I){return[1,0,0,-1,0,I]},5:function(){return[0,1,1,0,0,0]},6:function(b,I){return[0,1,-1,0,I,0]},7:function(b,I){return[0,-1,-1,0,I,b]},8:function(b){return[0,-1,1,0,0,b]}},mf=function(b,I,T,D){D!==-1&&b.transform.apply(b,pf[D](I,T))},Gs=function(b,I,T,D){I=Math.round(I),T=Math.round(T);var k=document.createElement("canvas");k.width=I,k.height=T;var H=k.getContext("2d");if(D>=5&&D<=8){var z=[T,I];I=z[0],T=z[1]}return mf(H,I,T,D),H.drawImage(b,0,0,I,T),k},gf=function(b){return/^image/.test(b.type)&&!/svg/.test(b.type)},vf=10,Tc=10,Qg=function(b){var I=Math.min(vf/b.width,Tc/b.height),T=document.createElement("canvas"),D=T.getContext("2d"),k=T.width=Math.ceil(b.width*I),H=T.height=Math.ceil(b.height*I);D.drawImage(b,0,0,k,H);var z=null;try{z=D.getImageData(0,0,k,H).data}catch{return null}for(var Z=z.length,he=0,Te=0,Ce=0,et=0;et<Z;et+=4)he+=z[et]*z[et],Te+=z[et+1]*z[et+1],Ce+=z[et+2]*z[et+2];return he=Dc(he,Z),Te=Dc(Te,Z),Ce=Dc(Ce,Z),{r:he,g:Te,b:Ce}},Dc=function(b,I){return Math.floor(Math.sqrt(b/(I/4)))},Jg=function(b,I){I=I||document.createElement("canvas"),I.width=b.width,I.height=b.height;var T=I.getContext("2d");return T.drawImage(b,0,0),I},_f=function(b){var I;try{I=new ImageData(b.width,b.height)}catch{var T=document.createElement("canvas"),D=T.getContext("2d");I=D.createImageData(b.width,b.height)}return I.data.set(new Uint8ClampedArray(b.data)),I},e0=function(b){return new Promise(function(I,T){var D=new Image;D.crossOrigin="Anonymous",D.onload=function(){I(D)},D.onerror=function(k){T(k)},D.src=b})},t0=function(b){var I=ff(b),T=Kg(b),D=b.utils.createWorker,k=function(Ee,$,fe){return new Promise(function(ce){Ee.ref.imageData||(Ee.ref.imageData=fe.getContext("2d").getImageData(0,0,fe.width,fe.height));var Fe=_f(Ee.ref.imageData);if(!$||$.length!==20)return fe.getContext("2d").putImageData(Fe,0,0),ce();var Xt=D(Sc);Xt.post({imageData:Fe,colorMatrix:$},function(ct){fe.getContext("2d").putImageData(ct,0,0),Xt.terminate(),ce()},[Fe.data.buffer])})},H=function(Ee,$){Ee.removeChildView($),$.image.width=1,$.image.height=1,$._destroy()},z=function(Ee){var $=Ee.root,fe=$.ref.images.shift();return fe.opacity=0,fe.translateY=-15,$.ref.imageViewBin.push(fe),fe},Z=function(Ee){var $=Ee.root,fe=Ee.props,ce=Ee.image,Fe=fe.id,Xt=$.query("GET_ITEM",{id:Fe});if(Xt){var ct=Xt.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},Mt=$.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),q,dr,jt=!1;$.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(q=Xt.getMetadata("markup")||[],dr=Xt.getMetadata("resize"),jt=!0);var Fr=$.appendChildView($.createChildView(T,{id:Fe,image:ce,crop:ct,resize:dr,markup:q,dirty:jt,background:Mt,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),$.childViews.length);$.ref.images.push(Fr),Fr.opacity=1,Fr.scaleX=1,Fr.scaleY=1,Fr.translateY=0,setTimeout(function(){$.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:Fe})},250)}},he=function(Ee){var $=Ee.root,fe=Ee.props,ce=$.query("GET_ITEM",{id:fe.id});if(ce){var Fe=$.ref.images[$.ref.images.length-1];Fe.crop=ce.getMetadata("crop"),Fe.background=$.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),$.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(Fe.dirty=!0,Fe.resize=ce.getMetadata("resize"),Fe.markup=ce.getMetadata("markup"))}},Te=function(Ee){var $=Ee.root,fe=Ee.props,ce=Ee.action;if(/crop|filter|markup|resize/.test(ce.change.key)&&$.ref.images.length){var Fe=$.query("GET_ITEM",{id:fe.id});if(Fe){if(/filter/.test(ce.change.key)){var Xt=$.ref.images[$.ref.images.length-1];k($,ce.change.value,Xt.image);return}if(/crop|markup|resize/.test(ce.change.key)){var ct=Fe.getMetadata("crop"),Mt=$.ref.images[$.ref.images.length-1];if(ct&&ct.aspectRatio&&Mt.crop&&Mt.crop.aspectRatio&&Math.abs(ct.aspectRatio-Mt.crop.aspectRatio)>1e-5){var q=z({root:$});Z({root:$,props:fe,image:Jg(q.image)})}else he({root:$,props:fe})}}}},Ce=function(Ee){var $=window.navigator.userAgent,fe=$.match(/Firefox\/([0-9]+)\./),ce=fe?parseInt(fe[1]):null;return ce!==null&&ce<=58?!1:"createImageBitmap"in window&&gf(Ee)},et=function(Ee){var $=Ee.root,fe=Ee.props,ce=fe.id,Fe=$.query("GET_ITEM",ce);if(Fe){var Xt=URL.createObjectURL(Fe.file);hf(Xt,function(ct,Mt){$.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:ce,width:ct,height:Mt})})}},sr=function(Ee){var $=Ee.root,fe=Ee.props,ce=fe.id,Fe=$.query("GET_ITEM",ce);if(Fe){var Xt=URL.createObjectURL(Fe.file),ct=function(){e0(Xt).then(Mt)},Mt=function(jt){URL.revokeObjectURL(Xt);var Fr=Fe.getMetadata("exif")||{},Un=Fr.orientation||-1,sn=jt.width,Di=jt.height;if(!(!sn||!Di)){if(Un>=5&&Un<=8){var Aa=[Di,sn];sn=Aa[0],Di=Aa[1]}var ln=Math.max(1,window.devicePixelRatio*.75),Xi=$.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR"),Eo=Xi*ln,qr=Di/sn,yn=$.rect.element.width,Sa=$.rect.element.height,wo=yn,Ta=wo*qr;qr>1?(wo=Math.min(sn,yn*Eo),Ta=wo*qr):(Ta=Math.min(Di,Sa*Eo),wo=Ta/qr);var Oc=Gs(jt,wo,Ta,Un),Rc=function(){var bf=$.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?Qg(data):null;Fe.setMetadata("color",bf,!0),"close"in jt&&jt.close(),$.ref.overlayShadow.opacity=1,Z({root:$,props:fe,image:Oc})},Mc=Fe.getMetadata("filter");Mc?k($,Mc,Oc).then(Rc):Rc()}};if(Ce(Fe.file)){var q=D(Us);q.post({file:Fe.file},function(dr){if(q.terminate(),!dr){ct();return}Mt(dr)})}else ct()}},yt=function(Ee){var $=Ee.root,fe=$.ref.images[$.ref.images.length-1];fe.translateY=0,fe.scaleX=1,fe.scaleY=1,fe.opacity=1},Gt=function(Ee){var $=Ee.root;$.ref.overlayShadow.opacity=1,$.ref.overlayError.opacity=0,$.ref.overlaySuccess.opacity=0},ir=function(Ee){var $=Ee.root;$.ref.overlayShadow.opacity=.25,$.ref.overlayError.opacity=1},er=function(Ee){var $=Ee.root;$.ref.overlayShadow.opacity=.25,$.ref.overlaySuccess.opacity=1},ze=function(Ee){var $=Ee.root;$.ref.images=[],$.ref.imageData=null,$.ref.imageViewBin=[],$.ref.overlayShadow=$.appendChildView($.createChildView(I,{opacity:0,status:"idle"})),$.ref.overlaySuccess=$.appendChildView($.createChildView(I,{opacity:0,status:"success"})),$.ref.overlayError=$.appendChildView($.createChildView(I,{opacity:0,status:"failure"}))};return b.utils.createView({name:"image-preview-wrapper",create:ze,styles:["height"],apis:["height"],destroy:function(Ee){var $=Ee.root;$.ref.images.forEach(function(fe){fe.image.width=1,fe.image.height=1})},didWriteView:function(Ee){var $=Ee.root;$.ref.images.forEach(function(fe){fe.dirty=!1})},write:b.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:yt,DID_IMAGE_PREVIEW_CONTAINER_CREATE:et,DID_FINISH_CALCULATE_PREVIEWSIZE:sr,DID_UPDATE_ITEM_METADATA:Te,DID_THROW_ITEM_LOAD_ERROR:ir,DID_THROW_ITEM_PROCESSING_ERROR:ir,DID_THROW_ITEM_INVALID:ir,DID_COMPLETE_ITEM_PROCESSING:er,DID_START_ITEM_PROCESSING:Gt,DID_REVERT_ITEM_PROCESSING:Gt},function(je){var Ee=je.root,$=Ee.ref.imageViewBin.filter(function(fe){return fe.opacity===0});Ee.ref.imageViewBin=Ee.ref.imageViewBin.filter(function(fe){return fe.opacity>0}),$.forEach(function(fe){return H(Ee,fe)}),$.length=0})})},yf=function(b){var I=b.addFilter,T=b.utils,D=T.Type,k=T.createRoute,H=T.isFile,z=t0(b);return I("CREATE_VIEW",function(Z){var he=Z.is,Te=Z.view,Ce=Z.query;if(!(!he("file")||!Ce("GET_ALLOW_IMAGE_PREVIEW"))){var et=function(ze){var je=ze.root,Ee=ze.props,$=Ee.id,fe=Ce("GET_ITEM",$);if(!(!fe||!H(fe.file)||fe.archived)){var ce=fe.file;if(r(ce)&&Ce("GET_IMAGE_PREVIEW_FILTER_ITEM")(fe)){var Fe="createImageBitmap"in(window||{}),Xt=Ce("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!(!Fe&&Xt&&ce.size>Xt)){je.ref.imagePreview=Te.appendChildView(Te.createChildView(z,{id:$}));var ct=je.query("GET_IMAGE_PREVIEW_HEIGHT");ct&&je.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:fe.id,height:ct});var Mt=!Fe&&ce.size>Ce("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");je.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:$},Mt)}}}},sr=function(ze,je){if(ze.ref.imagePreview){var Ee=je.id,$=ze.query("GET_ITEM",{id:Ee});if($){var fe=ze.query("GET_PANEL_ASPECT_RATIO"),ce=ze.query("GET_ITEM_PANEL_ASPECT_RATIO"),Fe=ze.query("GET_IMAGE_PREVIEW_HEIGHT");if(!(fe||ce||Fe)){var Xt=ze.ref,ct=Xt.imageWidth,Mt=Xt.imageHeight;if(!(!ct||!Mt)){var q=ze.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),dr=ze.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),jt=$.getMetadata("exif")||{},Fr=jt.orientation||-1;if(Fr>=5&&Fr<=8){var Un=[Mt,ct];ct=Un[0],Mt=Un[1]}if(!gf($.file)||ze.query("GET_IMAGE_PREVIEW_UPSCALE")){var sn=2048/ct;ct*=sn,Mt*=sn}var Di=Mt/ct,Aa=($.getMetadata("crop")||{}).aspectRatio||Di,ln=Math.max(q,Math.min(Mt,dr)),Xi=ze.rect.element.width,Eo=Math.min(Xi*Aa,ln);ze.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:$.id,height:Eo})}}}}},yt=function(ze){var je=ze.root;je.ref.shouldRescale=!0},Gt=function(ze){var je=ze.root,Ee=ze.action;Ee.change.key==="crop"&&(je.ref.shouldRescale=!0)},ir=function(ze){var je=ze.root,Ee=ze.action;je.ref.imageWidth=Ee.width,je.ref.imageHeight=Ee.height,je.ref.shouldRescale=!0,je.ref.shouldDrawPreview=!0,je.dispatch("KICK")};Te.registerWriter(k({DID_RESIZE_ROOT:yt,DID_STOP_RESIZE:yt,DID_LOAD_ITEM:et,DID_IMAGE_PREVIEW_CALCULATE_SIZE:ir,DID_UPDATE_ITEM_METADATA:Gt},function(er){var ze=er.root,je=er.props;ze.ref.imagePreview&&(ze.rect.element.hidden||(ze.ref.shouldRescale&&(sr(ze,je),ze.ref.shouldRescale=!1),ze.ref.shouldDrawPreview&&(requestAnimationFrame(function(){requestAnimationFrame(function(){ze.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:je.id})})}),ze.ref.shouldDrawPreview=!1)))}))}}),{options:{allowImagePreview:[!0,D.BOOLEAN],imagePreviewFilterItem:[function(){return!0},D.FUNCTION],imagePreviewHeight:[null,D.INT],imagePreviewMinHeight:[44,D.INT],imagePreviewMaxHeight:[256,D.INT],imagePreviewMaxFileSize:[null,D.INT],imagePreviewZoomFactor:[2,D.INT],imagePreviewUpscale:[!1,D.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,D.INT],imagePreviewTransparencyIndicator:[null,D.STRING],imagePreviewCalculateAverageImageColor:[!1,D.BOOLEAN],imagePreviewMarkupShow:[!0,D.BOOLEAN],imagePreviewMarkupFilter:[function(){return!0},D.FUNCTION]}}},r0=typeof window<"u"&&typeof window.document<"u";return r0&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:yf})),yf})});var cb=Wf((Pm,Nm)=>{"use strict";(function(r,e){typeof Pm=="object"&&typeof Nm<"u"?Nm.exports=e():typeof define=="function"&&define.amd?define(e):(r=r||self,r.FilePondPluginFileValidateType=e())})(Pm,function(){"use strict";var r=function(i){var n=i.addFilter,o=i.utils,a=o.Type,s=o.isString,l=o.replaceInString,d=o.guesstimateMimeType,h=o.getExtensionFromFilename,p=o.getFilenameFromURL,v=function(P,L){var G=(/^[^/]+/.exec(P)||[]).pop(),Y=L.slice(0,-2);return G===Y},_=function(P,L){return P.some(function(G){return/\*$/.test(G)?v(L,G):G===L})},E=function(P){var L="";if(s(P)){var G=p(P),Y=h(G);Y&&(L=d(Y))}else L=P.type;return L},A=function(P,L,G){if(L.length===0)return!0;var Y=E(P);return G?new Promise(function(Q,ie){G(P,Y).then(function(ye){_(L,ye)?Q():ie()}).catch(ie)}):_(L,Y)},N=function(P){return function(L){return P[L]===null?!1:P[L]||L}};return n("SET_ATTRIBUTE_TO_OPTION_MAP",function(F){return Object.assign(F,{accept:"acceptedFileTypes"})}),n("ALLOW_HOPPER_ITEM",function(F,P){var L=P.query;return L("GET_ALLOW_FILE_TYPE_VALIDATION")?A(F,L("GET_ACCEPTED_FILE_TYPES")):!0}),n("LOAD_FILE",function(F,P){var L=P.query;return new Promise(function(G,Y){if(!L("GET_ALLOW_FILE_TYPE_VALIDATION")){G(F);return}var Q=L("GET_ACCEPTED_FILE_TYPES"),ie=L("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),ye=A(F,Q,ie),Ne=function(){var At=Q.map(N(L("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"))).filter(function(wt){return wt!==!1}),nt=At.filter(function(wt,Ur){return At.indexOf(wt)===Ur});Y({status:{main:L("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:l(L("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:nt.join(", "),allButLastType:nt.slice(0,-1).join(", "),lastType:nt[nt.length-1]})}})};if(typeof ye=="boolean")return ye?G(F):Ne();ye.then(function(){G(F)}).catch(Ne)})}),{options:{allowFileTypeValidation:[!0,a.BOOLEAN],acceptedFileTypes:[[],a.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",a.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",a.STRING],fileValidateTypeLabelExpectedTypesMap:[{},a.OBJECT],fileValidateTypeDetectType:[null,a.FUNCTION]}}},e=typeof window<"u"&&typeof window.document<"u";return e&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:r})),r})});var vh=class{};var Ba=class r{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let n=t.slice(0,i),o=n.toLowerCase(),a=t.slice(i+1).trim();this.maybeSetNormalizedName(n,o),this.headers.has(o)?this.headers.get(o).push(a):this.headers.set(o,[a])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof r?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new r;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof r?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let n=(e.op==="a"?this.headers.get(t):void 0)||[];n.push(...i),this.headers.set(t,n);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let a=this.headers.get(t);if(!a)return;a=a.filter(s=>o.indexOf(s)===-1),a.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}break}}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),n=e.toLowerCase();this.headers.set(n,i),this.maybeSetNormalizedName(e,n)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var _h=class{encodeKey(e){return Qv(e)}encodeValue(e){return Qv(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function YI(r,e){let t=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(n=>{let o=n.indexOf("="),[a,s]=o==-1?[e.decodeKey(n),""]:[e.decodeKey(n.slice(0,o)),e.decodeValue(n.slice(o+1))],l=t.get(a)||[];l.push(s),t.set(a,l)}),t}var qI=/%(\d[a-f0-9])/gi,$I={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Qv(r){return encodeURIComponent(r).replace(qI,(e,t)=>$I[t]??e)}function su(r){return`${r}`}var Zn=class r{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new _h,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=YI(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],n=Array.isArray(i)?i.map(su):[su(i)];this.map.set(t,n)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let n=e[i];Array.isArray(n)?n.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:n,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new r({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(su(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],n=i.indexOf(su(e.value));n!==-1&&i.splice(n,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var yh=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function ZI(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Jv(r){return typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer}function e1(r){return typeof Blob<"u"&&r instanceof Blob}function t1(r){return typeof FormData<"u"&&r instanceof FormData}function KI(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}var sl=class r{constructor(e,t,i,n){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(ZI(this.method)||n?(this.body=i!==void 0?i:null,o=n):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Ba,this.context??=new yh,!this.params)this.params=new Zn,this.urlWithParams=t;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=t;else{let s=t.indexOf("?"),l=s===-1?"?":s<t.length-1?"&":"";this.urlWithParams=t+l+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Jv(this.body)||e1(this.body)||t1(this.body)||KI(this.body)?this.body:this.body instanceof Zn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||t1(this.body)?null:e1(this.body)?this.body.type||null:Jv(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Zn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,n=e.responseType||this.responseType,o=e.transferCache??this.transferCache,a=e.body!==void 0?e.body:this.body,s=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,d=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(d=Object.keys(e.setHeaders).reduce((v,_)=>v.set(_,e.setHeaders[_]),d)),e.setParams&&(h=Object.keys(e.setParams).reduce((v,_)=>v.set(_,e.setParams[_]),h)),new r(t,i,a,{params:h,headers:d,context:p,reportProgress:l,responseType:n,withCredentials:s,transferCache:o})}},r1=function(r){return r[r.Sent=0]="Sent",r[r.UploadProgress=1]="UploadProgress",r[r.ResponseHeader=2]="ResponseHeader",r[r.DownloadProgress=3]="DownloadProgress",r[r.Response=4]="Response",r[r.User=5]="User",r}(r1||{}),bh=class{constructor(e,t=200,i="OK"){this.headers=e.headers||new Ba,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var xh=class r extends bh{constructor(e={}){super(e),this.type=r1.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new r({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};function gh(r,e){return{body:e,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials,transferCache:r.transferCache}}var i1=(()=>{class r{constructor(t){this.handler=t}request(t,i,n={}){let o;if(t instanceof sl)o=t;else{let l;n.headers instanceof Ba?l=n.headers:l=new Ba(n.headers);let d;n.params&&(n.params instanceof Zn?d=n.params:d=new Zn({fromObject:n.params})),o=new sl(t,i,n.body!==void 0?n.body:null,{headers:l,context:n.context,params:d,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials,transferCache:n.transferCache})}let a=Ve(o).pipe(Ro(l=>this.handler.handle(l)));if(t instanceof sl||n.observe==="events")return a;let s=a.pipe(pi(l=>l instanceof xh));switch(n.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return s.pipe(Xe(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return s.pipe(Xe(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return s.pipe(Xe(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return s.pipe(Xe(l=>l.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new Zn().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,n={}){return this.request("PATCH",t,gh(n,i))}post(t,i,n={}){return this.request("POST",t,gh(n,i))}put(t,i,n={}){return this.request("PUT",t,gh(n,i))}static{this.\u0275fac=function(i){return new(i||r)(ne(vh))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac})}}return r})();var Ih=class extends Hv{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ch=class r extends Ih{static makeCurrent(){zv(new r)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=e2();return t==null?null:t2(t)}resetBaseElement(){ll=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Wv(document.cookie,e)}},ll=null;function e2(){return ll=ll||document.querySelector("base"),ll?ll.getAttribute("href"):null}function t2(r){return new URL(r,document.baseURI).pathname}var r2=(()=>{class r{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac})}}return r})(),Ah=new ot(""),a1=(()=>{class r{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(n=>{n.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,n){return this._findPluginFor(i).addEventListener(t,i,n)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new Yt(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||r)(ne(Ah),ne(dt))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac})}}return r})(),lu=class{constructor(e){this._doc=e}},Eh="ng-app-id",s1=(()=>{class r{constructor(t,i,n,o={}){this.doc=t,this.appId=i,this.nonce=n,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ch(o),this.resetHostNodes()}addStyles(t){for(let i of t)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(t){for(let i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){let i=this.styleRef;i.get(t)?.elements?.forEach(n=>n.remove()),i.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Eh}="${this.appId}"]`);if(t?.length){let i=new Map;return t.forEach(n=>{n.textContent!=null&&i.set(n.textContent,n)}),i}return null}changeUsageCount(t,i){let n=this.styleRef;if(n.has(t)){let o=n.get(t);return o.usage+=i,o.usage}return n.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){let n=this.styleNodesInDOM,o=n?.get(i);if(o?.parentNode===t)return n.delete(i),o.removeAttribute(Eh),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Eh,this.appId),t.appendChild(a),a}}addStyleToHost(t,i){let n=this.getStyleElement(t,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(n):o.set(i,{elements:[n],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||r)(ne(ut),ne(Zc),ne(Js,8),ne(Fo))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac})}}return r})(),wh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Dh=/%COMP%/g,l1="%COMP%",i2=`_nghost-${l1}`,n2=`_ngcontent-${l1}`,o2=!0,a2=new ot("",{providedIn:"root",factory:()=>o2});function s2(r){return n2.replace(Dh,r)}function l2(r){return i2.replace(Dh,r)}function c1(r,e){return e.map(t=>t.replace(Dh,r))}var cu=(()=>{class r{constructor(t,i,n,o,a,s,l,d=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=n,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=s,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=ch(s),this.defaultRenderer=new cl(t,a,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Zs.ShadowDom&&(i=Tt(se({},i),{encapsulation:Zs.Emulated}));let n=this.getOrCreateRenderer(t,i);return n instanceof uu?n.applyToHost(t):n instanceof ul&&n.applyStyles(),n}getOrCreateRenderer(t,i){let n=this.rendererByCompId,o=n.get(i.id);if(!o){let a=this.doc,s=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(i.encapsulation){case Zs.Emulated:o=new uu(l,d,i,this.appId,h,a,s,p);break;case Zs.ShadowDom:return new Sh(l,d,t,i,a,s,this.nonce,p);default:o=new ul(l,d,i,h,a,s,p);break}n.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||r)(ne(a1),ne(s1),ne(Zc),ne(a2),ne(ut),ne(Fo),ne(dt),ne(Js))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac})}}return r})(),cl=class{constructor(e,t,i,n){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=n,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(wh[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(n1(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(n1(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Yt(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,n){if(n){t=n+":"+t;let o=wh[n];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let n=wh[i];n?e.removeAttributeNS(n,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,n){n&(el.DashCase|el.Important)?e.style.setProperty(t,i,n&el.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&el.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=lh().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function n1(r){return r.tagName==="TEMPLATE"&&r.content!==void 0}var Sh=class extends cl{constructor(e,t,i,n,o,a,s,l){super(e,o,a,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=c1(n.id,n.styles);for(let h of d){let p=document.createElement("style");s&&p.setAttribute("nonce",s),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ul=class extends cl{constructor(e,t,i,n,o,a,s,l){super(e,o,a,s),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=n,this.styles=l?c1(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},uu=class extends ul{constructor(e,t,i,n,o,a,s,l){let d=n+"-"+i.id;super(e,t,i,o,a,s,l,d),this.contentAttr=s2(d),this.hostAttr=l2(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},c2=(()=>{class r extends lu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,n){return t.addEventListener(i,n,!1),()=>this.removeEventListener(t,i,n)}removeEventListener(t,i,n){return t.removeEventListener(i,n)}static{this.\u0275fac=function(i){return new(i||r)(ne(ut))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac})}}return r})(),o1=["alt","control","meta","shift"],u2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},d2={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey},f2=(()=>{class r extends lu{constructor(t){super(t)}supports(t){return r.parseEventName(t)!=null}addEventListener(t,i,n){let o=r.parseEventName(i),a=r.eventCallback(o.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>lh().onAndCancel(t,o.domEventName,a))}static parseEventName(t){let i=t.toLowerCase().split("."),n=i.shift();if(i.length===0||!(n==="keydown"||n==="keyup"))return null;let o=r._normalizeKey(i.pop()),a="",s=i.indexOf("code");if(s>-1&&(i.splice(s,1),a="code."),o1.forEach(d=>{let h=i.indexOf(d);h>-1&&(i.splice(h,1),a+=d+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=n,l.fullKey=a,l}static matchEventFullKeyCode(t,i){let n=u2[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(n=t.code,o="code."),n==null||!n?!1:(n=n.toLowerCase(),n===" "?n="space":n==="."&&(n="dot"),o1.forEach(a=>{if(a!==n){let s=d2[a];s(t)&&(o+=a+".")}}),o+=n,o===i)}static eventCallback(t,i,n){return o=>{r.matchEventFullKeyCode(o,t)&&n.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(i){return new(i||r)(ne(ut))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac})}}return r})();function u1(r,e){return Gv(se({rootComponent:r},h2(e)))}function h2(r){return{appProviders:[..._2,...r?.providers??[]],platformProviders:v2}}function p2(){Ch.makeCurrent()}function m2(){return new No}function g2(){return Cv(document),document}var v2=[{provide:Fo,useValue:$v},{provide:Av,useValue:p2,multi:!0},{provide:ut,useFactory:g2,deps:[]}];var _2=[{provide:wv,useValue:"root"},{provide:No,useFactory:m2,deps:[]},{provide:Ah,useClass:c2,multi:!0,deps:[ut,dt,Fo]},{provide:Ah,useClass:f2,multi:!0,deps:[ut]},cu,s1,a1,{provide:Qc,useExisting:cu},{provide:Kv,useClass:r2,deps:[]},[]];var d1=(()=>{class r{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||r)(ne(ut))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var Oh=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Re({token:r,factory:function(i){let n=null;return i?n=new(i||r):n=ne(y2),n},providedIn:"root"})}}return r})(),y2=(()=>{class r extends Oh{constructor(t){super(),this._doc=t}sanitize(t,i){if(i==null)return null;switch(t){case wi.NONE:return i;case wi.HTML:return ka(i,"HTML")?Fa(i):Pv(this._doc,String(i)).toString();case wi.STYLE:return ka(i,"Style")?Fa(i):i;case wi.SCRIPT:if(ka(i,"Script"))return Fa(i);throw new Yt(5200,!1);case wi.URL:return ka(i,"URL")?Fa(i):Mv(String(i));case wi.RESOURCE_URL:if(ka(i,"ResourceURL"))return Fa(i);throw new Yt(5201,!1);default:throw new Yt(5202,!1)}}bypassSecurityTrustHtml(t){return Sv(t)}bypassSecurityTrustStyle(t){return Tv(t)}bypassSecurityTrustScript(t){return Dv(t)}bypassSecurityTrustUrl(t){return Ov(t)}bypassSecurityTrustResourceUrl(t){return Rv(t)}static{this.\u0275fac=function(i){return new(i||r)(ne(ut))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var at="primary",Sl=Symbol("RouteTitle"),Fh=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ha(r){return new Fh(r)}function x2(r,e,t){let i=t.path.split("/");if(i.length>r.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<r.length))return null;let n={};for(let o=0;o<i.length;o++){let a=i[o],s=r[o];if(a[0]===":")n[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:r.slice(0,i.length),posParams:n}}function E2(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;++t)if(!fn(r[t],e[t]))return!1;return!0}function fn(r,e){let t=r?kh(r):void 0,i=e?kh(e):void 0;if(!t||!i||t.length!=i.length)return!1;let n;for(let o=0;o<t.length;o++)if(n=t[o],!b1(r[n],e[n]))return!1;return!0}function kh(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}function b1(r,e){if(Array.isArray(r)&&Array.isArray(e)){if(r.length!==e.length)return!1;let t=[...r].sort(),i=[...e].sort();return t.every((n,o)=>i[o]===n)}else return r===e}function x1(r){return r.length>0?r[r.length-1]:null}function Kn(r){return Hc(r)?r:ou(r)?hi(Promise.resolve(r)):Ve(r)}var w2={exact:w1,subset:I1},E1={exact:I2,subset:C2,ignored:()=>!0};function h1(r,e,t){return w2[t.paths](r.root,e.root,t.matrixParams)&&E1[t.queryParams](r.queryParams,e.queryParams)&&!(t.fragment==="exact"&&r.fragment!==e.fragment)}function I2(r,e){return fn(r,e)}function w1(r,e,t){if(!Go(r.segments,e.segments)||!hu(r.segments,e.segments,t)||r.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!r.children[i]||!w1(r.children[i],e.children[i],t))return!1;return!0}function C2(r,e){return Object.keys(e).length<=Object.keys(r).length&&Object.keys(e).every(t=>b1(r[t],e[t]))}function I1(r,e,t){return C1(r,e,e.segments,t)}function C1(r,e,t,i){if(r.segments.length>t.length){let n=r.segments.slice(0,t.length);return!(!Go(n,t)||e.hasChildren()||!hu(n,t,i))}else if(r.segments.length===t.length){if(!Go(r.segments,t)||!hu(r.segments,t,i))return!1;for(let n in e.children)if(!r.children[n]||!I1(r.children[n],e.children[n],i))return!1;return!0}else{let n=t.slice(0,r.segments.length),o=t.slice(r.segments.length);return!Go(r.segments,n)||!hu(r.segments,n,i)||!r.children[at]?!1:C1(r.children[at],e,o,i)}}function hu(r,e,t){return e.every((i,n)=>E1[t](r[n].parameters,i.parameters))}var Sn=class{constructor(e=new Ft([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Ha(this.queryParams),this._queryParamMap}toString(){return T2.serialize(this)}},Ft=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pu(this)}},Uo=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ha(this.parameters),this._parameterMap}toString(){return S1(this)}};function A2(r,e){return Go(r,e)&&r.every((t,i)=>fn(t.parameters,e[i].parameters))}function Go(r,e){return r.length!==e.length?!1:r.every((t,i)=>t.path===e[i].path)}function S2(r,e){let t=[];return Object.entries(r.children).forEach(([i,n])=>{i===at&&(t=t.concat(e(n,i)))}),Object.entries(r.children).forEach(([i,n])=>{i!==at&&(t=t.concat(e(n,i)))}),t}var lp=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Re({token:r,factory:()=>new vl,providedIn:"root"})}}return r})(),vl=class{parse(e){let t=new Bh(e);return new Sn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${dl(e.root,!0)}`,i=R2(e.queryParams),n=typeof e.fragment=="string"?`#${D2(e.fragment)}`:"";return`${t}${i}${n}`}},T2=new vl;function pu(r){return r.segments.map(e=>S1(e)).join("/")}function dl(r,e){if(!r.hasChildren())return pu(r);if(e){let t=r.children[at]?dl(r.children[at],!1):"",i=[];return Object.entries(r.children).forEach(([n,o])=>{n!==at&&i.push(`${n}:${dl(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=S2(r,(i,n)=>n===at?[dl(r.children[at],!1)]:[`${n}:${dl(i,!1)}`]);return Object.keys(r.children).length===1&&r.children[at]!=null?`${pu(r)}/${t[0]}`:`${pu(r)}/(${t.join("//")})`}}function A1(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function du(r){return A1(r).replace(/%3B/gi,";")}function D2(r){return encodeURI(r)}function Lh(r){return A1(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function mu(r){return decodeURIComponent(r)}function p1(r){return mu(r.replace(/\+/g,"%20"))}function S1(r){return`${Lh(r.path)}${O2(r.parameters)}`}function O2(r){return Object.entries(r).map(([e,t])=>`;${Lh(e)}=${Lh(t)}`).join("")}function R2(r){let e=Object.entries(r).map(([t,i])=>Array.isArray(i)?i.map(n=>`${du(t)}=${du(n)}`).join("&"):`${du(t)}=${du(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var M2=/^[^\/()?;#]+/;function Rh(r){let e=r.match(M2);return e?e[0]:""}var P2=/^[^\/()?;=#]+/;function N2(r){let e=r.match(P2);return e?e[0]:""}var F2=/^[^=?&#]+/;function k2(r){let e=r.match(F2);return e?e[0]:""}var L2=/^[^&#]+/;function B2(r){let e=r.match(L2);return e?e[0]:""}var Bh=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ft([],{}):new Ft([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[at]=new Ft(e,t)),i}parseSegment(){let e=Rh(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Yt(4009,!1);return this.capture(e),new Uo(mu(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=N2(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let n=Rh(this.remaining);n&&(i=n,this.capture(i))}e[mu(t)]=mu(i)}parseQueryParam(e){let t=k2(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let a=B2(this.remaining);a&&(i=a,this.capture(i))}let n=p1(t),o=p1(i);if(e.hasOwnProperty(n)){let a=e[n];Array.isArray(a)||(a=[a],e[n]=a),a.push(o)}else e[n]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Rh(this.remaining),n=this.remaining[i.length];if(n!=="/"&&n!==")"&&n!==";")throw new Yt(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=at);let a=this.parseChildren();t[o]=Object.keys(a).length===1?a[at]:new Ft([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Yt(4011,!1)}};function T1(r){return r.segments.length>0?new Ft([],{[at]:r}):r}function D1(r){let e={};for(let[i,n]of Object.entries(r.children)){let o=D1(n);if(i===at&&o.segments.length===0&&o.hasChildren())for(let[a,s]of Object.entries(o.children))e[a]=s;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new Ft(r.segments,e);return V2(t)}function V2(r){if(r.numberOfChildren===1&&r.children[at]){let e=r.children[at];return new Ft(r.segments.concat(e.segments),e.children)}return r}function _l(r){return r instanceof Sn}function U2(r,e,t=null,i=null){let n=O1(r);return R1(n,e,t,i)}function O1(r){let e;function t(o){let a={};for(let l of o.children){let d=t(l);a[l.outlet]=d}let s=new Ft(o.url,a);return o===r&&(e=s),s}let i=t(r.root),n=T1(i);return e??n}function R1(r,e,t,i){let n=r;for(;n.parent;)n=n.parent;if(e.length===0)return Mh(n,n,n,t,i);let o=G2(e);if(o.toRoot())return Mh(n,n,new Ft([],{}),t,i);let a=j2(o,n,r),s=a.processChildren?pl(a.segmentGroup,a.index,o.commands):P1(a.segmentGroup,a.index,o.commands);return Mh(n,a.segmentGroup,s,t,i)}function gu(r){return typeof r=="object"&&r!=null&&!r.outlets&&!r.segmentPath}function yl(r){return typeof r=="object"&&r!=null&&r.outlets}function Mh(r,e,t,i,n){let o={};i&&Object.entries(i).forEach(([l,d])=>{o[l]=Array.isArray(d)?d.map(h=>`${h}`):`${d}`});let a;r===e?a=t:a=M1(r,e,t);let s=T1(D1(a));return new Sn(s,o,n)}function M1(r,e,t){let i={};return Object.entries(r.children).forEach(([n,o])=>{o===e?i[n]=t:i[n]=M1(o,e,t)}),new Ft(r.segments,i)}var vu=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&gu(i[0]))throw new Yt(4003,!1);let n=i.find(yl);if(n&&n!==x1(i))throw new Yt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function G2(r){if(typeof r[0]=="string"&&r.length===1&&r[0]==="/")return new vu(!0,0,r);let e=0,t=!1,i=r.reduce((n,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let s={};return Object.entries(o.outlets).forEach(([l,d])=>{s[l]=typeof d=="string"?d.split("/"):d}),[...n,{outlets:s}]}if(o.segmentPath)return[...n,o.segmentPath]}return typeof o!="string"?[...n,o]:a===0?(o.split("/").forEach((s,l)=>{l==0&&s==="."||(l==0&&s===""?t=!0:s===".."?e++:s!=""&&n.push(s))}),n):[...n,o]},[]);return new vu(t,e,i)}var Ga=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function j2(r,e,t){if(r.isAbsolute)return new Ga(e,!0,0);if(!t)return new Ga(e,!1,NaN);if(t.parent===null)return new Ga(t,!0,0);let i=gu(r.commands[0])?0:1,n=t.segments.length-1+i;return z2(t,n,r.numberOfDoubleDots)}function z2(r,e,t){let i=r,n=e,o=t;for(;o>n;){if(o-=n,i=i.parent,!i)throw new Yt(4005,!1);n=i.segments.length}return new Ga(i,!1,n-o)}function H2(r){return yl(r[0])?r[0].outlets:{[at]:r}}function P1(r,e,t){if(r??=new Ft([],{}),r.segments.length===0&&r.hasChildren())return pl(r,e,t);let i=W2(r,e,t),n=t.slice(i.commandIndex);if(i.match&&i.pathIndex<r.segments.length){let o=new Ft(r.segments.slice(0,i.pathIndex),{});return o.children[at]=new Ft(r.segments.slice(i.pathIndex),r.children),pl(o,0,n)}else return i.match&&n.length===0?new Ft(r.segments,{}):i.match&&!r.hasChildren()?Vh(r,e,t):i.match?pl(r,0,n):Vh(r,e,t)}function pl(r,e,t){if(t.length===0)return new Ft(r.segments,{});{let i=H2(t),n={};if(Object.keys(i).some(o=>o!==at)&&r.children[at]&&r.numberOfChildren===1&&r.children[at].segments.length===0){let o=pl(r.children[at],e,t);return new Ft(r.segments,o.children)}return Object.entries(i).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(n[o]=P1(r.children[o],e,a))}),Object.entries(r.children).forEach(([o,a])=>{i[o]===void 0&&(n[o]=a)}),new Ft(r.segments,n)}}function W2(r,e,t){let i=0,n=e,o={match:!1,pathIndex:0,commandIndex:0};for(;n<r.segments.length;){if(i>=t.length)return o;let a=r.segments[n],s=t[i];if(yl(s))break;let l=`${s}`,d=i<t.length-1?t[i+1]:null;if(n>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!g1(l,d,a))return o;i+=2}else{if(!g1(l,{},a))return o;i++}n++}return{match:!0,pathIndex:n,commandIndex:i}}function Vh(r,e,t){let i=r.segments.slice(0,e),n=0;for(;n<t.length;){let o=t[n];if(yl(o)){let l=X2(o.outlets);return new Ft(i,l)}if(n===0&&gu(t[0])){let l=r.segments[e];i.push(new Uo(l.path,m1(t[0]))),n++;continue}let a=yl(o)?o.outlets[at]:`${o}`,s=n<t.length-1?t[n+1]:null;a&&s&&gu(s)?(i.push(new Uo(a,m1(s))),n+=2):(i.push(new Uo(a,{})),n++)}return new Ft(i,{})}function X2(r){let e={};return Object.entries(r).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=Vh(new Ft([],{}),0,i))}),e}function m1(r){let e={};return Object.entries(r).forEach(([t,i])=>e[t]=`${i}`),e}function g1(r,e,t){return r==t.path&&fn(e,t.parameters)}var ml="imperative",Hr=function(r){return r[r.NavigationStart=0]="NavigationStart",r[r.NavigationEnd=1]="NavigationEnd",r[r.NavigationCancel=2]="NavigationCancel",r[r.NavigationError=3]="NavigationError",r[r.RoutesRecognized=4]="RoutesRecognized",r[r.ResolveStart=5]="ResolveStart",r[r.ResolveEnd=6]="ResolveEnd",r[r.GuardsCheckStart=7]="GuardsCheckStart",r[r.GuardsCheckEnd=8]="GuardsCheckEnd",r[r.RouteConfigLoadStart=9]="RouteConfigLoadStart",r[r.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",r[r.ChildActivationStart=11]="ChildActivationStart",r[r.ChildActivationEnd=12]="ChildActivationEnd",r[r.ActivationStart=13]="ActivationStart",r[r.ActivationEnd=14]="ActivationEnd",r[r.Scroll=15]="Scroll",r[r.NavigationSkipped=16]="NavigationSkipped",r}(Hr||{}),Fi=class{constructor(e,t){this.id=e,this.url=t}},bl=class extends Fi{constructor(e,t,i="imperative",n=null){super(e,t),this.type=Hr.NavigationStart,this.navigationTrigger=i,this.restoredState=n}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},jo=class extends Fi{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=Hr.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Si=function(r){return r[r.Redirect=0]="Redirect",r[r.SupersededByNewNavigation=1]="SupersededByNewNavigation",r[r.NoDataFromResolver=2]="NoDataFromResolver",r[r.GuardRejected=3]="GuardRejected",r}(Si||{}),Uh=function(r){return r[r.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",r[r.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",r}(Uh||{}),An=class extends Fi{constructor(e,t,i,n){super(e,t),this.reason=i,this.code=n,this.type=Hr.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},zo=class extends Fi{constructor(e,t,i,n){super(e,t),this.reason=i,this.code=n,this.type=Hr.NavigationSkipped}},xl=class extends Fi{constructor(e,t,i,n){super(e,t),this.error=i,this.target=n,this.type=Hr.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},_u=class extends Fi{constructor(e,t,i,n){super(e,t),this.urlAfterRedirects=i,this.state=n,this.type=Hr.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gh=class extends Fi{constructor(e,t,i,n){super(e,t),this.urlAfterRedirects=i,this.state=n,this.type=Hr.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jh=class extends Fi{constructor(e,t,i,n,o){super(e,t),this.urlAfterRedirects=i,this.state=n,this.shouldActivate=o,this.type=Hr.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},zh=class extends Fi{constructor(e,t,i,n){super(e,t),this.urlAfterRedirects=i,this.state=n,this.type=Hr.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hh=class extends Fi{constructor(e,t,i,n){super(e,t),this.urlAfterRedirects=i,this.state=n,this.type=Hr.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wh=class{constructor(e){this.route=e,this.type=Hr.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Xh=class{constructor(e){this.route=e,this.type=Hr.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Yh=class{constructor(e){this.snapshot=e,this.type=Hr.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qh=class{constructor(e){this.snapshot=e,this.type=Hr.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$h=class{constructor(e){this.snapshot=e,this.type=Hr.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zh=class{constructor(e){this.snapshot=e,this.type=Hr.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var El=class{},Wa=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Y2(r,e){return r.providers&&!r._injector&&(r._injector=Lv(r.providers,e,`Route: ${r.path}`)),r._injector??e}function Ji(r){return r.outlet||at}function q2(r,e){let t=r.filter(i=>Ji(i)===e);return t.push(...r.filter(i=>Ji(i)!==e)),t}function Tl(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let e=r.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Kh=class{get injector(){return Tl(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Cu(this.rootInjector),this.attachRef=null}},Cu=(()=>{class r{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,i){let n=this.getOrCreateContext(t);n.outlet=i,this.contexts.set(t,n)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Kh(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||r)(ne(Po))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),yu=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Qh(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=Qh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Jh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(n=>n.value).filter(n=>n!==e)}pathFromRoot(e){return Jh(e,this._root).map(t=>t.value)}};function Qh(r,e){if(r===e.value)return e;for(let t of e.children){let i=Qh(r,t);if(i)return i}return null}function Jh(r,e){if(r===e.value)return[e];for(let t of e.children){let i=Jh(r,t);if(i.length)return i.unshift(e),i}return[]}var Ai=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ua(r){let e={};return r&&r.children.forEach(t=>e[t.value.outlet]=t),e}var bu=class extends yu{constructor(e,t){super(e),this.snapshot=t,cp(this,e)}toString(){return this.snapshot.toString()}};function N1(r){let e=$2(r),t=new fi([new Uo("",{})]),i=new fi({}),n=new fi({}),o=new fi({}),a=new fi(""),s=new Xa(t,i,o,a,n,at,r,e.root);return s.snapshot=e.root,new bu(new Ai(s,[]),e)}function $2(r){let e={},t={},i={},n="",o=new ja([],e,i,n,t,at,r,null,{});return new Eu("",new Ai(o,[]))}var Xa=class{constructor(e,t,i,n,o,a,s,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=n,this.dataSubject=o,this.outlet=a,this.component=s,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Xe(d=>d[Sl]))??Ve(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=n,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Xe(e=>Ha(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Xe(e=>Ha(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function xu(r,e,t="emptyOnly"){let i,{routeConfig:n}=r;return e!==null&&(t==="always"||n?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:se(se({},e.params),r.params),data:se(se({},e.data),r.data),resolve:se(se(se(se({},r.data),e.data),n?.data),r._resolvedData)}:i={params:se({},r.params),data:se({},r.data),resolve:se(se({},r.data),r._resolvedData??{})},n&&k1(n)&&(i.resolve[Sl]=n.title),i}var ja=class{get title(){return this.data?.[Sl]}constructor(e,t,i,n,o,a,s,l,d){this.url=e,this.params=t,this.queryParams=i,this.fragment=n,this.data=o,this.outlet=a,this.component=s,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ha(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ha(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Eu=class extends yu{constructor(e,t){super(t),this.url=e,cp(this,t)}toString(){return F1(this._root)}};function cp(r,e){e.value._routerState=r,e.children.forEach(t=>cp(r,t))}function F1(r){let e=r.children.length>0?` { ${r.children.map(F1).join(", ")} } `:"";return`${r.value}${e}`}function Ph(r){if(r.snapshot){let e=r.snapshot,t=r._futureSnapshot;r.snapshot=t,fn(e.queryParams,t.queryParams)||r.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&r.fragmentSubject.next(t.fragment),fn(e.params,t.params)||r.paramsSubject.next(t.params),E2(e.url,t.url)||r.urlSubject.next(t.url),fn(e.data,t.data)||r.dataSubject.next(t.data)}else r.snapshot=r._futureSnapshot,r.dataSubject.next(r._futureSnapshot.data)}function ep(r,e){let t=fn(r.params,e.params)&&A2(r.url,e.url),i=!r.parent!=!e.parent;return t&&!i&&(!r.parent||ep(r.parent,e.parent))}function k1(r){return typeof r.title=="string"||r.title===null}var Z2=(()=>{class r{constructor(){this.activated=null,this._activatedRoute=null,this.name=at,this.activateEvents=new Je,this.deactivateEvents=new Je,this.attachEvents=new Je,this.detachEvents=new Je,this.parentContexts=Se(Cu),this.location=Se(qn),this.changeDetector=Se(oi),this.inputBinder=Se(up,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:n}=t.name;if(i)return;this.isTrackedInParentContexts(n)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(n)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Yt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Yt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Yt(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Yt(4013,!1);this._activatedRoute=t;let n=this.location,a=t.snapshot.component,s=this.parentContexts.getOrCreateContext(this.name).children,l=new tp(t,s,n.injector);this.activated=n.createComponent(a,{index:n.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275dir=xt({type:r,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ei]})}}return r})(),tp=class r{__ngOutletInjector(e){return new r(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Xa?this.route:e===Cu?this.childContexts:this.parent.get(e,t)}},up=new ot("");function K2(r,e,t){let i=wl(r,e._root,t?t._root:void 0);return new bu(i,e)}function wl(r,e,t){if(t&&r.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let n=Q2(r,e,t);return new Ai(i,n)}else{if(r.shouldAttach(e.value)){let o=r.retrieve(e.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(s=>wl(r,s)),a}}let i=J2(e.value),n=e.children.map(o=>wl(r,o));return new Ai(i,n)}}function Q2(r,e,t){return e.children.map(i=>{for(let n of t.children)if(r.shouldReuseRoute(i.value,n.value.snapshot))return wl(r,i,n);return wl(r,i)})}function J2(r){return new Xa(new fi(r.url),new fi(r.params),new fi(r.queryParams),new fi(r.fragment),new fi(r.data),r.outlet,r.component,r)}var Il=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},L1="ngNavigationCancelingError";function wu(r,e){let{redirectTo:t,navigationBehaviorOptions:i}=_l(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,n=B1(!1,Si.Redirect);return n.url=t,n.navigationBehaviorOptions=i,n}function B1(r,e){let t=new Error(`NavigationCancelingError: ${r||""}`);return t[L1]=!0,t.cancellationCode=e,t}function eC(r){return V1(r)&&_l(r.url)}function V1(r){return!!r&&r[L1]}var tC=(r,e,t,i)=>Xe(n=>(new rp(e,n.targetRouterState,n.currentRouterState,t,i).activate(r),n)),rp=class{constructor(e,t,i,n,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=n,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Ph(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let n=Ua(t);e.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,n[a],i),delete n[a]}),Object.values(n).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let n=e.value,o=t?t.value:null;if(n===o)if(n.component){let a=i.getContext(n.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),n=i&&e.value.component?i.children:t,o=Ua(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,n);if(i&&i.outlet){let a=i.outlet.detach(),s=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:s})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),n=i&&e.value.component?i.children:t,o=Ua(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,n);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let n=Ua(t);e.children.forEach(o=>{this.activateRoutes(o,n[o.value.outlet],i),this.forwardEvent(new Zh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new qh(e.value.snapshot))}activateRoutes(e,t,i){let n=e.value,o=t?t.value:null;if(Ph(n),n===o)if(n.component){let a=i.getOrCreateContext(n.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,i);else if(n.component){let a=i.getOrCreateContext(n.outlet);if(this.routeReuseStrategy.shouldAttach(n.snapshot)){let s=this.routeReuseStrategy.retrieve(n.snapshot);this.routeReuseStrategy.store(n.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),Ph(s.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=n,a.outlet&&a.outlet.activateWith(n,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,i)}},Iu=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},za=class{constructor(e,t){this.component=e,this.route=t}};function rC(r,e,t){let i=r._root,n=e?e._root:null;return fl(i,n,t,[i.value])}function iC(r){let e=r.routeConfig?r.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:r,guards:e}}function qa(r,e){let t=Symbol(),i=e.get(r,t);return i===t?typeof r=="function"&&!Ev(r)?r:e.get(r):i}function fl(r,e,t,i,n={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ua(e);return r.children.forEach(a=>{nC(a,o[a.value.outlet],t,i.concat([a.value]),n),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,s])=>gl(s,t.getContext(a),n)),n}function nC(r,e,t,i,n={canDeactivateChecks:[],canActivateChecks:[]}){let o=r.value,a=e?e.value:null,s=t?t.getContext(r.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let l=oC(a,o,o.routeConfig.runGuardsAndResolvers);l?n.canActivateChecks.push(new Iu(i)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?fl(r,e,s?s.children:null,i,n):fl(r,e,t,i,n),l&&s&&s.outlet&&s.outlet.isActivated&&n.canDeactivateChecks.push(new za(s.outlet.component,a))}else a&&gl(e,s,n),n.canActivateChecks.push(new Iu(i)),o.component?fl(r,null,s?s.children:null,i,n):fl(r,null,t,i,n);return n}function oC(r,e,t){if(typeof t=="function")return t(r,e);switch(t){case"pathParamsChange":return!Go(r.url,e.url);case"pathParamsOrQueryParamsChange":return!Go(r.url,e.url)||!fn(r.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ep(r,e)||!fn(r.queryParams,e.queryParams);case"paramsChange":default:return!ep(r,e)}}function gl(r,e,t){let i=Ua(r),n=r.value;Object.entries(i).forEach(([o,a])=>{n.component?e?gl(a,e.children.getContext(o),t):gl(a,null,t):gl(a,e,t)}),n.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new za(e.outlet.component,n)):t.canDeactivateChecks.push(new za(null,n)):t.canDeactivateChecks.push(new za(null,n))}function Dl(r){return typeof r=="function"}function aC(r){return typeof r=="boolean"}function sC(r){return r&&Dl(r.canLoad)}function lC(r){return r&&Dl(r.canActivate)}function cC(r){return r&&Dl(r.canActivateChild)}function uC(r){return r&&Dl(r.canDeactivate)}function dC(r){return r&&Dl(r.canMatch)}function U1(r){return r instanceof mv||r?.name==="EmptyError"}var fu=Symbol("INITIAL_VALUE");function Ya(){return mi(r=>qs(r.map(e=>e.pipe(qi(1),$i(fu)))).pipe(Xe(e=>{for(let t of e)if(t!==!0){if(t===fu)return fu;if(t===!1||fC(t))return t}return!0}),pi(e=>e!==fu),qi(1)))}function fC(r){return _l(r)||r instanceof Il}function hC(r,e){return Pi(t=>{let{targetSnapshot:i,currentSnapshot:n,guards:{canActivateChecks:o,canDeactivateChecks:a}}=t;return a.length===0&&o.length===0?Ve(Tt(se({},t),{guardsResult:!0})):pC(a,i,n,r).pipe(Pi(s=>s&&aC(s)?mC(i,o,r,e):Ve(s)),Xe(s=>Tt(se({},t),{guardsResult:s})))})}function pC(r,e,t,i){return hi(r).pipe(Pi(n=>bC(n.component,n.route,t,e,i)),Wn(n=>n!==!0,!0))}function mC(r,e,t,i){return hi(e).pipe(Ro(n=>Wc(vC(n.route.parent,i),gC(n.route,i),yC(r,n.path,t),_C(r,n.route,t))),Wn(n=>n!==!0,!0))}function gC(r,e){return r!==null&&e&&e(new $h(r)),Ve(!0)}function vC(r,e){return r!==null&&e&&e(new Yh(r)),Ve(!0)}function _C(r,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return Ve(!0);let n=i.map(o=>qf(()=>{let a=Tl(e)??t,s=qa(o,a),l=lC(s)?s.canActivate(e,r):wn(a,()=>s(e,r));return Kn(l).pipe(Wn())}));return Ve(n).pipe(Ya())}function yC(r,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>iC(a)).filter(a=>a!==null).map(a=>qf(()=>{let s=a.guards.map(l=>{let d=Tl(a.node)??t,h=qa(l,d),p=cC(h)?h.canActivateChild(i,r):wn(d,()=>h(i,r));return Kn(p).pipe(Wn())});return Ve(s).pipe(Ya())}));return Ve(o).pipe(Ya())}function bC(r,e,t,i,n){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Ve(!0);let a=o.map(s=>{let l=Tl(e)??n,d=qa(s,l),h=uC(d)?d.canDeactivate(r,e,t,i):wn(l,()=>d(r,e,t,i));return Kn(h).pipe(Wn())});return Ve(a).pipe(Ya())}function xC(r,e,t,i){let n=e.canLoad;if(n===void 0||n.length===0)return Ve(!0);let o=n.map(a=>{let s=qa(a,r),l=sC(s)?s.canLoad(e,t):wn(r,()=>s(e,t));return Kn(l)});return Ve(o).pipe(Ya(),G1(i))}function G1(r){return pv(lr(e=>{if(typeof e!="boolean")throw wu(r,e)}),Xe(e=>e===!0))}function EC(r,e,t,i){let n=e.canMatch;if(!n||n.length===0)return Ve(!0);let o=n.map(a=>{let s=qa(a,r),l=dC(s)?s.canMatch(e,t):wn(r,()=>s(e,t));return Kn(l)});return Ve(o).pipe(Ya(),G1(i))}var Cl=class{constructor(e){this.segmentGroup=e||null}},Al=class extends Error{constructor(e){super(),this.urlTree=e}};function Va(r){return Oo(new Cl(r))}function wC(r){return Oo(new Yt(4e3,!1))}function IC(r){return Oo(B1(!1,Si.GuardRejected))}var ip=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],n=t.root;for(;;){if(i=i.concat(n.segments),n.numberOfChildren===0)return Ve(i);if(n.numberOfChildren>1||!n.children[at])return wC(`${e.redirectTo}`);n=n.children[at]}}applyRedirectCommands(e,t,i,n,o){if(typeof t!="string"){let s=t,{queryParams:l,fragment:d,routeConfig:h,url:p,outlet:v,params:_,data:E,title:A}=n,N=wn(o,()=>s({params:_,data:E,queryParams:l,fragment:d,routeConfig:h,url:p,outlet:v,title:A}));if(N instanceof Sn)throw new Al(N);t=N}let a=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new Al(a);return a}applyRedirectCreateUrlTree(e,t,i,n){let o=this.createSegmentGroup(e,t.root,i,n);return new Sn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([n,o])=>{if(typeof o=="string"&&o[0]===":"){let s=o.substring(1);i[n]=t[s]}else i[n]=o}),i}createSegmentGroup(e,t,i,n){let o=this.createSegments(e,t.segments,i,n),a={};return Object.entries(t.children).forEach(([s,l])=>{a[s]=this.createSegmentGroup(e,l,i,n)}),new Ft(o,a)}createSegments(e,t,i,n){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,n):this.findOrReturn(o,i))}findPosParam(e,t,i){let n=i[t.path.substring(1)];if(!n)throw new Yt(4001,!1);return n}findOrReturn(e,t){let i=0;for(let n of t){if(n.path===e.path)return t.splice(i),n;i++}return e}},np={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function CC(r,e,t,i,n){let o=j1(r,e,t);return o.matched?(i=Y2(e,i),EC(i,e,t,n).pipe(Xe(a=>a===!0?o:se({},np)))):Ve(o)}function j1(r,e,t){if(e.path==="**")return AC(t);if(e.path==="")return e.pathMatch==="full"&&(r.hasChildren()||t.length>0)?se({},np):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let n=(e.matcher||x2)(t,r,e);if(!n)return se({},np);let o={};Object.entries(n.posParams??{}).forEach(([s,l])=>{o[s]=l.path});let a=n.consumed.length>0?se(se({},o),n.consumed[n.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:n.consumed,remainingSegments:t.slice(n.consumed.length),parameters:a,positionalParamSegments:n.posParams??{}}}function AC(r){return{matched:!0,parameters:r.length>0?x1(r).parameters:{},consumedSegments:r,remainingSegments:[],positionalParamSegments:{}}}function v1(r,e,t,i){return t.length>0&&DC(r,t,i)?{segmentGroup:new Ft(e,TC(i,new Ft(t,r.children))),slicedSegments:[]}:t.length===0&&OC(r,t,i)?{segmentGroup:new Ft(r.segments,SC(r,t,i,r.children)),slicedSegments:t}:{segmentGroup:new Ft(r.segments,r.children),slicedSegments:t}}function SC(r,e,t,i){let n={};for(let o of t)if(Au(r,e,o)&&!i[Ji(o)]){let a=new Ft([],{});n[Ji(o)]=a}return se(se({},i),n)}function TC(r,e){let t={};t[at]=e;for(let i of r)if(i.path===""&&Ji(i)!==at){let n=new Ft([],{});t[Ji(i)]=n}return t}function DC(r,e,t){return t.some(i=>Au(r,e,i)&&Ji(i)!==at)}function OC(r,e,t){return t.some(i=>Au(r,e,i))}function Au(r,e,t){return(r.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function RC(r,e,t){return e.length===0&&!r.children[t]}var op=class{};function MC(r,e,t,i,n,o,a="emptyOnly"){return new ap(r,e,t,i,n,a,o).recognize()}var PC=31,ap=class{constructor(e,t,i,n,o,a,s){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=n,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=s,this.applyRedirects=new ip(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Yt(4002,`'${e.segmentGroup}'`)}recognize(){let e=v1(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Xe(({children:t,rootSnapshot:i})=>{let n=new Ai(i,t),o=new Eu("",n),a=U2(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(e){let t=new ja([],Object.freeze({}),Object.freeze(se({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),at,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,at,t).pipe(Xe(i=>({children:i,rootSnapshot:t})),Hn(i=>{if(i instanceof Al)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Cl?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,n,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,n,!0,o).pipe(Xe(a=>a instanceof Ai?[a]:[]))}processChildren(e,t,i,n){let o=[];for(let a of Object.keys(i.children))a==="primary"?o.unshift(a):o.push(a);return hi(o).pipe(Ro(a=>{let s=i.children[a],l=q2(t,a);return this.processSegmentGroup(e,l,s,a,n)}),bv((a,s)=>(a.push(...s),a)),Zf(null),yv(),Pi(a=>{if(a===null)return Va(i);let s=z1(a);return NC(s),Ve(s)}))}processSegment(e,t,i,n,o,a,s){return hi(t).pipe(Ro(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,i,n,o,a,s).pipe(Hn(d=>{if(d instanceof Cl)return Ve(null);throw d}))),Wn(l=>!!l),Hn(l=>{if(U1(l))return RC(i,n,o)?Ve(new op):Va(i);throw l}))}processSegmentAgainstRoute(e,t,i,n,o,a,s,l){return Ji(i)!==a&&(a===at||!Au(n,o,i))?Va(n):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,n,i,o,a,l):this.allowRedirects&&s?this.expandSegmentAgainstRouteUsingRedirect(e,n,t,i,o,a,l):Va(n)}expandSegmentAgainstRouteUsingRedirect(e,t,i,n,o,a,s){let{matched:l,parameters:d,consumedSegments:h,positionalParamSegments:p,remainingSegments:v}=j1(t,n,o);if(!l)return Va(t);typeof n.redirectTo=="string"&&n.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>PC&&(this.allowRedirects=!1));let _=new ja(o,d,Object.freeze(se({},this.urlTree.queryParams)),this.urlTree.fragment,_1(n),Ji(n),n.component??n._loadedComponent??null,n,y1(n)),E=xu(_,s,this.paramsInheritanceStrategy);_.params=Object.freeze(E.params),_.data=Object.freeze(E.data);let A=this.applyRedirects.applyRedirectCommands(h,n.redirectTo,p,_,e);return this.applyRedirects.lineralizeSegments(n,A).pipe(Pi(N=>this.processSegment(e,i,t,N.concat(v),a,!1,s)))}matchSegmentAgainstRoute(e,t,i,n,o,a){let s=CC(t,i,n,e,this.urlSerializer);return i.path==="**"&&(t.children={}),s.pipe(mi(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,n).pipe(mi(({routes:d})=>{let h=i._loadedInjector??e,{parameters:p,consumedSegments:v,remainingSegments:_}=l,E=new ja(v,p,Object.freeze(se({},this.urlTree.queryParams)),this.urlTree.fragment,_1(i),Ji(i),i.component??i._loadedComponent??null,i,y1(i)),A=xu(E,a,this.paramsInheritanceStrategy);E.params=Object.freeze(A.params),E.data=Object.freeze(A.data);let{segmentGroup:N,slicedSegments:F}=v1(t,v,_,d);if(F.length===0&&N.hasChildren())return this.processChildren(h,d,N,E).pipe(Xe(L=>new Ai(E,L)));if(d.length===0&&F.length===0)return Ve(new Ai(E,[]));let P=Ji(i)===o;return this.processSegment(h,d,N,F,P?at:o,!0,E).pipe(Xe(L=>new Ai(E,L instanceof Ai?[L]:[])))}))):Va(t)))}getChildConfig(e,t,i){return t.children?Ve({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Ve({routes:t._loadedRoutes,injector:t._loadedInjector}):xC(e,t,i,this.urlSerializer).pipe(Pi(n=>n?this.configLoader.loadChildren(e,t).pipe(lr(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):IC(t))):Ve({routes:[],injector:e})}};function NC(r){r.sort((e,t)=>e.value.outlet===at?-1:t.value.outlet===at?1:e.value.outlet.localeCompare(t.value.outlet))}function FC(r){let e=r.value.routeConfig;return e&&e.path===""}function z1(r){let e=[],t=new Set;for(let i of r){if(!FC(i)){e.push(i);continue}let n=e.find(o=>i.value.routeConfig===o.value.routeConfig);n!==void 0?(n.children.push(...i.children),t.add(n)):e.push(i)}for(let i of t){let n=z1(i.children);e.push(new Ai(i.value,n))}return e.filter(i=>!t.has(i))}function _1(r){return r.data||{}}function y1(r){return r.resolve||{}}function kC(r,e,t,i,n,o){return Pi(a=>MC(r,e,t,i,a.extractedUrl,n,o).pipe(Xe(({state:s,tree:l})=>Tt(se({},a),{targetSnapshot:s,urlAfterRedirects:l}))))}function LC(r,e){return Pi(t=>{let{targetSnapshot:i,guards:{canActivateChecks:n}}=t;if(!n.length)return Ve(t);let o=new Set(n.map(l=>l.route)),a=new Set;for(let l of o)if(!a.has(l))for(let d of H1(l))a.add(d);let s=0;return hi(a).pipe(Ro(l=>o.has(l)?BC(l,i,r,e):(l.data=xu(l,l.parent,r).resolve,Ve(void 0))),lr(()=>s++),Qf(1),Pi(l=>s===a.size?Ve(t):zn))})}function H1(r){let e=r.children.map(t=>H1(t)).flat();return[r,...e]}function BC(r,e,t,i){let n=r.routeConfig,o=r._resolve;return n?.title!==void 0&&!k1(n)&&(o[Sl]=n.title),VC(o,r,e,i).pipe(Xe(a=>(r._resolvedData=a,r.data=xu(r,r.parent,t).resolve,null)))}function VC(r,e,t,i){let n=kh(r);if(n.length===0)return Ve({});let o={};return hi(n).pipe(Pi(a=>UC(r[a],e,t,i).pipe(Wn(),lr(s=>{if(s instanceof Il)throw wu(new vl,s);o[a]=s}))),Qf(1),_v(o),Hn(a=>U1(a)?zn:Oo(a)))}function UC(r,e,t,i){let n=Tl(e)??i,o=qa(r,n),a=o.resolve?o.resolve(e,t):wn(n,()=>o(e,t));return Kn(a)}function Nh(r){return mi(e=>{let t=r(e);return t?hi(t).pipe(Xe(()=>e)):Ve(e)})}var W1=(()=>{class r{buildTitle(t){let i,n=t.root;for(;n!==void 0;)i=this.getResolvedTitleForRoute(n)??i,n=n.children.find(o=>o.outlet===at);return i}getResolvedTitleForRoute(t){return t.data[Sl]}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Re({token:r,factory:()=>Se(GC),providedIn:"root"})}}return r})(),GC=(()=>{class r extends W1{constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||r)(ne(d1))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),dp=new ot("",{providedIn:"root",factory:()=>({})}),jC=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=or({type:r,selectors:[["ng-component"]],standalone:!0,features:[mr],decls:1,vars:0,template:function(i,n){i&1&&Qt(0,"router-outlet")},dependencies:[Z2],encapsulation:2})}}return r})();function fp(r){let e=r.children&&r.children.map(fp),t=e?Tt(se({},r),{children:e}):se({},r);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==at&&(t.component=jC),t}var hp=new ot(""),zC=(()=>{class r{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Se(sh)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ve(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=Kn(t.loadComponent()).pipe(Xe(X1),lr(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Mo(()=>{this.componentLoaders.delete(t)})),n=new Yf(i,()=>new gt).pipe(Xf());return this.componentLoaders.set(t,n),n}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Ve({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=HC(i,this.compiler,t,this.onLoadEndListener).pipe(Mo(()=>{this.childrenLoaders.delete(i)})),a=new Yf(o,()=>new gt).pipe(Xf());return this.childrenLoaders.set(i,a),a}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function HC(r,e,t,i){return Kn(r.loadChildren()).pipe(Xe(X1),Pi(n=>n instanceof kv||Array.isArray(n)?Ve(n):hi(e.compileModuleAsync(n))),Xe(n=>{i&&i(r);let o,a,s=!1;return Array.isArray(n)?(a=n,s=!0):(o=n.create(t).injector,a=o.get(hp,[],{optional:!0,self:!0}).flat()),{routes:a.map(fp),injector:o}}))}function WC(r){return r&&typeof r=="object"&&"default"in r}function X1(r){return WC(r)?r.default:r}var pp=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Re({token:r,factory:()=>Se(XC),providedIn:"root"})}}return r})(),XC=(()=>{class r{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),YC=new ot("");var qC=new ot(""),$C=(()=>{class r{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new gt,this.transitionAbortSubject=new gt,this.configLoader=Se(zC),this.environmentInjector=Se(Po),this.urlSerializer=Se(lp),this.rootContexts=Se(Cu),this.location=Se(La),this.inputBindingEnabled=Se(up,{optional:!0})!==null,this.titleStrategy=Se(W1),this.options=Se(dp,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Se(pp),this.createViewTransition=Se(YC,{optional:!0}),this.navigationErrorHandler=Se(qC,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ve(void 0),this.rootComponentType=null;let t=n=>this.events.next(new Wh(n)),i=n=>this.events.next(new Xh(n));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(Tt(se(se({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,n){return this.transitions=new fi({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ml,restoredState:null,currentSnapshot:n.snapshot,targetSnapshot:null,currentRouterState:n,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(pi(o=>o.id!==0),Xe(o=>Tt(se({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),mi(o=>{let a=!1,s=!1;return Ve(o).pipe(mi(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Si.SupersededByNewNavigation),zn;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Tt(se({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=l.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!d&&h!=="reload"){let p="";return this.events.next(new zo(l.id,this.urlSerializer.serialize(l.rawUrl),p,Uh.IgnoredSameUrlNavigation)),l.resolve(!1),zn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Ve(l).pipe(mi(p=>{let v=this.transitions?.getValue();return this.events.next(new bl(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),v!==this.transitions?.getValue()?zn:Promise.resolve(p)}),kC(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),lr(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=Tt(se({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let v=new _u(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(v)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:p,extractedUrl:v,source:_,restoredState:E,extras:A}=l,N=new bl(p,this.urlSerializer.serialize(v),_,E);this.events.next(N);let F=N1(this.rootComponentType).snapshot;return this.currentTransition=o=Tt(se({},l),{targetSnapshot:F,urlAfterRedirects:v,extras:Tt(se({},A),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=v,Ve(o)}else{let p="";return this.events.next(new zo(l.id,this.urlSerializer.serialize(l.extractedUrl),p,Uh.IgnoredByUrlHandlingStrategy)),l.resolve(!1),zn}}),lr(l=>{let d=new Gh(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Xe(l=>(this.currentTransition=o=Tt(se({},l),{guards:rC(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),hC(this.environmentInjector,l=>this.events.next(l)),lr(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw wu(this.urlSerializer,l.guardsResult);let d=new jh(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),pi(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Si.GuardRejected),!1)),Nh(l=>{if(l.guards.canActivateChecks.length)return Ve(l).pipe(lr(d=>{let h=new zh(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}),mi(d=>{let h=!1;return Ve(d).pipe(LC(this.paramsInheritanceStrategy,this.environmentInjector),lr({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(d,"",Si.NoDataFromResolver)}}))}),lr(d=>{let h=new Hh(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}))}),Nh(l=>{let d=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(lr(v=>{h.component=v}),Xe(()=>{})));for(let v of h.children)p.push(...d(v));return p};return qs(d(l.targetSnapshot.root)).pipe(Zf(null),qi(1))}),Nh(()=>this.afterPreactivation()),mi(()=>{let{currentSnapshot:l,targetSnapshot:d}=o,h=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return h?hi(h).pipe(Xe(()=>o)):Ve(o)}),Xe(l=>{let d=K2(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=Tt(se({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),lr(()=>{this.events.next(new El)}),tC(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),qi(1),lr({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new jo(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),$r(this.transitionAbortSubject.pipe(lr(l=>{throw l}))),Mo(()=>{!a&&!s&&this.cancelNavigationTransition(o,"",Si.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Hn(l=>{if(s=!0,V1(l))this.events.next(new An(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),eC(l)?this.events.next(new Wa(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let d=new xl(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let h=wn(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(h instanceof Il){let{message:p,cancellationCode:v}=wu(this.urlSerializer,h);this.events.next(new An(o.id,this.urlSerializer.serialize(o.extractedUrl),p,v)),this.events.next(new Wa(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(d);let p=t.errorHandler(l);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return zn}))}))}cancelNavigationTransition(t,i,n){let o=new An(t.id,this.urlSerializer.serialize(t.extractedUrl),i,n);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function ZC(r){return r!==ml}var KC=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Re({token:r,factory:()=>Se(QC),providedIn:"root"})}}return r})(),sp=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},QC=(()=>{class r extends sp{static{this.\u0275fac=(()=>{let t;return function(n){return(t||(t=In(r)))(n||r)}})()}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),Y1=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Re({token:r,factory:()=>Se(JC),providedIn:"root"})}}return r})(),JC=(()=>{class r extends Y1{constructor(){super(...arguments),this.location=Se(La),this.urlSerializer=Se(lp),this.options=Se(dp,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Se(pp),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Sn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=N1(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof bl)this.stateMemento=this.createStateMemento();else if(t instanceof zo)this.rawUrlTree=i.initialUrl;else if(t instanceof _u){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let n=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??n,i)}}else t instanceof El?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof An&&(t.code===Si.GuardRejected||t.code===Si.NoDataFromResolver)?this.restoreHistory(i):t instanceof xl?this.restoreHistory(i,!0):t instanceof jo&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let n=t instanceof Sn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(n)||i.extras.replaceUrl){let o=this.browserPageId,a=se(se({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(n,"",a)}else{let o=se(se({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(n,"",o)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let n=this.browserPageId,o=this.currentPageId-n;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(n){return(t||(t=In(r)))(n||r)}})()}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),hl=function(r){return r[r.COMPLETE=0]="COMPLETE",r[r.FAILED=1]="FAILED",r[r.REDIRECTING=2]="REDIRECTING",r}(hl||{});function eA(r,e){r.events.pipe(pi(t=>t instanceof jo||t instanceof An||t instanceof xl||t instanceof zo),Xe(t=>t instanceof jo||t instanceof zo?hl.COMPLETE:(t instanceof An?t.code===Si.Redirect||t.code===Si.SupersededByNewNavigation:!1)?hl.REDIRECTING:hl.FAILED),pi(t=>t!==hl.REDIRECTING),qi(1)).subscribe(()=>{e()})}function tA(r){throw r}var rA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},iA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},q1=(()=>{class r{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=Se(nu),this.stateManager=Se(Y1),this.options=Se(dp,{optional:!0})||{},this.pendingTasks=Se(Iv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Se($C),this.urlSerializer=Se(lp),this.location=Se(La),this.urlHandlingStrategy=Se(pp),this._events=new gt,this.errorHandler=this.options.errorHandler||tA,this.navigated=!1,this.routeReuseStrategy=Se(KC),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Se(hp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Se(up,{optional:!0}),this.eventsSubscription=new Mi,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let n=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(n!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof An&&i.code!==Si.Redirect&&i.code!==Si.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof jo)this.navigated=!0;else if(i instanceof Wa){let a=i.navigationBehaviorOptions,s=this.urlHandlingStrategy.merge(i.url,n.currentRawUrl),l=se({browserUrl:n.extras.browserUrl,info:n.extras.info,skipLocationChange:n.extras.skipLocationChange,replaceUrl:n.extras.replaceUrl||this.urlUpdateStrategy==="eager"||ZC(n.source)},a);this.scheduleNavigation(s,ml,null,l,{resolve:n.resolve,reject:n.reject,promise:n.promise})}}oA(i)&&this._events.next(i)}catch(n){this.navigationTransitions.transitionAbortSubject.next(n)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ml,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,n){let o={replaceUrl:!0},a=n?.navigationId?n:null;if(n){let l=se({},n);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let s=this.parseUrl(t);this.scheduleNavigation(s,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(fp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:n,queryParams:o,fragment:a,queryParamsHandling:s,preserveFragment:l}=i,d=l?this.currentUrlTree.fragment:a,h=null;switch(s??this.options.defaultQueryParamsHandling){case"merge":h=se(se({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let v=n?n.snapshot:this.routerState.snapshot.root;p=O1(v)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return R1(p,t,h,d??null)}navigateByUrl(t,i={skipLocationChange:!1}){let n=_l(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(o,ml,null,i)}navigate(t,i={skipLocationChange:!1}){return nA(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let n;if(i===!0?n=se({},rA):i===!1?n=se({},iA):n=i,_l(t))return h1(this.currentUrlTree,t,n);let o=this.parseUrl(t);return h1(this.currentUrlTree,o,n)}removeEmptyProps(t){return Object.entries(t).reduce((i,[n,o])=>(o!=null&&(i[n]=o),i),{})}scheduleNavigation(t,i,n,o,a){if(this.disposed)return Promise.resolve(!1);let s,l,d;a?(s=a.resolve,l=a.reject,d=a.promise):d=new Promise((p,v)=>{s=p,l=v});let h=this.pendingTasks.add();return eA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:s,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function nA(r){for(let e=0;e<r.length;e++)if(r[e]==null)throw new Yt(4008,!1)}function oA(r){return!(r instanceof El)&&!(r instanceof Wa)}var aA=new ot("");function $1(r,...e){return Ks([{provide:hp,multi:!0,useValue:r},[],{provide:Xa,useFactory:sA,deps:[q1]},{provide:Vv,multi:!0,useFactory:lA},e.map(t=>t.\u0275providers)])}function sA(r){return r.routerState.root}function lA(){let r=Se(Xn);return e=>{let t=r.get(ol);if(e!==t.components[0])return;let i=r.get(q1),n=r.get(cA);r.get(uA)===1&&i.initialNavigation(),r.get(dA,null,Jf.Optional)?.setUpPreloading(),r.get(aA,null,Jf.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),n.closed||(n.next(),n.complete(),n.unsubscribe())}}var cA=new ot("",{factory:()=>new gt}),uA=new ot("",{providedIn:"root",factory:()=>1});var dA=new ot("");var Z1=[];var fA="@",hA=(()=>{class r{constructor(t,i,n,o,a){this.doc=t,this.delegate=i,this.zone=n,this.animationType=o,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=Se(Nv,{optional:!0}),this.loadingSchedulerFn=Se(pA,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-VVXHHZ6W.js").then(n=>n),i;return this.loadingSchedulerFn?i=this.loadingSchedulerFn(t):i=t(),i.catch(n=>{throw new Yt(5300,!1)}).then(({\u0275createEngine:n,\u0275AnimationRendererFactory:o})=>{this._engine=n(this.animationType,this.doc);let a=new o(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(t,i){let n=this.delegate.createRenderer(t,i);if(n.\u0275type===0)return n;typeof n.throwOnSyntheticProps=="boolean"&&(n.throwOnSyntheticProps=!1);let o=new mp(n);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let s=a.createRenderer(t,i);o.use(s),this.scheduler?.notify(10)}).catch(a=>{o.use(n)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(i){tl()}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac})}}return r})(),mp=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,i,n){this.delegate.insertBefore(e,t,i,n)}removeChild(e,t,i){this.delegate.removeChild(e,t,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,n){this.delegate.setAttribute(e,t,i,n)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,n){this.delegate.setStyle(e,t,i,n)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){this.shouldReplay(t)&&this.replay.push(n=>n.setProperty(e,t,i)),this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.shouldReplay(t)&&this.replay.push(n=>n.listen(e,t,i)),this.delegate.listen(e,t,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(fA)}},pA=new ot("");function K1(r="animations"){return Fv("NgAsyncAnimations"),Ks([{provide:Qc,useFactory:(e,t,i)=>new hA(e,t,i,r),deps:[ut,cu,dt]},{provide:Zi,useValue:r==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Q1={providers:[Uv({eventCoalescing:!0}),$1(Z1),K1()]};var ju=typeof self<"u"?self:global,Fl=typeof navigator<"u",mA=Fl&&typeof HTMLImageElement>"u",Du=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),zu=ju.Buffer,Su=ju.BigInt,Hu=!!zu,gA=r=>r;function Ou(r,e=gA){if(Du)try{return typeof Hf=="function"?Promise.resolve(e(Hf(r))):import(r).then(e)}catch{console.warn(`Couldn't load ${r}`)}}var Op=ju.fetch,vA=r=>Op=r;if(!ju.fetch){let r=Ou("http",i=>i),e=Ou("https",i=>i),t=(i,{headers:n}={})=>new Promise((o,a)=>Oe(void 0,null,function*(){let{port:s,hostname:l,pathname:d,protocol:h,search:p}=new URL(i),v={method:"GET",hostname:l,path:encodeURI(d)+p,headers:n};s!==""&&(v.port=Number(s));let _=(h==="https:"?yield e:yield r).request(v,E=>{if(E.statusCode===301||E.statusCode===302){let A=new URL(E.headers.location,i).toString();return t(A,{headers:n}).then(o).catch(a)}o({status:E.statusCode,arrayBuffer:()=>new Promise(A=>{let N=[];E.on("data",F=>N.push(F)),E.on("end",()=>A(Buffer.concat(N)))})})});_.on("error",a),_.end()}));vA(t)}function Ye(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var Ru=r=>f_(r)?void 0:r,_A=r=>r!==void 0;function f_(r){return r===void 0||(r instanceof Map?r.size===0:Object.values(r).filter(_A).length===0)}function Dr(r){let e=new Error(r);throw delete e.stack,e}function Wo(r){return(r=function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e}(r).trim())===""?void 0:r}function yp(r){let e=function(t){let i=0;return t.ifd0.enabled&&(i+=1024),t.exif.enabled&&(i+=2048),t.makerNote&&(i+=2048),t.userComment&&(i+=1024),t.gps.enabled&&(i+=512),t.interop.enabled&&(i+=100),t.ifd1.enabled&&(i+=1024),i+2048}(r);return r.jfif.enabled&&(e+=50),r.xmp.enabled&&(e+=2e4),r.iptc.enabled&&(e+=14e3),r.icc.enabled&&(e+=6e3),e}var bp=r=>String.fromCharCode.apply(null,r),J1=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function h_(r){return J1?J1.decode(r):Hu?Buffer.from(r).toString("utf8"):decodeURIComponent(escape(bp(r)))}var hn=class r{static from(e,t){return e instanceof this&&e.le===t?e:new r(e,void 0,void 0,t)}constructor(e,t=0,i,n){if(typeof n=="boolean"&&(this.le=n),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){i===void 0&&(i=e.byteLength-t);let o=new DataView(e,t,i);this._swapDataView(o)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof r){i===void 0&&(i=e.byteLength-t),(t+=e.byteOffset)+i>e.byteOffset+e.byteLength&&Dr("Creating view outside of available memory in ArrayBuffer");let o=new DataView(e.buffer,t,i);this._swapDataView(o)}else if(typeof e=="number"){let o=new DataView(new ArrayBuffer(e));this._swapDataView(o)}else Dr("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,i=r){return e instanceof DataView||e instanceof r?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||Dr("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new i(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new r(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){return h_(this.getUint8Array(e,t))}getLatin1String(e=0,t=this.byteLength){let i=this.getUint8Array(e,t);return bp(i)}getUnicodeString(e=0,t=this.byteLength){let i=[];for(let n=0;n<t&&e+n<this.byteLength;n+=2)i.push(this.getUint16(e+n));return bp(i)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,i){switch(t){case 1:return this.getUint8(e,i);case 2:return this.getUint16(e,i);case 4:return this.getUint32(e,i);case 8:return this.getUint64&&this.getUint64(e,i)}}getUint(e,t,i){switch(t){case 8:return this.getUint8(e,i);case 16:return this.getUint16(e,i);case 32:return this.getUint32(e,i);case 64:return this.getUint64&&this.getUint64(e,i)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}};function xp(r,e){Dr(`${r} '${e}' was not loaded, try using full build of exifr.`)}var kl=class extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||xp(this.kind,e),t&&(e in t||function(i,n){Dr(`Unknown ${i} '${n}'.`)}(this.kind,e),t[e].enabled||xp(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}},pn=new kl("file parser"),Tr=new kl("segment parser"),gn=new kl("file reader");function yA(r,e){return typeof r=="string"?e_(r,e):Fl&&!mA&&r instanceof HTMLImageElement?e_(r.src,e):r instanceof Uint8Array||r instanceof ArrayBuffer||r instanceof DataView?new hn(r):Fl&&r instanceof Blob?Ep(r,e,"blob",$o):void Dr("Invalid input argument")}function e_(r,e){return(t=r).startsWith("data:")||t.length>1e4?wp(r,e,"base64"):Du&&r.includes("://")?Ep(r,e,"url",qo):Du?wp(r,e,"fs"):Fl?Ep(r,e,"url",qo):void Dr("Invalid input argument");var t}function Ep(r,e,t,i){return Oe(this,null,function*(){return gn.has(t)?wp(r,e,t):i?function(n,o){return Oe(this,null,function*(){let a=yield o(n);return new hn(a)})}(r,i):void Dr(`Parser ${t} is not loaded`)})}function wp(r,e,t){return Oe(this,null,function*(){let i=new(gn.get(t))(r,e);return yield i.read(),i})}var qo=r=>Op(r).then(e=>e.arrayBuffer()),$o=r=>new Promise((e,t)=>{let i=new FileReader;i.onloadend=()=>e(i.result||new ArrayBuffer),i.onerror=t,i.readAsArrayBuffer(r)}),Ip=class extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}};function wr(r,e,t){let i=new Ip;for(let[n,o]of t)i.set(n,o);if(Array.isArray(e))for(let n of e)r.set(n,i);else r.set(e,i);return i}function Zo(r,e,t){let i,n=r.get(e);for(i of t)n.set(i[0],i[1])}var Lr=new Map,en=new Map,ro=new Map,Qn=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Ja=["jfif","xmp","icc","iptc","ihdr"],Ko=["tiff",...Ja],gr=["ifd0","ifd1","exif","gps","interop"],Jn=[...Ko,...gr],eo=["makerNote","userComment"],es=["translateKeys","translateValues","reviveValues","multiSegment"],to=[...es,"sanitize","mergeOutput","silentErrors"],Mu=class{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}},Ho=class extends Mu{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,i,n){if(super(),Ye(this,"enabled",!1),Ye(this,"skip",new Set),Ye(this,"pick",new Set),Ye(this,"deps",new Set),Ye(this,"translateKeys",!1),Ye(this,"translateValues",!1),Ye(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(n),this.canBeFiltered=gr.includes(e),this.canBeFiltered&&(this.dict=Lr.get(e)),i!==void 0)if(Array.isArray(i))this.parse=this.enabled=!0,this.canBeFiltered&&i.length>0&&this.translateTagSet(i,this.pick);else if(typeof i=="object"){if(this.enabled=!0,this.parse=i.parse!==!1,this.canBeFiltered){let{pick:o,skip:a}=i;o&&o.length>0&&this.translateTagSet(o,this.pick),a&&a.length>0&&this.translateTagSet(a,this.skip)}this.applyInheritables(i)}else i===!0||i===!1?this.parse=this.enabled=i:Dr(`Invalid options argument: ${i}`)}applyInheritables(e){let t,i;for(t of es)i=e[t],i!==void 0&&(this[t]=i)}translateTagSet(e,t){if(this.dict){let i,n,{tagKeys:o,tagValues:a}=this.dict;for(i of e)typeof i=="string"?(n=a.indexOf(i),n===-1&&(n=o.indexOf(Number(i))),n!==-1&&t.add(Number(o[n]))):t.add(i)}else for(let i of e)t.add(i)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,Pu(this.pick,this.deps)):this.enabled&&this.pick.size>0&&Pu(this.pick,this.deps)}},ai={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},t_=new Map,Dn=class extends Mu{static useCached(e){let t=t_.get(e);return t!==void 0||(t=new this(e),t_.set(e,t)),t}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):Dr(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=Fl?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of Qn)this[e]=ai[e];for(e of to)this[e]=ai[e];for(e of eo)this[e]=ai[e];for(e of Jn)this[e]=new Ho(e,ai[e],void 0,this)}setupFromTrue(){let e;for(e of Qn)this[e]=ai[e];for(e of to)this[e]=ai[e];for(e of eo)this[e]=!0;for(e of Jn)this[e]=new Ho(e,!0,void 0,this)}setupFromArray(e){let t;for(t of Qn)this[t]=ai[t];for(t of to)this[t]=ai[t];for(t of eo)this[t]=ai[t];for(t of Jn)this[t]=new Ho(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,gr)}setupFromObject(e){let t;for(t of(gr.ifd0=gr.ifd0||gr.image,gr.ifd1=gr.ifd1||gr.thumbnail,Object.assign(this,e),Qn))this[t]=gp(e[t],ai[t]);for(t of to)this[t]=gp(e[t],ai[t]);for(t of eo)this[t]=gp(e[t],ai[t]);for(t of Ko)this[t]=new Ho(t,ai[t],e[t],this);for(t of gr)this[t]=new Ho(t,ai[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,gr,Jn),e.tiff===!0?this.batchEnableWithBool(gr,!0):e.tiff===!1?this.batchEnableWithUserValue(gr,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,gr):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,gr)}batchEnableWithBool(e,t){for(let i of e)this[i].enabled=t}batchEnableWithUserValue(e,t){for(let i of e){let n=t[i];this[i].enabled=n!==!1&&n!==void 0}}setupGlobalFilters(e,t,i,n=i){if(e&&e.length){for(let a of n)this[a].enabled=!1;let o=r_(e,i);for(let[a,s]of o)Pu(this[a].pick,s),this[a].enabled=!0}else if(t&&t.length){let o=r_(t,i);for(let[a,s]of o)Pu(this[a].skip,s)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:i,iptc:n,icc:o}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),i.enabled||e.skip.add(700),n.enabled||e.skip.add(33723),o.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:i,interop:n}=this;n.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),i.needed&&e.deps.add(34853),this.tiff.enabled=gr.some(o=>this[o].enabled===!0)||this.makerNote||this.userComment;for(let o of gr)this[o].finalizeFilters()}get onlyTiff(){return!Ja.map(e=>this[e].enabled).some(e=>e===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let e of Ko)this[e].enabled&&!Tr.has(e)&&xp("segment parser",e)}};function r_(r,e){let t,i,n,o,a=[];for(n of e){for(o of(t=Lr.get(n),i=[],t))(r.includes(o[0])||r.includes(o[1]))&&i.push(o[0]);i.length&&a.push([n,i])}return a}function gp(r,e){return r!==void 0?r:e!==void 0?e:void 0}function Pu(r,e){for(let t of e)r.add(t)}Ye(Dn,"default",ai);var mn=class{constructor(e){Ye(this,"parsers",{}),Ye(this,"output",{}),Ye(this,"errors",[]),Ye(this,"pushToErrors",t=>this.errors.push(t)),this.options=Dn.useCached(e)}read(e){return Oe(this,null,function*(){this.file=yield yA(e,this.options)})}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[i,n]of pn)if(n.canHandle(e,t))return this.fileParser=new n(this.options,this.file,this.parsers),e[i]=!0;this.file.close&&this.file.close(),Dr("Unknown file format")}parse(){return Oe(this,null,function*(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(yield this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):yield this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),Ru(e)})}executeParsers(){return Oe(this,null,function*(){let{output:e}=this;yield this.fileParser.parse();let t=Object.values(this.parsers).map(i=>Oe(this,null,function*(){let n=yield i.parse();i.assignToOutput(e,n)}));this.options.silentErrors&&(t=t.map(i=>i.catch(this.pushToErrors))),yield Promise.all(t)})}extractThumbnail(){return Oe(this,null,function*(){this.setup();let{options:e,file:t}=this,i=Tr.get("tiff",e);var n;if(t.tiff?n={start:0,type:"tiff"}:t.jpeg&&(n=yield this.fileParser.getOrFindSegment("tiff")),n===void 0)return;let o=yield this.fileParser.ensureSegmentChunk(n),a=this.parsers.tiff=new i(o,e,t),s=yield a.extractThumbnail();return t.close&&t.close(),s})}};function ts(r,e){return Oe(this,null,function*(){let t=new mn(e);return yield t.read(r),t.parse()})}var bA=Object.freeze({__proto__:null,parse:ts,Exifr:mn,fileParsers:pn,segmentParsers:Tr,fileReaders:gn,tagKeys:Lr,tagValues:en,tagRevivers:ro,createDictionary:wr,extendDictionary:Zo,fetchUrlAsArrayBuffer:qo,readBlobAsArrayBuffer:$o,chunkedProps:Qn,otherSegments:Ja,segments:Ko,tiffBlocks:gr,segmentsAndBlocks:Jn,tiffExtractables:eo,inheritables:es,allFormatters:to,Options:Dn}),Ka=class{constructor(e,t,i){Ye(this,"errors",[]),Ye(this,"ensureSegmentChunk",n=>Oe(this,null,function*(){let o=n.start,a=n.size||65536;if(this.file.chunked)if(this.file.available(o,a))n.chunk=this.file.subarray(o,a);else try{n.chunk=yield this.file.readChunk(o,a)}catch(s){Dr(`Couldn't read segment: ${JSON.stringify(n)}. ${s.message}`)}else this.file.byteLength>o+a?n.chunk=this.file.subarray(o,a):n.size===void 0?n.chunk=this.file.subarray(o):Dr("Segment unreachable: "+JSON.stringify(n));return n.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=i}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let i=new(Tr.get(e))(t,this.options,this.file);return this.parsers[e]=i}createParsers(e){for(let t of e){let{type:i,chunk:n}=t,o=this.options[i];if(o&&o.enabled){let a=this.parsers[i];a&&a.append||a||this.createParser(i,n)}}}readSegments(e){return Oe(this,null,function*(){let t=e.map(this.ensureSegmentChunk);yield Promise.all(t)})}},Ti=class{static findPosition(e,t){let i=e.getUint16(t+2)+2,n=typeof this.headerLength=="function"?this.headerLength(e,t,i):this.headerLength,o=t+n,a=i-n;return{offset:t,length:i,headerLength:n,start:o,size:a,end:o+a}}static parse(e,t={}){return new this(e,new Dn({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof hn?e:new hn(e)}constructor(e,t={},i){Ye(this,"errors",[]),Ye(this,"raw",new Map),Ye(this,"handleError",n=>{if(!this.options.silentErrors)throw n;this.errors.push(n.message)}),this.chunk=this.normalizeInput(e),this.file=i,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let i=ro.get(t),n=en.get(t),o=Lr.get(t),a=this.options[t],s=a.reviveValues&&!!i,l=a.translateValues&&!!n,d=a.translateKeys&&!!o,h={};for(let[p,v]of e)s&&i.has(p)?v=i.get(p)(v):l&&n.has(p)&&(v=this.translateValue(v,n.get(p))),d&&o.has(p)&&(p=o.get(p)||p),h[p]=v;return h}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,i){if(this.globalOptions.mergeOutput)return Object.assign(e,i);e[t]?Object.assign(e[t],i):e[t]=i}};Ye(Ti,"headerLength",4),Ye(Ti,"type",void 0),Ye(Ti,"multiSegment",!1),Ye(Ti,"canHandle",()=>!1);function xA(r){return r===192||r===194||r===196||r===219||r===221||r===218||r===254}function EA(r){return r>=224&&r<=239}function wA(r,e,t){for(let[i,n]of Tr)if(n.canHandle(r,e,t))return i}var Nu=class extends Ka{constructor(...e){super(...e),Ye(this,"appSegments",[]),Ye(this,"jpegSegments",[]),Ye(this,"unknownSegments",[])}static canHandle(e,t){return t===65496}parse(){return Oe(this,null,function*(){yield this.findAppSegments(),yield this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)})}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(Tr.keyList())):(e=e===void 0?Tr.keyList().filter(t=>this.options[t].enabled):e.filter(t=>this.options[t].enabled&&Tr.has(t)),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}findAppSegments(e=0,t){return Oe(this,null,function*(){this.setupSegmentFinderArgs(t);let{file:i,findAll:n,wanted:o,remaining:a}=this;if(!n&&this.file.chunked&&(n=Array.from(o).some(s=>{let l=Tr.get(s),d=this.options[s];return l.multiSegment&&d.multiSegment}),n&&(yield this.file.readWhole())),e=this.findAppSegmentsInRange(e,i.byteLength),!this.options.onlyTiff&&i.chunked){let s=!1;for(;a.size>0&&!s&&(i.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:l}=i,d=this.appSegments.some(h=>!this.file.available(h.offset||h.start,h.length||h.size));if(s=e>l&&!d?!(yield i.readNextChunk(e)):!(yield i.readNextChunk(l)),(e=this.findAppSegmentsInRange(e,i.byteLength))===void 0)return}}})}findAppSegmentsInRange(e,t){t-=2;let i,n,o,a,s,l,{file:d,findAll:h,wanted:p,remaining:v,options:_}=this;for(;e<t;e++)if(d.getUint8(e)===255){if(i=d.getUint8(e+1),EA(i)){if(n=d.getUint16(e+2),o=wA(d,e,n),o&&p.has(o)&&(a=Tr.get(o),s=a.findPosition(d,e),l=_[o],s.type=o,this.appSegments.push(s),!h&&(a.multiSegment&&l.multiSegment?(this.unfinishedMultiSegment=s.chunkNumber<s.chunkCount,this.unfinishedMultiSegment||v.delete(o)):v.delete(o),v.size===0)))break;_.recordUnknownSegments&&(s=Ti.findPosition(d,e),s.marker=i,this.unknownSegments.push(s)),e+=n+1}else if(xA(i)){if(n=d.getUint16(e+2),i===218&&_.stopAfterSos!==!1)return;_.recordJpegSegments&&this.jpegSegments.push({offset:e,length:n,marker:i}),e+=n+1}}return e}mergeMultiSegments(){if(!this.appSegments.some(t=>t.multiSegment))return;let e=function(t,i){let n,o,a,s=new Map;for(let l=0;l<t.length;l++)n=t[l],o=n[i],s.has(o)?a=s.get(o):s.set(o,a=[]),a.push(n);return Array.from(s)}(this.appSegments,"type");this.mergedAppSegments=e.map(([t,i])=>{let n=Tr.get(t,this.options);return n.handleMultiSegments?{type:t,chunk:n.handleMultiSegments(i)}:i[0]})}getSegment(e){return this.appSegments.find(t=>t.type===e)}getOrFindSegment(e){return Oe(this,null,function*(){let t=this.getSegment(e);return t===void 0&&(yield this.findAppSegments(0,[e]),t=this.getSegment(e)),t})}};Ye(Nu,"type","jpeg"),pn.set("jpeg",Nu);var IA=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4],Cp=class extends Ti{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,i=new Map){let{pick:n,skip:o}=this.options[t];n=new Set(n);let a=n.size>0,s=o.size===0,l=this.chunk.getUint16(e);e+=2;for(let d=0;d<l;d++){let h=this.chunk.getUint16(e);if(a){if(n.has(h)&&(i.set(h,this.parseTag(e,h,t)),n.delete(h),n.size===0))break}else!s&&o.has(h)||i.set(h,this.parseTag(e,h,t));e+=12}return i}parseTag(e,t,i){let{chunk:n}=this,o=n.getUint16(e+2),a=n.getUint32(e+4),s=IA[o];if(s*a<=4?e+=8:e=n.getUint32(e+8),(o<1||o>13)&&Dr(`Invalid TIFF value type. block: ${i.toUpperCase()}, tag: ${t.toString(16)}, type: ${o}, offset ${e}`),e>n.byteLength&&Dr(`Invalid TIFF value offset. block: ${i.toUpperCase()}, tag: ${t.toString(16)}, type: ${o}, offset ${e} is outside of chunk size ${n.byteLength}`),o===1)return n.getUint8Array(e,a);if(o===2)return Wo(n.getString(e,a));if(o===7)return n.getUint8Array(e,a);if(a===1)return this.parseTagValue(o,e);{let l=new(function(h){switch(h){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(o))(a),d=s;for(let h=0;h<a;h++)l[h]=this.parseTagValue(o,e),e+=d;return l}}parseTagValue(e,t){let{chunk:i}=this;switch(e){case 1:return i.getUint8(t);case 3:return i.getUint16(t);case 4:return i.getUint32(t);case 5:return i.getUint32(t)/i.getUint32(t+4);case 6:return i.getInt8(t);case 8:return i.getInt16(t);case 9:return i.getInt32(t);case 10:return i.getInt32(t)/i.getInt32(t+4);case 11:return i.getFloat(t);case 12:return i.getDouble(t);case 13:return i.getUint32(t);default:Dr(`Invalid tiff type ${e}`)}}},Rl=class extends Cp{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1165519206&&e.getUint16(t+8)===0}parse(){return Oe(this,null,function*(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&(yield this.parseIfd0Block()),e.exif.enabled&&(yield this.safeParse("parseExifBlock")),e.gps.enabled&&(yield this.safeParse("parseGpsBlock")),e.interop.enabled&&(yield this.safeParse("parseInteropBlock")),e.ifd1.enabled&&(yield this.safeParse("parseThumbnailBlock")),this.createOutput()})}safeParse(e){let t=this[e]();return t.catch!==void 0&&(t=t.catch(this.handleError)),t}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let i=new Map;return this[t]=i,this.parseTags(e,t,i),i}parseIfd0Block(){return Oe(this,null,function*(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Dr("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&Dr(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&(yield e.ensureChunk(this.ifd0Offset,yp(this.options)));let t=this.parseBlock(this.ifd0Offset,"ifd0");return t.size!==0?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0})}parseExifBlock(){return Oe(this,null,function*(){if(this.exif||(this.ifd0||(yield this.parseIfd0Block()),this.exifOffset===void 0))return;this.file.tiff&&(yield this.file.ensureChunk(this.exifOffset,yp(this.options)));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e})}unpack(e,t){let i=e.get(t);i&&i.length===1&&e.set(t,i[0])}parseGpsBlock(){return Oe(this,null,function*(){if(this.gps||(this.ifd0||(yield this.parseIfd0Block()),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",i_(...e.get(2),e.get(1))),e.set("longitude",i_(...e.get(4),e.get(3)))),e})}parseInteropBlock(){return Oe(this,null,function*(){if(!this.interop&&(this.ifd0||(yield this.parseIfd0Block()),this.interopOffset!==void 0||this.exif||(yield this.parseExifBlock()),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")})}parseThumbnailBlock(e=!1){return Oe(this,null,function*(){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1})}extractThumbnail(){return Oe(this,null,function*(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||(yield this.parseThumbnailBlock(!0)),this.ifd1===void 0)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)})}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,i,n={};for(t of gr)if(e=this[t],!f_(e))if(i=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if(t==="ifd1")continue;Object.assign(n,i)}else n[t]=i;return this.makerNote&&(n.makerNote=this.makerNote),this.userComment&&(n.userComment=this.userComment),n}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[i,n]of Object.entries(t))this.assignObjectToOutput(e,i,n)}};function i_(r,e,t,i){var n=r+e/60+t/3600;return i!=="S"&&i!=="W"||(n*=-1),n}Ye(Rl,"type","tiff"),Ye(Rl,"headerLength",10),Tr.set("tiff",Rl);var CA=Object.freeze({__proto__:null,default:bA,Exifr:mn,fileParsers:pn,segmentParsers:Tr,fileReaders:gn,tagKeys:Lr,tagValues:en,tagRevivers:ro,createDictionary:wr,extendDictionary:Zo,fetchUrlAsArrayBuffer:qo,readBlobAsArrayBuffer:$o,chunkedProps:Qn,otherSegments:Ja,segments:Ko,tiffBlocks:gr,segmentsAndBlocks:Jn,tiffExtractables:eo,inheritables:es,allFormatters:to,Options:Dn,parse:ts}),Rp={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},Mp=Object.assign({},Rp,{firstChunkSize:4e4,gps:[1,2,3,4]});function p_(r){return Oe(this,null,function*(){let e=new mn(Mp);yield e.read(r);let t=yield e.parse();if(t&&t.gps){let{latitude:i,longitude:n}=t.gps;return{latitude:i,longitude:n}}})}var Pp=Object.assign({},Rp,{tiff:!1,ifd1:!0,mergeOutput:!1});function m_(r){return Oe(this,null,function*(){let e=new mn(Pp);yield e.read(r);let t=yield e.extractThumbnail();return t&&Hu?zu.from(t):t})}function g_(r){return Oe(this,null,function*(){let e=yield this.thumbnail(r);if(e!==void 0){let t=new Blob([e]);return URL.createObjectURL(t)}})}var Np=Object.assign({},Rp,{firstChunkSize:4e4,ifd0:[274]});function Fp(r){return Oe(this,null,function*(){let e=new mn(Np);yield e.read(r);let t=yield e.parse();if(t&&t.ifd0)return t.ifd0[274]})}var kp=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}}),Xo=!0,Yo=!0;if(typeof navigator=="object"){let r=navigator.userAgent;if(r.includes("iPad")||r.includes("iPhone")){let e=r.match(/OS (\d+)_(\d+)/);if(e){let[,t,i]=e;Xo=Number(t)+.1*Number(i)<13.4,Yo=!1}}else if(r.includes("OS X 10")){let[,e]=r.match(/OS X 10[_.](\d+)/);Xo=Yo=Number(e)<15}if(r.includes("Chrome/")){let[,e]=r.match(/Chrome\/(\d+)/);Xo=Yo=Number(e)<81}else if(r.includes("Firefox/")){let[,e]=r.match(/Firefox\/(\d+)/);Xo=Yo=Number(e)<77}}function v_(r){return Oe(this,null,function*(){let e=yield Fp(r);return Object.assign({canvas:Xo,css:Yo},kp[e])})}var Ap=class extends hn{constructor(...e){super(...e),Ye(this,"ranges",new Sp),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,i){if(e===0&&this.byteLength===0&&i){let n=new DataView(i.buffer||i,i.byteOffset,i.byteLength);this._swapDataView(n)}else{let n=e+t;if(n>this.byteLength){let{dataView:o}=this._extend(n);this._swapDataView(o)}}}_extend(e){let t;t=Hu?zu.allocUnsafe(e):new Uint8Array(e);let i=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:i}}subarray(e,t,i=!1){return t=t||this._lengthToEnd(e),i&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,i=!1){i&&this._tryExtend(t,e.byteLength,e);let n=super.set(e,t);return this.ranges.add(t,n.byteLength),n}ensureChunk(e,t){return Oe(this,null,function*(){this.chunked&&(this.ranges.available(e,t)||(yield this.readChunk(e,t)))})}available(e,t){return this.ranges.available(e,t)}},Sp=class{constructor(){Ye(this,"list",[])}get length(){return this.list.length}add(e,t,i=0){let n=e+t,o=this.list.filter(a=>n_(e,a.offset,n)||n_(e,a.end,n));if(o.length>0){e=Math.min(e,...o.map(s=>s.offset)),n=Math.max(n,...o.map(s=>s.end)),t=n-e;let a=o.shift();a.offset=e,a.length=t,a.end=n,this.list=this.list.filter(s=>!o.includes(s))}else this.list.push({offset:e,length:t,end:n})}available(e,t){let i=e+t;return this.list.some(n=>n.offset<=e&&i<=n.end)}};function n_(r,e,t){return r<=e&&e<=t}var Qa=class extends Ap{constructor(e,t){super(0),Ye(this,"chunksRead",0),this.input=e,this.options=t}readWhole(){return Oe(this,null,function*(){this.chunked=!1,yield this.readChunk(this.nextChunkOffset)})}readChunked(){return Oe(this,null,function*(){this.chunked=!0,yield this.readChunk(0,this.options.firstChunkSize)})}readNextChunk(){return Oe(this,arguments,function*(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,i=yield this.readChunk(e,t);return!!i&&i.byteLength===t})}readChunk(e,t){return Oe(this,null,function*(){if(this.chunksRead++,(t=this.safeWrapAddress(e,t))!==0)return this._readChunk(e,t)})}safeWrapAddress(e,t){return this.size!==void 0&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}};gn.set("blob",class extends Qa{readWhole(){return Oe(this,null,function*(){this.chunked=!1;let r=yield $o(this.input);this._swapArrayBuffer(r)})}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}_readChunk(r,e){return Oe(this,null,function*(){let t=e?r+e:void 0,i=this.input.slice(r,t),n=yield $o(i);return this.set(n,r,!0)})}});var AA=Object.freeze({__proto__:null,default:CA,Exifr:mn,fileParsers:pn,segmentParsers:Tr,fileReaders:gn,tagKeys:Lr,tagValues:en,tagRevivers:ro,createDictionary:wr,extendDictionary:Zo,fetchUrlAsArrayBuffer:qo,readBlobAsArrayBuffer:$o,chunkedProps:Qn,otherSegments:Ja,segments:Ko,tiffBlocks:gr,segmentsAndBlocks:Jn,tiffExtractables:eo,inheritables:es,allFormatters:to,Options:Dn,parse:ts,gpsOnlyOptions:Mp,gps:p_,thumbnailOnlyOptions:Pp,thumbnail:m_,thumbnailUrl:g_,orientationOnlyOptions:Np,orientation:Fp,rotations:kp,get rotateCanvas(){return Xo},get rotateCss(){return Yo},rotation:v_});gn.set("url",class extends Qa{readWhole(){return Oe(this,null,function*(){this.chunked=!1;let r=yield qo(this.input);r instanceof ArrayBuffer?this._swapArrayBuffer(r):r instanceof Uint8Array&&this._swapBuffer(r)})}_readChunk(r,e){return Oe(this,null,function*(){let t=e?r+e-1:void 0,i=this.options.httpHeaders||{};(r||t)&&(i.range=`bytes=${[r,t].join("-")}`);let n=yield Op(this.input,{headers:i}),o=yield n.arrayBuffer(),a=o.byteLength;if(n.status!==416)return a!==e&&(this.size=r+a),this.set(o,r,!0)})}});hn.prototype.getUint64=function(r){let e=this.getUint32(r),t=this.getUint32(r+4);return e<1048575?e<<32|t:typeof Su!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),Su(e)<<Su(32)|Su(t)):void Dr("Trying to read 64b value but JS can only handle 53b numbers.")};var Tp=class extends Ka{parseBoxes(e=0){let t=[];for(;e<this.file.byteLength-4;){let i=this.parseBoxHead(e);if(t.push(i),i.length===0)break;e+=i.length}return t}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,t){return e.boxes===void 0&&this.parseSubBoxes(e),e.boxes.find(i=>i.kind===t)}parseBoxHead(e){let t=this.file.getUint32(e),i=this.file.getString(e+4,4),n=e+8;return t===1&&(t=this.file.getUint64(e+8),n+=8),{offset:e,length:t,kind:i,start:n}}parseBoxFullHead(e){if(e.version!==void 0)return;let t=this.file.getUint32(e.start);e.version=t>>24,e.start+=4}},Fu=class extends Tp{static canHandle(e,t){if(t!==0)return!1;let i=e.getUint16(2);if(i>50)return!1;let n=16,o=[];for(;n<i;)o.push(e.getString(n,4)),n+=4;return o.includes(this.type)}parse(){return Oe(this,null,function*(){let e=this.file.getUint32(0),t=this.parseBoxHead(e);for(;t.kind!=="meta";)e+=t.length,yield this.file.ensureChunk(e,16),t=this.parseBoxHead(e);yield this.file.ensureChunk(t.offset,t.length),this.parseBoxFullHead(t),this.parseSubBoxes(t),this.options.icc.enabled&&(yield this.findIcc(t)),this.options.tiff.enabled&&(yield this.findExif(t))})}registerSegment(e,t,i){return Oe(this,null,function*(){yield this.file.ensureChunk(t,i);let n=this.file.subarray(t,i);this.createParser(e,n)})}findIcc(e){return Oe(this,null,function*(){let t=this.findBox(e,"iprp");if(t===void 0)return;let i=this.findBox(t,"ipco");if(i===void 0)return;let n=this.findBox(i,"colr");n!==void 0&&(yield this.registerSegment("icc",n.offset+12,n.length))})}findExif(e){return Oe(this,null,function*(){let t=this.findBox(e,"iinf");if(t===void 0)return;let i=this.findBox(e,"iloc");if(i===void 0)return;let n=this.findExifLocIdInIinf(t),o=this.findExtentInIloc(i,n);if(o===void 0)return;let[a,s]=o;yield this.file.ensureChunk(a,s);let l=4+this.file.getUint32(a);a+=l,s-=l,yield this.registerSegment("tiff",a,s)})}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let t,i,n,o,a=e.start,s=this.file.getUint16(a);for(a+=2;s--;){if(t=this.parseBoxHead(a),this.parseBoxFullHead(t),i=t.start,t.version>=2&&(n=t.version===3?4:2,o=this.file.getString(i+n+2,4),o==="Exif"))return this.file.getUintBytes(i,n);a+=t.length}}get8bits(e){let t=this.file.getUint8(e);return[t>>4,15&t]}findExtentInIloc(e,t){this.parseBoxFullHead(e);let i=e.start,[n,o]=this.get8bits(i++),[a,s]=this.get8bits(i++),l=e.version===2?4:2,d=e.version===1||e.version===2?2:0,h=s+n+o,p=e.version===2?4:2,v=this.file.getUintBytes(i,p);for(i+=p;v--;){let _=this.file.getUintBytes(i,l);i+=l+d+2+a;let E=this.file.getUint16(i);if(i+=2,_===t)return E>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(i+s,n),this.file.getUintBytes(i+s+n,o)];i+=E*h}}},ku=class extends Fu{};Ye(ku,"type","heic");var Lu=class extends Fu{};Ye(Lu,"type","avif"),pn.set("heic",ku),pn.set("avif",Lu),wr(Lr,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),wr(Lr,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),wr(Lr,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),wr(en,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);var Ml=wr(en,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]),o_={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Ml.set(37392,o_),Ml.set(41488,o_);var vp={0:"Normal",1:"Low",2:"High"};function a_(r){return typeof r=="object"&&r.length!==void 0?r[0]:r}function s_(r){let e=Array.from(r).slice(1);return e[1]>15&&(e=e.map(t=>String.fromCharCode(t))),e[2]!=="0"&&e[2]!==0||e.pop(),e.join(".")}function _p(r){if(typeof r=="string"){var[e,t,i,n,o,a]=r.trim().split(/[-: ]/g).map(Number),s=new Date(e,t-1,i);return Number.isNaN(n)||Number.isNaN(o)||Number.isNaN(a)||(s.setHours(n),s.setMinutes(o),s.setSeconds(a)),Number.isNaN(+s)?r:s}}function Ol(r){if(typeof r=="string")return r;let e=[];if(r[1]===0&&r[r.length-1]===0)for(let t=0;t<r.length;t+=2)e.push(l_(r[t+1],r[t]));else for(let t=0;t<r.length;t+=2)e.push(l_(r[t],r[t+1]));return Wo(String.fromCodePoint(...e))}function l_(r,e){return r<<8|e}Ml.set(41992,vp),Ml.set(41993,vp),Ml.set(41994,vp),wr(ro,["ifd0","ifd1"],[[50827,function(r){return typeof r!="string"?h_(r):r}],[306,_p],[40091,Ol],[40092,Ol],[40093,Ol],[40094,Ol],[40095,Ol]]),wr(ro,"exif",[[40960,s_],[36864,s_],[36867,_p],[36868,_p],[40962,a_],[40963,a_]]),wr(ro,"gps",[[0,r=>Array.from(r).join(".")],[7,r=>Array.from(r).join(":")]]);var Pl=class extends Ti{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1752462448&&e.getString(t+4,20)==="http://ns.adobe.com/"}static headerLength(e,t){return e.getString(t+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(e,t){let i=super.findPosition(e,t);return i.multiSegment=i.extended=i.headerLength===79,i.multiSegment?(i.chunkCount=e.getUint8(t+72),i.chunkNumber=e.getUint8(t+76),e.getUint8(t+77)!==0&&i.chunkNumber++):(i.chunkCount=1/0,i.chunkNumber=-1),i}static handleMultiSegments(e){return e.map(t=>t.chunk.getString()).join("")}normalizeInput(e){return typeof e=="string"?e:hn.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=function(o){let a={},s={};for(let l of x_)a[l]=[],s[l]=0;return o.replace(OA,(l,d,h)=>{if(d==="<"){let p=++s[h];return a[h].push(p),`${l}#${p}`}return`${l}#${a[h].pop()}`})}(e);let t=Bu.findAll(e,"rdf","Description");t.length===0&&t.push(new Bu("rdf","Description",void 0,e));let i,n={};for(let o of t)for(let a of o.properties)i=DA(a.ns,n),__(a,i);return function(o){let a;for(let s in o)a=o[s]=Ru(o[s]),a===void 0&&delete o[s];return Ru(o)}(n)}assignToOutput(e,t){if(this.localOptions.parse)for(let[i,n]of Object.entries(t))switch(i){case"tiff":this.assignObjectToOutput(e,"ifd0",n);break;case"exif":this.assignObjectToOutput(e,"exif",n);break;case"xmlns":break;default:this.assignObjectToOutput(e,i,n)}else e.xmp=t}};Ye(Pl,"type","xmp"),Ye(Pl,"multiSegment",!0),Tr.set("xmp",Pl);var Dp=class r{static findAll(e){return y_(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(r.unpackMatch)}static unpackMatch(e){let t=e[1],i=e[2],n=e[3].slice(1,-1);return n=b_(n),new r(t,i,n)}constructor(e,t,i){this.ns=e,this.name=t,this.value=i}serialize(){return this.value}},Bu=class r{static findAll(e,t,i){if(t!==void 0||i!==void 0){t=t||"[\\w\\d-]+",i=i||"[\\w\\d-]+";var n=new RegExp(`<(${t}):(${i})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else n=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return y_(e,n).map(r.unpackMatch)}static unpackMatch(e){let t=e[1],i=e[2],n=e[4],o=e[8];return new r(t,i,n,o)}constructor(e,t,i,n){this.ns=e,this.name=t,this.attrString=i,this.innerXml=n,this.attrs=Dp.findAll(i),this.children=r.findAll(n),this.value=this.children.length===0?b_(n):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:e,name:t}=this;return e==="rdf"&&(t==="Seq"||t==="Bag"||t==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return TA(this.children.map(SA));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let e={};for(let t of this.properties)__(t,e);return this.value!==void 0&&(e.value=this.value),Ru(e)}};function __(r,e){let t=r.serialize();t!==void 0&&(e[r.name]=t)}var SA=r=>r.serialize(),TA=r=>r.length===1?r[0]:r,DA=(r,e)=>e[r]?e[r]:e[r]={};function y_(r,e){let t,i=[];if(!r)return i;for(;(t=e.exec(r))!==null;)i.push(t);return i}function b_(r){if(function(i){return i==null||i==="null"||i==="undefined"||i===""||i.trim()===""}(r))return;let e=Number(r);if(!Number.isNaN(e))return e;let t=r.toLowerCase();return t==="true"||t!=="false"&&r.trim()}var x_=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],OA=new RegExp(`(<|\\/)(${x_.join("|")})`,"g"),a8=Object.freeze({__proto__:null,default:AA,Exifr:mn,fileParsers:pn,segmentParsers:Tr,fileReaders:gn,tagKeys:Lr,tagValues:en,tagRevivers:ro,createDictionary:wr,extendDictionary:Zo,fetchUrlAsArrayBuffer:qo,readBlobAsArrayBuffer:$o,chunkedProps:Qn,otherSegments:Ja,segments:Ko,tiffBlocks:gr,segmentsAndBlocks:Jn,tiffExtractables:eo,inheritables:es,allFormatters:to,Options:Dn,parse:ts,gpsOnlyOptions:Mp,gps:p_,thumbnailOnlyOptions:Pp,thumbnail:m_,thumbnailUrl:g_,orientationOnlyOptions:Np,orientation:Fp,rotations:kp,get rotateCanvas(){return Xo},get rotateCss(){return Yo},rotation:v_});var c_=Ou("fs",r=>r.promises);gn.set("fs",class extends Qa{readWhole(){return Oe(this,null,function*(){this.chunked=!1,this.fs=yield c_;let r=yield this.fs.readFile(this.input);this._swapBuffer(r)})}readChunked(){return Oe(this,null,function*(){this.chunked=!0,this.fs=yield c_,yield this.open(),yield this.readChunk(0,this.options.firstChunkSize)})}open(){return Oe(this,null,function*(){this.fh===void 0&&(this.fh=yield this.fs.open(this.input,"r"),this.size=(yield this.fh.stat(this.input)).size)})}_readChunk(r,e){return Oe(this,null,function*(){this.fh===void 0&&(yield this.open()),r+e>this.size&&(e=this.size-r);var t=this.subarray(r,e,!0);return yield this.fh.read(t.dataView,0,e,r),t})}close(){return Oe(this,null,function*(){if(this.fh){let r=this.fh;this.fh=void 0,yield r.close()}})}});gn.set("base64",class extends Qa{constructor(...r){super(...r),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}_readChunk(r,e){return Oe(this,null,function*(){let t,i,n=this.input;r===void 0?(r=0,t=0,i=0):(t=4*Math.floor(r/3),i=r-t/4*3),e===void 0&&(e=this.size);let o=r+e,a=t+4*Math.ceil(o/3);n=n.slice(t,a);let s=Math.min(e,this.size-r);if(Hu){let l=zu.from(n,"base64").slice(i,i+s);return this.set(l,r,!0)}{let l=this.subarray(r,s,!0),d=atob(n),h=l.toUint8();for(let p=0;p<s;p++)h[p]=d.charCodeAt(i+p);return l}})}});var Vu=class extends Ka{static canHandle(e,t){return t===18761||t===19789}extendOptions(e){let{ifd0:t,xmp:i,iptc:n,icc:o}=e;i.enabled&&t.deps.add(700),n.enabled&&t.deps.add(33723),o.enabled&&t.deps.add(34675),t.finalizeFilters()}parse(){return Oe(this,null,function*(){let{tiff:e,xmp:t,iptc:i,icc:n}=this.options;if(e.enabled||t.enabled||i.enabled||n.enabled){let o=Math.max(yp(this.options),this.options.chunkSize);yield this.file.ensureChunk(0,o),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),yield this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}})}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let t=this.parsers.tiff[e];this.injectSegment(e,t)}}};Ye(Vu,"type","tiff"),pn.set("tiff",Vu);var RA=Ou("zlib"),MA=["ihdr","iccp","text","itxt","exif"],Uu=class extends Ka{constructor(...e){super(...e),Ye(this,"catchError",t=>this.errors.push(t)),Ye(this,"metaChunks",[]),Ye(this,"unknownChunks",[])}static canHandle(e,t){return t===35152&&e.getUint32(0)===2303741511&&e.getUint32(4)===218765834}parse(){return Oe(this,null,function*(){let{file:e}=this;yield this.findPngChunksInRange(8,e.byteLength),yield this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),yield this.findExif().catch(this.catchError),yield this.findXmp().catch(this.catchError),yield this.findIcc().catch(this.catchError)})}findPngChunksInRange(e,t){return Oe(this,null,function*(){let{file:i}=this;for(;e<t;){let n=i.getUint32(e),o=i.getUint32(e+4),a=i.getString(e+4,4).toLowerCase(),s=n+4+4+4,l={type:a,offset:e,length:s,start:e+4+4,size:n,marker:o};MA.includes(a)?this.metaChunks.push(l):this.unknownChunks.push(l),e+=s}})}parseTextChunks(){let e=this.metaChunks.filter(t=>t.type==="text");for(let t of e){let[i,n]=this.file.getString(t.start,t.size).split("\0");this.injectKeyValToIhdr(i,n)}}injectKeyValToIhdr(e,t){let i=this.parsers.ihdr;i&&i.raw.set(e,t)}findIhdr(){let e=this.metaChunks.find(t=>t.type==="ihdr");e&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",e.chunk)}findExif(){return Oe(this,null,function*(){let e=this.metaChunks.find(t=>t.type==="exif");e&&this.injectSegment("tiff",e.chunk)})}findXmp(){return Oe(this,null,function*(){let e=this.metaChunks.filter(t=>t.type==="itxt");for(let t of e)t.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",t.chunk)})}findIcc(){return Oe(this,null,function*(){let e=this.metaChunks.find(s=>s.type==="iccp");if(!e)return;let{chunk:t}=e,i=t.getUint8Array(0,81),n=0;for(;n<80&&i[n]!==0;)n++;let o=n+2,a=t.getString(0,n);if(this.injectKeyValToIhdr("ProfileName",a),Du){let s=yield RA,l=t.getUint8Array(o);l=s.inflateSync(l),this.injectSegment("icc",l)}})}};Ye(Uu,"type","png"),pn.set("png",Uu),wr(Lr,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),Zo(Lr,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);var u_=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];Zo(Lr,"ifd0",u_),Zo(Lr,"exif",u_),wr(en,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);var Nl=class extends Ti{static canHandle(e,t){return e.getUint8(t+1)===224&&e.getUint32(t+4)===1246120262&&e.getUint8(t+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}};Ye(Nl,"type","jfif"),Ye(Nl,"headerLength",9),Tr.set("jfif",Nl),wr(Lr,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);var Gu=class extends Ti{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}};Ye(Gu,"type","ihdr"),Tr.set("ihdr",Gu),wr(Lr,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),wr(en,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);var Za=class extends Ti{static canHandle(e,t){return e.getUint8(t+1)===226&&e.getUint32(t+4)===1229144927}static findPosition(e,t){let i=super.findPosition(e,t);return i.chunkNumber=e.getUint8(t+16),i.chunkCount=e.getUint8(t+17),i.multiSegment=i.chunkCount>1,i}static handleMultiSegments(e){return function(t){let i=function(n){let o=n[0].constructor,a=0;for(let d of n)a+=d.length;let s=new o(a),l=0;for(let d of n)s.set(d,l),l+=d.length;return s}(t.map(n=>n.chunk.toUint8()));return new hn(i)}(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&Dr("ICC header is too short");for(let[t,i]of Object.entries(PA)){t=parseInt(t,10);let n=i(this.chunk,t);n!=="\0\0\0\0"&&e.set(t,n)}}parseTags(){let e,t,i,n,o,{raw:a}=this,s=this.chunk.getUint32(128),l=132,d=this.chunk.byteLength;for(;s--;){if(e=this.chunk.getString(l,4),t=this.chunk.getUint32(l+4),i=this.chunk.getUint32(l+8),n=this.chunk.getString(t,4),t+i>d)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");o=this.parseTag(n,t,i),o!==void 0&&o!=="\0\0\0\0"&&a.set(e,o),l+=12}}parseTag(e,t,i){switch(e){case"desc":return this.parseDesc(t);case"mluc":return this.parseMluc(t);case"text":return this.parseText(t,i);case"sig ":return this.parseSig(t)}if(!(t+i>this.chunk.byteLength))return this.chunk.getUint8Array(t,i)}parseDesc(e){let t=this.chunk.getUint32(e+8)-1;return Wo(this.chunk.getString(e+12,t))}parseText(e,t){return Wo(this.chunk.getString(e+8,t-8))}parseSig(e){return Wo(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:t}=this,i=t.getUint32(e+8),n=t.getUint32(e+12),o=e+16,a=[];for(let s=0;s<i;s++){let l=t.getString(o+0,2),d=t.getString(o+2,2),h=t.getUint32(o+4),p=t.getUint32(o+8)+e,v=Wo(t.getUnicodeString(p,h));a.push({lang:l,country:d,text:v}),o+=n}return i===1?a[0].text:a}translateValue(e,t){return typeof e=="string"?t[e]||t[e.toLowerCase()]||e:t[e]||e}};Ye(Za,"type","icc"),Ye(Za,"multiSegment",!0),Ye(Za,"headerLength",18);var PA={4:Tn,8:function(r,e){return[r.getUint8(e),r.getUint8(e+1)>>4,r.getUint8(e+1)%16].map(t=>t.toString(10)).join(".")},12:Tn,16:Tn,20:Tn,24:function(r,e){let t=r.getUint16(e),i=r.getUint16(e+2)-1,n=r.getUint16(e+4),o=r.getUint16(e+6),a=r.getUint16(e+8),s=r.getUint16(e+10);return new Date(Date.UTC(t,i,n,o,a,s))},36:Tn,40:Tn,48:Tn,52:Tn,64:(r,e)=>r.getUint32(e),80:Tn};function Tn(r,e){return Wo(r.getString(e,4))}Tr.set("icc",Za),wr(Lr,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);var Tu={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},d_={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};wr(en,"icc",[[4,Tu],[12,d_],[40,Object.assign({},Tu,d_)],[48,Tu],[80,Tu],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);var $a=class extends Ti{static canHandle(e,t,i){return e.getUint8(t+1)===237&&e.getString(t+4,9)==="Photoshop"&&this.containsIptc8bim(e,t,i)!==void 0}static headerLength(e,t,i){let n,o=this.containsIptc8bim(e,t,i);if(o!==void 0)return n=e.getUint8(t+o+7),n%2!=0&&(n+=1),n===0&&(n=4),o+8+n}static containsIptc8bim(e,t,i){for(let n=0;n<i;n++)if(this.isIptcSegmentHead(e,t+n))return n}static isIptcSegmentHead(e,t){return e.getUint8(t)===56&&e.getUint32(t)===943868237&&e.getUint16(t+4)===1028}parse(){let{raw:e}=this,t=this.chunk.byteLength-1,i=!1;for(let n=0;n<t;n++)if(this.chunk.getUint8(n)===28&&this.chunk.getUint8(n+1)===2){i=!0;let o=this.chunk.getUint16(n+3),a=this.chunk.getUint8(n+2),s=this.chunk.getLatin1String(n+5,o);e.set(a,this.pluralizeValue(e.get(a),s)),n+=4+o}else if(i)break;return this.translate(),this.output}pluralizeValue(e,t){return e!==void 0?e instanceof Array?(e.push(t),e):[e,t]:t}};Ye($a,"type","iptc"),Ye($a,"translateValues",!1),Ye($a,"reviveValues",!1),Tr.set("iptc",$a),wr(Lr,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),wr(en,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);function io(r){return r==null||(typeof r=="string"||Array.isArray(r))&&r.length===0}function O_(r){return r!=null&&typeof r.length=="number"}var FA=new ot(""),kA=new ot(""),LA=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Gl=class{static min(e){return BA(e)}static max(e){return VA(e)}static required(e){return UA(e)}static requiredTrue(e){return GA(e)}static email(e){return jA(e)}static minLength(e){return zA(e)}static maxLength(e){return HA(e)}static pattern(e){return WA(e)}static nullValidator(e){return R_(e)}static compose(e){return L_(e)}static composeAsync(e){return V_(e)}};function BA(r){return e=>{if(io(e.value)||io(r))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<r?{min:{min:r,actual:e.value}}:null}}function VA(r){return e=>{if(io(e.value)||io(r))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>r?{max:{max:r,actual:e.value}}:null}}function UA(r){return io(r.value)?{required:!0}:null}function GA(r){return r.value===!0?null:{required:!0}}function jA(r){return io(r.value)||LA.test(r.value)?null:{email:!0}}function zA(r){return e=>io(e.value)||!O_(e.value)?null:e.value.length<r?{minlength:{requiredLength:r,actualLength:e.value.length}}:null}function HA(r){return e=>O_(e.value)&&e.value.length>r?{maxlength:{requiredLength:r,actualLength:e.value.length}}:null}function WA(r){if(!r)return R_;let e,t;return typeof r=="string"?(t="",r.charAt(0)!=="^"&&(t+="^"),t+=r,r.charAt(r.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=r.toString(),e=r),i=>{if(io(i.value))return null;let n=i.value;return e.test(n)?null:{pattern:{requiredPattern:t,actualValue:n}}}}function R_(r){return null}function M_(r){return r!=null}function P_(r){return ou(r)?hi(r):r}function N_(r){let e={};return r.forEach(t=>{e=t!=null?se(se({},e),t):e}),Object.keys(e).length===0?null:e}function F_(r,e){return e.map(t=>t(r))}function XA(r){return!r.validate}function k_(r){return r.map(e=>XA(e)?e:t=>e.validate(t))}function L_(r){if(!r)return null;let e=r.filter(M_);return e.length==0?null:function(t){return N_(F_(t,e))}}function B_(r){return r!=null?L_(k_(r)):null}function V_(r){if(!r)return null;let e=r.filter(M_);return e.length==0?null:function(t){let i=F_(t,e).map(P_);return Xc(i).pipe(Xe(N_))}}function U_(r){return r!=null?V_(k_(r)):null}function E_(r,e){return r===null?[e]:Array.isArray(r)?[...r,e]:[r,e]}function G_(r){return r._rawValidators}function j_(r){return r._rawAsyncValidators}function Lp(r){return r?Array.isArray(r)?r:[r]:[]}function Yu(r,e){return Array.isArray(r)?r.includes(e):r===e}function w_(r,e){let t=Lp(e);return Lp(r).forEach(n=>{Yu(t,n)||t.push(n)}),t}function I_(r,e){return Lp(e).filter(t=>!Yu(r,t))}var Bp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=B_(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=U_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Qo=class extends Bp{get formDirective(){return null}get path(){return null}};var Vp=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},YA={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},A8=Tt(se({},YA),{"[class.ng-submitted]":"isSubmitted"});var z_=(()=>{class r extends Vp{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||r)(_e(Qo,10))}}static{this.\u0275dir=xt({type:r,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,n){i&2&&cr("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)("ng-submitted",n.isSubmitted)},features:[ri]})}}return r})();var Ll="VALID",Wu="INVALID",rs="PENDING",Bl="DISABLED",no=class{},qu=class extends no{constructor(e,t){super(),this.value=e,this.source=t}},Vl=class extends no{constructor(e,t){super(),this.pristine=e,this.source=t}},Ul=class extends no{constructor(e,t){super(),this.touched=e,this.source=t}},is=class extends no{constructor(e,t){super(),this.status=e,this.source=t}},Up=class extends no{constructor(e){super(),this.source=e}},Gp=class extends no{constructor(e){super(),this.source=e}};function Hp(r){return(Qu(r)?r.validators:r)||null}function qA(r){return Array.isArray(r)?B_(r):r||null}function Wp(r,e){return(Qu(e)?e.asyncValidators:r)||null}function $A(r){return Array.isArray(r)?U_(r):r||null}function Qu(r){return r!=null&&!Array.isArray(r)&&typeof r=="object"}function H_(r,e,t){let i=r.controls;if(!(e?Object.keys(i):i).length)throw new Yt(1e3,"");if(!i[t])throw new Yt(1001,"")}function W_(r,e,t){r._forEachChild((i,n)=>{if(t[n]===void 0)throw new Yt(1002,"")})}var ns=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=al(()=>this.statusReactive()),this.statusReactive=rl(void 0),this._pristine=al(()=>this.pristineReactive()),this.pristineReactive=rl(!0),this._touched=al(()=>this.touchedReactive()),this.touchedReactive=rl(!1),this._events=new gt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return dn(this.statusReactive)}set status(e){dn(()=>this.statusReactive.set(e))}get valid(){return this.status===Ll}get invalid(){return this.status===Wu}get pending(){return this.status==rs}get disabled(){return this.status===Bl}get enabled(){return this.status!==Bl}get pristine(){return dn(this.pristineReactive)}set pristine(e){dn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return dn(this.touchedReactive)}set touched(e){dn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(w_(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(w_(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(I_(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(I_(e,this._rawAsyncValidators))}hasValidator(e){return Yu(this._rawValidators,e)}hasAsyncValidator(e){return Yu(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Tt(se({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Ul(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Ul(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Tt(se({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Vl(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(n=>{n.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Vl(!0,i))}markAsPending(e={}){this.status=rs;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new is(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Tt(se({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Bl,this.errors=null,this._forEachChild(n=>{n.disable(Tt(se({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new qu(this.value,i)),this._events.next(new is(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Tt(se({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(n=>n(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ll,this._forEachChild(i=>{i.enable(Tt(se({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Tt(se({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ll||this.status===rs)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new qu(this.value,t)),this._events.next(new is(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Tt(se({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Bl:Ll}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=rs,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=P_(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(n=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(n,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,n)=>i&&i._find(n),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new is(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new Je,this.statusChanges=new Je}_calculateStatus(){return this._allControlsDisabled()?Bl:this.errors?Wu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(rs)?rs:this._anyControlsHaveStatus(Wu)?Wu:Ll}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),n=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),n&&this._events.next(new Vl(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ul(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Qu(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=qA(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=$A(this._rawAsyncValidators)}},$u=class extends ns{constructor(e,t,i){super(Hp(t),Wp(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){W_(this,!0,e),Object.keys(e).forEach(i=>{H_(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let n=this.controls[i];n&&n.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,n)=>{i.reset(e?e[n]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,n)=>((i.enabled||this.disabled)&&(t[n]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((n,o)=>{i=t(i,n,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var jp=class extends $u{};var X_=new ot("CallSetDisabledState",{providedIn:"root",factory:()=>Xp}),Xp="always";function C_(r,e,t=Xp){Yp(r,e),e.valueAccessor.writeValue(r.value),(r.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(r.disabled),KA(r,e),JA(r,e),QA(r,e),ZA(r,e)}function A_(r,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Ku(r,e),r&&(e._invokeOnDestroyCallbacks(),r._registerOnCollectionChange(()=>{}))}function Zu(r,e){r.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ZA(r,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};r.registerOnDisabledChange(t),e._registerOnDestroy(()=>{r._unregisterOnDisabledChange(t)})}}function Yp(r,e){let t=G_(r);e.validator!==null?r.setValidators(E_(t,e.validator)):typeof t=="function"&&r.setValidators([t]);let i=j_(r);e.asyncValidator!==null?r.setAsyncValidators(E_(i,e.asyncValidator)):typeof i=="function"&&r.setAsyncValidators([i]);let n=()=>r.updateValueAndValidity();Zu(e._rawValidators,n),Zu(e._rawAsyncValidators,n)}function Ku(r,e){let t=!1;if(r!==null){if(e.validator!==null){let n=G_(r);if(Array.isArray(n)&&n.length>0){let o=n.filter(a=>a!==e.validator);o.length!==n.length&&(t=!0,r.setValidators(o))}}if(e.asyncValidator!==null){let n=j_(r);if(Array.isArray(n)&&n.length>0){let o=n.filter(a=>a!==e.asyncValidator);o.length!==n.length&&(t=!0,r.setAsyncValidators(o))}}}let i=()=>{};return Zu(e._rawValidators,i),Zu(e._rawAsyncValidators,i),t}function KA(r,e){e.valueAccessor.registerOnChange(t=>{r._pendingValue=t,r._pendingChange=!0,r._pendingDirty=!0,r.updateOn==="change"&&Y_(r,e)})}function QA(r,e){e.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,r.updateOn==="blur"&&r._pendingChange&&Y_(r,e),r.updateOn!=="submit"&&r.markAsTouched()})}function Y_(r,e){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function JA(r,e){let t=(i,n)=>{e.valueAccessor.writeValue(i),n&&e.viewToModelUpdate(i)};r.registerOnChange(t),e._registerOnDestroy(()=>{r._unregisterOnChange(t)})}function eS(r,e){r==null,Yp(r,e)}function tS(r,e){return Ku(r,e)}function rS(r,e){r._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function iS(r,e){let t=r.indexOf(e);t>-1&&r.splice(t,1)}function S_(r,e){let t=r.indexOf(e);t>-1&&r.splice(t,1)}function T_(r){return typeof r=="object"&&r!==null&&Object.keys(r).length===2&&"value"in r&&"disabled"in r}var Xu=class extends ns{constructor(e=null,t,i){super(Hp(t),Wp(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Qu(t)&&(t.nonNullable||t.initialValueIsDefault)&&(T_(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){S_(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){S_(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){T_(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var nS=r=>r instanceof Xu;var q_=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275dir=xt({type:r,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return r})();var oS=new ot("");var aS={provide:Qo,useExisting:Na(()=>qp)},qp=(()=>{class r extends Qo{get submitted(){return dn(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,i,n){super(),this.callSetDisabledState=n,this._submitted=al(()=>this._submittedReactive()),this._submittedReactive=rl(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Je,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ku(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let i=this.form.get(t.path);return C_(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){A_(t.control||null,t,!1),iS(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this._submittedReactive.set(!0),rS(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Up(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new Gp(this.form))}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,n=this.form.get(t.path);i!==n&&(A_(i||null,t),nS(n)&&(C_(n,t,this.callSetDisabledState),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);eS(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&tS(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Yp(this.form,this),this._oldForm&&Ku(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(i){return new(i||r)(_e(FA,10),_e(kA,10),_e(X_,8))}}static{this.\u0275dir=xt({type:r,selectors:[["","formGroup",""]],hostBindings:function(i,n){i&1&&pr("submit",function(a){return n.onSubmit(a)})("reset",function(){return n.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ni([aS]),ri,Ei]})}}return r})();var sS=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Ke({type:r})}static{this.\u0275inj=Ze({})}}return r})(),zp=class extends ns{constructor(e,t,i){super(Hp(t),Wp(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let n=this._adjustIndex(e);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),t&&(this.controls.splice(n,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){W_(this,!1,e),e.forEach((i,n)=>{H_(this,!1,n),this.at(n).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((i,n)=>{this.at(n)&&this.at(n).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,n)=>{i.reset(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>i._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function D_(r){return!!r&&(r.asyncValidators!==void 0||r.validators!==void 0||r.updateOn!==void 0)}var $_=(()=>{class r{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new r;return t.useNonNullable=!0,t}group(t,i=null){let n=this._reduceControls(t),o={};return D_(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new $u(n,o)}record(t,i=null){let n=this._reduceControls(t);return new jp(n,i)}control(t,i,n){let o={};return this.useNonNullable?(D_(i)?o=i:(o.validators=i,o.asyncValidators=n),new Xu(t,Tt(se({},o),{nonNullable:!0}))):new Xu(t,i,n)}array(t,i,n){let o=t.map(a=>this._createControl(a));return new zp(o,i,n)}_reduceControls(t){let i={};return Object.keys(t).forEach(n=>{i[n]=this._createControl(t[n])}),i}_createControl(t){if(t instanceof Xu)return t;if(t instanceof ns)return t;if(Array.isArray(t)){let i=t[0],n=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(i,n,o)}else return this.control(t)}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var Z_=(()=>{class r{static withConfig(t){return{ngModule:r,providers:[{provide:oS,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:X_,useValue:t.callSetDisabledState??Xp}]}}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Ke({type:r})}static{this.\u0275inj=Ze({imports:[sS]})}}return r})();var jl=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},$p=class extends jl{constructor(e,t,i,n,o){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=n,this.projectableNodes=o}},os=class extends jl{constructor(e,t,i,n){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=n}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}},Zp=class extends jl{constructor(e){super(),this.element=e instanceof vt?e.nativeElement:e}},Ju=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof $p)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof os)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof Zp)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var ed=class extends Ju{constructor(e,t,i,n,o){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=n,this.attachDomPortal=a=>{this._document;let s=a.element;s.parentNode;let l=this._document.createComment("dom-portal");s.parentNode.insertBefore(l,s),this.outletElement.appendChild(s),this._attachedPortal=a,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(s,l)})},this._document=o}attachComponentPortal(e){let i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),n;return e.viewContainerRef?(n=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>n.destroy())):(n=i.create(e.injector||this._defaultInjector||Xn.NULL),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),this._attachedPortal=e,n}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(n=>this.outletElement.appendChild(n)),i.detectChanges(),this.setDisposeFn(()=>{let n=t.indexOf(i);n!==-1&&t.remove(n)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var K_=(()=>{class r extends Ju{constructor(t,i,n){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new Je,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let s=this._document.createComment("dom-portal");o.setAttachedHost(this),a.parentNode.insertBefore(s,a),this._getRootNode().appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{s.parentNode&&s.parentNode.replaceChild(a,s)})},this._document=n}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);let i=t.viewContainerRef!=null?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),a=i.createComponent(o,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=t,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(t){t.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){let t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static{this.\u0275fac=function(i){return new(i||r)(_e(Kc),_e(qn),_e(ut))}}static{this.\u0275dir=xt({type:r,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[ri]})}}return r})();var td=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Ke({type:r})}static{this.\u0275inj=Ze({})}}return r})();var Qp;try{Qp=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Qp=!1}var vr=(()=>{class r{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Zv(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Qp)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(i){return new(i||r)(ne(Fo))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var zl;function cS(){if(zl==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>zl=!0}))}finally{zl=zl||!1}return zl}function as(r){return cS()?r:!!r.capture}var Jo;function Q_(){if(Jo==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Jo=!1,Jo;if("scrollBehavior"in document.documentElement.style)Jo=!0;else{let r=Element.prototype.scrollTo;r?Jo=!/\{\s*\[native code\]\s*\}/.test(r.toString()):Jo=!1}}return Jo}var Kp;function uS(){if(Kp==null){let r=typeof document<"u"?document.head:null;Kp=!!(r&&(r.createShadowRoot||r.attachShadow))}return Kp}function J_(r){if(uS()){let e=r.getRootNode?r.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Jp(){let r=typeof document<"u"&&document?document.activeElement:null;for(;r&&r.shadowRoot;){let e=r.shadowRoot.activeElement;if(e===r)break;r=e}return r}function ki(r){return r.composedPath?r.composedPath()[0]:r.target}function Hl(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function rd(r,...e){return e.length?e.some(t=>r[t]):r.altKey||r.shiftKey||r.ctrlKey||r.metaKey}function ls(r){return Array.isArray(r)?r:[r]}function Ir(r){return r==null?"":typeof r=="string"?r:`${r}px`}function On(r){return r instanceof vt?r.nativeElement:r}var dS=(()=>{class r{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var ey=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Ke({type:r})}static{this.\u0275inj=Ze({providers:[dS]})}}return r})();var ty=new Set,ea,fS=(()=>{class r{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):pS}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&hS(t,this._nonce),this._matchMedia(t)}static{this.\u0275fac=function(i){return new(i||r)(ne(vr),ne(Js,8))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function hS(r,e){if(!ty.has(r))try{ea||(ea=document.createElement("style"),e&&ea.setAttribute("nonce",e),ea.setAttribute("type","text/css"),document.head.appendChild(ea)),ea.sheet&&(ea.sheet.insertRule(`@media ${r} {body{ }}`,0),ty.add(r))}catch(t){console.error(t)}}function pS(r){return{matches:r==="all"||r==="",media:r,addListener:()=>{},removeListener:()=>{}}}var id=(()=>{class r{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new gt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return ry(ls(t)).some(n=>this._registerQuery(n).mql.matches)}observe(t){let n=ry(ls(t)).map(a=>this._registerQuery(a).observable),o=qs(n);return o=Wc(o.pipe(qi(1)),o.pipe(qc(1),Yc(0))),o.pipe(Xe(a=>{let s={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:d})=>{s.matches=s.matches||l,s.breakpoints[d]=l}),s}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let i=this._mediaMatcher.matchMedia(t),o={observable:new Ys(a=>{let s=l=>this._zone.run(()=>a.next(l));return i.addListener(s),()=>{i.removeListener(s)}}).pipe($i(i),Xe(({matches:a})=>({query:t,matches:a})),$r(this._destroySubject)),mql:i};return this._queries.set(t,o),o}static{this.\u0275fac=function(i){return new(i||r)(ne(fS),ne(dt))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function ry(r){return r.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}var iy={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};var NS=200,tm=class{constructor(e,t){this._letterKeyStream=new gt,this._items=[],this._selectedItemIndex=-1,this._pressedLetters=[],this._selectedItem=new gt,this.selectedItem=this._selectedItem;let i=typeof t?.debounceInterval=="number"?t.debounceInterval:NS;t?.skipPredicate&&(this._skipPredicateFn=t.skipPredicate),this.setItems(e),this._setupKeyHandler(i)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(e){this._selectedItemIndex=e}setItems(e){this._items=e}handleKey(e){let t=e.keyCode;e.key&&e.key.length===1?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(e){this._letterKeyStream.pipe(lr(t=>this._pressedLetters.push(t)),Yc(e),pi(()=>this._pressedLetters.length>0),Xe(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(t=>{for(let i=1;i<this._items.length+1;i++){let n=(this._selectedItemIndex+i)%this._items.length,o=this._items[n];if(!this._skipPredicateFn?.(o)&&o.getLabel?.().toLocaleUpperCase().trim().indexOf(t)===0){this._selectedItem.next(o);break}}this._pressedLetters=[]})}},rm=class{constructor(e,t){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._typeaheadSubscription=Mi.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=i=>i.disabled,this.tabOut=new gt,this.change=new gt,e instanceof Yn?this._itemChangesSubscription=e.changes.subscribe(i=>this._itemsChanged(i.toArray())):th(e)&&(this._effectRef=jv(()=>this._itemsChanged(e()),{injector:t}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){this._typeaheadSubscription.unsubscribe();let t=this._getItemsArray();return this._typeahead=new tm(t,{debounceInterval:typeof e=="number"?e:void 0,skipPredicate:i=>this._skipPredicateFn(i)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(i=>{this.setActiveItem(i)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){let t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){let t=e.keyCode,n=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!e[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(t){case 9:this.tabOut.next();return;case 40:if(this._vertical&&n){this.setNextItemActive();break}else return;case 38:if(this._vertical&&n){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&n){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&n){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&n){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&n){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&n){let o=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&n){let o=this._activeItemIndex+this._pageUpAndDown.delta,a=this._getItemsArray().length;this._setActiveItemByIndex(o<a?o:a-1,-1);break}else return;default:(n||rd(e,"shiftKey"))&&this._typeahead?.handleKey(e);return}this._typeahead?.reset(),e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){let t=this._getItemsArray(),i=typeof e=="number"?e:t.indexOf(e),n=t[i];this._activeItem=n??null,this._activeItemIndex=i,this._typeahead?.setCurrentSelectedItemIndex(i)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){let t=this._getItemsArray();for(let i=1;i<=t.length;i++){let n=(this._activeItemIndex+e*i+t.length)%t.length,o=t[n];if(!this._skipPredicateFn(o)){this.setActiveItem(n);return}}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){let i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(e+=t,!i[e])return;this.setActiveItem(e)}}_getItemsArray(){return th(this._items)?this._items():this._items instanceof Yn?this._items.toArray():this._items}_itemsChanged(e){if(this._typeahead?.setItems(e),this._activeItem){let t=e.indexOf(this._activeItem);t>-1&&t!==this._activeItemIndex&&(this._activeItemIndex=t,this._typeahead?.setCurrentSelectedItemIndex(t))}}};var ad=class extends rm{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}};function im(r){return r.buttons===0||r.detail===0}function nm(r){let e=r.touches&&r.touches[0]||r.changedTouches&&r.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var FS=new ot("cdk-input-modality-detector-options"),kS={ignoreKeys:[18,17,224,91,16]},ay=650,cs=as({passive:!0,capture:!0}),LS=(()=>{class r{get mostRecentModality(){return this._modality.value}constructor(t,i,n,o){this._platform=t,this._mostRecentTarget=null,this._modality=new fi(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(s=>s===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=ki(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<ay||(this._modality.next(im(a)?"keyboard":"mouse"),this._mostRecentTarget=ki(a))},this._onTouchstart=a=>{if(nm(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ki(a)},this._options=se(se({},kS),o),this.modalityDetected=this._modality.pipe(qc(1)),this.modalityChanged=this.modalityDetected.pipe(Kf()),t.isBrowser&&i.runOutsideAngular(()=>{n.addEventListener("keydown",this._onKeydown,cs),n.addEventListener("mousedown",this._onMousedown,cs),n.addEventListener("touchstart",this._onTouchstart,cs)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,cs),document.removeEventListener("mousedown",this._onMousedown,cs),document.removeEventListener("touchstart",this._onTouchstart,cs))}static{this.\u0275fac=function(i){return new(i||r)(ne(vr),ne(dt),ne(ut),ne(FS,8))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var od=function(r){return r[r.IMMEDIATE=0]="IMMEDIATE",r[r.EVENTUAL=1]="EVENTUAL",r}(od||{}),BS=new ot("cdk-focus-monitor-default-options"),nd=as({passive:!0,capture:!0}),sd=(()=>{class r{constructor(t,i,n,o,a){this._ngZone=t,this._platform=i,this._inputModalityDetector=n,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new gt,this._rootNodeFocusAndBlurListener=s=>{let l=ki(s);for(let d=l;d;d=d.parentElement)s.type==="focus"?this._onFocus(s,d):this._onBlur(s,d)},this._document=o,this._detectionMode=a?.detectionMode||od.IMMEDIATE}monitor(t,i=!1){let n=On(t);if(!this._platform.isBrowser||n.nodeType!==1)return Ve();let o=J_(n)||this._getDocument(),a=this._elementInfo.get(n);if(a)return i&&(a.checkChildren=!0),a.subject;let s={checkChildren:i,subject:new gt,rootNode:o};return this._elementInfo.set(n,s),this._registerGlobalListeners(s),s.subject}stopMonitoring(t){let i=On(t),n=this._elementInfo.get(i);n&&(n.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(n))}focusVia(t,i,n){let o=On(t),a=this._getDocument().activeElement;o===a?this._getClosestElementsInfo(o).forEach(([s,l])=>this._originChanged(s,i,l)):(this._setOrigin(i),typeof o.focus=="function"&&o.focus(n))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===od.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused",i==="touch"),t.classList.toggle("cdk-keyboard-focused",i==="keyboard"),t.classList.toggle("cdk-mouse-focused",i==="mouse"),t.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&i,this._detectionMode===od.IMMEDIATE){clearTimeout(this._originTimeoutId);let n=this._originFromTouchInteraction?ay:1;this._originTimeoutId=setTimeout(()=>this._origin=null,n)}})}_onFocus(t,i){let n=this._elementInfo.get(i),o=ki(t);!n||!n.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),n)}_onBlur(t,i){let n=this._elementInfo.get(i);!n||n.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(n,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let i=t.rootNode,n=this._rootNodeFocusListenerCount.get(i)||0;n||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,nd),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,nd)}),this._rootNodeFocusListenerCount.set(i,n+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe($r(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){let i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let n=this._rootNodeFocusListenerCount.get(i);n>1?this._rootNodeFocusListenerCount.set(i,n-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,nd),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,nd),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,n){this._setClasses(t,i),this._emitOrigin(n,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){let i=[];return this._elementInfo.forEach((n,o)=>{(o===t||n.checkChildren&&o.contains(t))&&i.push([o,n])}),i}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:i,mostRecentModality:n}=this._inputModalityDetector;if(n!=="mouse"||!i||i===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let o=t.labels;if(o){for(let a=0;a<o.length;a++)if(o[a].contains(i))return!0}return!1}static{this.\u0275fac=function(i){return new(i||r)(ne(dt),ne(vr),ne(LS),ne(ut,8),ne(BS,8))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var ta=function(r){return r[r.NONE=0]="NONE",r[r.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",r[r.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",r}(ta||{}),ny="cdk-high-contrast-black-on-white",oy="cdk-high-contrast-white-on-black",em="cdk-high-contrast-active",sy=(()=>{class r{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=Se(id).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return ta.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let i=this._document.defaultView||window,n=i&&i.getComputedStyle?i.getComputedStyle(t):null,o=(n&&n.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return ta.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return ta.BLACK_ON_WHITE}return ta.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(em,ny,oy),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===ta.BLACK_ON_WHITE?t.add(em,ny):i===ta.WHITE_ON_BLACK&&t.add(em,oy)}}static{this.\u0275fac=function(i){return new(i||r)(ne(vr),ne(ut))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var VS=new ot("cdk-dir-doc",{providedIn:"root",factory:US});function US(){return Se(ut)}var GS=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function jS(r){let e=r?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?GS.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var us=(()=>{class r{constructor(t){if(this.value="ltr",this.change=new Je,t){let i=t.body?t.body.dir:null,n=t.documentElement?t.documentElement.dir:null;this.value=jS(i||n||"ltr")}}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(i){return new(i||r)(ne(VS,8))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var vn=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Ke({type:r})}static{this.\u0275inj=Ze({})}}return r})();var WS=["*"];function XS(r,e){r&1&&ni(0)}var am=(()=>{class r{constructor(t){this._elementRef=t}focus(){this._elementRef.nativeElement.focus()}static{this.\u0275fac=function(i){return new(i||r)(_e(vt))}}static{this.\u0275dir=xt({type:r,selectors:[["","cdkStepHeader",""]],hostAttrs:["role","tab"],standalone:!0})}}return r})(),sm=(()=>{class r{constructor(t){this.template=t}static{this.\u0275fac=function(i){return new(i||r)(_e(cn))}}static{this.\u0275dir=xt({type:r,selectors:[["","cdkStepLabel",""]],standalone:!0})}}return r})(),YS=0;var Rn={NUMBER:"number",EDIT:"edit",DONE:"done",ERROR:"error"},lm=new ot("STEPPER_GLOBAL_OPTIONS"),ld=(()=>{class r{get completed(){return this._completedOverride==null?this._getDefaultCompleted():this._completedOverride}set completed(t){this._completedOverride=t}_getDefaultCompleted(){return this.stepControl?this.stepControl.valid&&this.interacted:this.interacted}get hasError(){return this._customError==null?this._getDefaultError():this._customError}set hasError(t){this._customError=t}_getDefaultError(){return this.stepControl&&this.stepControl.invalid&&this.interacted}constructor(t,i){this._stepper=t,this.interacted=!1,this.interactedStream=new Je,this.editable=!0,this.optional=!1,this._completedOverride=null,this._customError=null,this._stepperOptions=i||{},this._displayDefaultIndicatorType=this._stepperOptions.displayDefaultIndicatorType!==!1}select(){this._stepper.selected=this}reset(){this.interacted=!1,this._completedOverride!=null&&(this._completedOverride=!1),this._customError!=null&&(this._customError=!1),this.stepControl&&(this._childForms?.forEach(t=>t.resetForm?.()),this.stepControl.reset())}ngOnChanges(){this._stepper._stateChanged()}_markAsInteracted(){this.interacted||(this.interacted=!0,this.interactedStream.emit(this))}_showError(){return this._stepperOptions.showError??this._customError!=null}static{this.\u0275fac=function(i){return new(i||r)(_e(Na(()=>ds)),_e(lm,8))}}static{this.\u0275cmp=or({type:r,selectors:[["cdk-step"]],contentQueries:function(i,n,o){if(i&1&&(Ci(o,sm,5),Ci(o,Qo,5)),i&2){let a;Ar(a=Sr())&&(n.stepLabel=a.first),Ar(a=Sr())&&(n._childForms=a)}},viewQuery:function(i,n){if(i&1&&Ki(cn,7),i&2){let o;Ar(o=Sr())&&(n.content=o.first)}},inputs:{stepControl:"stepControl",label:"label",errorMessage:"errorMessage",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],state:"state",editable:[2,"editable","editable",Mr],optional:[2,"optional","optional",Mr],completed:[2,"completed","completed",Mr],hasError:[2,"hasError","hasError",Mr]},outputs:{interactedStream:"interacted"},exportAs:["cdkStep"],standalone:!0,features:[zr,Ei,mr],ngContentSelectors:WS,decls:1,vars:0,template:function(i,n){i&1&&(Ii(),hr(0,XS,1,0,"ng-template"))},encapsulation:2,changeDetection:0})}}return r})(),ds=(()=>{class r{get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this.steps&&this._steps?(this._isValidIndex(t),this.selected?._markAsInteracted(),this._selectedIndex!==t&&!this._anyControlsInvalidOrPending(t)&&(t>=this._selectedIndex||this.steps.toArray()[t].editable)&&this._updateSelectedItemIndex(t)):this._selectedIndex=t}get selected(){return this.steps?this.steps.toArray()[this.selectedIndex]:void 0}set selected(t){this.selectedIndex=t&&this.steps?this.steps.toArray().indexOf(t):-1}get orientation(){return this._orientation}set orientation(t){this._orientation=t,this._keyManager&&this._keyManager.withVerticalOrientation(t==="vertical")}constructor(t,i,n){this._dir=t,this._changeDetectorRef=i,this._elementRef=n,this._destroyed=new gt,this.steps=new Yn,this._sortedHeaders=new Yn,this.linear=!1,this._selectedIndex=0,this.selectionChange=new Je,this.selectedIndexChange=new Je,this._orientation="horizontal",this._groupId=YS++}ngAfterContentInit(){this._steps.changes.pipe($i(this._steps),$r(this._destroyed)).subscribe(t=>{this.steps.reset(t.filter(i=>i._stepper===this)),this.steps.notifyOnChanges()})}ngAfterViewInit(){this._stepHeader.changes.pipe($i(this._stepHeader),$r(this._destroyed)).subscribe(t=>{this._sortedHeaders.reset(t.toArray().sort((i,n)=>i._elementRef.nativeElement.compareDocumentPosition(n._elementRef.nativeElement)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)),this._sortedHeaders.notifyOnChanges()}),this._keyManager=new ad(this._sortedHeaders).withWrap().withHomeAndEnd().withVerticalOrientation(this._orientation==="vertical"),(this._dir?this._dir.change:Ve()).pipe($i(this._layoutDirection()),$r(this._destroyed)).subscribe(t=>this._keyManager.withHorizontalOrientation(t)),this._keyManager.updateActiveItem(this._selectedIndex),this.steps.changes.subscribe(()=>{this.selected||(this._selectedIndex=Math.max(this._selectedIndex-1,0))}),this._isValidIndex(this._selectedIndex)||(this._selectedIndex=0)}ngOnDestroy(){this._keyManager?.destroy(),this.steps.destroy(),this._sortedHeaders.destroy(),this._destroyed.next(),this._destroyed.complete()}next(){this.selectedIndex=Math.min(this._selectedIndex+1,this.steps.length-1)}previous(){this.selectedIndex=Math.max(this._selectedIndex-1,0)}reset(){this._updateSelectedItemIndex(0),this.steps.forEach(t=>t.reset()),this._stateChanged()}_getStepLabelId(t){return`cdk-step-label-${this._groupId}-${t}`}_getStepContentId(t){return`cdk-step-content-${this._groupId}-${t}`}_stateChanged(){this._changeDetectorRef.markForCheck()}_getAnimationDirection(t){let i=t-this._selectedIndex;return i<0?this._layoutDirection()==="rtl"?"next":"previous":i>0?this._layoutDirection()==="rtl"?"previous":"next":"current"}_getIndicatorType(t,i=Rn.NUMBER){let n=this.steps.toArray()[t],o=this._isCurrentStep(t);return n._displayDefaultIndicatorType?this._getDefaultIndicatorLogic(n,o):this._getGuidelineLogic(n,o,i)}_getDefaultIndicatorLogic(t,i){return t._showError()&&t.hasError&&!i?Rn.ERROR:!t.completed||i?Rn.NUMBER:t.editable?Rn.EDIT:Rn.DONE}_getGuidelineLogic(t,i,n=Rn.NUMBER){return t._showError()&&t.hasError&&!i?Rn.ERROR:t.completed&&!i?Rn.DONE:t.completed&&i?n:t.editable&&i?Rn.EDIT:n}_isCurrentStep(t){return this._selectedIndex===t}_getFocusIndex(){return this._keyManager?this._keyManager.activeItemIndex:this._selectedIndex}_updateSelectedItemIndex(t){let i=this.steps.toArray();this.selectionChange.emit({selectedIndex:t,previouslySelectedIndex:this._selectedIndex,selectedStep:i[t],previouslySelectedStep:i[this._selectedIndex]}),this._containsFocus()?this._keyManager.setActiveItem(t):this._keyManager.updateActiveItem(t),this._selectedIndex=t,this.selectedIndexChange.emit(this._selectedIndex),this._stateChanged()}_onKeydown(t){let i=rd(t),n=t.keyCode,o=this._keyManager;o.activeItemIndex!=null&&!i&&(n===32||n===13)?(this.selectedIndex=o.activeItemIndex,t.preventDefault()):o.setFocusOrigin("keyboard").onKeydown(t)}_anyControlsInvalidOrPending(t){return this.linear&&t>=0?this.steps.toArray().slice(0,t).some(i=>{let n=i.stepControl;return(n?n.invalid||n.pending||!i.interacted:!i.completed)&&!i.optional&&!i._completedOverride}):!1}_layoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_containsFocus(){let t=this._elementRef.nativeElement,i=Jp();return t===i||t.contains(i)}_isValidIndex(t){return t>-1&&(!this.steps||t<this.steps.length)}static{this.\u0275fac=function(i){return new(i||r)(_e(us,8),_e(oi),_e(vt))}}static{this.\u0275dir=xt({type:r,selectors:[["","cdkStepper",""]],contentQueries:function(i,n,o){if(i&1&&(Ci(o,ld,5),Ci(o,am,5)),i&2){let a;Ar(a=Sr())&&(n._steps=a),Ar(a=Sr())&&(n._stepHeader=a)}},inputs:{linear:[2,"linear","linear",Mr],selectedIndex:[2,"selectedIndex","selectedIndex",Lo],selected:"selected",orientation:"orientation"},outputs:{selectionChange:"selectionChange",selectedIndexChange:"selectedIndexChange"},exportAs:["cdkStepper"],standalone:!0,features:[zr]})}}return r})(),cy=(()=>{class r{constructor(t){this._stepper=t,this.type="submit"}static{this.\u0275fac=function(i){return new(i||r)(_e(ds))}}static{this.\u0275dir=xt({type:r,selectors:[["button","cdkStepperNext",""]],hostVars:1,hostBindings:function(i,n){i&1&&pr("click",function(){return n._stepper.next()}),i&2&&Cn("type",n.type)},inputs:{type:"type"},standalone:!0})}}return r})(),uy=(()=>{class r{constructor(t){this._stepper=t,this.type="button"}static{this.\u0275fac=function(i){return new(i||r)(_e(ds))}}static{this.\u0275dir=xt({type:r,selectors:[["button","cdkStepperPrevious",""]],hostVars:1,hostBindings:function(i,n){i&1&&pr("click",function(){return n._stepper.previous()}),i&2&&Cn("type",n.type)},inputs:{type:"type"},standalone:!0})}}return r})(),dy=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Ke({type:r})}static{this.\u0275inj=Ze({imports:[vn]})}}return r})();function $S(){return!0}var ZS=new ot("mat-sanity-checks",{providedIn:"root",factory:$S}),ar=(()=>{class r{constructor(t,i,n){this._sanityChecks=i,this._document=n,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return Hl()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[t]}static{this.\u0275fac=function(i){return new(i||r)(ne(sy),ne(ZS,8),ne(ut))}}static{this.\u0275mod=Ke({type:r})}static{this.\u0275inj=Ze({imports:[vn,vn]})}}return r})();var Wl=(()=>{class r{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var Li=function(r){return r[r.FADING_IN=0]="FADING_IN",r[r.VISIBLE=1]="VISIBLE",r[r.FADING_OUT=2]="FADING_OUT",r[r.HIDDEN=3]="HIDDEN",r}(Li||{}),dm=class{constructor(e,t,i,n=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=n,this.state=Li.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},fy=as({passive:!0,capture:!0}),fm=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let t=ki(e);t&&this._events.get(e.type)?.forEach((i,n)=>{(n===t||n.contains(t))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,t,i,n){let o=this._events.get(t);if(o){let a=o.get(i);a?a.add(n):o.set(i,new Set([n]))}else this._events.set(t,new Map([[i,new Set([n])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,fy)})}removeHandler(e,t,i){let n=this._events.get(e);if(!n)return;let o=n.get(t);o&&(o.delete(i),o.size===0&&n.delete(t),n.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,fy)))}},hy={enterDuration:225,exitDuration:150},KS=800,py=as({passive:!0,capture:!0}),my=["mousedown","touchstart"],gy=["mouseup","mouseleave","touchend","touchcancel"],hm=class r{static{this._eventManager=new fm}constructor(e,t,i,n){this._target=e,this._ngZone=t,this._platform=n,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,n.isBrowser&&(this._containerElement=On(i))}fadeInRipple(e,t,i={}){let n=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=se(se({},hy),i.animation);i.centered&&(e=n.left+n.width/2,t=n.top+n.height/2);let a=i.radius||QS(e,t,n),s=e-n.left,l=t-n.top,d=o.enterDuration,h=document.createElement("div");h.classList.add("mat-ripple-element"),h.style.left=`${s-a}px`,h.style.top=`${l-a}px`,h.style.height=`${a*2}px`,h.style.width=`${a*2}px`,i.color!=null&&(h.style.backgroundColor=i.color),h.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(h);let p=window.getComputedStyle(h),v=p.transitionProperty,_=p.transitionDuration,E=v==="none"||_==="0s"||_==="0s, 0s"||n.width===0&&n.height===0,A=new dm(this,h,i,E);h.style.transform="scale3d(1, 1, 1)",A.state=Li.FADING_IN,i.persistent||(this._mostRecentTransientRipple=A);let N=null;return!E&&(d||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let F=()=>{N&&(N.fallbackTimer=null),clearTimeout(L),this._finishRippleTransition(A)},P=()=>this._destroyRipple(A),L=setTimeout(P,d+100);h.addEventListener("transitionend",F),h.addEventListener("transitioncancel",P),N={onTransitionEnd:F,onTransitionCancel:P,fallbackTimer:L}}),this._activeRipples.set(A,N),(E||!d)&&this._finishRippleTransition(A),A}fadeOutRipple(e){if(e.state===Li.FADING_OUT||e.state===Li.HIDDEN)return;let t=e.element,i=se(se({},hy),e.config.animation);t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=Li.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=On(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,my.forEach(i=>{r._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{gy.forEach(t=>{this._triggerElement.addEventListener(t,this,py)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Li.FADING_IN?this._startFadeOutTransition(e):e.state===Li.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=Li.VISIBLE,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Li.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=im(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+KS;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!nm(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===Li.VISIBLE||e.config.terminateOnPointerUp&&e.state===Li.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(my.forEach(t=>r._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(gy.forEach(t=>e.removeEventListener(t,this,py)),this._pointerUpEventsRegistered=!1))}};function QS(r,e,t){let i=Math.max(Math.abs(r-t.left),Math.abs(r-t.right)),n=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+n*n)}var by=new ot("mat-ripple-global-options"),pm=(()=>{class r{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,i,n,o,a){this._elementRef=t,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new hm(this,i,t,n)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:se(se(se({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,n){return typeof t=="number"?this._rippleRenderer.fadeInRipple(t,i,se(se({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,se(se({},this.rippleConfig),t))}static{this.\u0275fac=function(i){return new(i||r)(_e(vt),_e(dt),_e(vr),_e(by,8),_e(Zi,8))}}static{this.\u0275dir=xt({type:r,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,n){i&2&&cr("mat-ripple-unbounded",n.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}}return r})(),Xl=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Ke({type:r})}static{this.\u0275inj=Ze({imports:[ar,ar]})}}return r})();var JS=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Ke({type:r})}static{this.\u0275inj=Ze({imports:[ar]})}}return r})();var mm=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Ke({type:r})}static{this.\u0275inj=Ze({imports:[Xl,ar,JS]})}}return r})(),vy={capture:!0},_y=["focus","mousedown","mouseenter","touchstart"],cm="mat-ripple-loader-uninitialized",um="mat-ripple-loader-class-name",yy="mat-ripple-loader-centered",cd="mat-ripple-loader-disabled",xy=(()=>{class r{constructor(){this._document=Se(ut,{optional:!0}),this._animationMode=Se(Zi,{optional:!0}),this._globalRippleOptions=Se(by,{optional:!0}),this._platform=Se(vr),this._ngZone=Se(dt),this._hosts=new Map,this._onInteraction=t=>{let i=ki(t);if(i instanceof HTMLElement){let n=i.closest(`[${cm}="${this._globalRippleOptions?.namespace??""}"]`);n&&this._createRipple(n)}},this._ngZone.runOutsideAngular(()=>{for(let t of _y)this._document?.addEventListener(t,this._onInteraction,vy)})}ngOnDestroy(){let t=this._hosts.keys();for(let i of t)this.destroyRipple(i);for(let i of _y)this._document?.removeEventListener(i,this._onInteraction,vy)}configureRipple(t,i){t.setAttribute(cm,this._globalRippleOptions?.namespace??""),(i.className||!t.hasAttribute(um))&&t.setAttribute(um,i.className||""),i.centered&&t.setAttribute(yy,""),i.disabled&&t.setAttribute(cd,"")}getRipple(t){return this._hosts.get(t)||this._createRipple(t)}setDisabled(t,i){let n=this._hosts.get(t);if(n){n.disabled=i;return}i?t.setAttribute(cd,""):t.removeAttribute(cd)}_createRipple(t){if(!this._document)return;let i=this._hosts.get(t);if(i)return i;t.querySelector(".mat-ripple")?.remove();let n=this._document.createElement("span");n.classList.add("mat-ripple",t.getAttribute(um)),t.append(n);let o=new pm(new vt(n),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=t,o.centered=t.hasAttribute(yy),o.disabled=t.hasAttribute(cd),this.attachRipple(t,o),o}attachRipple(t,i){t.removeAttribute(cm),this._hosts.set(t,i)}destroyRipple(t){let i=this._hosts.get(t);i&&(i.ngOnDestroy(),this._hosts.delete(t))}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var tT=["*"],ud;function rT(){if(ud===void 0&&(ud=null,typeof window<"u")){let r=window;r.trustedTypes!==void 0&&(ud=r.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return ud}function Yl(r){return rT()?.createHTML(r)||r}function Ey(r){return Error(`Unable to find icon with the name "${r}"`)}function iT(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function wy(r){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${r}".`)}function Iy(r){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${r}".`)}var Mn=class{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}},nT=(()=>{class r{constructor(t,i,n,o){this._httpClient=t,this._sanitizer=i,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=n}addSvgIcon(t,i,n){return this.addSvgIconInNamespace("",t,i,n)}addSvgIconLiteral(t,i,n){return this.addSvgIconLiteralInNamespace("",t,i,n)}addSvgIconInNamespace(t,i,n,o){return this._addSvgIconConfig(t,i,new Mn(n,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,n,o){let a=this._sanitizer.sanitize(wi.HTML,n);if(!a)throw Iy(n);let s=Yl(a);return this._addSvgIconConfig(t,i,new Mn("",s,o))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,n){return this._addSvgIconSetConfig(t,new Mn(i,null,n))}addSvgIconSetLiteralInNamespace(t,i,n){let o=this._sanitizer.sanitize(wi.HTML,i);if(!o)throw Iy(i);let a=Yl(o);return this._addSvgIconSetConfig(t,new Mn("",a,n))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let i=this._sanitizer.sanitize(wi.RESOURCE_URL,t);if(!i)throw wy(t);let n=this._cachedIconsByUrl.get(i);return n?Ve(dd(n)):this._loadSvgIconFromConfig(new Mn(t,null)).pipe(lr(o=>this._cachedIconsByUrl.set(i,o)),Xe(o=>dd(o)))}getNamedSvgIcon(t,i=""){let n=Cy(i,t),o=this._svgIconConfigs.get(n);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(i,t),o)return this._svgIconConfigs.set(n,o),this._getSvgFromConfig(o);let a=this._iconSetConfigs.get(i);return a?this._getSvgFromIconSetConfigs(t,a):Oo(Ey(n))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Ve(dd(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Xe(i=>dd(i)))}_getSvgFromIconSetConfigs(t,i){let n=this._extractIconWithNameFromAnySet(t,i);if(n)return Ve(n);let o=i.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(Hn(s=>{let d=`Loading icon set URL: ${this._sanitizer.sanitize(wi.RESOURCE_URL,a.url)} failed: ${s.message}`;return this._errorHandler.handleError(new Error(d)),Ve(null)})));return Xc(o).pipe(Xe(()=>{let a=this._extractIconWithNameFromAnySet(t,i);if(!a)throw Ey(t);return a}))}_extractIconWithNameFromAnySet(t,i){for(let n=i.length-1;n>=0;n--){let o=i[n];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){let a=this._svgElementFromConfig(o),s=this._extractSvgIconFromSet(a,t,o.options);if(s)return s}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(lr(i=>t.svgText=i),Xe(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Ve(null):this._fetchIcon(t).pipe(lr(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,n){let o=t.querySelector(`[id="${i}"]`);if(!o)return null;let a=o.cloneNode(!0);if(a.removeAttribute("id"),a.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(a,n);if(a.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(a),n);let s=this._svgElementFromString(Yl("<svg></svg>"));return s.appendChild(a),this._setSvgAttributes(s,n)}_svgElementFromString(t){let i=this._document.createElement("DIV");i.innerHTML=t;let n=i.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(t){let i=this._svgElementFromString(Yl("<svg></svg>")),n=t.attributes;for(let o=0;o<n.length;o++){let{name:a,value:s}=n[o];a!=="id"&&i.setAttribute(a,s)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[o].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){let{url:i,options:n}=t,o=n?.withCredentials??!1;if(!this._httpClient)throw iT();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let a=this._sanitizer.sanitize(wi.RESOURCE_URL,i);if(!a)throw wy(i);let s=this._inProgressUrlFetches.get(a);if(s)return s;let l=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(Xe(d=>Yl(d)),Mo(()=>this._inProgressUrlFetches.delete(a)),xv());return this._inProgressUrlFetches.set(a,l),l}_addSvgIconConfig(t,i,n){return this._svgIconConfigs.set(Cy(t,i),n),this}_addSvgIconSetConfig(t,i){let n=this._iconSetConfigs.get(t);return n?n.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){let i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let n=0;n<this._resolvers.length;n++){let o=this._resolvers[n](i,t);if(o)return oT(o)?new Mn(o.url,null,o.options):new Mn(o,null)}}static{this.\u0275fac=function(i){return new(i||r)(ne(i1,8),ne(Oh),ne(ut,8),ne(No))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function dd(r){return r.cloneNode(!0)}function Cy(r,e){return r+":"+e}function oT(r){return!!(r.url&&r.options)}var aT=new ot("MAT_ICON_DEFAULT_OPTIONS"),sT=new ot("mat-icon-location",{providedIn:"root",factory:lT});function lT(){let r=Se(ut),e=r?r.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}var Ay=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],cT=Ay.map(r=>`[${r}]`).join(", "),uT=/^url\(['"]?#(.*?)['"]?\)$/,Sy=(()=>{class r{get color(){return this._color||this._defaultColor}set color(t){this._color=t}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){let i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){let i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(t,i,n,o,a,s){this._elementRef=t,this._iconRegistry=i,this._location=o,this._errorHandler=a,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Mi.EMPTY,s&&(s.color&&(this.color=this._defaultColor=s.color),s.fontSet&&(this.fontSet=s.fontSet)),n||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let n=t.childNodes[i];(n.nodeType!==1||n.nodeName.toLowerCase()==="svg")&&n.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(n=>n.length>0);this._previousFontSetClass.forEach(n=>t.classList.remove(n)),i.forEach(n=>t.classList.add(n)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let i=this._elementsWithExternalReferences;i&&i.forEach((n,o)=>{n.forEach(a=>{o.setAttribute(a.name,`url('${t}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(t){let i=t.querySelectorAll(cT),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<i.length;o++)Ay.forEach(a=>{let s=i[o],l=s.getAttribute(a),d=l?l.match(uT):null;if(d){let h=n.get(s);h||(h=[],n.set(s,h)),h.push({name:a,value:d[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[i,n]=this._splitIconName(t);i&&(this._svgNamespace=i),n&&(this._svgName=n),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(n,i).pipe(qi(1)).subscribe(o=>this._setSvgElement(o),o=>{let a=`Error retrieving icon ${i}:${n}! ${o.message}`;this._errorHandler.handleError(new Error(a))})}}static{this.\u0275fac=function(i){return new(i||r)(_e(vt),_e(nT),Qs("aria-hidden"),_e(sT),_e(No),_e(aT,8))}}static{this.\u0275cmp=or({type:r,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,n){i&2&&(kr("data-mat-icon-type",n._usingFontIcon()?"font":"svg")("data-mat-icon-name",n._svgName||n.fontIcon)("data-mat-icon-namespace",n._svgNamespace||n.fontSet)("fontIcon",n._usingFontIcon()?n.fontIcon:null),$n(n.color?"mat-"+n.color:""),cr("mat-icon-inline",n.inline)("mat-icon-no-color",n.color!=="primary"&&n.color!=="accent"&&n.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Mr],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[zr,mr],ngContentSelectors:tT,decls:1,vars:0,template:function(i,n){i&1&&(Ii(),ni(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}}return r})(),Ty=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Ke({type:r})}static{this.\u0275inj=Ze({imports:[ar,ar]})}}return r})();function dT(r,e){if(r&1&&ko(0,2),r&2){let t=It();_t("ngTemplateOutlet",t.iconOverrides[t.state])("ngTemplateOutletContext",t._getIconContext())}}function fT(r,e){if(r&1&&(Le(0,"span",7),Dt(1),He()),r&2){let t=It(2);Ue(),gi(t._getDefaultTextForState(t.state))}}function hT(r,e){if(r&1&&(Le(0,"span",8),Dt(1),He()),r&2){let t=It(3);Ue(),gi(t._intl.completedLabel)}}function pT(r,e){if(r&1&&(Le(0,"span",8),Dt(1),He()),r&2){let t=It(3);Ue(),gi(t._intl.editableLabel)}}function mT(r,e){if(r&1&&(hr(0,hT,2,1,"span",8)(1,pT,2,1,"span",8),Le(2,"mat-icon",7),Dt(3),He()),r&2){let t=It(2);ii(t.state==="done"?0:t.state==="edit"?1:-1),Ue(3),gi(t._getDefaultTextForState(t.state))}}function gT(r,e){if(r&1&&hr(0,fT,2,1,"span",7)(1,mT,4,2,"mat-icon",7),r&2){let t,i=It();ii((t=i.state)==="number"?0:1)}}function vT(r,e){r&1&&(Le(0,"div",4),ko(1,9),He()),r&2&&(Ue(),_t("ngTemplateOutlet",e.template))}function _T(r,e){if(r&1&&(Le(0,"div",4),Dt(1),He()),r&2){let t=It();Ue(),gi(t.label)}}function yT(r,e){if(r&1&&(Le(0,"div",5),Dt(1),He()),r&2){let t=It();Ue(),gi(t._intl.optionalLabel)}}function bT(r,e){if(r&1&&(Le(0,"div",6),Dt(1),He()),r&2){let t=It();Ue(),gi(t.errorMessage)}}var Oy=["*"];function xT(r,e){}function ET(r,e){if(r&1&&(ni(0),hr(1,xT,0,0,"ng-template",0)),r&2){let t=It();Ue(),_t("cdkPortalOutlet",t._portal)}}var Ry=(r,e)=>({step:r,i:e}),My=r=>({animationDuration:r}),Py=(r,e)=>({value:r,params:e});function wT(r,e){r&1&&ni(0)}function IT(r,e){r&1&&Qt(0,"div",6)}function CT(r,e){if(r&1&&(ko(0,5),hr(1,IT,1,0,"div",6)),r&2){let t=e.$implicit,i=e.$index,n=e.$count;It(2);let o=il(4);_t("ngTemplateOutlet",o)("ngTemplateOutletContext",nl(3,Ry,t,i)),Ue(),ii(i!==n-1?1:-1)}}function AT(r,e){if(r&1){let t=un();Le(0,"div",7),pr("@horizontalStepTransition.done",function(n){Zr(t);let o=It(2);return Kr(o._animationDone.next(n))}),ko(1,8),He()}if(r&2){let t=e.$implicit,i=e.$index,n=It(2);cr("mat-horizontal-stepper-content-inactive",n.selectedIndex!==i),_t("@horizontalStepTransition",nl(8,Py,n._getAnimationDirection(i),ih(6,My,n._getAnimationDuration())))("id",n._getStepContentId(i)),kr("aria-labelledby",n._getStepLabelId(i)),Ue(),_t("ngTemplateOutlet",t.content)}}function ST(r,e){if(r&1&&(Le(0,"div",1)(1,"div",2),ru(2,CT,2,6,null,null,tu),He(),Le(4,"div",3),ru(5,AT,2,11,"div",4,tu),He()()),r&2){let t=It();Ue(2),iu(t.steps),Ue(3),iu(t.steps)}}function TT(r,e){if(r&1){let t=un();Le(0,"div",9),ko(1,5),Le(2,"div",10)(3,"div",11),pr("@verticalStepTransition.done",function(n){Zr(t);let o=It(2);return Kr(o._animationDone.next(n))}),Le(4,"div",12),ko(5,8),He()()()()}if(r&2){let t=e.$implicit,i=e.$index,n=e.$count,o=It(2),a=il(4);Ue(),_t("ngTemplateOutlet",a)("ngTemplateOutletContext",nl(10,Ry,t,i)),Ue(),cr("mat-stepper-vertical-line",i!==n-1),Ue(),cr("mat-vertical-stepper-content-inactive",o.selectedIndex!==i),_t("@verticalStepTransition",nl(15,Py,o._getAnimationDirection(i),ih(13,My,o._getAnimationDuration())))("id",o._getStepContentId(i)),kr("aria-labelledby",o._getStepLabelId(i)),Ue(2),_t("ngTemplateOutlet",t.content)}}function DT(r,e){if(r&1&&ru(0,TT,6,18,"div",9,tu),r&2){let t=It();iu(t.steps)}}function OT(r,e){if(r&1){let t=un();Le(0,"mat-step-header",13),pr("click",function(){let n=Zr(t).step;return Kr(n.select())})("keydown",function(n){Zr(t);let o=It();return Kr(o._onKeydown(n))}),He()}if(r&2){let t=e.step,i=e.i,n=It();cr("mat-horizontal-stepper-header",n.orientation==="horizontal")("mat-vertical-stepper-header",n.orientation==="vertical"),_t("tabIndex",n._getFocusIndex()===i?0:-1)("id",n._getStepLabelId(i))("index",i)("state",n._getIndicatorType(i,t.state))("label",t.stepLabel||t.label)("selected",n.selectedIndex===i)("active",n._stepIsNavigable(i,t))("optional",t.optional)("errorMessage",t.errorMessage)("iconOverrides",n._iconOverrides)("disableRipple",n.disableRipple||!n._stepIsNavigable(i,t))("color",t.color||n.color),kr("aria-posinset",i+1)("aria-setsize",n.steps.length)("aria-controls",n._getStepContentId(i))("aria-selected",n.selectedIndex==i)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null)("aria-disabled",n._stepIsNavigable(i,t)?null:!0)}}var ql=(()=>{class r extends sm{static{this.\u0275fac=(()=>{let t;return function(n){return(t||(t=In(r)))(n||r)}})()}static{this.\u0275dir=xt({type:r,selectors:[["","matStepLabel",""]],standalone:!0,features:[ri]})}}return r})(),fd=(()=>{class r{constructor(){this.changes=new gt,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function RT(r){return r||new fd}var MT={provide:fd,deps:[[new $s,new $c,fd]],useFactory:RT},gm=(()=>{class r extends am{constructor(t,i,n,o){super(n),this._intl=t,this._focusMonitor=i,this._intlSubscription=t.changes.subscribe(()=>o.markForCheck())}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._intlSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._elementRef,t,i):this._elementRef.nativeElement.focus(i)}_stringLabel(){return this.label instanceof ql?null:this.label}_templateLabel(){return this.label instanceof ql?this.label:null}_getHostElement(){return this._elementRef.nativeElement}_getIconContext(){return{index:this.index,active:this.active,optional:this.optional}}_getDefaultTextForState(t){return t=="number"?`${this.index+1}`:t=="edit"?"create":t=="error"?"warning":t}static{this.\u0275fac=function(i){return new(i||r)(_e(fd),_e(sd),_e(vt),_e(oi))}}static{this.\u0275cmp=or({type:r,selectors:[["mat-step-header"]],hostAttrs:["role","tab",1,"mat-step-header"],hostVars:2,hostBindings:function(i,n){i&2&&$n("mat-"+(n.color||"primary"))},inputs:{state:"state",label:"label",errorMessage:"errorMessage",iconOverrides:"iconOverrides",index:"index",selected:"selected",active:"active",optional:"optional",disableRipple:"disableRipple",color:"color"},standalone:!0,features:[ri,mr],decls:10,vars:17,consts:[["matRipple","",1,"mat-step-header-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-step-icon-content"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mat-step-label"],[1,"mat-step-text-label"],[1,"mat-step-optional"],[1,"mat-step-sub-label-error"],["aria-hidden","true"],[1,"cdk-visually-hidden"],[3,"ngTemplateOutlet"]],template:function(i,n){if(i&1&&(Qt(0,"div",0),Le(1,"div")(2,"div",1),hr(3,dT,1,2,"ng-container",2)(4,gT,2,1),He()(),Le(5,"div",3),hr(6,vT,2,1,"div",4)(7,_T,2,1,"div",4)(8,yT,2,1,"div",5)(9,bT,2,1,"div",6),He()),i&2){let o;_t("matRippleTrigger",n._getHostElement())("matRippleDisabled",n.disableRipple),Ue(),rh("mat-step-icon-state-",n.state," mat-step-icon"),cr("mat-step-icon-selected",n.selected),Ue(2),ii(n.iconOverrides&&n.iconOverrides[n.state]?3:4),Ue(2),cr("mat-step-label-active",n.active)("mat-step-label-selected",n.selected)("mat-step-label-error",n.state=="error"),Ue(),ii((o=n._templateLabel())?6:n._stringLabel()?7:-1,o),Ue(2),ii(n.optional&&n.state!="error"?8:-1),Ue(),ii(n.state==="error"?9:-1)}},dependencies:[pm,au,Sy],styles:['.mat-step-header{overflow:hidden;outline:none;cursor:pointer;position:relative;box-sizing:content-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-step-header:focus .mat-focus-indicator::before{content:""}.mat-step-header:hover[aria-disabled=true]{cursor:default}.mat-step-header:hover:not([aria-disabled]),.mat-step-header:hover[aria-disabled=false]{background-color:var(--mat-stepper-header-hover-state-layer-color);border-radius:var(--mat-stepper-header-hover-state-layer-shape, var(--mat-app-corner-medium))}.mat-step-header.cdk-keyboard-focused,.mat-step-header.cdk-program-focused{background-color:var(--mat-stepper-header-focus-state-layer-color);border-radius:var(--mat-stepper-header-focus-state-layer-shape, var(--mat-app-corner-medium))}@media(hover: none){.mat-step-header:hover{background:none}}.cdk-high-contrast-active .mat-step-header{outline:solid 1px}.cdk-high-contrast-active .mat-step-header[aria-selected=true] .mat-step-label{text-decoration:underline}.cdk-high-contrast-active .mat-step-header[aria-disabled=true]{outline-color:GrayText}.cdk-high-contrast-active .mat-step-header[aria-disabled=true] .mat-step-label,.cdk-high-contrast-active .mat-step-header[aria-disabled=true] .mat-step-icon,.cdk-high-contrast-active .mat-step-header[aria-disabled=true] .mat-step-optional{color:GrayText}.mat-step-optional{font-size:12px;color:var(--mat-stepper-header-optional-label-text-color, var(--mat-app-on-surface-variant))}.mat-step-sub-label-error{font-size:12px;font-weight:normal}.mat-step-icon{border-radius:50%;height:24px;width:24px;flex-shrink:0;position:relative;color:var(--mat-stepper-header-icon-foreground-color, var(--mat-app-surface));background-color:var(--mat-stepper-header-icon-background-color, var(--mat-app-on-surface-variant))}.mat-step-icon-content{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);display:flex}.mat-step-icon .mat-icon{font-size:16px;height:16px;width:16px}.mat-step-icon-state-error{background-color:var(--mat-stepper-header-error-state-icon-background-color);color:var(--mat-stepper-header-error-state-icon-foreground-color, var(--mat-app-error))}.mat-step-icon-state-error .mat-icon{font-size:24px;height:24px;width:24px}.mat-step-label{display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:50px;vertical-align:middle;font-family:var(--mat-stepper-header-label-text-font, var(--mat-app-title-small-font));font-size:var(--mat-stepper-header-label-text-size, var(--mat-app-title-small-size));font-weight:var(--mat-stepper-header-label-text-weight, var(--mat-app-title-small-weight));color:var(--mat-stepper-header-label-text-color, var(--mat-app-on-surface-variant))}.mat-step-label.mat-step-label-active{color:var(--mat-stepper-header-selected-state-label-text-color, var(--mat-app-on-surface-variant))}.mat-step-label.mat-step-label-error{color:var(--mat-stepper-header-error-state-label-text-color, var(--mat-app-error));font-size:var(--mat-stepper-header-error-state-label-text-size, var(--mat-app-title-small-size))}.mat-step-label.mat-step-label-selected{font-size:var(--mat-stepper-header-selected-state-label-text-size, var(--mat-app-title-small-size));font-weight:var(--mat-stepper-header-selected-state-label-text-weight, var(--mat-app-title-small-weight))}.mat-step-text-label{text-overflow:ellipsis;overflow:hidden}.mat-step-header .mat-step-header-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-step-icon-selected{background-color:var(--mat-stepper-header-selected-state-icon-background-color, var(--mat-app-primary));color:var(--mat-stepper-header-selected-state-icon-foreground-color, var(--mat-app-on-primary))}.mat-step-icon-state-done{background-color:var(--mat-stepper-header-done-state-icon-background-color);color:var(--mat-stepper-header-done-state-icon-foreground-color)}.mat-step-icon-state-edit{background-color:var(--mat-stepper-header-edit-state-icon-background-color, var(--mat-app-primary));color:var(--mat-stepper-header-edit-state-icon-foreground-color, var(--mat-app-on-primary))}'],encapsulation:2,changeDetection:0})}}return r})(),Ny="500ms",Fy="225ms",Dy={horizontalStepTransition:uh("horizontalStepTransition",[Vo("previous",Bo({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"})),Vo("current",Bo({transform:"none",visibility:"inherit"})),Vo("next",Bo({transform:"translate3d(100%, 0, 0)",visibility:"hidden"})),hh("* => *",fh([dh("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)"),mh("@*",ph(),{optional:!0})]),{params:{animationDuration:Ny}})]),verticalStepTransition:uh("verticalStepTransition",[Vo("previous",Bo({height:"0px",visibility:"hidden"})),Vo("next",Bo({height:"0px",visibility:"hidden"})),Vo("current",Bo({height:"*",visibility:"inherit"})),hh("* <=> current",fh([dh("{{animationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)"),mh("@*",ph(),{optional:!0})]),{params:{animationDuration:Fy}})])},PT=(()=>{class r{constructor(t){this.templateRef=t}static{this.\u0275fac=function(i){return new(i||r)(_e(cn))}}static{this.\u0275dir=xt({type:r,selectors:[["ng-template","matStepperIcon",""]],inputs:{name:[0,"matStepperIcon","name"]},standalone:!0})}}return r})(),NT=(()=>{class r{constructor(t){this._template=t}static{this.\u0275fac=function(i){return new(i||r)(_e(cn))}}static{this.\u0275dir=xt({type:r,selectors:[["ng-template","matStepContent",""]],standalone:!0})}}return r})(),vm=(()=>{class r extends ld{constructor(t,i,n,o){super(t,o),this._errorStateMatcher=i,this._viewContainerRef=n,this._isSelected=Mi.EMPTY,this.stepLabel=void 0}ngAfterContentInit(){this._isSelected=this._stepper.steps.changes.pipe(mi(()=>this._stepper.selectionChange.pipe(Xe(t=>t.selectedStep===this),$i(this._stepper.selected===this)))).subscribe(t=>{t&&this._lazyContent&&!this._portal&&(this._portal=new os(this._lazyContent._template,this._viewContainerRef))})}ngOnDestroy(){this._isSelected.unsubscribe()}isErrorState(t,i){let n=this._errorStateMatcher.isErrorState(t,i),o=!!(t&&t.invalid&&this.interacted);return n||o}static{this.\u0275fac=function(i){return new(i||r)(_e(Na(()=>hd)),_e(Wl,4),_e(qn),_e(lm,8))}}static{this.\u0275cmp=or({type:r,selectors:[["mat-step"]],contentQueries:function(i,n,o){if(i&1&&(Ci(o,ql,5),Ci(o,NT,5)),i&2){let a;Ar(a=Sr())&&(n.stepLabel=a.first),Ar(a=Sr())&&(n._lazyContent=a.first)}},hostAttrs:["hidden",""],inputs:{color:"color"},exportAs:["matStep"],standalone:!0,features:[Ni([{provide:Wl,useExisting:r},{provide:ld,useExisting:r}]),ri,mr],ngContentSelectors:Oy,decls:1,vars:0,consts:[[3,"cdkPortalOutlet"]],template:function(i,n){i&1&&(Ii(),hr(0,ET,2,1,"ng-template"))},dependencies:[K_],encapsulation:2,changeDetection:0})}}return r})(),hd=(()=>{class r extends ds{get animationDuration(){return this._animationDuration}set animationDuration(t){this._animationDuration=/^\d+$/.test(t)?t+"ms":t}constructor(t,i,n){super(t,i,n),this._stepHeader=void 0,this._steps=void 0,this.steps=new Yn,this.animationDone=new Je,this.labelPosition="end",this.headerPosition="top",this._iconOverrides={},this._animationDone=new gt,this._animationDuration="",this._isServer=!Se(vr).isBrowser;let o=n.nativeElement.nodeName.toLowerCase();this.orientation=o==="mat-vertical-stepper"?"vertical":"horizontal"}ngAfterContentInit(){super.ngAfterContentInit(),this._icons.forEach(({name:t,templateRef:i})=>this._iconOverrides[t]=i),this.steps.changes.pipe($r(this._destroyed)).subscribe(()=>{this._stateChanged()}),this._animationDone.pipe($r(this._destroyed)).subscribe(t=>{t.toState==="current"&&this.animationDone.emit()})}_stepIsNavigable(t,i){return i.completed||this.selectedIndex===t||!this.linear}_getAnimationDuration(){return this.animationDuration?this.animationDuration:this.orientation==="horizontal"?Ny:Fy}static{this.\u0275fac=function(i){return new(i||r)(_e(us,8),_e(oi),_e(vt))}}static{this.\u0275cmp=or({type:r,selectors:[["mat-stepper"],["mat-vertical-stepper"],["mat-horizontal-stepper"],["","matStepper",""]],contentQueries:function(i,n,o){if(i&1&&(Ci(o,vm,5),Ci(o,PT,5)),i&2){let a;Ar(a=Sr())&&(n._steps=a),Ar(a=Sr())&&(n._icons=a)}},viewQuery:function(i,n){if(i&1&&Ki(gm,5),i&2){let o;Ar(o=Sr())&&(n._stepHeader=o)}},hostAttrs:["role","tablist"],hostVars:11,hostBindings:function(i,n){i&2&&(kr("aria-orientation",n.orientation),cr("mat-stepper-horizontal",n.orientation==="horizontal")("mat-stepper-vertical",n.orientation==="vertical")("mat-stepper-label-position-end",n.orientation==="horizontal"&&n.labelPosition=="end")("mat-stepper-label-position-bottom",n.orientation==="horizontal"&&n.labelPosition=="bottom")("mat-stepper-header-position-bottom",n.headerPosition==="bottom"))},inputs:{disableRipple:"disableRipple",color:"color",labelPosition:"labelPosition",headerPosition:"headerPosition",animationDuration:"animationDuration"},outputs:{animationDone:"animationDone"},exportAs:["matStepper","matVerticalStepper","matHorizontalStepper"],standalone:!0,features:[Ni([{provide:ds,useExisting:r}]),ri,mr],ngContentSelectors:Oy,decls:5,vars:2,consts:[["stepTemplate",""],[1,"mat-horizontal-stepper-wrapper"],[1,"mat-horizontal-stepper-header-container"],[1,"mat-horizontal-content-container"],["role","tabpanel",1,"mat-horizontal-stepper-content",3,"id","mat-horizontal-stepper-content-inactive"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mat-stepper-horizontal-line"],["role","tabpanel",1,"mat-horizontal-stepper-content",3,"id"],[3,"ngTemplateOutlet"],[1,"mat-step"],[1,"mat-vertical-content-container"],["role","tabpanel",1,"mat-vertical-stepper-content",3,"id"],[1,"mat-vertical-content"],[3,"click","keydown","tabIndex","id","index","state","label","selected","active","optional","errorMessage","iconOverrides","disableRipple","color"]],template:function(i,n){if(i&1&&(Ii(),hr(0,wT,1,0)(1,ST,7,0,"div",1)(2,DT,2,0)(3,OT,1,23,"ng-template",null,0,ah)),i&2){let o;ii(n._isServer?0:-1),Ue(),ii((o=n.orientation)==="horizontal"?1:o==="vertical"?2:-1)}},dependencies:[au,gm],styles:['.mat-stepper-vertical,.mat-stepper-horizontal{display:block;font-family:var(--mat-stepper-container-text-font, var(--mat-app-body-medium-font));background:var(--mat-stepper-container-color, var(--mat-app-surface))}.mat-horizontal-stepper-header-container{white-space:nowrap;display:flex;align-items:center}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header-container{align-items:flex-start}.mat-stepper-header-position-bottom .mat-horizontal-stepper-header-container{order:1}.mat-stepper-horizontal-line{border-top-width:1px;border-top-style:solid;flex:auto;height:0;margin:0 -16px;min-width:32px;border-top-color:var(--mat-stepper-line-color, var(--mat-app-outline))}.mat-stepper-label-position-bottom .mat-stepper-horizontal-line{margin:0;min-width:0;position:relative;top:calc(calc((var(--mat-stepper-header-height) - 24px) / 2) + 12px)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{border-top-width:1px;border-top-style:solid;content:"";display:inline-block;height:0;position:absolute;width:calc(50% - 20px)}.mat-horizontal-stepper-header{display:flex;height:72px;overflow:hidden;align-items:center;padding:0 24px;height:var(--mat-stepper-header-height)}.mat-horizontal-stepper-header .mat-step-icon{margin-right:8px;flex:none}[dir=rtl] .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:8px}.mat-horizontal-stepper-header::before,.mat-horizontal-stepper-header::after{border-top-color:var(--mat-stepper-line-color, var(--mat-app-outline))}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{padding:calc((var(--mat-stepper-header-height) - 24px) / 2) 24px}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header::after{top:calc(calc((var(--mat-stepper-header-height) - 24px) / 2) + 12px)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{box-sizing:border-box;flex-direction:column;height:auto}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{right:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before{left:0}[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:last-child::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:first-child::after{display:none}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-label{padding:16px 0 0 0;text-align:center;width:100%}.mat-vertical-stepper-header{display:flex;align-items:center;height:24px;padding:calc((var(--mat-stepper-header-height) - 24px) / 2) 24px}.mat-vertical-stepper-header .mat-step-icon{margin-right:12px}[dir=rtl] .mat-vertical-stepper-header .mat-step-icon{margin-right:0;margin-left:12px}.mat-horizontal-stepper-wrapper{display:flex;flex-direction:column}.mat-horizontal-stepper-content{outline:0}.mat-horizontal-stepper-content.mat-horizontal-stepper-content-inactive{height:0;overflow:hidden}.mat-horizontal-stepper-content:not(.mat-horizontal-stepper-content-inactive){visibility:inherit !important}.mat-horizontal-content-container{overflow:hidden;padding:0 24px 24px 24px}.cdk-high-contrast-active .mat-horizontal-content-container{outline:solid 1px}.mat-stepper-header-position-bottom .mat-horizontal-content-container{padding:24px 24px 0 24px}.mat-vertical-content-container{margin-left:36px;border:0;position:relative}.cdk-high-contrast-active .mat-vertical-content-container{outline:solid 1px}[dir=rtl] .mat-vertical-content-container{margin-left:0;margin-right:36px}.mat-stepper-vertical-line::before{content:"";position:absolute;left:0;border-left-width:1px;border-left-style:solid;border-left-color:var(--mat-stepper-line-color, var(--mat-app-outline));top:calc(8px - calc((var(--mat-stepper-header-height) - 24px) / 2));bottom:calc(8px - calc((var(--mat-stepper-header-height) - 24px) / 2))}[dir=rtl] .mat-stepper-vertical-line::before{left:auto;right:0}.mat-vertical-stepper-content{overflow:hidden;outline:0}.mat-vertical-stepper-content:not(.mat-vertical-stepper-content-inactive){visibility:inherit !important}.mat-vertical-content{padding:0 24px 24px 24px}.mat-step:last-child .mat-vertical-content-container{border:none}'],encapsulation:2,data:{animation:[Dy.horizontalStepTransition,Dy.verticalStepTransition]},changeDetection:0})}}return r})(),ky=(()=>{class r extends cy{static{this.\u0275fac=(()=>{let t;return function(n){return(t||(t=In(r)))(n||r)}})()}static{this.\u0275dir=xt({type:r,selectors:[["button","matStepperNext",""]],hostAttrs:[1,"mat-stepper-next"],hostVars:1,hostBindings:function(i,n){i&2&&Cn("type",n.type)},standalone:!0,features:[ri]})}}return r})(),Ly=(()=>{class r extends uy{static{this.\u0275fac=(()=>{let t;return function(n){return(t||(t=In(r)))(n||r)}})()}static{this.\u0275dir=xt({type:r,selectors:[["button","matStepperPrevious",""]],hostAttrs:[1,"mat-stepper-previous"],hostVars:1,hostBindings:function(i,n){i&2&&Cn("type",n.type)},standalone:!0,features:[ri]})}}return r})(),By=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Ke({type:r})}static{this.\u0275inj=Ze({providers:[MT,Wl],imports:[ar,Qi,td,dy,Ty,Xl,hd,gm,ar]})}}return r})();var kT=["mat-button",""],LT=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],BT=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var VT=new ot("MAT_BUTTON_CONFIG");var UT=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],GT=(()=>{class r{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(t){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,t)}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}constructor(t,i,n,o){this._elementRef=t,this._platform=i,this._ngZone=n,this._animationMode=o,this._focusMonitor=Se(sd),this._rippleLoader=Se(xy),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let a=Se(VT,{optional:!0}),s=t.nativeElement,l=s.classList;this.disabledInteractive=a?.disabledInteractive??!1,this.color=a?.color??null,this._rippleLoader?.configureRipple(s,{className:"mat-mdc-button-ripple"});for(let{attribute:d,mdcClasses:h}of UT)s.hasAttribute(d)&&l.add(...h)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",i){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static{this.\u0275fac=function(i){tl()}}static{this.\u0275dir=xt({type:r,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Mr],disabled:[2,"disabled","disabled",Mr],ariaDisabled:[2,"aria-disabled","ariaDisabled",Mr],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Mr]},features:[zr]})}}return r})();var Vy=(()=>{class r extends GT{constructor(t,i,n,o){super(t,i,n,o)}static{this.\u0275fac=function(i){return new(i||r)(_e(vt),_e(vr),_e(dt),_e(Zi,8))}}static{this.\u0275cmp=or({type:r,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(i,n){i&2&&(kr("disabled",n._getDisabledAttribute())("aria-disabled",n._getAriaDisabled()),$n(n.color?"mat-"+n.color:""),cr("mat-mdc-button-disabled",n.disabled)("mat-mdc-button-disabled-interactive",n.disabledInteractive)("_mat-animation-noopable",n._animationMode==="NoopAnimations")("mat-unthemed",!n.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[ri,mr],attrs:kT,ngContentSelectors:BT,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,n){i&1&&(Ii(LT),Qt(0,"span",0),ni(1),Le(2,"span",1),ni(3,1),He(),ni(4,2),Qt(5,"span",2)(6,"span",3)),i&2&&cr("mdc-button__ripple",!n._isFab)("mdc-fab__ripple",n._isFab)},styles:['.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 8px);height:var(--mdc-text-button-container-height);font-family:var(--mdc-text-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-app-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-filled-button-horizontal-padding, 16px);height:var(--mdc-filled-button-container-height);font-family:var(--mdc-filled-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-app-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-app-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-app-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-app-level1));height:var(--mdc-protected-button-container-height);font-family:var(--mdc-protected-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-app-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-app-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-app-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-app-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-app-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-app-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-outlined-button-horizontal-padding, 15px);height:var(--mdc-outlined-button-container-height);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-app-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-app-corner-full));border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-app-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-app-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}}return r})();var Uy=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Ke({type:r})}static{this.\u0275inj=Ze({imports:[ar,Xl,ar]})}}return r})();function zT(r,e){r&1&&Qt(0,"div",2)}var HT=new ot("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var jy=(()=>{class r{constructor(t,i,n,o,a){this._elementRef=t,this._ngZone=i,this._changeDetectorRef=n,this._animationMode=o,this._isNoopAnimation=!1,this._defaultColor="primary",this._value=0,this._bufferValue=0,this.animationEnd=new Je,this._mode="determinate",this._transitionendHandler=s=>{this.animationEnd.observers.length===0||!s.target||!s.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))},this._isNoopAnimation=o==="NoopAnimations",a&&(a.color&&(this.color=this._defaultColor=a.color),this.mode=a.mode||this.mode)}get color(){return this._color||this._defaultColor}set color(t){this._color=t}get value(){return this._value}set value(t){this._value=Gy(t||0),this._changeDetectorRef.markForCheck()}get bufferValue(){return this._bufferValue||0}set bufferValue(t){this._bufferValue=Gy(t||0),this._changeDetectorRef.markForCheck()}get mode(){return this._mode}set mode(t){this._mode=t,this._changeDetectorRef.markForCheck()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._transitionendHandler)})}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._transitionendHandler)}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}static{this.\u0275fac=function(i){return new(i||r)(_e(vt),_e(dt),_e(oi),_e(Zi,8),_e(HT,8))}}static{this.\u0275cmp=or({type:r,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(i,n){i&2&&(kr("aria-valuenow",n._isIndeterminate()?null:n.value)("mode",n.mode),$n("mat-"+n.color),cr("_mat-animation-noopable",n._isNoopAnimation)("mdc-linear-progress--animation-ready",!n._isNoopAnimation)("mdc-linear-progress--indeterminate",n._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",Lo],bufferValue:[2,"bufferValue","bufferValue",Lo],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],standalone:!0,features:[zr,mr],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(i,n){i&1&&(Le(0,"div",0),Qt(1,"div",1),hr(2,zT,1,0,"div",2),He(),Le(3,"div",3),Qt(4,"span",4),He(),Le(5,"div",5),Qt(6,"span",4),He()),i&2&&(Ue(),eu("flex-basis",n._getBufferBarFlexBasis()),Ue(),ii(n.mode==="buffer"?2:-1),Ue(),eu("transform",n._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mdc-linear-progress-track-height),var(--mdc-linear-progress-active-indicator-height))}.cdk-high-contrast-active .mdc-linear-progress{outline-color:CanvasText}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mdc-linear-progress-active-indicator-color, var(--mat-app-primary));border-top-width:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mdc-linear-progress-track-height);border-radius:var(--mdc-linear-progress-track-shape, var(--mat-app-corner-none))}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear;background-color:var(--mdc-linear-progress-track-color, var(--mat-app-surface-variant))}.cdk-high-contrast-active .mdc-linear-progress__buffer-dots{background-color:ButtonBorder}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mdc-linear-progress-track-color, var(--mat-app-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}`],encapsulation:2,changeDetection:0})}}return r})();function Gy(r,e=0,t=100){return Math.max(e,Math.min(t,r))}var zy=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Ke({type:r})}static{this.\u0275inj=Ze({imports:[ar]})}}return r})();var Hy=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Ke({type:r})}static{this.\u0275inj=Ze({})}}return r})();var $l=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Ke({type:r})}static{this.\u0275inj=Ze({imports:[ar,Qi,ey,ar]})}}return r})();var Wy=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Ke({type:r})}static{this.\u0275inj=Ze({imports:[ar,$l,$l,Hy,ar]})}}return r})();var $T=20,Xy=(()=>{class r{constructor(t,i,n){this._ngZone=t,this._platform=i,this._scrolled=new gt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=$T){return this._platform.isBrowser?new Ys(i=>{this._globalSubscription||this._addGlobalListener();let n=t>0?this._scrolled.pipe($f(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Ve()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){let n=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(pi(o=>!o||n.indexOf(o)>-1))}getAncestorScrollContainers(t){let i=[];return this.scrollContainers.forEach((n,o)=>{this._scrollableContainsElement(o,t)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let n=On(i),o=t.getElementRef().nativeElement;do if(n==o)return!0;while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let t=this._getWindow();return gv(t.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(i){return new(i||r)(ne(dt),ne(vr),ne(ut,8))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var ZT=20,_m=(()=>{class r{constructor(t,i,n){this._platform=t,this._change=new gt,this._changeListener=o=>{this._change.next(o)},this._document=n,i.runOutsideAngular(()=>{if(t.isBrowser){let o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:i,height:n}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+n,right:t.left+i,height:n,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,i=this._getWindow(),n=t.documentElement,o=n.getBoundingClientRect(),a=-o.top||t.body.scrollTop||i.scrollY||n.scrollTop||0,s=-o.left||t.body.scrollLeft||i.scrollX||n.scrollLeft||0;return{top:a,left:s}}change(t=ZT){return t>0?this._change.pipe($f(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(i){return new(i||r)(ne(vr),ne(dt),ne(ut,8))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var pd=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Ke({type:r})}static{this.\u0275inj=Ze({})}}return r})(),ym=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Ke({type:r})}static{this.\u0275inj=Ze({imports:[vn,pd,vn,pd]})}}return r})();var Yy=Q_(),bm=class{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Ir(-this._previousScrollPosition.left),e.style.top=Ir(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,t=this._document.body,i=e.style,n=t.style,o=i.scrollBehavior||"",a=n.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),Yy&&(i.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Yy&&(i.scrollBehavior=o,n.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}};var xm=class{constructor(e,t,i,n){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=n,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(pi(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},md=class{enable(){}disable(){}attach(){}};function Em(r,e){return e.some(t=>{let i=r.bottom<t.top,n=r.top>t.bottom,o=r.right<t.left,a=r.left>t.right;return i||n||o||a})}function qy(r,e){return e.some(t=>{let i=r.top<t.top,n=r.bottom>t.bottom,o=r.left<t.left,a=r.right>t.right;return i||n||o||a})}var wm=class{constructor(e,t,i,n){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=n,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:n}=this._viewportRuler.getViewportSize();Em(t,[{width:i,height:n,bottom:n,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},JT=(()=>{class r{constructor(t,i,n,o){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=n,this.noop=()=>new md,this.close=a=>new xm(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new bm(this._viewportRuler,this._document),this.reposition=a=>new wm(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=o}static{this.\u0275fac=function(i){return new(i||r)(ne(Xy),ne(_m),ne(dt),ne(ut))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),Im=class{constructor(e){if(this.scrollStrategy=new md,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let t=Object.keys(e);for(let i of t)e[i]!==void 0&&(this[i]=e[i])}}};var Cm=class{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}};var eb=(()=>{class r{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){let i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static{this.\u0275fac=function(i){return new(i||r)(ne(ut))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),eD=(()=>{class r extends eb{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=n=>{let o=this._attachedOverlays;for(let a=o.length-1;a>-1;a--)if(o[a]._keydownEvents.observers.length>0){let s=o[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>s.next(n)):s.next(n);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(i){return new(i||r)(ne(ut),ne(dt,8))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),tD=(()=>{class r extends eb{constructor(t,i,n){super(t),this._platform=i,this._ngZone=n,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=ki(o)},this._clickListener=o=>{let a=ki(o),s=o.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;let l=this._attachedOverlays.slice();for(let d=l.length-1;d>-1;d--){let h=l[d];if(h._outsidePointerEvents.observers.length<1||!h.hasAttached())continue;if($y(h.overlayElement,a)||$y(h.overlayElement,s))break;let p=h._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>p.next(o)):p.next(o)}}}add(t){if(super.add(t),!this._isAttached){let i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(i){return new(i||r)(ne(ut),ne(vr),ne(dt,8))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function $y(r,e){let t=typeof ShadowRoot<"u"&&ShadowRoot,i=e;for(;i;){if(i===r)return!0;i=t&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var tb=(()=>{class r{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t="cdk-overlay-container";if(this._platform.isBrowser||Hl()){let n=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<n.length;o++)n[o].remove()}let i=this._document.createElement("div");i.classList.add(t),Hl()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static{this.\u0275fac=function(i){return new(i||r)(ne(ut),ne(vr))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),Am=class{constructor(e,t,i,n,o,a,s,l,d,h=!1,p){this._portalOutlet=e,this._host=t,this._pane=i,this._config=n,this._ngZone=o,this._keyboardDispatcher=a,this._document=s,this._location=l,this._outsideClickDispatcher=d,this._animationsDisabled=h,this._injector=p,this._backdropElement=null,this._backdropClick=new gt,this._attachments=new gt,this._detachments=new gt,this._locationChanges=Mi.EMPTY,this._backdropClickHandler=v=>this._backdropClick.next(v),this._backdropTransitionendHandler=v=>{this._disposeBackdrop(v.target)},this._keydownEvents=new gt,this._outsidePointerEvents=new gt,this._renders=new gt,n.scrollStrategy&&(this._scrollStrategy=n.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=n.positionStrategy,this._afterRenderRef=dn(()=>Bv(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Jc(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof t?.onDestroy=="function"&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=se(se({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Tt(se({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Ir(this._config.width),e.height=Ir(this._config.height),e.minWidth=Ir(this._config.minWidth),e.minHeight=Ir(this._config.minHeight),e.maxWidth=Ir(this._config.maxWidth),e.maxHeight=Ir(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){let n=ls(t||[]).filter(o=>!!o);n.length&&(i?e.classList.add(...n):e.classList.remove(...n))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let e=this._renders.pipe($r(vv(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},Zy="cdk-overlay-connected-position-bounding-box",rD=/([A-Za-z%]+)$/,Sm=class{get positions(){return this._preferredPositions}constructor(e,t,i,n,o){this._viewportRuler=t,this._document=i,this._platform=n,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new gt,this._resizeSubscription=Mi.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(Zy),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,t=this._overlayRect,i=this._viewportRect,n=this._containerRect,o=[],a;for(let s of this._preferredPositions){let l=this._getOriginPoint(e,n,s),d=this._getOverlayPoint(l,t,s),h=this._getOverlayFit(d,t,i,s);if(h.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(s,l);return}if(this._canFitWithFlexibleDimensions(h,d,i)){o.push({position:s,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,s)});continue}(!a||a.overlayFit.visibleArea<h.visibleArea)&&(a={overlayFit:h,overlayPoint:d,originPoint:l,position:s,overlayRect:t})}if(o.length){let s=null,l=-1;for(let d of o){let h=d.boundingBoxRect.width*d.boundingBoxRect.height*(d.position.weight||1);h>l&&(l=h,s=d)}this._isPushed=!1,this._applyPosition(s.position,s.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(a.position,a.originPoint);return}this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ra(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Zy),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let n;if(i.originX=="center")n=e.left+e.width/2;else{let a=this._isRtl()?e.right:e.left,s=this._isRtl()?e.left:e.right;n=i.originX=="start"?a:s}t.left<0&&(n-=t.left);let o;return i.originY=="center"?o=e.top+e.height/2:o=i.originY=="top"?e.top:e.bottom,t.top<0&&(o-=t.top),{x:n,y:o}}_getOverlayPoint(e,t,i){let n;i.overlayX=="center"?n=-t.width/2:i.overlayX==="start"?n=this._isRtl()?-t.width:0:n=this._isRtl()?0:-t.width;let o;return i.overlayY=="center"?o=-t.height/2:o=i.overlayY=="top"?0:-t.height,{x:e.x+n,y:e.y+o}}_getOverlayFit(e,t,i,n){let o=Qy(t),{x:a,y:s}=e,l=this._getOffset(n,"x"),d=this._getOffset(n,"y");l&&(a+=l),d&&(s+=d);let h=0-a,p=a+o.width-i.width,v=0-s,_=s+o.height-i.height,E=this._subtractOverflows(o.width,h,p),A=this._subtractOverflows(o.height,v,_),N=E*A;return{visibleArea:N,isCompletelyWithinViewport:o.width*o.height===N,fitsInViewportVertically:A===o.height,fitsInViewportHorizontally:E==o.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){let n=i.bottom-t.y,o=i.right-t.x,a=Ky(this._overlayRef.getConfig().minHeight),s=Ky(this._overlayRef.getConfig().minWidth),l=e.fitsInViewportVertically||a!=null&&a<=n,d=e.fitsInViewportHorizontally||s!=null&&s<=o;return l&&d}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let n=Qy(t),o=this._viewportRect,a=Math.max(e.x+n.width-o.width,0),s=Math.max(e.y+n.height-o.height,0),l=Math.max(o.top-i.top-e.y,0),d=Math.max(o.left-i.left-e.x,0),h=0,p=0;return n.width<=o.width?h=d||-a:h=e.x<this._viewportMargin?o.left-i.left-e.x:0,n.height<=o.height?p=l||-s:p=e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:h,y:p},{x:e.x+h,y:e.y+p}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!iD(this._lastScrollVisibility,i)){let n=new Cm(e,i);this._positionChanges.next(n)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let t=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,n=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${i} ${n}`}_calculateBoundingBoxRect(e,t){let i=this._viewportRect,n=this._isRtl(),o,a,s;if(t.overlayY==="top")a=e.y,o=i.height-a+this._viewportMargin;else if(t.overlayY==="bottom")s=i.height-e.y+this._viewportMargin*2,o=i.height-s+this._viewportMargin;else{let _=Math.min(i.bottom-e.y+i.top,e.y),E=this._lastBoundingBoxSize.height;o=_*2,a=e.y-_,o>E&&!this._isInitialRender&&!this._growAfterOpen&&(a=e.y-E/2)}let l=t.overlayX==="start"&&!n||t.overlayX==="end"&&n,d=t.overlayX==="end"&&!n||t.overlayX==="start"&&n,h,p,v;if(d)v=i.width-e.x+this._viewportMargin*2,h=e.x-this._viewportMargin;else if(l)p=e.x,h=i.right-e.x;else{let _=Math.min(i.right-e.x+i.left,e.x),E=this._lastBoundingBoxSize.width;h=_*2,p=e.x-_,h>E&&!this._isInitialRender&&!this._growAfterOpen&&(p=e.x-E/2)}return{top:a,left:p,bottom:s,right:v,width:h,height:o}}_setBoundingBoxStyles(e,t){let i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let n={};if(this._hasExactPosition())n.top=n.left="0",n.bottom=n.right=n.maxHeight=n.maxWidth="",n.width=n.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;n.height=Ir(i.height),n.top=Ir(i.top),n.bottom=Ir(i.bottom),n.width=Ir(i.width),n.left=Ir(i.left),n.right=Ir(i.right),t.overlayX==="center"?n.alignItems="center":n.alignItems=t.overlayX==="end"?"flex-end":"flex-start",t.overlayY==="center"?n.justifyContent="center":n.justifyContent=t.overlayY==="bottom"?"flex-end":"flex-start",o&&(n.maxHeight=Ir(o)),a&&(n.maxWidth=Ir(a))}this._lastBoundingBoxSize=i,ra(this._boundingBox.style,n)}_resetBoundingBoxStyles(){ra(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ra(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){let i={},n=this._hasExactPosition(),o=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(n){let h=this._viewportRuler.getViewportScrollPosition();ra(i,this._getExactOverlayY(t,e,h)),ra(i,this._getExactOverlayX(t,e,h))}else i.position="static";let s="",l=this._getOffset(t,"x"),d=this._getOffset(t,"y");l&&(s+=`translateX(${l}px) `),d&&(s+=`translateY(${d}px)`),i.transform=s.trim(),a.maxHeight&&(n?i.maxHeight=Ir(a.maxHeight):o&&(i.maxHeight="")),a.maxWidth&&(n?i.maxWidth=Ir(a.maxWidth):o&&(i.maxWidth="")),ra(this._pane.style,i)}_getExactOverlayY(e,t,i){let n={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),e.overlayY==="bottom"){let a=this._document.documentElement.clientHeight;n.bottom=`${a-(o.y+this._overlayRect.height)}px`}else n.top=Ir(o.y);return n}_getExactOverlayX(e,t,i){let n={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let a;if(this._isRtl()?a=e.overlayX==="end"?"left":"right":a=e.overlayX==="end"?"right":"left",a==="right"){let s=this._document.documentElement.clientWidth;n.right=`${s-(o.x+this._overlayRect.width)}px`}else n.left=Ir(o.x);return n}_getScrollVisibility(){let e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(n=>n.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:qy(e,i),isOriginOutsideView:Em(e,i),isOverlayClipped:qy(t,i),isOverlayOutsideView:Em(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,n)=>i-Math.max(n,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return t==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&ls(e).forEach(t=>{t!==""&&this._appliedPanelClasses.indexOf(t)===-1&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof vt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}};function ra(r,e){for(let t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}function Ky(r){if(typeof r!="number"&&r!=null){let[e,t]=r.split(rD);return!t||t==="px"?parseFloat(e):null}return r||null}function Qy(r){return{top:Math.floor(r.top),right:Math.floor(r.right),bottom:Math.floor(r.bottom),left:Math.floor(r.left),width:Math.floor(r.width),height:Math.floor(r.height)}}function iD(r,e){return r===e?!0:r.isOriginClipped===e.isOriginClipped&&r.isOriginOutsideView===e.isOriginOutsideView&&r.isOverlayClipped===e.isOverlayClipped&&r.isOverlayOutsideView===e.isOverlayOutsideView}var Jy="cdk-global-overlay-wrapper",Tm=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Jy),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:n,height:o,maxWidth:a,maxHeight:s}=i,l=(n==="100%"||n==="100vw")&&(!a||a==="100%"||a==="100vw"),d=(o==="100%"||o==="100vh")&&(!s||s==="100%"||s==="100vh"),h=this._xPosition,p=this._xOffset,v=this._overlayRef.getConfig().direction==="rtl",_="",E="",A="";l?A="flex-start":h==="center"?(A="center",v?E=p:_=p):v?h==="left"||h==="end"?(A="flex-end",_=p):(h==="right"||h==="start")&&(A="flex-start",E=p):h==="left"||h==="start"?(A="flex-start",_=p):(h==="right"||h==="end")&&(A="flex-end",E=p),e.position=this._cssPosition,e.marginLeft=l?"0":_,e.marginTop=d?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":E,t.justifyContent=A,t.alignItems=d?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(Jy),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},nD=(()=>{class r{constructor(t,i,n,o){this._viewportRuler=t,this._document=i,this._platform=n,this._overlayContainer=o}global(){return new Tm}flexibleConnectedTo(t){return new Sm(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(i){return new(i||r)(ne(_m),ne(ut),ne(vr),ne(tb))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),oD=0,fs=(()=>{class r{constructor(t,i,n,o,a,s,l,d,h,p,v,_){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=n,this._positionBuilder=o,this._keyboardDispatcher=a,this._injector=s,this._ngZone=l,this._document=d,this._directionality=h,this._location=p,this._outsideClickDispatcher=v,this._animationsModuleType=_}create(t){let i=this._createHostElement(),n=this._createPaneElement(i),o=this._createPortalOutlet(n),a=new Im(t);return a.direction=a.direction||this._directionality.value,new Am(o,i,n,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(Po))}position(){return this._positionBuilder}_createPaneElement(t){let i=this._document.createElement("div");return i.id=`cdk-overlay-${oD++}`,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){let t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(ol)),new ed(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(i){return new(i||r)(ne(JT),ne(tb),ne(Kc),ne(nD),ne(eD),ne(Xn),ne(dt),ne(ut),ne(us),ne(La),ne(tD),ne(Zi,8))}}static{this.\u0275prov=Re({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var aD=new ot("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let r=Se(fs);return()=>r.scrollStrategies.reposition()}});function sD(r){return()=>r.scrollStrategies.reposition()}var lD={provide:aD,deps:[fs],useFactory:sD},rb=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Ke({type:r})}static{this.\u0275inj=Ze({providers:[fs,lD],imports:[vn,td,ym,ym]})}}return r})();var cD=new ot("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let r=Se(fs);return()=>r.scrollStrategies.reposition()}});function uD(r){return()=>r.scrollStrategies.reposition()}var dD={provide:cD,deps:[fs],useFactory:uD};var ib=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=Ke({type:r})}static{this.\u0275inj=Ze({providers:[dD],imports:[Qi,rb,mm,ar,pd,$l,mm,ar]})}}return r})();var vd=zc(Dm(),1),Om=zc(Dm(),1);var fD=(0,vd.supported)(),hD=["id","name","class","multiple","required","disabled","capture","accept"],pD=["setOptions","on","off","onOnce","appendTo","insertAfter","insertBefore","isAttachedTo","replaceElement","restoreElement","destroy"],ob=["oninit","onwarning","onerror","oninitfile","onaddfilestart","onaddfileprogress","onaddfile","onprocessfilestart","onprocessfileprogress","onprocessfileabort","onprocessfilerevert","onprocessfile","onprocessfiles","onremovefile","onpreparefile","onupdatefiles","onactivatefile","onreorderfiles"],ab=(()=>{class r{constructor(t,i){this.options={},this.oninit=new Je,this.onwarning=new Je,this.onerror=new Je,this.oninitfile=new Je,this.onactivatefile=new Je,this.onaddfilestart=new Je,this.onaddfileprogress=new Je,this.onaddfile=new Je,this.onprocessfilestart=new Je,this.onprocessfileprogress=new Je,this.onprocessfileabort=new Je,this.onprocessfilerevert=new Je,this.onprocessfile=new Je,this.onprocessfiles=new Je,this.onremovefile=new Je,this.onpreparefile=new Je,this.onupdatefiles=new Je,this.onreorderfiles=new Je,this.pond=null,this.handleEvent=null,this.root=t,this.zone=i}ngAfterViewInit(){let t=this.root.nativeElement.querySelector("input"),i=this.root.nativeElement.attributes;hD.forEach(n=>{let o=i[n]?i[n].value:this.options[n];o&&t.setAttribute(n,o)}),fD&&(this.handleEvent=n=>{let o=`on${n.type.split(":")[1]}`;this[o].emit(se({},n.detail))},ob.forEach(n=>{this.root.nativeElement.addEventListener(`FilePond:${n.substring(2)}`,this.handleEvent)}),this.zone.runOutsideAngular(()=>{this.pond=(0,vd.create)(t,Tt(se({},this.options),{files:this.files}))}),this.pond&&Object.keys(this.pond).filter(n=>pD.indexOf(n)===-1).forEach(n=>{this[n]=this.pond[n]}))}ngOnChanges(t){if(t.firstChange||!this.pond)return;let i=t.options?t.options.currentValue:this.options;t.files&&JSON.stringify(t.files.previousValue)!==JSON.stringify(t.files.currentValue)&&(i.files=t.files.currentValue),this.pond.setOptions(i)}ngOnDestroy(){this.pond&&(ob.forEach(t=>{this.root.nativeElement.removeEventListener(`FilePond:${t.substring(2)}`,this.handleEvent)}),this.pond.destroy())}}return r.\u0275fac=function(t){return new(t||r)(_e(vt),_e(dt))},r.\u0275cmp=or({type:r,selectors:[["file-pond"]],inputs:{options:"options",files:"files"},outputs:{oninit:"oninit",onwarning:"onwarning",onerror:"onerror",oninitfile:"oninitfile",onactivatefile:"onactivatefile",onaddfilestart:"onaddfilestart",onaddfileprogress:"onaddfileprogress",onaddfile:"onaddfile",onprocessfilestart:"onprocessfilestart",onprocessfileprogress:"onprocessfileprogress",onprocessfileabort:"onprocessfileabort",onprocessfilerevert:"onprocessfilerevert",onprocessfile:"onprocessfile",onprocessfiles:"onprocessfiles",onremovefile:"onremovefile",onpreparefile:"onpreparefile",onupdatefiles:"onupdatefiles",onreorderfiles:"onreorderfiles"},features:[Ei],decls:2,vars:0,consts:[[1,"filepond--wrapper"],["type","file"]],template:function(t,i){t&1&&(Le(0,"div",0),Qt(1,"input",1),He())},encapsulation:2}),r})(),sb=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=Ke({type:r}),r.\u0275inj=Ze({imports:[Qi]}),r})();var Fx=zc(lb()),kx=zc(cb());function gD(r,e){var t=Object.setPrototypeOf;t?t(r,e):r.__proto__=e}function vD(r,e){e===void 0&&(e=r.constructor);var t=Error.captureStackTrace;t&&t(r,e)}var _D=function(){var r=function(t,i){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},r(t,i)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ub=function(r){_D(e,r);function e(t,i){var n=this.constructor,o=r.call(this,t,i)||this;return Object.defineProperty(o,"name",{value:n.name,enumerable:!1,configurable:!0}),gD(o,n.prototype),vD(o),o}return e}(Error);var yD=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),bD=function(r){yD(e,r);function e(t){t===void 0&&(t=void 0);var i=r.call(this,t)||this;return i.message=t,i}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}(ub),Vt=bD;var xD=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ED=function(r){xD(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Vt),vi=ED;var wD=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ID=function(r){wD(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Vt),ae=ID;var CD=function(){function r(e){if(this.binarizer=e,e===null)throw new ae("Binarizer must be non-null.")}return r.prototype.getWidth=function(){return this.binarizer.getWidth()},r.prototype.getHeight=function(){return this.binarizer.getHeight()},r.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},r.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},r.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},r.prototype.crop=function(e,t,i,n){var o=this.binarizer.getLuminanceSource().crop(e,t,i,n);return new r(this.binarizer.createBinarizer(o))},r.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},r.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new r(this.binarizer.createBinarizer(e))},r.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new r(this.binarizer.createBinarizer(e))},r.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},r}(),Fm=CD;var AD=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),SD=function(r){AD(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Vt),Ut=SD;var TD=function(){function r(e){this.source=e}return r.prototype.getLuminanceSource=function(){return this.source},r.prototype.getWidth=function(){return this.source.getWidth()},r.prototype.getHeight=function(){return this.source.getHeight()},r}(),km=TD;var DD=function(){function r(){}return r.arraycopy=function(e,t,i,n,o){for(;o--;)i[n++]=e[t++]},r.currentTimeMillis=function(){return Date.now()},r}(),tt=DD;var OD=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),RD=function(r){OD(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Vt),hs=RD;var MD=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),PD=function(r){MD(e,r);function e(t,i){t===void 0&&(t=void 0),i===void 0&&(i=void 0);var n=r.call(this,i)||this;return n.index=t,n.message=i,n}return e.kind="ArrayIndexOutOfBoundsException",e}(hs),Lm=PD;var ND=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FD=function(){function r(){}return r.fill=function(e,t){for(var i=0,n=e.length;i<n;i++)e[i]=t},r.fillWithin=function(e,t,i,n){r.rangeCheck(e.length,t,i);for(var o=t;o<i;o++)e[o]=n},r.rangeCheck=function(e,t,i){if(t>i)throw new ae("fromIndex("+t+") > toIndex("+i+")");if(t<0)throw new Lm(t);if(i>e)throw new Lm(i)},r.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},r.create=function(e,t,i){var n=Array.from({length:e});return n.map(function(o){return Array.from({length:t}).fill(i)})},r.createInt32Array=function(e,t,i){var n=Array.from({length:e});return n.map(function(o){return Int32Array.from({length:t}).fill(i)})},r.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var i=0,n=e.length;i<n;i++)if(e[i]!==t[i])return!1;return!0},r.hashCode=function(e){var t,i;if(e===null)return 0;var n=1;try{for(var o=ND(e),a=o.next();!a.done;a=o.next()){var s=a.value;n=31*n+s}}catch(l){t={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return n},r.fillUint8Array=function(e,t){for(var i=0;i!==e.length;i++)e[i]=t},r.copyOf=function(e,t){return e.slice(0,t)},r.copyOfUint8Array=function(e,t){if(e.length<=t){var i=new Uint8Array(t);return i.set(e),i}return e.slice(0,t)},r.copyOfRange=function(e,t,i){var n=i-t,o=new Int32Array(n);return tt.arraycopy(e,t,o,0,n),o},r.binarySearch=function(e,t,i){i===void 0&&(i=r.numberComparator);for(var n=0,o=e.length-1;n<=o;){var a=o+n>>1,s=i(t,e[a]);if(s>0)n=a+1;else if(s<0)o=a-1;else return a}return-n-1},r.numberComparator=function(e,t){return e-t},r}(),Ct=FD;var kD=function(){function r(){}return r.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var i=31;return t=e<<16,t!==0&&(i-=16,e=t),t=e<<8,t!==0&&(i-=8,e=t),t=e<<4,t!==0&&(i-=4,e=t),t=e<<2,t!==0&&(i-=2,e=t),i-(e<<1>>>31)},r.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},r.toHexString=function(e){return e.toString(16)},r.toBinaryString=function(e){return String(parseInt(String(e),2))},r.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},r.truncDivision=function(e,t){return Math.trunc(e/t)},r.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r.MIN_VALUE_32_BITS=-2147483648,r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r}(),Pe=kD;var LD=function(){function r(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=r.makeArray(e):this.bits=t)}return r.prototype.getSize=function(){return this.size},r.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},r.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=r.makeArray(e);tt.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},r.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},r.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},r.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},r.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var i=this.bits,n=Math.floor(e/32),o=i[n];o&=~((1<<(e&31))-1);for(var a=i.length;o===0;){if(++n===a)return t;o=i[n]}var s=n*32+Pe.numberOfTrailingZeros(o);return s>t?t:s},r.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var i=this.bits,n=Math.floor(e/32),o=~i[n];o&=~((1<<(e&31))-1);for(var a=i.length;o===0;){if(++n===a)return t;o=~i[n]}var s=n*32+Pe.numberOfTrailingZeros(o);return s>t?t:s},r.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},r.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new ae;if(t!==e){t--;for(var i=Math.floor(e/32),n=Math.floor(t/32),o=this.bits,a=i;a<=n;a++){var s=a>i?0:e&31,l=a<n?31:t&31,d=(2<<l)-(1<<s);o[a]|=d}}},r.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,i=0;i<e;i++)t[i]=0},r.prototype.isRange=function(e,t,i){if(t<e||e<0||t>this.size)throw new ae;if(t===e)return!0;t--;for(var n=Math.floor(e/32),o=Math.floor(t/32),a=this.bits,s=n;s<=o;s++){var l=s>n?0:e&31,d=s<o?31:t&31,h=(2<<d)-(1<<l)&4294967295;if((a[s]&h)!==(i?h:0))return!1}return!0},r.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},r.prototype.appendBits=function(e,t){if(t<0||t>32)throw new ae("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var i=t;i>0;i--)this.appendBit((e>>i-1&1)===1)},r.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var i=0;i<t;i++)this.appendBit(e.get(i))},r.prototype.xor=function(e){if(this.size!==e.size)throw new ae("Sizes don't match");for(var t=this.bits,i=0,n=t.length;i<n;i++)t[i]^=e.bits[i]},r.prototype.toBytes=function(e,t,i,n){for(var o=0;o<n;o++){for(var a=0,s=0;s<8;s++)this.get(e)&&(a|=1<<7-s),e++;t[i+o]=a}},r.prototype.getBitArray=function(){return this.bits},r.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),i=t+1,n=this.bits,o=0;o<i;o++){var a=n[o];a=a>>1&1431655765|(a&1431655765)<<1,a=a>>2&858993459|(a&858993459)<<2,a=a>>4&252645135|(a&252645135)<<4,a=a>>8&16711935|(a&16711935)<<8,a=a>>16&65535|(a&65535)<<16,e[t-o]=a}if(this.size!==i*32){for(var s=i*32-this.size,l=e[0]>>>s,o=1;o<i;o++){var d=e[o];l|=d<<32-s,e[o-1]=l,l=d>>>s}e[i-1]=l}this.bits=e},r.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.size===t.size&&Ct.equals(this.bits,t.bits)},r.prototype.hashCode=function(){return 31*this.size+Ct.hashCode(this.bits)},r.prototype.toString=function(){for(var e="",t=0,i=this.size;t<i;t++)t&7||(e+=" "),e+=this.get(t)?"X":".";return e},r.prototype.clone=function(){return new r(this.size,this.bits.slice())},r.prototype.toArray=function(){for(var e=[],t=0,i=this.size;t<i;t++)e.push(this.get(t));return e},r}(),qt=LD;var db=function(r){return r[r.OTHER=0]="OTHER",r[r.PURE_BARCODE=1]="PURE_BARCODE",r[r.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",r[r.TRY_HARDER=3]="TRY_HARDER",r[r.CHARACTER_SET=4]="CHARACTER_SET",r[r.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",r[r.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",r[r.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",r[r.ASSUME_GS1=8]="ASSUME_GS1",r[r.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",r[r.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",r[r.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS",r}(db||{}),st=db;var BD=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),VD=function(r){BD(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Vt),J=VD;var UD=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zt=function(r){return r[r.Cp437=0]="Cp437",r[r.ISO8859_1=1]="ISO8859_1",r[r.ISO8859_2=2]="ISO8859_2",r[r.ISO8859_3=3]="ISO8859_3",r[r.ISO8859_4=4]="ISO8859_4",r[r.ISO8859_5=5]="ISO8859_5",r[r.ISO8859_6=6]="ISO8859_6",r[r.ISO8859_7=7]="ISO8859_7",r[r.ISO8859_8=8]="ISO8859_8",r[r.ISO8859_9=9]="ISO8859_9",r[r.ISO8859_10=10]="ISO8859_10",r[r.ISO8859_11=11]="ISO8859_11",r[r.ISO8859_13=12]="ISO8859_13",r[r.ISO8859_14=13]="ISO8859_14",r[r.ISO8859_15=14]="ISO8859_15",r[r.ISO8859_16=15]="ISO8859_16",r[r.SJIS=16]="SJIS",r[r.Cp1250=17]="Cp1250",r[r.Cp1251=18]="Cp1251",r[r.Cp1252=19]="Cp1252",r[r.Cp1256=20]="Cp1256",r[r.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",r[r.UTF8=22]="UTF8",r[r.ASCII=23]="ASCII",r[r.Big5=24]="Big5",r[r.GB18030=25]="GB18030",r[r.EUC_KR=26]="EUC_KR",r}(zt||{}),GD=function(){function r(e,t,i){for(var n,o,a=[],s=3;s<arguments.length;s++)a[s-3]=arguments[s];this.valueIdentifier=e,this.name=i,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=a,r.VALUE_IDENTIFIER_TO_ECI.set(e,this),r.NAME_TO_ECI.set(i,this);for(var l=this.values,d=0,h=l.length;d!==h;d++){var p=l[d];r.VALUES_TO_ECI.set(p,this)}try{for(var v=UD(a),_=v.next();!_.done;_=v.next()){var E=_.value;r.NAME_TO_ECI.set(E,this)}}catch(A){n={error:A}}finally{try{_&&!_.done&&(o=v.return)&&o.call(v)}finally{if(n)throw n.error}}}return r.prototype.getValueIdentifier=function(){return this.valueIdentifier},r.prototype.getName=function(){return this.name},r.prototype.getValue=function(){return this.values[0]},r.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new J("incorect value");var t=r.VALUES_TO_ECI.get(e);if(t===void 0)throw new J("incorect value");return t},r.getCharacterSetECIByName=function(e){var t=r.NAME_TO_ECI.get(e);if(t===void 0)throw new J("incorect value");return t},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.getName()===t.getName()},r.VALUE_IDENTIFIER_TO_ECI=new Map,r.VALUES_TO_ECI=new Map,r.NAME_TO_ECI=new Map,r.Cp437=new r(zt.Cp437,Int32Array.from([0,2]),"Cp437"),r.ISO8859_1=new r(zt.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),r.ISO8859_2=new r(zt.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),r.ISO8859_3=new r(zt.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),r.ISO8859_4=new r(zt.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),r.ISO8859_5=new r(zt.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),r.ISO8859_6=new r(zt.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),r.ISO8859_7=new r(zt.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),r.ISO8859_8=new r(zt.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),r.ISO8859_9=new r(zt.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),r.ISO8859_10=new r(zt.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),r.ISO8859_11=new r(zt.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),r.ISO8859_13=new r(zt.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),r.ISO8859_14=new r(zt.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),r.ISO8859_15=new r(zt.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),r.ISO8859_16=new r(zt.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),r.SJIS=new r(zt.SJIS,20,"SJIS","Shift_JIS"),r.Cp1250=new r(zt.Cp1250,21,"Cp1250","windows-1250"),r.Cp1251=new r(zt.Cp1251,22,"Cp1251","windows-1251"),r.Cp1252=new r(zt.Cp1252,23,"Cp1252","windows-1252"),r.Cp1256=new r(zt.Cp1256,24,"Cp1256","windows-1256"),r.UnicodeBigUnmarked=new r(zt.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),r.UTF8=new r(zt.UTF8,26,"UTF8","UTF-8"),r.ASCII=new r(zt.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),r.Big5=new r(zt.Big5,28,"Big5"),r.GB18030=new r(zt.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),r.EUC_KR=new r(zt.EUC_KR,30,"EUC_KR","EUC-KR"),r}(),$t=GD;var jD=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),zD=function(r){jD(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Vt),ia=zD;var HD=function(){function r(){}return r.decode=function(e,t){var i=this.encodingName(t);return this.customDecoder?this.customDecoder(e,i):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(i)?this.decodeFallback(e,i):new TextDecoder(i).decode(e)},r.shouldDecodeOnFallback=function(e){return!r.isBrowser()&&e==="ISO-8859-1"},r.encode=function(e,t){var i=this.encodingName(t);return this.customEncoder?this.customEncoder(e,i):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},r.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},r.encodingName=function(e){return typeof e=="string"?e:e.getName()},r.encodingCharacterSet=function(e){return e instanceof $t?e:$t.getCharacterSetECIByName(e)},r.decodeFallback=function(e,t){var i=this.encodingCharacterSet(t);if(r.isDecodeFallbackSupported(i)){for(var n="",o=0,a=e.length;o<a;o++){var s=e[o].toString(16);s.length<2&&(s="0"+s),n+="%"+s}return decodeURIComponent(n)}if(i.equals($t.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new ia("Encoding "+this.encodingName(t)+" not supported by fallback.")},r.isDecodeFallbackSupported=function(e){return e.equals($t.UTF8)||e.equals($t.ISO8859_1)||e.equals($t.ASCII)},r.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),i=t.split(""),n=[],o=0;o<i.length;o++)n.push(i[o].charCodeAt(0));return new Uint8Array(n)},r}(),Pr=HD;var WD=function(){function r(){}return r.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var i=t?t.getName():this.ISO88591;return Pr.decode(new Uint8Array([e]),i)},r.guessEncoding=function(e,t){if(t!=null&&t.get(st.CHARACTER_SET)!==void 0)return t.get(st.CHARACTER_SET).toString();for(var i=e.length,n=!0,o=!0,a=!0,s=0,l=0,d=0,h=0,p=0,v=0,_=0,E=0,A=0,N=0,F=0,P=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,L=0;L<i&&(n||o||a);L++){var G=e[L]&255;a&&(s>0?G&128?s--:a=!1:G&128&&(G&64?(s++,G&32?(s++,G&16?(s++,G&8?a=!1:h++):d++):l++):a=!1)),n&&(G>127&&G<160?n=!1:G>159&&(G<192||G===215||G===247)&&F++),o&&(p>0?G<64||G===127||G>252?o=!1:p--:G===128||G===160||G>239?o=!1:G>160&&G<224?(v++,E=0,_++,_>A&&(A=_)):G>127?(p++,_=0,E++,E>N&&(N=E)):(_=0,E=0))}return a&&s>0&&(a=!1),o&&p>0&&(o=!1),a&&(P||l+d+h>0)?r.UTF8:o&&(r.ASSUME_SHIFT_JIS||A>=3||N>=3)?r.SHIFT_JIS:n&&o?A===2&&v===2||F*10>=i?r.SHIFT_JIS:r.ISO88591:n?r.ISO88591:o?r.SHIFT_JIS:a?r.UTF8:r.PLATFORM_DEFAULT_ENCODING},r.format=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=-1;function o(s,l,d,h,p,v){if(s==="%%")return"%";if(t[++n]!==void 0){s=h?parseInt(h.substr(1)):void 0;var _=p?parseInt(p.substr(1)):void 0,E;switch(v){case"s":E=t[n];break;case"c":E=t[n][0];break;case"f":E=parseFloat(t[n]).toFixed(s);break;case"p":E=parseFloat(t[n]).toPrecision(s);break;case"e":E=parseFloat(t[n]).toExponential(s);break;case"x":E=parseInt(t[n]).toString(_||16);break;case"d":E=parseFloat(parseInt(t[n],_||10).toPrecision(s)).toFixed(0);break}E=typeof E=="object"?JSON.stringify(E):(+E).toString(_);for(var A=parseInt(d),N=d&&d[0]+""=="0"?"0":" ";E.length<A;)E=l!==void 0?E+N:N+E;return E}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,o)},r.getBytes=function(e,t){return Pr.encode(e,t)},r.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},r.getCharAt=function(e){return String.fromCharCode(e)},r.SHIFT_JIS=$t.SJIS.getName(),r.GB2312="GB2312",r.ISO88591=$t.ISO8859_1.getName(),r.EUC_JP="EUC_JP",r.UTF8=$t.UTF8.getName(),r.PLATFORM_DEFAULT_ENCODING=r.UTF8,r.ASSUME_SHIFT_JIS=!1,r}(),We=WD;var XD=function(){function r(e){e===void 0&&(e=""),this.value=e}return r.prototype.enableDecoding=function(e){return this.encoding=e,this},r.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=We.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},r.prototype.appendChars=function(e,t,i){for(var n=t;t<t+i;n++)this.append(e[n]);return this},r.prototype.length=function(){return this.value.length},r.prototype.charAt=function(e){return this.value.charAt(e)},r.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},r.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},r.prototype.substring=function(e,t){return this.value.substring(e,t)},r.prototype.setLengthToZero=function(){this.value=""},r.prototype.toString=function(){return this.value},r.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},r}(),we=XD;var YD=function(){function r(e,t,i,n){if(this.width=e,this.height=t,this.rowSize=i,this.bits=n,t==null&&(t=e),this.height=t,e<1||t<1)throw new ae("Both dimensions must be greater than 0");i==null&&(i=Math.floor((e+31)/32)),this.rowSize=i,n==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return r.parseFromBooleanArray=function(e){for(var t=e.length,i=e[0].length,n=new r(i,t),o=0;o<t;o++)for(var a=e[o],s=0;s<i;s++)a[s]&&n.set(s,o);return n},r.parseFromString=function(e,t,i){if(e===null)throw new ae("stringRepresentation cannot be null");for(var n=new Array(e.length),o=0,a=0,s=-1,l=0,d=0;d<e.length;)if(e.charAt(d)===`
`||e.charAt(d)==="\r"){if(o>a){if(s===-1)s=o-a;else if(o-a!==s)throw new ae("row lengths do not match");a=o,l++}d++}else if(e.substring(d,d+t.length)===t)d+=t.length,n[o]=!0,o++;else if(e.substring(d,d+i.length)===i)d+=i.length,n[o]=!1,o++;else throw new ae("illegal character encountered: "+e.substring(d));if(o>a){if(s===-1)s=o-a;else if(o-a!==s)throw new ae("row lengths do not match");l++}for(var h=new r(s,l),p=0;p<o;p++)n[p]&&h.set(Math.floor(p%s),Math.floor(p/s));return h},r.prototype.get=function(e,t){var i=t*this.rowSize+Math.floor(e/32);return(this.bits[i]>>>(e&31)&1)!==0},r.prototype.set=function(e,t){var i=t*this.rowSize+Math.floor(e/32);this.bits[i]|=1<<(e&31)&4294967295},r.prototype.unset=function(e,t){var i=t*this.rowSize+Math.floor(e/32);this.bits[i]&=~(1<<(e&31)&4294967295)},r.prototype.flip=function(e,t){var i=t*this.rowSize+Math.floor(e/32);this.bits[i]^=1<<(e&31)&4294967295},r.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new ae("input matrix dimensions do not match");for(var t=new qt(Math.floor(this.width/32)+1),i=this.rowSize,n=this.bits,o=0,a=this.height;o<a;o++)for(var s=o*i,l=e.getRow(o,t).getBitArray(),d=0;d<i;d++)n[s+d]^=l[d]},r.prototype.clear=function(){for(var e=this.bits,t=e.length,i=0;i<t;i++)e[i]=0},r.prototype.setRegion=function(e,t,i,n){if(t<0||e<0)throw new ae("Left and top must be nonnegative");if(n<1||i<1)throw new ae("Height and width must be at least 1");var o=e+i,a=t+n;if(a>this.height||o>this.width)throw new ae("The region must fit inside the matrix");for(var s=this.rowSize,l=this.bits,d=t;d<a;d++)for(var h=d*s,p=e;p<o;p++)l[h+Math.floor(p/32)]|=1<<(p&31)&4294967295},r.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new qt(this.width):t.clear();for(var i=this.rowSize,n=this.bits,o=e*i,a=0;a<i;a++)t.setBulk(a*32,n[o+a]);return t},r.prototype.setRow=function(e,t){tt.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},r.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),i=new qt(e),n=new qt(e),o=0,a=Math.floor((t+1)/2);o<a;o++)i=this.getRow(o,i),n=this.getRow(t-1-o,n),i.reverse(),n.reverse(),this.setRow(o,n),this.setRow(t-1-o,i)},r.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,i=this.rowSize,n=this.bits,o=e,a=t,s=-1,l=-1,d=0;d<t;d++)for(var h=0;h<i;h++){var p=n[d*i+h];if(p!==0){if(d<a&&(a=d),d>l&&(l=d),h*32<o){for(var v=0;!(p<<31-v&4294967295);)v++;h*32+v<o&&(o=h*32+v)}if(h*32+31>s){for(var v=31;!(p>>>v);)v--;h*32+v>s&&(s=h*32+v)}}}return s<o||l<a?null:Int32Array.from([o,a,s-o+1,l-a+1])},r.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,i=0;i<t.length&&t[i]===0;)i++;if(i===t.length)return null;for(var n=i/e,o=i%e*32,a=t[i],s=0;!(a<<31-s&4294967295);)s++;return o+=s,Int32Array.from([o,n])},r.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,i=t.length-1;i>=0&&t[i]===0;)i--;if(i<0)return null;for(var n=Math.floor(i/e),o=Math.floor(i%e)*32,a=t[i],s=31;!(a>>>s);)s--;return o+=s,Int32Array.from([o,n])},r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.getRowSize=function(){return this.rowSize},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Ct.equals(this.bits,t.bits)},r.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Ct.hashCode(this.bits),e},r.prototype.toString=function(e,t,i){return e===void 0&&(e="X "),t===void 0&&(t="  "),i===void 0&&(i=`
`),this.buildToString(e,t,i)},r.prototype.buildToString=function(e,t,i){for(var n=new we,o=0,a=this.height;o<a;o++){for(var s=0,l=this.width;s<l;s++)n.append(this.get(s,o)?e:t);n.append(i)}return n.toString()},r.prototype.clone=function(){return new r(this.width,this.height,this.rowSize,this.bits.slice())},r}(),Zt=YD;var qD=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),$D=function(r){qD(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Vt),U=$D;var ZD=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),KD=function(r){ZD(e,r);function e(t){var i=r.call(this,t)||this;return i.luminances=e.EMPTY,i.buckets=new Int32Array(e.LUMINANCE_BUCKETS),i}return e.prototype.getBlackRow=function(t,i){var n=this.getLuminanceSource(),o=n.getWidth();i==null||i.getSize()<o?i=new qt(o):i.clear(),this.initArrays(o);for(var a=n.getRow(t,this.luminances),s=this.buckets,l=0;l<o;l++)s[(a[l]&255)>>e.LUMINANCE_SHIFT]++;var d=e.estimateBlackPoint(s);if(o<3)for(var l=0;l<o;l++)(a[l]&255)<d&&i.set(l);else for(var h=a[0]&255,p=a[1]&255,l=1;l<o-1;l++){var v=a[l+1]&255;(p*4-h-v)/2<d&&i.set(l),h=p,p=v}return i},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),i=t.getWidth(),n=t.getHeight(),o=new Zt(i,n);this.initArrays(i);for(var a=this.buckets,s=1;s<5;s++)for(var l=Math.floor(n*s/5),d=t.getRow(l,this.luminances),h=Math.floor(i*4/5),p=Math.floor(i/5);p<h;p++){var v=d[p]&255;a[v>>e.LUMINANCE_SHIFT]++}for(var _=e.estimateBlackPoint(a),E=t.getMatrix(),s=0;s<n;s++)for(var A=s*i,p=0;p<i;p++){var v=E[A+p]&255;v<_&&o.set(p,s)}return o},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var i=this.buckets,n=0;n<e.LUMINANCE_BUCKETS;n++)i[n]=0},e.estimateBlackPoint=function(t){for(var i=t.length,n=0,o=0,a=0,s=0;s<i;s++)t[s]>a&&(o=s,a=t[s]),t[s]>n&&(n=t[s]);for(var l=0,d=0,s=0;s<i;s++){var h=s-o,p=t[s]*h*h;p>d&&(l=s,d=p)}if(o>l){var v=o;o=l,l=v}if(l-o<=i/16)throw new U;for(var _=l-1,E=-1,s=l-1;s>o;s--){var A=s-o,p=A*A*(l-s)*(n-t[s]);p>E&&(_=s,E=p)}return _<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(km),Bm=KD;var QD=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),JD=function(r){QD(e,r);function e(t){var i=r.call(this,t)||this;return i.matrix=null,i}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),i=t.getWidth(),n=t.getHeight();if(i>=e.MINIMUM_DIMENSION&&n>=e.MINIMUM_DIMENSION){var o=t.getMatrix(),a=i>>e.BLOCK_SIZE_POWER;i&e.BLOCK_SIZE_MASK&&a++;var s=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&s++;var l=e.calculateBlackPoints(o,a,s,i,n),d=new Zt(i,n);e.calculateThresholdForBlock(o,a,s,i,n,l,d),this.matrix=d}else this.matrix=r.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,i,n,o,a,s,l){for(var d=a-e.BLOCK_SIZE,h=o-e.BLOCK_SIZE,p=0;p<n;p++){var v=p<<e.BLOCK_SIZE_POWER;v>d&&(v=d);for(var _=e.cap(p,2,n-3),E=0;E<i;E++){var A=E<<e.BLOCK_SIZE_POWER;A>h&&(A=h);for(var N=e.cap(E,2,i-3),F=0,P=-2;P<=2;P++){var L=s[_+P];F+=L[N-2]+L[N-1]+L[N]+L[N+1]+L[N+2]}var G=F/25;e.thresholdBlock(t,A,v,G,o,l)}}},e.cap=function(t,i,n){return t<i?i:t>n?n:t},e.thresholdBlock=function(t,i,n,o,a,s){for(var l=0,d=n*a+i;l<e.BLOCK_SIZE;l++,d+=a)for(var h=0;h<e.BLOCK_SIZE;h++)(t[d+h]&255)<=o&&s.set(i+h,n+l)},e.calculateBlackPoints=function(t,i,n,o,a){for(var s=a-e.BLOCK_SIZE,l=o-e.BLOCK_SIZE,d=new Array(n),h=0;h<n;h++){d[h]=new Int32Array(i);var p=h<<e.BLOCK_SIZE_POWER;p>s&&(p=s);for(var v=0;v<i;v++){var _=v<<e.BLOCK_SIZE_POWER;_>l&&(_=l);for(var E=0,A=255,N=0,F=0,P=p*o+_;F<e.BLOCK_SIZE;F++,P+=o){for(var L=0;L<e.BLOCK_SIZE;L++){var G=t[P+L]&255;E+=G,G<A&&(A=G),G>N&&(N=G)}if(N-A>e.MIN_DYNAMIC_RANGE)for(F++,P+=o;F<e.BLOCK_SIZE;F++,P+=o)for(var L=0;L<e.BLOCK_SIZE;L++)E+=t[P+L]&255}var Y=E>>e.BLOCK_SIZE_POWER*2;if(N-A<=e.MIN_DYNAMIC_RANGE&&(Y=A/2,h>0&&v>0)){var Q=(d[h-1][v]+2*d[h][v-1]+d[h-1][v-1])/4;A<Q&&(Y=Q)}d[h][v]=Y}}return d},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(Bm),Vm=JD;var eO=function(){function r(e,t){this.width=e,this.height=t}return r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.isCropSupported=function(){return!1},r.prototype.crop=function(e,t,i,n){throw new ia("This luminance source does not support cropping.")},r.prototype.isRotateSupported=function(){return!1},r.prototype.rotateCounterClockwise=function(){throw new ia("This luminance source does not support rotation by 90 degrees.")},r.prototype.rotateCounterClockwise45=function(){throw new ia("This luminance source does not support rotation by 45 degrees.")},r.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new we,i=0;i<this.height;i++){for(var n=this.getRow(i,e),o=0;o<this.width;o++){var a=n[o]&255,s=void 0;a<64?s="#":a<128?s="+":a<192?s=".":s=" ",t.append(s)}t.append(`
`)}return t.toString()},r}(),Pn=eO;var tO=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),rO=function(r){tO(e,r);function e(t){var i=r.call(this,t.getWidth(),t.getHeight())||this;return i.delegate=t,i}return e.prototype.getRow=function(t,i){for(var n=this.delegate.getRow(t,i),o=this.getWidth(),a=0;a<o;a++)n[a]=255-(n[a]&255);return n},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(i),o=0;o<i;o++)n[o]=255-(t[o]&255);return n},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,i,n,o){return new e(this.delegate.crop(t,i,n,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(Pn),na=rO;var iO=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),fb=function(r){iO(e,r);function e(t,i){i===void 0&&(i=!1);var n=r.call(this,t.width,t.height)||this;return n.canvas=t,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(t,i),n}return e.makeBufferFromCanvasImageData=function(t,i){i===void 0&&(i=!1);var n=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(n.data,t.width,t.height,i)},e.toGrayscaleBuffer=function(t,i,n,o){o===void 0&&(o=!1);var a=new Uint8ClampedArray(i*n);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!o)for(var s=0,l=0,d=t.length;s<d;s+=4,l++){var h=void 0,p=t[s+3];if(p===0)h=255;else{var v=t[s],_=t[s+1],E=t[s+2];h=306*v+601*_+117*E+512>>10}a[l]=h}else for(var s=0,l=0,A=t.length;s<A;s+=4,l++){var h=void 0,p=t[s+3];if(p===0)h=255;else{var v=t[s],_=t[s+1],E=t[s+2];h=306*v+601*_+117*E+512>>10}a[l]=255-h}return a},e.prototype.getRow=function(t,i){if(t<0||t>=this.getHeight())throw new ae("Requested row is outside the image: "+t);var n=this.getWidth(),o=t*n;return i===null?i=this.buffer.slice(o,o+n):(i.length<n&&(i=new Uint8ClampedArray(n)),i.set(this.buffer.slice(o,o+n))),i},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,i,n,o){return r.prototype.crop.call(this,t,i,n,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var i=this.getTempCanvasElement(),n=i.getContext("2d"),o=t*e.DEGREE_TO_RADIANS,a=this.canvas.width,s=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(o))*a+Math.abs(Math.sin(o))*s),d=Math.ceil(Math.abs(Math.sin(o))*a+Math.abs(Math.cos(o))*s);return i.width=l,i.height=d,n.translate(l/2,d/2),n.rotate(o),n.drawImage(this.canvas,a/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(i),this},e.prototype.invert=function(){return new na(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(Pn);var hb=function(){function r(e,t,i){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=i||void 0}return r.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},r}();var si=function(r,e,t,i){function n(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(h){try{d(i.next(h))}catch(p){a(p)}}function l(h){try{d(i.throw(h))}catch(p){a(p)}}function d(h){h.done?o(h.value):n(h.value).then(s,l)}d((i=i.apply(r,e||[])).next())})},li=function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,n,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(d){return function(h){return l([d,h])}}function l(d){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(o=d[0]&2?n.return:d[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,d[1])).done)return o;switch(n=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,n=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){t.label=d[1];break}if(d[0]===6&&t.label<o[1]){t.label=o[1],o=d;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(d);break}o[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(r,t)}catch(h){d=[6,h],n=0}finally{i=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},nO=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bi=function(){function r(e,t,i){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=i,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(r.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),r.prototype.listVideoInputDevices=function(){return si(this,void 0,void 0,function(){var e,t,i,n,o,a,s,l,d,h,p,v;return li(this,function(_){switch(_.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=_.sent(),t=[];try{for(i=nO(e),n=i.next();!n.done;n=i.next())o=n.value,a=o.kind==="video"?"videoinput":o.kind,a==="videoinput"&&(s=o.deviceId||o.id,l=o.label||"Video device "+(t.length+1),d=o.groupId,h={deviceId:s,label:l,kind:a,groupId:d},t.push(h))}catch(E){p={error:E}}finally{try{n&&!n.done&&(v=i.return)&&v.call(i)}finally{if(p)throw p.error}}return[2,t]}})})},r.prototype.getVideoInputDevices=function(){return si(this,void 0,void 0,function(){var e;return li(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(i){return new hb(i.deviceId,i.label)})]}})})},r.prototype.findDeviceById=function(e){return si(this,void 0,void 0,function(){var t;return li(this,function(i){switch(i.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=i.sent(),t?[2,t.find(function(n){return n.deviceId===e})]:[2,null]}})})},r.prototype.decodeFromInputVideoDevice=function(e,t){return si(this,void 0,void 0,function(){return li(this,function(i){switch(i.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,i.sent()]}})})},r.prototype.decodeOnceFromVideoDevice=function(e,t){return si(this,void 0,void 0,function(){var i,n;return li(this,function(o){switch(o.label){case 0:return this.reset(),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},n={video:i},[4,this.decodeOnceFromConstraints(n,t)];case 1:return[2,o.sent()]}})})},r.prototype.decodeOnceFromConstraints=function(e,t){return si(this,void 0,void 0,function(){var i;return li(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=n.sent(),[4,this.decodeOnceFromStream(i,t)];case 2:return[2,n.sent()]}})})},r.prototype.decodeOnceFromStream=function(e,t){return si(this,void 0,void 0,function(){var i,n;return li(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=o.sent(),[4,this.decodeOnce(i)];case 2:return n=o.sent(),[2,n]}})})},r.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,i){return si(this,void 0,void 0,function(){return li(this,function(n){switch(n.label){case 0:return[4,this.decodeFromVideoDevice(e,t,i)];case 1:return[2,n.sent()]}})})},r.prototype.decodeFromVideoDevice=function(e,t,i){return si(this,void 0,void 0,function(){var n,o;return li(this,function(a){switch(a.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},o={video:n},[4,this.decodeFromConstraints(o,t,i)];case 1:return[2,a.sent()]}})})},r.prototype.decodeFromConstraints=function(e,t,i){return si(this,void 0,void 0,function(){var n;return li(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=o.sent(),[4,this.decodeFromStream(n,t,i)];case 2:return[2,o.sent()]}})})},r.prototype.decodeFromStream=function(e,t,i){return si(this,void 0,void 0,function(){var n;return li(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return n=o.sent(),[4,this.decodeContinuously(n,i)];case 2:return[2,o.sent()]}})})},r.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},r.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},r.prototype.attachStreamToVideo=function(e,t){return si(this,void 0,void 0,function(){var i;return li(this,function(n){switch(n.label){case 0:return i=this.prepareVideoElement(t),this.addVideoSource(i,e),this.videoElement=i,this.stream=e,[4,this.playVideoOnLoadAsync(i)];case 1:return n.sent(),[2,i]}})})},r.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(i,n){return t.playVideoOnLoad(e,function(){return i()})})},r.prototype.playVideoOnLoad=function(e,t){var i=this;this.videoEndedListener=function(){return i.stopStreams()},this.videoCanPlayListener=function(){return i.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},r.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},r.prototype.tryPlayVideo=function(e){return si(this,void 0,void 0,function(){var t;return li(this,function(i){switch(i.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.play()];case 2:return i.sent(),[3,4];case 3:return t=i.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},r.prototype.getMediaElement=function(e,t){var i=document.getElementById(e);if(!i)throw new vi("element with id '"+e+"' not found");if(i.nodeName.toLowerCase()!==t.toLowerCase())throw new vi("element with id '"+e+"' must be an "+t+" element");return i},r.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new vi("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},r.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new vi("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},r.prototype.decodeFromVideoContinuously=function(e,t,i){if(e===void 0&&t===void 0)throw new vi("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,i):this.decodeFromVideoElementContinuously(e,i)},r.prototype.decodeFromImageElement=function(e){if(!e)throw new vi("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var i;return this.isImageLoaded(t)?i=this.decodeOnce(t,!1,!0):i=this._decodeOnLoadImage(t),i},r.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},r.prototype.decodeFromVideoElementContinuously=function(e,t){var i=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(i,t)},r.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new vi("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},r.prototype.decodeFromImageUrl=function(e){if(!e)throw new vi("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var i=this._decodeOnLoadImage(t);return t.src=e,i},r.prototype.decodeFromVideoUrl=function(e){if(!e)throw new vi("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),i=this.decodeFromVideoElement(t);return t.src=e,i},r.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new vi("An URL must be provided.");this.reset();var i=this.prepareVideoElement(),n=this.decodeFromVideoElementContinuously(i,t);return i.src=e,n},r.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(i,n){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(i,n)},e.addEventListener("load",t.imageLoadedListener)})},r.prototype._decodeOnLoadVideo=function(e){return si(this,void 0,void 0,function(){return li(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},r.prototype._decodeOnLoadVideoContinuously=function(e,t){return si(this,void 0,void 0,function(){return li(this,function(i){switch(i.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return i.sent(),this.decodeContinuously(e,t),[2]}})})},r.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},r.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},r.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},r.prototype.decodeOnce=function(e,t,i){var n=this;t===void 0&&(t=!0),i===void 0&&(i=!0),this._stopAsyncDecode=!1;var o=function(a,s){if(n._stopAsyncDecode){s(new U("Video stream has ended before any code could be detected.")),n._stopAsyncDecode=void 0;return}try{var l=n.decode(e);a(l)}catch(v){var d=t&&v instanceof U,h=v instanceof Ut||v instanceof J,p=h&&i;if(d||p)return setTimeout(o,n._timeBetweenDecodingAttempts,a,s);s(v)}};return new Promise(function(a,s){return o(a,s)})},r.prototype.decodeContinuously=function(e,t){var i=this;this._stopContinuousDecode=!1;var n=function(){if(i._stopContinuousDecode){i._stopContinuousDecode=void 0;return}try{var o=i.decode(e);t(o,null),setTimeout(n,i.timeBetweenScansMillis)}catch(l){t(null,l);var a=l instanceof Ut||l instanceof J,s=l instanceof U;(a||s)&&setTimeout(n,i._timeBetweenDecodingAttempts)}};n()},r.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},r.prototype.createBinaryBitmap=function(e){var t=this.getCaptureCanvasContext(e),i=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),i=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),o=new fb(n,i),a=new Vm(o);return new Fm(a)},r.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),i=void 0;try{i=t.getContext("2d",{willReadFrequently:!0})}catch{i=t.getContext("2d")}this.captureCanvasContext=i}return this.captureCanvasContext},r.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},r.prototype.drawFrameOnCanvas=function(e,t,i){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),i===void 0&&(i=this.captureCanvasContext),i.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.drawImageOnCanvas=function(e,t,i){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),i===void 0&&(i=this.captureCanvasContext),i.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},r.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),i,n;return typeof e<"u"&&(e instanceof HTMLVideoElement?(i=e.videoWidth,n=e.videoHeight):e instanceof HTMLImageElement&&(i=e.naturalWidth||e.width,n=e.naturalHeight||e.height)),t.style.width=i+"px",t.style.height=n+"px",t.width=i,t.height=n,t},r.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},r.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},r.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},r.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},r.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},r.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},r.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},r}();var oO=function(){function r(e,t,i,n,o,a){i===void 0&&(i=t==null?0:8*t.length),a===void 0&&(a=tt.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=i,this.resultPoints=n,this.format=o,this.timestamp=a,this.text=e,this.rawBytes=t,i==null?this.numBits=t==null?0:8*t.length:this.numBits=i,this.resultPoints=n,this.format=o,this.resultMetadata=null,a==null?this.timestamp=tt.currentTimeMillis():this.timestamp=a}return r.prototype.getText=function(){return this.text},r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.getBarcodeFormat=function(){return this.format},r.prototype.getResultMetadata=function(){return this.resultMetadata},r.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},r.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},r.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var i=new Array(t.length+e.length);tt.arraycopy(t,0,i,0,t.length),tt.arraycopy(e,0,i,t.length,e.length),this.resultPoints=i}},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.toString=function(){return this.text},r}(),Et=oO;var pb=function(r){return r[r.AZTEC=0]="AZTEC",r[r.CODABAR=1]="CODABAR",r[r.CODE_39=2]="CODE_39",r[r.CODE_93=3]="CODE_93",r[r.CODE_128=4]="CODE_128",r[r.DATA_MATRIX=5]="DATA_MATRIX",r[r.EAN_8=6]="EAN_8",r[r.EAN_13=7]="EAN_13",r[r.ITF=8]="ITF",r[r.MAXICODE=9]="MAXICODE",r[r.PDF_417=10]="PDF_417",r[r.QR_CODE=11]="QR_CODE",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",r}(pb||{}),le=pb;var mb=function(r){return r[r.OTHER=0]="OTHER",r[r.ORIENTATION=1]="ORIENTATION",r[r.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",r[r.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",r[r.ISSUE_NUMBER=4]="ISSUE_NUMBER",r[r.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",r[r.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",r[r.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",r[r.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",r[r.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",r[r.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",r}(mb||{}),Jt=mb;var aO=function(){function r(e,t,i,n,o,a){o===void 0&&(o=-1),a===void 0&&(a=-1),this.rawBytes=e,this.text=t,this.byteSegments=i,this.ecLevel=n,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=a,this.numBits=e==null?0:8*e.length}return r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.setNumBits=function(e){this.numBits=e},r.prototype.getText=function(){return this.text},r.prototype.getByteSegments=function(){return this.byteSegments},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getErrorsCorrected=function(){return this.errorsCorrected},r.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},r.prototype.getErasures=function(){return this.erasures},r.prototype.setErasures=function(e){this.erasures=e},r.prototype.getOther=function(){return this.other},r.prototype.setOther=function(e){this.other=e},r.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},r.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},r.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},r}(),Nn=aO;var sO=function(){function r(){}return r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new ae;return this.logTable[e]},r.addOrSubtract=function(e,t){return e^t},r}(),oa=sO;var lO=function(){function r(e,t){if(t.length===0)throw new ae;this.field=e;var i=t.length;if(i>1&&t[0]===0){for(var n=1;n<i&&t[n]===0;)n++;n===i?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(i-n),tt.arraycopy(t,n,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,i;if(e===1){i=0;for(var n=0,o=t.length;n!==o;n++){var a=t[n];i=oa.addOrSubtract(i,a)}return i}i=t[0];for(var s=t.length,l=this.field,n=1;n<s;n++)i=oa.addOrSubtract(l.multiply(e,i),t[n]);return i},r.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new ae("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,i=e.coefficients;if(t.length>i.length){var n=t;t=i,i=n}var o=new Int32Array(i.length),a=i.length-t.length;tt.arraycopy(i,0,o,0,a);for(var s=a;s<i.length;s++)o[s]=oa.addOrSubtract(t[s-a],i[s]);return new r(this.field,o)},r.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new ae("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,i=t.length,n=e.coefficients,o=n.length,a=new Int32Array(i+o-1),s=this.field,l=0;l<i;l++)for(var d=t[l],h=0;h<o;h++)a[l+h]=oa.addOrSubtract(a[l+h],s.multiply(d,n[h]));return new r(s,a)},r.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,i=this.field,n=new Int32Array(t),o=this.coefficients,a=0;a<t;a++)n[a]=i.multiply(o[a],e);return new r(i,n)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new ae;if(t===0)return this.field.getZero();for(var i=this.coefficients,n=i.length,o=new Int32Array(n+e),a=this.field,s=0;s<n;s++)o[s]=a.multiply(i[s],t);return new r(a,o)},r.prototype.divide=function(e){if(!this.field.equals(e.field))throw new ae("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new ae("Divide by 0");for(var t=this.field,i=t.getZero(),n=this,o=e.getCoefficient(e.getDegree()),a=t.inverse(o);n.getDegree()>=e.getDegree()&&!n.isZero();){var s=n.getDegree()-e.getDegree(),l=t.multiply(n.getCoefficient(n.getDegree()),a),d=e.multiplyByMonomial(s,l),h=t.buildMonomial(s,l);i=i.addOrSubtract(h),n=n.addOrSubtract(d)}return[i,n]},r.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var i=this.getCoefficient(t);if(i!==0){if(i<0?(e+=" - ",i=-i):e.length>0&&(e+=" + "),t===0||i!==1){var n=this.field.log(i);n===0?e+="1":n===1?e+="a":(e+="a^",e+=n)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},r}(),Vi=lO;var cO=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),uO=function(r){cO(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Vt),Zl=uO;var dO=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),fO=function(r){dO(e,r);function e(t,i,n){var o=r.call(this)||this;o.primitive=t,o.size=i,o.generatorBase=n;for(var a=new Int32Array(i),s=1,l=0;l<i;l++)a[l]=s,s*=2,s>=i&&(s^=t,s&=i-1);o.expTable=a;for(var d=new Int32Array(i),l=0;l<i-1;l++)d[a[l]]=l;return o.logTable=d,o.zero=new Vi(o,Int32Array.from([0])),o.one=new Vi(o,Int32Array.from([1])),o}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,i){if(t<0)throw new ae;if(i===0)return this.zero;var n=new Int32Array(t+1);return n[0]=i,new Vi(this,n)},e.prototype.inverse=function(t){if(t===0)throw new Zl;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,i){return t===0||i===0?0:this.expTable[(this.logTable[t]+this.logTable[i])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Pe.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(oa),_r=fO;var hO=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),pO=function(r){hO(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Vt),ps=pO;var mO=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),gO=function(r){mO(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Vt),Wr=gO;var vO=function(){function r(e){this.field=e}return r.prototype.decode=function(e,t){for(var i=this.field,n=new Vi(i,e),o=new Int32Array(t),a=!0,s=0;s<t;s++){var l=n.evaluateAt(i.exp(s+i.getGeneratorBase()));o[o.length-1-s]=l,l!==0&&(a=!1)}if(!a)for(var d=new Vi(i,o),h=this.runEuclideanAlgorithm(i.buildMonomial(t,1),d,t),p=h[0],v=h[1],_=this.findErrorLocations(p),E=this.findErrorMagnitudes(v,_),s=0;s<_.length;s++){var A=e.length-1-i.log(_[s]);if(A<0)throw new ps("Bad error location");e[A]=_r.addOrSubtract(e[A],E[s])}},r.prototype.runEuclideanAlgorithm=function(e,t,i){if(e.getDegree()<t.getDegree()){var n=e;e=t,t=n}for(var o=this.field,a=e,s=t,l=o.getZero(),d=o.getOne();s.getDegree()>=(i/2|0);){var h=a,p=l;if(a=s,l=d,a.isZero())throw new ps("r_{i-1} was zero");s=h;for(var v=o.getZero(),_=a.getCoefficient(a.getDegree()),E=o.inverse(_);s.getDegree()>=a.getDegree()&&!s.isZero();){var A=s.getDegree()-a.getDegree(),N=o.multiply(s.getCoefficient(s.getDegree()),E);v=v.addOrSubtract(o.buildMonomial(A,N)),s=s.addOrSubtract(a.multiplyByMonomial(A,N))}if(d=v.multiply(l).addOrSubtract(p),s.getDegree()>=a.getDegree())throw new Wr("Division algorithm failed to reduce polynomial?")}var F=d.getCoefficient(0);if(F===0)throw new ps("sigmaTilde(0) was zero");var P=o.inverse(F),L=d.multiplyScalar(P),G=s.multiplyScalar(P);return[L,G]},r.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var i=new Int32Array(t),n=0,o=this.field,a=1;a<o.getSize()&&n<t;a++)e.evaluateAt(a)===0&&(i[n]=o.inverse(a),n++);if(n!==t)throw new ps("Error locator degree does not match number of roots");return i},r.prototype.findErrorMagnitudes=function(e,t){for(var i=t.length,n=new Int32Array(i),o=this.field,a=0;a<i;a++){for(var s=o.inverse(t[a]),l=1,d=0;d<i;d++)if(a!==d){var h=o.multiply(t[d],s),p=h&1?h&-2:h|1;l=o.multiply(l,p)}n[a]=o.multiply(e.evaluateAt(s),o.inverse(l)),o.getGeneratorBase()!==0&&(n[a]=o.multiply(n[a],s))}return n},r}(),Fn=vO;var Qr=function(r){return r[r.UPPER=0]="UPPER",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.DIGIT=3]="DIGIT",r[r.PUNCT=4]="PUNCT",r[r.BINARY=5]="BINARY",r}(Qr||{}),_O=function(){function r(){}return r.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),i=this.extractBits(t),n=this.correctBits(i),o=r.convertBoolArrayToByteArray(n),a=r.getEncodedData(n),s=new Nn(o,a,null,null);return s.setNumBits(n.length),s},r.highLevelDecode=function(e){return this.getEncodedData(e)},r.getEncodedData=function(e){for(var t=e.length,i=Qr.UPPER,n=Qr.UPPER,o="",a=0;a<t;)if(n===Qr.BINARY){if(t-a<5)break;var s=r.readCode(e,a,5);if(a+=5,s===0){if(t-a<11)break;s=r.readCode(e,a,11)+31,a+=11}for(var l=0;l<s;l++){if(t-a<8){a=t;break}var d=r.readCode(e,a,8);o+=We.castAsNonUtf8Char(d),a+=8}n=i}else{var h=n===Qr.DIGIT?4:5;if(t-a<h)break;var d=r.readCode(e,a,h);a+=h;var p=r.getCharacter(n,d);p.startsWith("CTRL_")?(i=n,n=r.getTable(p.charAt(5)),p.charAt(6)==="L"&&(i=n)):(o+=p,n=i)}return o},r.getTable=function(e){switch(e){case"L":return Qr.LOWER;case"P":return Qr.PUNCT;case"M":return Qr.MIXED;case"D":return Qr.DIGIT;case"B":return Qr.BINARY;case"U":default:return Qr.UPPER}},r.getCharacter=function(e,t){switch(e){case Qr.UPPER:return r.UPPER_TABLE[t];case Qr.LOWER:return r.LOWER_TABLE[t];case Qr.MIXED:return r.MIXED_TABLE[t];case Qr.PUNCT:return r.PUNCT_TABLE[t];case Qr.DIGIT:return r.DIGIT_TABLE[t];default:throw new Wr("Bad table")}},r.prototype.correctBits=function(e){var t,i;this.ddata.getNbLayers()<=2?(i=6,t=_r.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(i=8,t=_r.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(i=10,t=_r.AZTEC_DATA_10):(i=12,t=_r.AZTEC_DATA_12);var n=this.ddata.getNbDatablocks(),o=e.length/i;if(o<n)throw new J;for(var a=e.length%i,s=new Int32Array(o),l=0;l<o;l++,a+=i)s[l]=r.readCode(e,a,i);try{var d=new Fn(t);d.decode(s,o-n)}catch(N){throw new J(N)}for(var h=(1<<i)-1,p=0,l=0;l<n;l++){var v=s[l];if(v===0||v===h)throw new J;(v===1||v===h-1)&&p++}for(var _=new Array(n*i-p),E=0,l=0;l<n;l++){var v=s[l];if(v===1||v===h-1)_.fill(v>1,E,E+i-1),E+=i-1;else for(var A=i-1;A>=0;--A)_[E++]=(v&1<<A)!==0}return _},r.prototype.extractBits=function(e){var t=this.ddata.isCompact(),i=this.ddata.getNbLayers(),n=(t?11:14)+i*4,o=new Int32Array(n),a=new Array(this.totalBitsInLayer(i,t));if(t)for(var s=0;s<o.length;s++)o[s]=s;else for(var l=n+1+2*Pe.truncDivision(Pe.truncDivision(n,2)-1,15),d=n/2,h=Pe.truncDivision(l,2),s=0;s<d;s++){var p=s+Pe.truncDivision(s,15);o[d-s-1]=h-p-1,o[d+s]=h+p+1}for(var s=0,v=0;s<i;s++){for(var _=(i-s)*4+(t?9:12),E=s*2,A=n-1-E,N=0;N<_;N++)for(var F=N*2,P=0;P<2;P++)a[v+F+P]=e.get(o[E+P],o[E+N]),a[v+2*_+F+P]=e.get(o[E+N],o[A-P]),a[v+4*_+F+P]=e.get(o[A-P],o[A-N]),a[v+6*_+F+P]=e.get(o[A-N],o[E+P]);v+=_*8}return a},r.readCode=function(e,t,i){for(var n=0,o=t;o<t+i;o++)n<<=1,e[o]&&(n|=1);return n},r.readByte=function(e,t){var i=e.length-t;return i>=8?r.readCode(e,t,8):r.readCode(e,t,i)<<8-i},r.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),i=0;i<t.length;i++)t[i]=r.readByte(e,8*i);return t},r.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],r.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],r.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],r.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],r.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],r}(),_d=_O;var yO=function(){function r(){}return r.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},r.distance=function(e,t,i,n){var o=e-i,a=t-n;return Math.sqrt(o*o+a*a)},r.sum=function(e){for(var t=0,i=0,n=e.length;i!==n;i++){var o=e[i];t+=o}return t},r}(),rt=yO;var bO=function(){function r(){}return r.floatToIntBits=function(e){return e},r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r}(),Kl=bO;var xO=function(){function r(e,t){this.x=e,this.y=t}return r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.equals=function(e){if(e instanceof r){var t=e;return this.x===t.x&&this.y===t.y}return!1},r.prototype.hashCode=function(){return 31*Kl.floatToIntBits(this.x)+Kl.floatToIntBits(this.y)},r.prototype.toString=function(){return"("+this.x+","+this.y+")"},r.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),i=this.distance(e[1],e[2]),n=this.distance(e[0],e[2]),o,a,s;if(i>=t&&i>=n?(a=e[0],o=e[1],s=e[2]):n>=i&&n>=t?(a=e[1],o=e[0],s=e[2]):(a=e[2],o=e[0],s=e[1]),this.crossProductZ(o,a,s)<0){var l=o;o=s,s=l}e[0]=o,e[1]=a,e[2]=s},r.distance=function(e,t){return rt.distance(e.x,e.y,t.x,t.y)},r.crossProductZ=function(e,t,i){var n=t.x,o=t.y;return(i.x-n)*(e.y-o)-(i.y-o)*(e.x-n)},r}(),ue=xO;var EO=function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r}(),aa=EO;var wO=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),IO=function(r){wO(e,r);function e(t,i,n,o,a){var s=r.call(this,t,i)||this;return s.compact=n,s.nbDatablocks=o,s.nbLayers=a,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(aa),Um=IO;var CO=function(){function r(e,t,i,n){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=r.INIT_SIZE),i==null&&(i=e.getWidth()/2|0),n==null&&(n=e.getHeight()/2|0);var o=t/2|0;if(this.leftInit=i-o,this.rightInit=i+o,this.upInit=n-o,this.downInit=n+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new U}return r.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,i=this.upInit,n=this.downInit,o=!1,a=!0,s=!1,l=!1,d=!1,h=!1,p=!1,v=this.width,_=this.height;a;){a=!1;for(var E=!0;(E||!l)&&t<v;)E=this.containsBlackPoint(i,n,t,!1),E?(t++,a=!0,l=!0):l||t++;if(t>=v){o=!0;break}for(var A=!0;(A||!d)&&n<_;)A=this.containsBlackPoint(e,t,n,!0),A?(n++,a=!0,d=!0):d||n++;if(n>=_){o=!0;break}for(var N=!0;(N||!h)&&e>=0;)N=this.containsBlackPoint(i,n,e,!1),N?(e--,a=!0,h=!0):h||e--;if(e<0){o=!0;break}for(var F=!0;(F||!p)&&i>=0;)F=this.containsBlackPoint(e,t,i,!0),F?(i--,a=!0,p=!0):p||i--;if(i<0){o=!0;break}a&&(s=!0)}if(!o&&s){for(var P=t-e,L=null,G=1;L===null&&G<P;G++)L=this.getBlackPointOnSegment(e,n-G,e+G,n);if(L==null)throw new U;for(var Y=null,G=1;Y===null&&G<P;G++)Y=this.getBlackPointOnSegment(e,i+G,e+G,i);if(Y==null)throw new U;for(var Q=null,G=1;Q===null&&G<P;G++)Q=this.getBlackPointOnSegment(t,i+G,t-G,i);if(Q==null)throw new U;for(var ie=null,G=1;ie===null&&G<P;G++)ie=this.getBlackPointOnSegment(t,n-G,t-G,n);if(ie==null)throw new U;return this.centerEdges(ie,L,Q,Y)}else throw new U},r.prototype.getBlackPointOnSegment=function(e,t,i,n){for(var o=rt.round(rt.distance(e,t,i,n)),a=(i-e)/o,s=(n-t)/o,l=this.image,d=0;d<o;d++){var h=rt.round(e+d*a),p=rt.round(t+d*s);if(l.get(h,p))return new ue(h,p)}return null},r.prototype.centerEdges=function(e,t,i,n){var o=e.getX(),a=e.getY(),s=t.getX(),l=t.getY(),d=i.getX(),h=i.getY(),p=n.getX(),v=n.getY(),_=r.CORR;return o<this.width/2?[new ue(p-_,v+_),new ue(s+_,l+_),new ue(d-_,h-_),new ue(o+_,a-_)]:[new ue(p+_,v+_),new ue(s+_,l-_),new ue(d-_,h+_),new ue(o-_,a-_)]},r.prototype.containsBlackPoint=function(e,t,i,n){var o=this.image;if(n){for(var a=e;a<=t;a++)if(o.get(a,i))return!0}else for(var s=e;s<=t;s++)if(o.get(i,s))return!0;return!1},r.INIT_SIZE=10,r.CORR=1,r}(),ms=CO;var AO=function(){function r(){}return r.checkAndNudgePoints=function(e,t){for(var i=e.getWidth(),n=e.getHeight(),o=!0,a=0;a<t.length&&o;a+=2){var s=Math.floor(t[a]),l=Math.floor(t[a+1]);if(s<-1||s>i||l<-1||l>n)throw new U;o=!1,s===-1?(t[a]=0,o=!0):s===i&&(t[a]=i-1,o=!0),l===-1?(t[a+1]=0,o=!0):l===n&&(t[a+1]=n-1,o=!0)}o=!0;for(var a=t.length-2;a>=0&&o;a-=2){var s=Math.floor(t[a]),l=Math.floor(t[a+1]);if(s<-1||s>i||l<-1||l>n)throw new U;o=!1,s===-1?(t[a]=0,o=!0):s===i&&(t[a]=i-1,o=!0),l===-1?(t[a+1]=0,o=!0):l===n&&(t[a+1]=n-1,o=!0)}},r}(),yd=AO;var SO=function(){function r(e,t,i,n,o,a,s,l,d){this.a11=e,this.a21=t,this.a31=i,this.a12=n,this.a22=o,this.a32=a,this.a13=s,this.a23=l,this.a33=d}return r.quadrilateralToQuadrilateral=function(e,t,i,n,o,a,s,l,d,h,p,v,_,E,A,N){var F=r.quadrilateralToSquare(e,t,i,n,o,a,s,l),P=r.squareToQuadrilateral(d,h,p,v,_,E,A,N);return P.times(F)},r.prototype.transformPoints=function(e){for(var t=e.length,i=this.a11,n=this.a12,o=this.a13,a=this.a21,s=this.a22,l=this.a23,d=this.a31,h=this.a32,p=this.a33,v=0;v<t;v+=2){var _=e[v],E=e[v+1],A=o*_+l*E+p;e[v]=(i*_+a*E+d)/A,e[v+1]=(n*_+s*E+h)/A}},r.prototype.transformPointsWithValues=function(e,t){for(var i=this.a11,n=this.a12,o=this.a13,a=this.a21,s=this.a22,l=this.a23,d=this.a31,h=this.a32,p=this.a33,v=e.length,_=0;_<v;_++){var E=e[_],A=t[_],N=o*E+l*A+p;e[_]=(i*E+a*A+d)/N,t[_]=(n*E+s*A+h)/N}},r.squareToQuadrilateral=function(e,t,i,n,o,a,s,l){var d=e-i+o-s,h=t-n+a-l;if(d===0&&h===0)return new r(i-e,o-i,e,n-t,a-n,t,0,0,1);var p=i-o,v=s-o,_=n-a,E=l-a,A=p*E-v*_,N=(d*E-v*h)/A,F=(p*h-d*_)/A;return new r(i-e+N*i,s-e+F*s,e,n-t+N*n,l-t+F*l,t,N,F,1)},r.quadrilateralToSquare=function(e,t,i,n,o,a,s,l){return r.squareToQuadrilateral(e,t,i,n,o,a,s,l).buildAdjoint()},r.prototype.buildAdjoint=function(){return new r(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},r.prototype.times=function(e){return new r(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},r}(),Ql=SO;var TO=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),DO=function(r){TO(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,i,n,o,a,s,l,d,h,p,v,_,E,A,N,F,P,L,G){var Y=Ql.quadrilateralToQuadrilateral(o,a,s,l,d,h,p,v,_,E,A,N,F,P,L,G);return this.sampleGridWithTransform(t,i,n,Y)},e.prototype.sampleGridWithTransform=function(t,i,n,o){if(i<=0||n<=0)throw new U;for(var a=new Zt(i,n),s=new Float32Array(2*i),l=0;l<n;l++){for(var d=s.length,h=l+.5,p=0;p<d;p+=2)s[p]=p/2+.5,s[p+1]=h;o.transformPoints(s),yd.checkAndNudgePoints(t,s);try{for(var p=0;p<d;p+=2)t.get(Math.floor(s[p]),Math.floor(s[p+1]))&&a.set(p/2,l)}catch{throw new U}}return a},e}(yd),Gm=DO;var OO=function(){function r(){}return r.setGridSampler=function(e){r.gridSampler=e},r.getInstance=function(){return r.gridSampler},r.gridSampler=new Gm,r}(),sa=OO;var ci=function(){function r(e,t){this.x=e,this.y=t}return r.prototype.toResultPoint=function(){return new ue(this.getX(),this.getY())},r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r}();var RO=function(){function r(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return r.prototype.detect=function(){return this.detectMirror(!1)},r.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),i=this.getBullsEyeCorners(t);if(e){var n=i[0];i[0]=i[2],i[2]=n}this.extractParameters(i);var o=this.sampleGrid(this.image,i[this.shift%4],i[(this.shift+1)%4],i[(this.shift+2)%4],i[(this.shift+3)%4]),a=this.getMatrixCornerPoints(i);return new Um(o,a,this.compact,this.nbDataBlocks,this.nbLayers)},r.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new U;var t=2*this.nbCenterLayers,i=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(i,t);for(var n=0,o=0;o<4;o++){var a=i[(this.shift+o)%4];this.compact?(n<<=7,n+=a>>1&127):(n<<=10,n+=(a>>2&992)+(a>>1&31))}var s=this.getCorrectedParameterData(n,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},r.prototype.getRotation=function(e,t){var i=0;e.forEach(function(o,a,s){var l=(o>>t-2<<1)+(o&1);i=(i<<3)+l}),i=((i&1)<<11)+(i>>1);for(var n=0;n<4;n++)if(Pe.bitCount(i^this.EXPECTED_CORNER_BITS[n])<=2)return n;throw new U},r.prototype.getCorrectedParameterData=function(e,t){var i,n;t?(i=7,n=2):(i=10,n=4);for(var o=i-n,a=new Int32Array(i),s=i-1;s>=0;--s)a[s]=e&15,e>>=4;try{var l=new Fn(_r.AZTEC_PARAM);l.decode(a,o)}catch{throw new U}for(var d=0,s=0;s<n;s++)d=(d<<4)+a[s];return d},r.prototype.getBullsEyeCorners=function(e){var t=e,i=e,n=e,o=e,a=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(t,a,1,-1),l=this.getFirstDifferent(i,a,1,1),d=this.getFirstDifferent(n,a,-1,1),h=this.getFirstDifferent(o,a,-1,-1);if(this.nbCenterLayers>2){var p=this.distancePoint(h,s)*this.nbCenterLayers/(this.distancePoint(o,t)*(this.nbCenterLayers+2));if(p<.75||p>1.25||!this.isWhiteOrBlackRectangle(s,l,d,h))break}t=s,i=l,n=d,o=h,a=!a}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new U;this.compact=this.nbCenterLayers===5;var v=new ue(t.getX()+.5,t.getY()-.5),_=new ue(i.getX()+.5,i.getY()+.5),E=new ue(n.getX()-.5,n.getY()+.5),A=new ue(o.getX()-.5,o.getY()-.5);return this.expandSquare([v,_,E,A],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},r.prototype.getMatrixCenter=function(){var e,t,i,n;try{var o=new ms(this.image).detect();e=o[0],t=o[1],i=o[2],n=o[3]}catch{var a=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new ci(a+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ci(a+7,s+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new ci(a-7,s+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new ci(a-7,s-7),!1,-1,-1).toResultPoint()}var l=rt.round((e.getX()+n.getX()+t.getX()+i.getX())/4),d=rt.round((e.getY()+n.getY()+t.getY()+i.getY())/4);try{var o=new ms(this.image,15,l,d).detect();e=o[0],t=o[1],i=o[2],n=o[3]}catch{e=this.getFirstDifferent(new ci(l+7,d-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ci(l+7,d+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new ci(l-7,d+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new ci(l-7,d-7),!1,-1,-1).toResultPoint()}return l=rt.round((e.getX()+n.getX()+t.getX()+i.getX())/4),d=rt.round((e.getY()+n.getY()+t.getY()+i.getY())/4),new ci(l,d)},r.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},r.prototype.sampleGrid=function(e,t,i,n,o){var a=sa.getInstance(),s=this.getDimension(),l=s/2-this.nbCenterLayers,d=s/2+this.nbCenterLayers;return a.sampleGrid(e,s,s,l,l,d,l,d,d,l,d,t.getX(),t.getY(),i.getX(),i.getY(),n.getX(),n.getY(),o.getX(),o.getY())},r.prototype.sampleLine=function(e,t,i){for(var n=0,o=this.distanceResultPoint(e,t),a=o/i,s=e.getX(),l=e.getY(),d=a*(t.getX()-e.getX())/o,h=a*(t.getY()-e.getY())/o,p=0;p<i;p++)this.image.get(rt.round(s+p*d),rt.round(l+p*h))&&(n|=1<<i-p-1);return n},r.prototype.isWhiteOrBlackRectangle=function(e,t,i,n){var o=3;e=new ci(e.getX()-o,e.getY()+o),t=new ci(t.getX()-o,t.getY()-o),i=new ci(i.getX()+o,i.getY()-o),n=new ci(n.getX()+o,n.getY()+o);var a=this.getColor(n,e);if(a===0)return!1;var s=this.getColor(e,t);return s!==a||(s=this.getColor(t,i),s!==a)?!1:(s=this.getColor(i,n),s===a)},r.prototype.getColor=function(e,t){for(var i=this.distancePoint(e,t),n=(t.getX()-e.getX())/i,o=(t.getY()-e.getY())/i,a=0,s=e.getX(),l=e.getY(),d=this.image.get(e.getX(),e.getY()),h=Math.ceil(i),p=0;p<h;p++)s+=n,l+=o,this.image.get(rt.round(s),rt.round(l))!==d&&a++;var v=a/i;return v>.1&&v<.9?0:v<=.1===d?1:-1},r.prototype.getFirstDifferent=function(e,t,i,n){for(var o=e.getX()+i,a=e.getY()+n;this.isValid(o,a)&&this.image.get(o,a)===t;)o+=i,a+=n;for(o-=i,a-=n;this.isValid(o,a)&&this.image.get(o,a)===t;)o+=i;for(o-=i;this.isValid(o,a)&&this.image.get(o,a)===t;)a+=n;return a-=n,new ci(o,a)},r.prototype.expandSquare=function(e,t,i){var n=i/(2*t),o=e[0].getX()-e[2].getX(),a=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,l=(e[0].getY()+e[2].getY())/2,d=new ue(s+n*o,l+n*a),h=new ue(s-n*o,l-n*a);o=e[1].getX()-e[3].getX(),a=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,l=(e[1].getY()+e[3].getY())/2;var p=new ue(s+n*o,l+n*a),v=new ue(s-n*o,l-n*a),_=[d,p,h,v];return _},r.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},r.prototype.isValidPoint=function(e){var t=rt.round(e.getX()),i=rt.round(e.getY());return this.isValid(t,i)},r.prototype.distancePoint=function(e,t){return rt.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.distanceResultPoint=function(e,t){return rt.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Pe.truncDivision(this.nbLayers-4,8)+1)+15},r}(),jm=RO;var MO=function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var i=null,n=new jm(e.getBlackMatrix()),o=null,a=null;try{var s=n.detectMirror(!1);o=s.getPoints(),this.reportFoundResultPoints(t,o),a=new _d().decode(s)}catch(p){i=p}if(a==null)try{var s=n.detectMirror(!0);o=s.getPoints(),this.reportFoundResultPoints(t,o),a=new _d().decode(s)}catch(p){throw i??p}var l=new Et(a.getText(),a.getRawBytes(),a.getNumBits(),o,le.AZTEC,tt.currentTimeMillis()),d=a.getByteSegments();d!=null&&l.putMetadata(Jt.BYTE_SEGMENTS,d);var h=a.getECLevel();return h!=null&&l.putMetadata(Jt.ERROR_CORRECTION_LEVEL,h),l},r.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var i=e.get(st.NEED_RESULT_POINT_CALLBACK);i!=null&&t.forEach(function(n,o,a){i.foundPossibleResultPoint(n)})}},r.prototype.reset=function(){},r}(),gs=MO;var PO=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),NB=function(r){PO(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new gs,t)||this}return e}(Bi);var NO=function(){function r(){}return r.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var i=t&&t.get(st.TRY_HARDER)===!0;if(i&&e.isRotateSupported()){var n=e.rotateCounterClockwise(),o=this.doDecode(n,t),a=o.getResultMetadata(),s=270;a!==null&&a.get(Jt.ORIENTATION)===!0&&(s=s+a.get(Jt.ORIENTATION)%360),o.putMetadata(Jt.ORIENTATION,s);var l=o.getResultPoints();if(l!==null)for(var d=n.getHeight(),h=0;h<l.length;h++)l[h]=new ue(d-l[h].getY()-1,l[h].getX());return o}else throw new U}},r.prototype.reset=function(){},r.prototype.doDecode=function(e,t){var i=e.getWidth(),n=e.getHeight(),o=new qt(i),a=t&&t.get(st.TRY_HARDER)===!0,s=Math.max(1,n>>(a?8:5)),l;a?l=n:l=15;for(var d=Math.trunc(n/2),h=0;h<l;h++){var p=Math.trunc((h+1)/2),v=(h&1)===0,_=d+s*(v?p:-p);if(_<0||_>=n)break;try{o=e.getBlackRow(_,o)}catch{continue}for(var E=function(P){if(P===1&&(o.reverse(),t&&t.get(st.NEED_RESULT_POINT_CALLBACK)===!0)){var L=new Map;t.forEach(function(Q,ie){return L.set(ie,Q)}),L.delete(st.NEED_RESULT_POINT_CALLBACK),t=L}try{var G=A.decodeRow(_,o,t);if(P===1){G.putMetadata(Jt.ORIENTATION,180);var Y=G.getResultPoints();Y!==null&&(Y[0]=new ue(i-Y[0].getX()-1,Y[0].getY()),Y[1]=new ue(i-Y[1].getX()-1,Y[1].getY()))}return{value:G}}catch{}},A=this,N=0;N<2;N++){var F=E(N);if(typeof F=="object")return F.value}}throw new U},r.recordPattern=function(e,t,i){for(var n=i.length,o=0;o<n;o++)i[o]=0;var a=e.getSize();if(t>=a)throw new U;for(var s=!e.get(t),l=0,d=t;d<a;){if(e.get(d)!==s)i[l]++;else{if(++l===n)break;i[l]=1,s=!s}d++}if(!(l===n||l===n-1&&d===a))throw new U},r.recordPatternInReverse=function(e,t,i){for(var n=i.length,o=e.get(t);t>0&&n>=0;)e.get(--t)!==o&&(n--,o=!o);if(n>=0)throw new U;r.recordPattern(e,t+1,i)},r.patternMatchVariance=function(e,t,i){for(var n=e.length,o=0,a=0,s=0;s<n;s++)o+=e[s],a+=t[s];if(o<a)return Number.POSITIVE_INFINITY;var l=o/a;i*=l;for(var d=0,h=0;h<n;h++){var p=e[h],v=t[h]*l,_=p>v?p-v:v-p;if(_>i)return Number.POSITIVE_INFINITY;d+=_}return d/o},r}(),kt=NO;var FO=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),kO=function(r){FO(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var i=t.getSize(),n=t.getNextSet(0),o=0,a=Int32Array.from([0,0,0,0,0,0]),s=n,l=!1,d=6,h=n;h<i;h++)if(t.get(h)!==l)a[o]++;else{if(o===d-1){for(var p=e.MAX_AVG_VARIANCE,v=-1,_=e.CODE_START_A;_<=e.CODE_START_C;_++){var E=kt.patternMatchVariance(a,e.CODE_PATTERNS[_],e.MAX_INDIVIDUAL_VARIANCE);E<p&&(p=E,v=_)}if(v>=0&&t.isRange(Math.max(0,s-(h-s)/2),s,!1))return Int32Array.from([s,h,v]);s+=a[0]+a[1],a=a.slice(2,a.length),a[o-1]=0,a[o]=0,o--}else o++;a[o]=1,l=!l}throw new U},e.decodeCode=function(t,i,n){kt.recordPattern(t,n,i);for(var o=e.MAX_AVG_VARIANCE,a=-1,s=0;s<e.CODE_PATTERNS.length;s++){var l=e.CODE_PATTERNS[s],d=this.patternMatchVariance(i,l,e.MAX_INDIVIDUAL_VARIANCE);d<o&&(o=d,a=s)}if(a>=0)return a;throw new U},e.prototype.decodeRow=function(t,i,n){var o=n&&n.get(st.ASSUME_GS1)===!0,a=e.findStartPattern(i),s=a[2],l=0,d=new Uint8Array(20);d[l++]=s;var h;switch(s){case e.CODE_START_A:h=e.CODE_CODE_A;break;case e.CODE_START_B:h=e.CODE_CODE_B;break;case e.CODE_START_C:h=e.CODE_CODE_C;break;default:throw new J}for(var p=!1,v=!1,_="",E=a[0],A=a[1],N=Int32Array.from([0,0,0,0,0,0]),F=0,P=0,L=s,G=0,Y=!0,Q=!1,ie=!1;!p;){var ye=v;switch(v=!1,F=P,P=e.decodeCode(i,N,A),d[l++]=P,P!==e.CODE_STOP&&(Y=!0),P!==e.CODE_STOP&&(G++,L+=G*P),E=A,A+=N.reduce(function(ho,pa){return ho+pa},0),P){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new J}switch(h){case e.CODE_CODE_A:if(P<64)ie===Q?_+=String.fromCharCode(32+P):_+=String.fromCharCode(32+P+128),ie=!1;else if(P<96)ie===Q?_+=String.fromCharCode(P-64):_+=String.fromCharCode(P+64),ie=!1;else switch(P!==e.CODE_STOP&&(Y=!1),P){case e.CODE_FNC_1:o&&(_.length===0?_+="]C1":_+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!Q&&ie?(Q=!0,ie=!1):Q&&ie?(Q=!1,ie=!1):ie=!0;break;case e.CODE_SHIFT:v=!0,h=e.CODE_CODE_B;break;case e.CODE_CODE_B:h=e.CODE_CODE_B;break;case e.CODE_CODE_C:h=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_B:if(P<96)ie===Q?_+=String.fromCharCode(32+P):_+=String.fromCharCode(32+P+128),ie=!1;else switch(P!==e.CODE_STOP&&(Y=!1),P){case e.CODE_FNC_1:o&&(_.length===0?_+="]C1":_+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!Q&&ie?(Q=!0,ie=!1):Q&&ie?(Q=!1,ie=!1):ie=!0;break;case e.CODE_SHIFT:v=!0,h=e.CODE_CODE_A;break;case e.CODE_CODE_A:h=e.CODE_CODE_A;break;case e.CODE_CODE_C:h=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_C:if(P<100)P<10&&(_+="0"),_+=P;else switch(P!==e.CODE_STOP&&(Y=!1),P){case e.CODE_FNC_1:o&&(_.length===0?_+="]C1":_+="");break;case e.CODE_CODE_A:h=e.CODE_CODE_A;break;case e.CODE_CODE_B:h=e.CODE_CODE_B;break;case e.CODE_STOP:p=!0;break}break}ye&&(h=h===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var Ne=A-E;if(A=i.getNextUnset(A),!i.isRange(A,Math.min(i.getSize(),A+(A-E)/2),!1))throw new U;if(L-=G*F,L%103!==F)throw new Ut;var Ge=_.length;if(Ge===0)throw new U;Ge>0&&Y&&(h===e.CODE_CODE_C?_=_.substring(0,Ge-2):_=_.substring(0,Ge-1));for(var At=(a[1]+a[0])/2,nt=E+Ne/2,wt=d.length,Ur=new Uint8Array(wt),ji=0;ji<wt;ji++)Ur[ji]=d[ji];var ha=[new ue(At,t),new ue(nt,t)];return new Et(_,Ur,0,ha,le.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(kt),bd=kO;var LO=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),zm=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BO=function(r){LO(e,r);function e(t,i){t===void 0&&(t=!1),i===void 0&&(i=!1);var n=r.call(this)||this;return n.usingCheckDigit=t,n.extendedMode=i,n.decodeRowResult="",n.counters=new Int32Array(9),n}return e.prototype.decodeRow=function(t,i,n){var o,a,s,l,d=this.counters;d.fill(0),this.decodeRowResult="";var h=e.findAsteriskPattern(i,d),p=i.getNextSet(h[1]),v=i.getSize(),_,E;do{e.recordPattern(i,p,d);var A=e.toNarrowWidePattern(d);if(A<0)throw new U;_=e.patternToChar(A),this.decodeRowResult+=_,E=p;try{for(var N=(o=void 0,zm(d)),F=N.next();!F.done;F=N.next()){var P=F.value;p+=P}}catch(wt){o={error:wt}}finally{try{F&&!F.done&&(a=N.return)&&a.call(N)}finally{if(o)throw o.error}}p=i.getNextSet(p)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var L=0;try{for(var G=zm(d),Y=G.next();!Y.done;Y=G.next()){var P=Y.value;L+=P}}catch(wt){s={error:wt}}finally{try{Y&&!Y.done&&(l=G.return)&&l.call(G)}finally{if(s)throw s.error}}var Q=p-E-L;if(p!==v&&Q*2<L)throw new U;if(this.usingCheckDigit){for(var ie=this.decodeRowResult.length-1,ye=0,Ne=0;Ne<ie;Ne++)ye+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Ne));if(this.decodeRowResult.charAt(ie)!==e.ALPHABET_STRING.charAt(ye%43))throw new Ut;this.decodeRowResult=this.decodeRowResult.substring(0,ie)}if(this.decodeRowResult.length===0)throw new U;var Ge;this.extendedMode?Ge=e.decodeExtended(this.decodeRowResult):Ge=this.decodeRowResult;var At=(h[1]+h[0])/2,nt=E+L/2;return new Et(Ge,null,0,[new ue(At,t),new ue(nt,t)],le.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,i){for(var n=t.getSize(),o=t.getNextSet(0),a=0,s=o,l=!1,d=i.length,h=o;h<n;h++)if(t.get(h)!==l)i[a]++;else{if(a===d-1){if(this.toNarrowWidePattern(i)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,s-Math.floor((h-s)/2)),s,!1))return[s,h];s+=i[0]+i[1],i.copyWithin(0,2,2+a-1),i[a-1]=0,i[a]=0,a--}else a++;i[a]=1,l=!l}throw new U},e.toNarrowWidePattern=function(t){var i,n,o=t.length,a=0,s;do{var l=2147483647;try{for(var d=(i=void 0,zm(t)),h=d.next();!h.done;h=d.next()){var p=h.value;p<l&&p>a&&(l=p)}}catch(A){i={error:A}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(i)throw i.error}}a=l,s=0;for(var v=0,_=0,E=0;E<o;E++){var p=t[E];p>a&&(_|=1<<o-1-E,s++,v+=p)}if(s===3){for(var E=0;E<o&&s>0;E++){var p=t[E];if(p>a&&(s--,p*2>=v))return-1}return _}}while(s>3);return-1},e.patternToChar=function(t){for(var i=0;i<e.CHARACTER_ENCODINGS.length;i++)if(e.CHARACTER_ENCODINGS[i]===t)return e.ALPHABET_STRING.charAt(i);if(t===e.ASTERISK_ENCODING)return"*";throw new U},e.decodeExtended=function(t){for(var i=t.length,n="",o=0;o<i;o++){var a=t.charAt(o);if(a==="+"||a==="$"||a==="%"||a==="/"){var s=t.charAt(o+1),l="\0";switch(a){case"+":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new J;break;case"$":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new J;break;case"%":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s==="X"||s==="Y"||s==="Z")l="\x7F";else throw new J;break;case"/":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new J;break}n+=l,o++}else n+=a}return n},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(kt),xd=BO;var VO=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Hm=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},UO=function(r){VO(e,r);function e(){var t=r.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,i,n){var o,a,s,l,d=this.findAsteriskPattern(i),h=i.getNextSet(d[1]),p=i.getSize(),v=this.counters;v.fill(0),this.decodeRowResult="";var _,E;do{e.recordPattern(i,h,v);var A=this.toPattern(v);if(A<0)throw new U;_=this.patternToChar(A),this.decodeRowResult+=_,E=h;try{for(var N=(o=void 0,Hm(v)),F=N.next();!F.done;F=N.next()){var P=F.value;h+=P}}catch(Ne){o={error:Ne}}finally{try{F&&!F.done&&(a=N.return)&&a.call(N)}finally{if(o)throw o.error}}h=i.getNextSet(h)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var L=0;try{for(var G=Hm(v),Y=G.next();!Y.done;Y=G.next()){var P=Y.value;L+=P}}catch(Ne){s={error:Ne}}finally{try{Y&&!Y.done&&(l=G.return)&&l.call(G)}finally{if(s)throw s.error}}if(h===p||!i.get(h))throw new U;if(this.decodeRowResult.length<2)throw new U;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var Q=this.decodeExtended(this.decodeRowResult),ie=(d[1]+d[0])/2,ye=E+L/2;return new Et(Q,null,0,[new ue(ie,t),new ue(ye,t)],le.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var i=t.getSize(),n=t.getNextSet(0);this.counters.fill(0);for(var o=this.counters,a=n,s=!1,l=o.length,d=0,h=n;h<i;h++)if(t.get(h)!==s)o[d]++;else{if(d===l-1){if(this.toPattern(o)===e.ASTERISK_ENCODING)return new Int32Array([a,h]);a+=o[0]+o[1],o.copyWithin(0,2,2+d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,s=!s}throw new U},e.prototype.toPattern=function(t){var i,n,o=0;try{for(var a=Hm(t),s=a.next();!s.done;s=a.next()){var l=s.value;o+=l}}catch(E){i={error:E}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}for(var d=0,h=t.length,p=0;p<h;p++){var v=Math.round(t[p]*9/o);if(v<1||v>4)return-1;if(p&1)d<<=v;else for(var _=0;_<v;_++)d=d<<1|1}return d},e.prototype.patternToChar=function(t){for(var i=0;i<e.CHARACTER_ENCODINGS.length;i++)if(e.CHARACTER_ENCODINGS[i]===t)return e.ALPHABET_STRING.charAt(i);throw new U},e.prototype.decodeExtended=function(t){for(var i=t.length,n="",o=0;o<i;o++){var a=t.charAt(o);if(a>="a"&&a<="d"){if(o>=i-1)throw new J;var s=t.charAt(o+1),l="\0";switch(a){case"d":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new J;break;case"a":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new J;break;case"b":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s>="X"&&s<="Z")l="\x7F";else throw new J;break;case"c":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new J;break}n+=l,o++}else n+=a}return n},e.prototype.checkChecksums=function(t){var i=t.length;this.checkOneChecksum(t,i-2,20),this.checkOneChecksum(t,i-1,15)},e.prototype.checkOneChecksum=function(t,i,n){for(var o=1,a=0,s=i-1;s>=0;s--)a+=o*e.ALPHABET_STRING.indexOf(t.charAt(s)),++o>n&&(o=1);if(t.charAt(i)!==e.ALPHABET_STRING[a%47])throw new Ut},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(kt),Ed=UO;var GO=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),jO=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zO=function(r){GO(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,i,n){var o,a,s=this.decodeStart(i),l=this.decodeEnd(i),d=new we;e.decodeMiddle(i,s[1],l[0],d);var h=d.toString(),p=null;n!=null&&(p=n.get(st.ALLOWED_LENGTHS)),p==null&&(p=e.DEFAULT_ALLOWED_LENGTHS);var v=h.length,_=!1,E=0;try{for(var A=jO(p),N=A.next();!N.done;N=A.next()){var F=N.value;if(v===F){_=!0;break}F>E&&(E=F)}}catch(G){o={error:G}}finally{try{N&&!N.done&&(a=A.return)&&a.call(A)}finally{if(o)throw o.error}}if(!_&&v>E&&(_=!0),!_)throw new J;var P=[new ue(s[1],t),new ue(l[0],t)],L=new Et(h,null,0,P,le.ITF,new Date().getTime());return L},e.decodeMiddle=function(t,i,n,o){var a=new Int32Array(10),s=new Int32Array(5),l=new Int32Array(5);for(a.fill(0),s.fill(0),l.fill(0);i<n;){kt.recordPattern(t,i,a);for(var d=0;d<5;d++){var h=2*d;s[d]=a[h],l[d]=a[h+1]}var p=e.decodeDigit(s);o.append(p.toString()),p=this.decodeDigit(l),o.append(p.toString()),a.forEach(function(v){i+=v})}},e.prototype.decodeStart=function(t){var i=e.skipWhiteSpace(t),n=e.findGuardPattern(t,i,e.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(t,n[0]),n},e.prototype.validateQuietZone=function(t,i){var n=this.narrowLineWidth*10;n=n<i?n:i;for(var o=i-1;n>0&&o>=0&&!t.get(o);o--)n--;if(n!==0)throw new U},e.skipWhiteSpace=function(t){var i=t.getSize(),n=t.getNextSet(0);if(n===i)throw new U;return n},e.prototype.decodeEnd=function(t){t.reverse();try{var i=e.skipWhiteSpace(t),n=void 0;try{n=e.findGuardPattern(t,i,e.END_PATTERN_REVERSED[0])}catch(a){a instanceof U&&(n=e.findGuardPattern(t,i,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,n[0]);var o=n[0];return n[0]=t.getSize()-n[1],n[1]=t.getSize()-o,n}finally{t.reverse()}},e.findGuardPattern=function(t,i,n){var o=n.length,a=new Int32Array(o),s=t.getSize(),l=!1,d=0,h=i;a.fill(0);for(var p=i;p<s;p++)if(t.get(p)!==l)a[d]++;else{if(d===o-1){if(kt.patternMatchVariance(a,n,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[h,p];h+=a[0]+a[1],tt.arraycopy(a,2,a,0,d-1),a[d-1]=0,a[d]=0,d--}else d++;a[d]=1,l=!l}throw new U},e.decodeDigit=function(t){for(var i=e.MAX_AVG_VARIANCE,n=-1,o=e.PATTERNS.length,a=0;a<o;a++){var s=e.PATTERNS[a],l=kt.patternMatchVariance(t,s,e.MAX_INDIVIDUAL_VARIANCE);l<i?(i=l,n=a):l===i&&(n=-1)}if(n>=0)return n%10;throw new U},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(kt),wd=zO;var HO=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),WO=function(r){HO(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var i=!1,n,o=0,a=Int32Array.from([0,0,0]);!i;){a=Int32Array.from([0,0,0]),n=e.findGuardPattern(t,o,!1,this.START_END_PATTERN,a);var s=n[0];o=n[1];var l=s-(o-s);l>=0&&(i=t.isRange(l,s,!1))}return n},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var i=t.length;if(i===0)return!1;var n=parseInt(t.charAt(i-1),10);return e.getStandardUPCEANChecksum(t.substring(0,i-1))===n},e.getStandardUPCEANChecksum=function(t){for(var i=t.length,n=0,o=i-1;o>=0;o-=2){var a=t.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new J;n+=a}n*=3;for(var o=i-2;o>=0;o-=2){var a=t.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new J;n+=a}return(1e3-n)%10},e.decodeEnd=function(t,i){return e.findGuardPattern(t,i,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,i,n,o){return this.findGuardPattern(t,i,n,o,new Int32Array(o.length))},e.findGuardPattern=function(t,i,n,o,a){var s=t.getSize();i=n?t.getNextUnset(i):t.getNextSet(i);for(var l=0,d=i,h=o.length,p=n,v=i;v<s;v++)if(t.get(v)!==p)a[l]++;else{if(l===h-1){if(kt.patternMatchVariance(a,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([d,v]);d+=a[0]+a[1];for(var _=a.slice(2,a.length),E=0;E<l-1;E++)a[E]=_[E];a[l-1]=0,a[l]=0,l--}else l++;a[l]=1,p=!p}throw new U},e.decodeDigit=function(t,i,n,o){this.recordPattern(t,n,i);for(var a=this.MAX_AVG_VARIANCE,s=-1,l=o.length,d=0;d<l;d++){var h=o[d],p=kt.patternMatchVariance(i,h,e.MAX_INDIVIDUAL_VARIANCE);p<a&&(a=p,s=d)}if(s>=0)return s;throw new U},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(kt),_n=WO;var XO=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YO=function(){function r(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,i){var n=this.decodeRowStringBuffer,o=this.decodeMiddle(t,i,n),a=n.toString(),s=r.parseExtensionString(a),l=[new ue((i[0]+i[1])/2,e),new ue(o,e)],d=new Et(a,null,0,l,le.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&d.putAllMetadata(s),d},r.prototype.decodeMiddle=function(e,t,i){var n,o,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=e.getSize(),l=t[1],d=0,h=0;h<5&&l<s;h++){var p=_n.decodeDigit(e,a,l,_n.L_AND_G_PATTERNS);i+=String.fromCharCode(48+p%10);try{for(var v=(n=void 0,XO(a)),_=v.next();!_.done;_=v.next()){var E=_.value;l+=E}}catch(N){n={error:N}}finally{try{_&&!_.done&&(o=v.return)&&o.call(v)}finally{if(n)throw n.error}}p>=10&&(d|=1<<4-h),h!==4&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(i.length!==5)throw new U;var A=this.determineCheckDigit(d);if(r.extensionChecksum(i.toString())!==A)throw new U;return l},r.extensionChecksum=function(e){for(var t=e.length,i=0,n=t-2;n>=0;n-=2)i+=e.charAt(n).charCodeAt(0)-48;i*=3;for(var n=t-1;n>=0;n-=2)i+=e.charAt(n).charCodeAt(0)-48;return i*=3,i%10},r.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new U},r.parseExtensionString=function(e){if(e.length!==5)return null;var t=r.parseExtension5String(e);return t==null?null:new Map([[Jt.SUGGESTED_PRICE,t]])},r.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="\xA3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var i=parseInt(e.substring(1)),n=(i/100).toString(),o=i%100,a=o<10?"0"+o:o.toString();return t+n+"."+a},r}(),gb=YO;var qO=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$O=function(){function r(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,i){var n=this.decodeRowStringBuffer,o=this.decodeMiddle(t,i,n),a=n.toString(),s=r.parseExtensionString(a),l=[new ue((i[0]+i[1])/2,e),new ue(o,e)],d=new Et(a,null,0,l,le.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&d.putAllMetadata(s),d},r.prototype.decodeMiddle=function(e,t,i){var n,o,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=e.getSize(),l=t[1],d=0,h=0;h<2&&l<s;h++){var p=_n.decodeDigit(e,a,l,_n.L_AND_G_PATTERNS);i+=String.fromCharCode(48+p%10);try{for(var v=(n=void 0,qO(a)),_=v.next();!_.done;_=v.next()){var E=_.value;l+=E}}catch(A){n={error:A}}finally{try{_&&!_.done&&(o=v.return)&&o.call(v)}finally{if(n)throw n.error}}p>=10&&(d|=1<<1-h),h!==1&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(i.length!==2)throw new U;if(parseInt(i.toString())%4!==d)throw new U;return l},r.parseExtensionString=function(e){return e.length!==2?null:new Map([[Jt.ISSUE_NUMBER,parseInt(e)]])},r}(),vb=$O;var ZO=function(){function r(){}return r.decodeRow=function(e,t,i){var n=_n.findGuardPattern(t,i,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var o=new gb;return o.decodeRow(e,t,n)}catch{var a=new vb;return a.decodeRow(e,t,n)}},r.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),r}(),_b=ZO;var KO=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),QO=function(r){KO(e,r);function e(){var t=r.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var i=10;i<20;i++){for(var n=e.L_PATTERNS[i-10],o=new Int32Array(n.length),a=0;a<n.length;a++)o[a]=n[n.length-a-1];e.L_AND_G_PATTERNS[i]=o}return t}return e.prototype.decodeRow=function(t,i,n){var o=e.findStartGuardPattern(i),a=n==null?null:n.get(st.NEED_RESULT_POINT_CALLBACK);if(a!=null){var s=new ue((o[0]+o[1])/2,t);a.foundPossibleResultPoint(s)}var l=this.decodeMiddle(i,o,this.decodeRowStringBuffer),d=l.rowOffset,h=l.resultString;if(a!=null){var p=new ue(d,t);a.foundPossibleResultPoint(p)}var v=e.decodeEnd(i,d);if(a!=null){var _=new ue((v[0]+v[1])/2,t);a.foundPossibleResultPoint(_)}var E=v[1],A=E+(E-v[0]);if(A>=i.getSize()||!i.isRange(E,A,!1))throw new U;var N=h.toString();if(N.length<8)throw new J;if(!e.checkChecksum(N))throw new Ut;var F=(o[1]+o[0])/2,P=(v[1]+v[0])/2,L=this.getBarcodeFormat(),G=[new ue(F,t),new ue(P,t)],Y=new Et(N,null,0,G,L,new Date().getTime()),Q=0;try{var ie=_b.decodeRow(t,i,v[1]);Y.putMetadata(Jt.UPC_EAN_EXTENSION,ie.getText()),Y.putAllMetadata(ie.getResultMetadata()),Y.addResultPoints(ie.getResultPoints()),Q=ie.getText().length}catch{}var ye=n==null?null:n.get(st.ALLOWED_EAN_EXTENSIONS);if(ye!=null){var Ne=!1;for(var Ge in ye)if(Q.toString()===Ge){Ne=!0;break}if(!Ne)throw new U}return L===le.EAN_13||le.UPC_A,Y},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var i=t.length;if(i===0)return!1;var n=parseInt(t.charAt(i-1),10);return e.getStandardUPCEANChecksum(t.substring(0,i-1))===n},e.getStandardUPCEANChecksum=function(t){for(var i=t.length,n=0,o=i-1;o>=0;o-=2){var a=t.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new J;n+=a}n*=3;for(var o=i-2;o>=0;o-=2){var a=t.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new J;n+=a}return(1e3-n)%10},e.decodeEnd=function(t,i){return e.findGuardPattern(t,i,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(_n),ur=QO;var JO=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),yb=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eR=function(r){JO(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,i,n){var o,a,s,l,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var h=t.getSize(),p=i[1],v=0,_=0;_<6&&p<h;_++){var E=ur.decodeDigit(t,d,p,ur.L_AND_G_PATTERNS);n+=String.fromCharCode(48+E%10);try{for(var A=(o=void 0,yb(d)),N=A.next();!N.done;N=A.next()){var F=N.value;p+=F}}catch(Y){o={error:Y}}finally{try{N&&!N.done&&(a=A.return)&&a.call(A)}finally{if(o)throw o.error}}E>=10&&(v|=1<<5-_)}n=e.determineFirstDigit(n,v);var P=ur.findGuardPattern(t,p,!0,ur.MIDDLE_PATTERN,new Int32Array(ur.MIDDLE_PATTERN.length).fill(0));p=P[1];for(var _=0;_<6&&p<h;_++){var E=ur.decodeDigit(t,d,p,ur.L_PATTERNS);n+=String.fromCharCode(48+E);try{for(var L=(s=void 0,yb(d)),G=L.next();!G.done;G=L.next()){var F=G.value;p+=F}}catch(ie){s={error:ie}}finally{try{G&&!G.done&&(l=L.return)&&l.call(L)}finally{if(s)throw s.error}}}return{rowOffset:p,resultString:n}},e.prototype.getBarcodeFormat=function(){return le.EAN_13},e.determineFirstDigit=function(t,i){for(var n=0;n<10;n++)if(i===this.FIRST_DIGIT_ENCODINGS[n])return t=String.fromCharCode(48+n)+t,t;throw new U},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(ur),vs=eR;var tR=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),bb=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rR=function(r){tR(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,i,n){var o,a,s,l,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var h=t.getSize(),p=i[1],v=0;v<4&&p<h;v++){var _=ur.decodeDigit(t,d,p,ur.L_PATTERNS);n+=String.fromCharCode(48+_);try{for(var E=(o=void 0,bb(d)),A=E.next();!A.done;A=E.next()){var N=A.value;p+=N}}catch(G){o={error:G}}finally{try{A&&!A.done&&(a=E.return)&&a.call(E)}finally{if(o)throw o.error}}}var F=ur.findGuardPattern(t,p,!0,ur.MIDDLE_PATTERN,new Int32Array(ur.MIDDLE_PATTERN.length).fill(0));p=F[1];for(var v=0;v<4&&p<h;v++){var _=ur.decodeDigit(t,d,p,ur.L_PATTERNS);n+=String.fromCharCode(48+_);try{for(var P=(s=void 0,bb(d)),L=P.next();!L.done;L=P.next()){var N=L.value;p+=N}}catch(Q){s={error:Q}}finally{try{L&&!L.done&&(l=P.return)&&l.call(P)}finally{if(s)throw s.error}}}return{rowOffset:p,resultString:n}},e.prototype.getBarcodeFormat=function(){return le.EAN_8},e}(ur),Wm=rR;var iR=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),nR=function(r){iR(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.ean13Reader=new vs,t}return e.prototype.getBarcodeFormat=function(){return le.UPC_A},e.prototype.decode=function(t,i){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,i,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,i,n))},e.prototype.decodeMiddle=function(t,i,n){return this.ean13Reader.decodeMiddle(t,i,n)},e.prototype.maybeReturnResult=function(t){var i=t.getText();if(i.charAt(0)==="0"){var n=new Et(i.substring(1),null,null,t.getResultPoints(),le.UPC_A);return t.getResultMetadata()!=null&&n.putAllMetadata(t.getResultMetadata()),n}else throw new U},e.prototype.reset=function(){this.ean13Reader.reset()},e}(ur),Xm=nR;var oR=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),aR=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sR=function(r){oR(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,i,n){var o,a,s=this.decodeMiddleCounters.map(function(N){return N});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=t.getSize(),d=i[1],h=0,p=0;p<6&&d<l;p++){var v=e.decodeDigit(t,s,d,e.L_AND_G_PATTERNS);n+=String.fromCharCode(48+v%10);try{for(var _=(o=void 0,aR(s)),E=_.next();!E.done;E=_.next()){var A=E.value;d+=A}}catch(N){o={error:N}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(o)throw o.error}}v>=10&&(h|=1<<5-p)}return e.determineNumSysAndCheckDigit(new we(n),h),d},e.prototype.decodeEnd=function(t,i){return e.findGuardPatternWithoutCounters(t,i,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return ur.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,i){for(var n=0;n<=1;n++)for(var o=0;o<10;o++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][o]){t.insert(0,"0"+n),t.append("0"+o);return}throw U.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return le.UPC_E},e.convertUPCEtoUPCA=function(t){var i=t.slice(1,7).split("").map(function(a){return a.charCodeAt(0)}),n=new we;n.append(t.charAt(0));var o=i[5];switch(o){case 0:case 1:case 2:n.appendChars(i,0,2),n.append(o),n.append("0000"),n.appendChars(i,2,3);break;case 3:n.appendChars(i,0,3),n.append("00000"),n.appendChars(i,3,2);break;case 4:n.appendChars(i,0,4),n.append("00000"),n.append(i[4]);break;default:n.appendChars(i,0,5),n.append("0000"),n.append(o);break}return t.length>=8&&n.append(t.charAt(7)),n.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(ur),Ym=sR;var lR=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),xb=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cR=function(r){lR(e,r);function e(t){var i=r.call(this)||this,n=t==null?null:t.get(st.POSSIBLE_FORMATS),o=[];return n!=null&&(n.indexOf(le.EAN_13)>-1&&o.push(new vs),n.indexOf(le.UPC_A)>-1&&o.push(new Xm),n.indexOf(le.EAN_8)>-1&&o.push(new Wm),n.indexOf(le.UPC_E)>-1&&o.push(new Ym)),o.length===0&&(o.push(new vs),o.push(new Xm),o.push(new Wm),o.push(new Ym)),i.readers=o,i}return e.prototype.decodeRow=function(t,i,n){var o,a;try{for(var s=xb(this.readers),l=s.next();!l.done;l=s.next()){var d=l.value;try{var h=d.decodeRow(t,i,n),p=h.getBarcodeFormat()===le.EAN_13&&h.getText().charAt(0)==="0",v=n==null?null:n.get(st.POSSIBLE_FORMATS),_=v==null||v.includes(le.UPC_A);if(p&&_){var E=h.getRawBytes(),A=new Et(h.getText().substring(1),E,E?E.length:null,h.getResultPoints(),le.UPC_A);return A.putAllMetadata(h.getResultMetadata()),A}return h}catch{}}}catch(N){o={error:N}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}throw new U},e.prototype.reset=function(){var t,i;try{for(var n=xb(this.readers),o=n.next();!o.done;o=n.next()){var a=o.value;a.reset()}}catch(s){t={error:s}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}},e}(kt),Id=cR;var uR=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),dR=function(r){uR(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,i,n){var o=this.getValidRowData(i);if(!o)throw new U;var a=this.codaBarDecodeRow(o.row);if(!a)throw new U;return new Et(a,null,0,[new ue(o.left,t),new ue(o.right,t)],le.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var i=t.toArray(),n=i.indexOf(!0);if(n===-1)return null;var o=i.lastIndexOf(!0);if(o<=n)return null;i=i.slice(n,o+1);for(var a=[],s=i[0],l=1,d=1;d<i.length;d++)i[d]===s?l++:(s=i[d],a.push(l),l=1);return a.push(l),a.length<23&&(a.length+1)%8!==0?null:{row:a,left:n,right:o}},e.prototype.codaBarDecodeRow=function(t){for(var i=[],n=Math.ceil(t.reduce(function(l,d){return(l+d)/2},0));t.length>0;){var o=t.splice(0,8).splice(0,7),a=o.map(function(l){return l<n?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[a]===void 0)return null;i.push(this.CODA_BAR_CHAR_SET[a])}var s=i.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(t){var i=/^[A-D].{1,}[A-D]$/;return i.test(t)},e}(kt),qm=dR;var fR=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),hR=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pR=function(r){fR(e,r);function e(){var t=r.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,i){for(var n=0;n<i.length;n++)if(kt.patternMatchVariance(t,i[n],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return n;throw new U},e.count=function(t){return rt.sum(new Int32Array(t))},e.increment=function(t,i){for(var n=0,o=i[0],a=1;a<t.length;a++)i[a]>o&&(o=i[a],n=a);t[n]++},e.decrement=function(t,i){for(var n=0,o=i[0],a=1;a<t.length;a++)i[a]<o&&(o=i[a],n=a);t[n]--},e.isFinderPattern=function(t){var i,n,o=t[0]+t[1],a=o+t[2]+t[3],s=o/a;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;try{for(var h=hR(t),p=h.next();!p.done;p=h.next()){var v=p.value;v>d&&(d=v),v<l&&(l=v)}}catch(_){i={error:_}}finally{try{p&&!p.done&&(n=h.return)&&n.call(h)}finally{if(i)throw i.error}}return d<10*l}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(kt),kn=pR;var mR=function(){function r(e,t){this.value=e,this.checksumPortion=t}return r.prototype.getValue=function(){return this.value},r.prototype.getChecksumPortion=function(){return this.checksumPortion},r.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},r.prototype.hashCode=function(){return this.value^this.checksumPortion},r}(),la=mR;var gR=function(){function r(e,t,i,n,o){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new ue(i,o)),this.resultPoints.push(new ue(n,o))}return r.prototype.getValue=function(){return this.value},r.prototype.getStartEnd=function(){return this.startEnd},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.hashCode=function(){return this.value},r}(),Cd=gR;var vR=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_R=function(){function r(){}return r.getRSSvalue=function(e,t,i){var n,o,a=0;try{for(var s=vR(e),l=s.next();!l.done;l=s.next()){var d=l.value;a+=d}}catch(P){n={error:P}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}for(var h=0,p=0,v=e.length,_=0;_<v-1;_++){var E=void 0;for(E=1,p|=1<<_;E<e[_];E++,p&=~(1<<_)){var A=r.combins(a-E-1,v-_-2);if(i&&p===0&&a-E-(v-_-1)>=v-_-1&&(A-=r.combins(a-E-(v-_),v-_-2)),v-_-1>1){for(var N=0,F=a-E-(v-_-2);F>t;F--)N+=r.combins(a-E-F-1,v-_-3);A-=N*(v-1-_)}else a-E>t&&A--;h+=A}a-=E}return h},r.combins=function(e,t){var i,n;e-t>t?(n=t,i=e-t):(n=e-t,i=t);for(var o=1,a=1,s=e;s>i;s--)o*=s,a<=n&&(o/=a,a++);for(;a<=n;)o/=a,a++;return o},r}(),oo=_R;var yR=function(){function r(){}return r.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var i=12*t,n=new qt(i),o=0,a=e[0],s=a.getRightChar().getValue(),l=11;l>=0;--l)s&1<<l&&n.set(o),o++;for(var l=1;l<e.length;++l){for(var d=e[l],h=d.getLeftChar().getValue(),p=11;p>=0;--p)h&1<<p&&n.set(o),o++;if(d.getRightChar()!==null)for(var v=d.getRightChar().getValue(),p=11;p>=0;--p)v&1<<p&&n.set(o),o++}return n},r}(),Eb=yR;var bR=function(){function r(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return r.prototype.getDecodedInformation=function(){return this.decodedInformation},r.prototype.isFinished=function(){return this.finished},r}(),ao=bR;var xR=function(){function r(e){this.newPosition=e}return r.prototype.getNewPosition=function(){return this.newPosition},r}(),_s=xR;var ER=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),wR=function(r){ER(e,r);function e(t,i){var n=r.call(this,t)||this;return n.value=i,n}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(_s),Ui=wR;var IR=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),CR=function(r){IR(e,r);function e(t,i,n){var o=r.call(this,t)||this;return n?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=i,o}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(_s),so=CR;var AR=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),SR=function(r){AR(e,r);function e(t,i,n){var o=r.call(this,t)||this;if(i<0||i>10||n<0||n>10)throw new J;return o.firstDigit=i,o.secondDigit=n,o}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(_s),ca=SR;var Ad=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TR=function(){function r(){}return r.parseFieldsInGeneralPurpose=function(e){var t,i,n,o,a,s,l,d;if(!e)return null;if(e.length<2)throw new U;var h=e.substring(0,2);try{for(var p=Ad(r.TWO_DIGIT_DATA_LENGTH),v=p.next();!v.done;v=p.next()){var _=v.value;if(_[0]===h)return _[1]===r.VARIABLE_LENGTH?r.processVariableAI(2,_[2],e):r.processFixedAI(2,_[1],e)}}catch(Q){t={error:Q}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(t)throw t.error}}if(e.length<3)throw new U;var E=e.substring(0,3);try{for(var A=Ad(r.THREE_DIGIT_DATA_LENGTH),N=A.next();!N.done;N=A.next()){var _=N.value;if(_[0]===E)return _[1]===r.VARIABLE_LENGTH?r.processVariableAI(3,_[2],e):r.processFixedAI(3,_[1],e)}}catch(Q){n={error:Q}}finally{try{N&&!N.done&&(o=A.return)&&o.call(A)}finally{if(n)throw n.error}}try{for(var F=Ad(r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),P=F.next();!P.done;P=F.next()){var _=P.value;if(_[0]===E)return _[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,_[2],e):r.processFixedAI(4,_[1],e)}}catch(Q){a={error:Q}}finally{try{P&&!P.done&&(s=F.return)&&s.call(F)}finally{if(a)throw a.error}}if(e.length<4)throw new U;var L=e.substring(0,4);try{for(var G=Ad(r.FOUR_DIGIT_DATA_LENGTH),Y=G.next();!Y.done;Y=G.next()){var _=Y.value;if(_[0]===L)return _[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,_[2],e):r.processFixedAI(4,_[1],e)}}catch(Q){l={error:Q}}finally{try{Y&&!Y.done&&(d=G.return)&&d.call(G)}finally{if(l)throw l.error}}throw new U},r.processFixedAI=function(e,t,i){if(i.length<e)throw new U;var n=i.substring(0,e);if(i.length<e+t)throw new U;var o=i.substring(e,e+t),a=i.substring(e+t),s="("+n+")"+o,l=r.parseFieldsInGeneralPurpose(a);return l==null?s:s+l},r.processVariableAI=function(e,t,i){var n=i.substring(0,e),o;i.length<e+t?o=i.length:o=e+t;var a=i.substring(e,o),s=i.substring(o),l="("+n+")"+a,d=r.parseFieldsInGeneralPurpose(s);return d==null?l:l+d},r.VARIABLE_LENGTH=[],r.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",r.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",r.VARIABLE_LENGTH,20],["22",r.VARIABLE_LENGTH,29],["30",r.VARIABLE_LENGTH,8],["37",r.VARIABLE_LENGTH,8],["90",r.VARIABLE_LENGTH,30],["91",r.VARIABLE_LENGTH,30],["92",r.VARIABLE_LENGTH,30],["93",r.VARIABLE_LENGTH,30],["94",r.VARIABLE_LENGTH,30],["95",r.VARIABLE_LENGTH,30],["96",r.VARIABLE_LENGTH,30],["97",r.VARIABLE_LENGTH,3],["98",r.VARIABLE_LENGTH,30],["99",r.VARIABLE_LENGTH,30]],r.THREE_DIGIT_DATA_LENGTH=[["240",r.VARIABLE_LENGTH,30],["241",r.VARIABLE_LENGTH,30],["242",r.VARIABLE_LENGTH,6],["250",r.VARIABLE_LENGTH,30],["251",r.VARIABLE_LENGTH,30],["253",r.VARIABLE_LENGTH,17],["254",r.VARIABLE_LENGTH,20],["400",r.VARIABLE_LENGTH,30],["401",r.VARIABLE_LENGTH,30],["402",17],["403",r.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",r.VARIABLE_LENGTH,20],["421",r.VARIABLE_LENGTH,15],["422",3],["423",r.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",r.VARIABLE_LENGTH,15],["391",r.VARIABLE_LENGTH,18],["392",r.VARIABLE_LENGTH,15],["393",r.VARIABLE_LENGTH,18],["703",r.VARIABLE_LENGTH,30]],r.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",r.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",r.VARIABLE_LENGTH,20],["8003",r.VARIABLE_LENGTH,30],["8004",r.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",r.VARIABLE_LENGTH,30],["8008",r.VARIABLE_LENGTH,12],["8018",18],["8020",r.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",r.VARIABLE_LENGTH,70],["8200",r.VARIABLE_LENGTH,70]],r}(),wb=TR;var DR=function(){function r(e){this.buffer=new we,this.information=e}return r.prototype.decodeAllCodes=function(e,t){var i=t,n=null;do{var o=this.decodeGeneralPurposeField(i,n),a=wb.parseFieldsInGeneralPurpose(o.getNewString());if(a!=null&&e.append(a),o.isRemaining()?n=""+o.getRemainingValue():n=null,i===o.getNewPosition())break;i=o.getNewPosition()}while(!0);return e.toString()},r.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},r.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new ca(this.information.getSize(),ca.FNC1,ca.FNC1):new ca(this.information.getSize(),t-1,ca.FNC1)}var i=this.extractNumericValueFromBitArray(e,7),n=(i-8)/11,o=(i-8)%11;return new ca(e+7,n,o)},r.prototype.extractNumericValueFromBitArray=function(e,t){return r.extractNumericValueFromBitArray(this.information,e,t)},r.extractNumericValueFromBitArray=function(e,t,i){for(var n=0,o=0;o<i;++o)e.get(t+o)&&(n|=1<<i-o-1);return n},r.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var i=this.parseBlocks();return i!=null&&i.isRemaining()?new so(this.current.getPosition(),this.buffer.toString(),i.getRemainingValue()):new so(this.current.getPosition(),this.buffer.toString())},r.prototype.parseBlocks=function(){var e,t;do{var i=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var n=i!==this.current.getPosition();if(!n&&!e)break}while(!e);return t.getDecodedInformation()},r.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new so(this.current.getPosition(),this.buffer.toString()):t=new so(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new ao(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new so(this.current.getPosition(),this.buffer.toString());return new ao(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ao(!1)},r.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new so(this.current.getPosition(),this.buffer.toString());return new ao(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ao(!1)},r.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new so(this.current.getPosition(),this.buffer.toString());return new ao(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ao(!1)},r.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<116)return!0;if(e+8>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,8);return n>=232&&n<253},r.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Ui(e+5,Ui.FNC1);if(t>=5&&t<15)return new Ui(e+5,"0"+(t-5));var i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<90)return new Ui(e+7,""+(i+1));if(i>=90&&i<116)return new Ui(e+7,""+(i+7));var n=this.extractNumericValueFromBitArray(e,8),o;switch(n){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new J}return new Ui(e+8,o)},r.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,6);return i>=16&&i<63},r.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Ui(e+5,Ui.FNC1);if(t>=5&&t<15)return new Ui(e+5,"0"+(t-5));var i=this.extractNumericValueFromBitArray(e,6);if(i>=32&&i<58)return new Ui(e+6,""+(i+33));var n;switch(i){case 58:n="*";break;case 59:n=",";break;case 60:n="-";break;case 61:n=".";break;case 62:n="/";break;default:throw new Wr("Decoding invalid alphanumeric value: "+i)}return new Ui(e+6,n)},r.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},r.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},r.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},r}(),ys=DR;var OR=function(){function r(e){this.information=e,this.generalDecoder=new ys(e)}return r.prototype.getInformation=function(){return this.information},r.prototype.getGeneralDecoder=function(){return this.generalDecoder},r}(),Jl=OR;var RR=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),MR=function(r){RR(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,i){t.append("(01)");var n=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,i,n)},e.prototype.encodeCompressedGtinWithoutAI=function(t,i,n){for(var o=0;o<4;++o){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*o,10);a/100===0&&t.append("0"),a/10===0&&t.append("0"),t.append(a)}e.appendCheckDigit(t,n)},e.appendCheckDigit=function(t,i){for(var n=0,o=0;o<13;o++){var a=t.charAt(o+i).charCodeAt(0)-48;n+=o&1?a:3*a}n=10-n%10,n===10&&(n=0),t.append(n)},e.GTIN_SIZE=40,e}(Jl),ui=MR;var PR=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),NR=function(r){PR(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new we;t.append("(01)");var i=t.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(n),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(ui),Ib=NR;var FR=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),kR=function(r){FR(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new we;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(Jl),Cb=kR;var LR=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),BR=function(r){LR(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,i,n){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(i,n);this.addWeightCode(t,o);for(var a=this.checkWeight(o),s=1e5,l=0;l<5;++l)a/s===0&&t.append("0"),s/=10;t.append(a)},e}(ui),bs=BR;var VR=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),UR=function(r){VR(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+bs.GTIN_SIZE+e.WEIGHT_SIZE)throw new U;var t=new we;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+bs.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(bs),Sd=UR;var GR=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),jR=function(r){GR(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,i){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(Sd),Ab=jR;var zR=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),HR=function(r){zR(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,i){i<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(Sd),Sb=HR;var WR=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),XR=function(r){WR(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ui.GTIN_SIZE)throw new U;var t=new we;this.encodeCompressedGtin(t,e.HEADER_SIZE);var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ui.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(i),t.append(")");var n=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ui.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(n.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(ui),Tb=XR;var YR=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),qR=function(r){YR(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ui.GTIN_SIZE)throw new U;var t=new we;this.encodeCompressedGtin(t,e.HEADER_SIZE);var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ui.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(i),t.append(")");var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ui.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);n/100===0&&t.append("0"),n/10===0&&t.append("0"),t.append(n);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ui.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(o.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(ui),Db=qR;var $R=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ZR=function(r){$R(e,r);function e(t,i,n){var o=r.call(this,t)||this;return o.dateCode=n,o.firstAIdigits=i,o}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new U;var t=new we;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,i){var n=this.getGeneralDecoder().extractNumericValueFromBitArray(i,e.DATE_SIZE);if(n!==38400){t.append("("),t.append(this.dateCode),t.append(")");var o=n%32;n/=32;var a=n%12+1;n/=12;var s=n;s/10===0&&t.append("0"),t.append(s),a/10===0&&t.append("0"),t.append(a),o/10===0&&t.append("0"),t.append(o)}},e.prototype.addWeightCode=function(t,i){t.append("("),t.append(this.firstAIdigits),t.append(i/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(bs),Ln=ZR;function $m(r){try{if(r.get(1))return new Ib(r);if(!r.get(2))return new Cb(r);var e=ys.extractNumericValueFromBitArray(r,1,4);switch(e){case 4:return new Ab(r);case 5:return new Sb(r)}var t=ys.extractNumericValueFromBitArray(r,1,5);switch(t){case 12:return new Tb(r);case 13:return new Db(r)}var i=ys.extractNumericValueFromBitArray(r,1,7);switch(i){case 56:return new Ln(r,"310","11");case 57:return new Ln(r,"320","11");case 58:return new Ln(r,"310","13");case 59:return new Ln(r,"320","13");case 60:return new Ln(r,"310","15");case 61:return new Ln(r,"320","15");case 62:return new Ln(r,"310","17");case 63:return new Ln(r,"320","17")}}catch(n){throw console.log(n),new Wr("unknown decoder: "+r)}}var KR=function(){function r(e,t,i,n){this.leftchar=e,this.rightchar=t,this.finderpattern=i,this.maybeLast=n}return r.prototype.mayBeLast=function(){return this.maybeLast},r.prototype.getLeftChar=function(){return this.leftchar},r.prototype.getRightChar=function(){return this.rightchar},r.prototype.getFinderPattern=function(){return this.finderpattern},r.prototype.mustBeLast=function(){return this.rightchar==null},r.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},r.equals=function(e,t){return e instanceof r?r.equalsOrNull(e.leftchar,t.leftchar)&&r.equalsOrNull(e.rightchar,t.rightchar)&&r.equalsOrNull(e.finderpattern,t.finderpattern):!1},r.equalsOrNull=function(e,t){return e===null?t===null:r.equals(e,t)},r.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},r}(),Zm=KR;var QR=function(){function r(e,t,i){this.pairs=e,this.rowNumber=t,this.wasReversed=i}return r.prototype.getPairs=function(){return this.pairs},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.isReversed=function(){return this.wasReversed},r.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},r.prototype.toString=function(){return"{ "+this.pairs+" }"},r.prototype.equals=function(e,t){return e instanceof r?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},r.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var i;return e.forEach(function(n,o){t.forEach(function(a){n.getLeftChar().getValue()===a.getLeftChar().getValue()&&n.getRightChar().getValue()===a.getRightChar().getValue()&&n.getFinderPatter().getValue()===a.getFinderPatter().getValue()&&(i=!0)})}),i}},r}(),Ob=QR;var JR=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),lo=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eM=function(r){JR(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,i,n){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,i))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,i))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,i){for(var n=!1;!n;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,t))}catch(s){if(s instanceof U){if(!this.pairs.length)throw new U;n=!0}}if(this.checkChecksum())return this.pairs;var o;if(this.rows.length?o=!0:o=!1,this.storeRow(t,!1),o){var a=this.checkRowsBoolean(!1);if(a!=null||(a=this.checkRowsBoolean(!0),a!=null))return a}throw new U},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var i=null;try{i=this.checkRows(new Array,0)}catch(n){console.log(n)}return t&&(this.rows=this.rows.reverse()),i},e.prototype.checkRows=function(t,i){for(var n,o,a=i;a<this.rows.length;a++){var s=this.rows[a];this.pairs.length=0;try{for(var l=(n=void 0,lo(t)),d=l.next();!d.done;d=l.next()){var h=d.value;this.pairs.push(h.getPairs())}}catch(v){n={error:v}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var p=new Array(t);p.push(s);try{return this.checkRows(p,a+1)}catch(v){console.log(v)}}}throw new U},e.isValidSequence=function(t){var i,n;try{for(var o=lo(e.FINDER_PATTERN_SEQUENCES),a=o.next();!a.done;a=o.next()){var s=a.value;if(!(t.length>s.length)){for(var l=!0,d=0;d<t.length;d++)if(t[d].getFinderPattern().getValue()!==s[d]){l=!1;break}if(l)return!0}}}catch(h){i={error:h}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return!1},e.prototype.storeRow=function(t,i){for(var n=0,o=!1,a=!1;n<this.rows.length;){var s=this.rows[n];if(s.getRowNumber()>t){a=s.isEquivalent(this.pairs);break}o=s.isEquivalent(this.pairs),n++}a||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new Ob(this.pairs,t,i)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,i){var n,o,a,s,l,d;try{for(var h=lo(i),p=h.next();!p.done;p=h.next()){var v=p.value;if(v.getPairs().length!==t.length){var _=!0;try{for(var E=(a=void 0,lo(v.getPairs())),A=E.next();!A.done;A=E.next()){var N=A.value,F=!1;try{for(var P=(l=void 0,lo(t)),L=P.next();!L.done;L=P.next()){var G=L.value;if(Zm.equals(N,G)){F=!0;break}}}catch(Y){l={error:Y}}finally{try{L&&!L.done&&(d=P.return)&&d.call(P)}finally{if(l)throw l.error}}F||(_=!1)}}catch(Y){a={error:Y}}finally{try{A&&!A.done&&(s=E.return)&&s.call(E)}finally{if(a)throw a.error}}}}}catch(Y){n={error:Y}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}},e.isPartialRow=function(t,i){var n,o,a,s,l,d;try{for(var h=lo(i),p=h.next();!p.done;p=h.next()){var v=p.value,_=!0;try{for(var E=(a=void 0,lo(t)),A=E.next();!A.done;A=E.next()){var N=A.value,F=!1;try{for(var P=(l=void 0,lo(v.getPairs())),L=P.next();!L.done;L=P.next()){var G=L.value;if(N.equals(G)){F=!0;break}}}catch(Y){l={error:Y}}finally{try{L&&!L.done&&(d=P.return)&&d.call(P)}finally{if(l)throw l.error}}if(!F){_=!1;break}}}catch(Y){a={error:Y}}finally{try{A&&!A.done&&(s=E.return)&&s.call(E)}finally{if(a)throw a.error}}if(_)return!0}}catch(Y){n={error:Y}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var i=Eb.buildBitArray(t),n=$m(i),o=n.parseInformation(),a=t[0].getFinderPattern().getResultPoints(),s=t[t.length-1].getFinderPattern().getResultPoints(),l=[a[0],a[1],s[0],s[1]];return new Et(o,null,null,l,le.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),i=t.getLeftChar(),n=t.getRightChar();if(n===null)return!1;for(var o=n.getChecksumPortion(),a=2,s=1;s<this.pairs.size();++s){var l=this.pairs.get(s);o+=l.getLeftChar().getChecksumPortion(),a++;var d=l.getRightChar();d!=null&&(o+=d.getChecksumPortion(),a++)}o%=211;var h=211*(a-4)+o;return h===i.getValue()},e.getNextSecondBar=function(t,i){var n;return t.get(i)?(n=t.getNextUnset(i),n=t.getNextSet(n)):(n=t.getNextSet(i),n=t.getNextUnset(n)),n},e.prototype.retrieveNextPair=function(t,i,n){var o=i.length%2===0;this.startFromEven&&(o=!o);var a,s=!0,l=-1;do this.findNextPair(t,i,l),a=this.parseFoundFinderPattern(t,n,o),a===null?l=e.getNextSecondBar(t,this.startEnd[0]):s=!1;while(s);var d=this.decodeDataCharacter(t,a,o,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new U;var h;try{h=this.decodeDataCharacter(t,a,o,!1)}catch(p){h=null,console.log(p)}return new Zm(d,h,a,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,i,n){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var a=t.getSize(),s;if(n>=0)s=n;else if(this.isEmptyPair(i))s=0;else{var l=i[i.length-1];s=l.getFinderPattern().getStartEnd()[1]}var d=i.length%2!==0;this.startFromEven&&(d=!d);for(var h=!1;s<a&&(h=!t.get(s),!!h);)s++;for(var p=0,v=s,_=s;_<a;_++)if(t.get(_)!==h)o[p]++;else{if(p===3){if(d&&e.reverseCounters(o),e.isFinderPattern(o)){this.startEnd[0]=v,this.startEnd[1]=_;return}d&&e.reverseCounters(o),v+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,p--}else p++;o[p]=1,h=!h}throw new U},e.reverseCounters=function(t){for(var i=t.length,n=0;n<i/2;++n){var o=t[n];t[n]=t[i-n-1],t[i-n-1]=o}},e.prototype.parseFoundFinderPattern=function(t,i,n){var o,a,s;if(n){for(var l=this.startEnd[0]-1;l>=0&&!t.get(l);)l--;l++,o=this.startEnd[0]-l,a=l,s=this.startEnd[1]}else a=this.startEnd[0],s=t.getNextUnset(this.startEnd[1]+1),o=s-this.startEnd[1];var d=this.getDecodeFinderCounters();tt.arraycopy(d,0,d,1,d.length-1),d[0]=o;var h;try{h=this.parseFinderValue(d,e.FINDER_PATTERNS)}catch{return null}return new Cd(h,[a,s],a,s,i)},e.prototype.decodeDataCharacter=function(t,i,n,o){for(var a=this.getDataCharacterCounters(),s=0;s<a.length;s++)a[s]=0;if(o)e.recordPatternInReverse(t,i.getStartEnd()[0],a);else{e.recordPattern(t,i.getStartEnd()[1],a);for(var l=0,d=a.length-1;l<d;l++,d--){var h=a[l];a[l]=a[d],a[d]=h}}var p=17,v=rt.sum(new Int32Array(a))/p,_=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(v-_)/_>.3)throw new U;for(var E=this.getOddCounts(),A=this.getEvenCounts(),N=this.getOddRoundingErrors(),F=this.getEvenRoundingErrors(),l=0;l<a.length;l++){var P=1*a[l]/v,L=P+.5;if(L<1){if(P<.3)throw new U;L=1}else if(L>8){if(P>8.7)throw new U;L=8}var G=l/2;l&1?(A[G]=L,F[G]=P-L):(E[G]=L,N[G]=P-L)}this.adjustOddEvenCounts(p);for(var Y=4*i.getValue()+(n?0:2)+(o?0:1)-1,Q=0,ie=0,l=E.length-1;l>=0;l--){if(e.isNotA1left(i,n,o)){var ye=e.WEIGHTS[Y][2*l];ie+=E[l]*ye}Q+=E[l]}for(var Ne=0,l=A.length-1;l>=0;l--)if(e.isNotA1left(i,n,o)){var ye=e.WEIGHTS[Y][2*l+1];Ne+=A[l]*ye}var Ge=ie+Ne;if(Q&1||Q>13||Q<4)throw new U;var At=(13-Q)/2,nt=e.SYMBOL_WIDEST[At],wt=9-nt,Ur=oo.getRSSvalue(E,nt,!0),ji=oo.getRSSvalue(A,wt,!1),ha=e.EVEN_TOTAL_SUBSET[At],ho=e.GSUM[At],pa=Ur*ha+ji+ho;return new la(pa,Ge)},e.isNotA1left=function(t,i,n){return!(t.getValue()===0&&i&&n)},e.prototype.adjustOddEvenCounts=function(t){var i=rt.sum(new Int32Array(this.getOddCounts())),n=rt.sum(new Int32Array(this.getEvenCounts())),o=!1,a=!1;i>13?a=!0:i<4&&(o=!0);var s=!1,l=!1;n>13?l=!0:n<4&&(s=!0);var d=i+n-t,h=(i&1)===1,p=(n&1)===0;if(d===1)if(h){if(p)throw new U;a=!0}else{if(!p)throw new U;l=!0}else if(d===-1)if(h){if(p)throw new U;o=!0}else{if(!p)throw new U;s=!0}else if(d===0){if(h){if(!p)throw new U;i<n?(o=!0,l=!0):(a=!0,s=!0)}else if(p)throw new U}else throw new U;if(o){if(a)throw new U;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(l)throw new U;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(kn),Km=eM;var tM=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),rM=function(r){tM(e,r);function e(t,i,n){var o=r.call(this,t,i)||this;return o.count=0,o.finderPattern=n,o}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(la),Rb=rM;var iM=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Qm=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nM=function(r){iM(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,i,n){var o,a,s,l,d=this.decodePair(i,!1,t,n);e.addOrTally(this.possibleLeftPairs,d),i.reverse();var h=this.decodePair(i,!0,t,n);e.addOrTally(this.possibleRightPairs,h),i.reverse();try{for(var p=Qm(this.possibleLeftPairs),v=p.next();!v.done;v=p.next()){var _=v.value;if(_.getCount()>1)try{for(var E=(s=void 0,Qm(this.possibleRightPairs)),A=E.next();!A.done;A=E.next()){var N=A.value;if(N.getCount()>1&&e.checkChecksum(_,N))return e.constructResult(_,N)}}catch(F){s={error:F}}finally{try{A&&!A.done&&(l=E.return)&&l.call(E)}finally{if(s)throw s.error}}}}catch(F){o={error:F}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}throw new U},e.addOrTally=function(t,i){var n,o;if(i!=null){var a=!1;try{for(var s=Qm(t),l=s.next();!l.done;l=s.next()){var d=l.value;if(d.getValue()===i.getValue()){d.incrementCount(),a=!0;break}}}catch(h){n={error:h}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}a||t.push(i)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,i){for(var n=4537077*t.getValue()+i.getValue(),o=new String(n).toString(),a=new we,s=13-o.length;s>0;s--)a.append("0");a.append(o);for(var l=0,s=0;s<13;s++){var d=a.charAt(s).charCodeAt(0)-48;l+=s&1?d:3*d}l=10-l%10,l===10&&(l=0),a.append(l.toString());var h=t.getFinderPattern().getResultPoints(),p=i.getFinderPattern().getResultPoints();return new Et(a.toString(),null,0,[h[0],h[1],p[0],p[1]],le.RSS_14,new Date().getTime())},e.checkChecksum=function(t,i){var n=(t.getChecksumPortion()+16*i.getChecksumPortion())%79,o=9*t.getFinderPattern().getValue()+i.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,n===o},e.prototype.decodePair=function(t,i,n,o){try{var a=this.findFinderPattern(t,i),s=this.parseFoundFinderPattern(t,n,i,a),l=o==null?null:o.get(st.NEED_RESULT_POINT_CALLBACK);if(l!=null){var d=(a[0]+a[1])/2;i&&(d=t.getSize()-1-d),l.foundPossibleResultPoint(new ue(d,n))}var h=this.decodeDataCharacter(t,s,!0),p=this.decodeDataCharacter(t,s,!1);return new Rb(1597*h.getValue()+p.getValue(),h.getChecksumPortion()+4*p.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(t,i,n){for(var o=this.getDataCharacterCounters(),a=0;a<o.length;a++)o[a]=0;if(n)kt.recordPatternInReverse(t,i.getStartEnd()[0],o);else{kt.recordPattern(t,i.getStartEnd()[1]+1,o);for(var s=0,l=o.length-1;s<l;s++,l--){var d=o[s];o[s]=o[l],o[l]=d}}for(var h=n?16:15,p=rt.sum(new Int32Array(o))/h,v=this.getOddCounts(),_=this.getEvenCounts(),E=this.getOddRoundingErrors(),A=this.getEvenRoundingErrors(),s=0;s<o.length;s++){var N=o[s]/p,F=Math.floor(N+.5);F<1?F=1:F>8&&(F=8);var P=Math.floor(s/2);s&1?(_[P]=F,A[P]=N-F):(v[P]=F,E[P]=N-F)}this.adjustOddEvenCounts(n,h);for(var L=0,G=0,s=v.length-1;s>=0;s--)G*=9,G+=v[s],L+=v[s];for(var Y=0,Q=0,s=_.length-1;s>=0;s--)Y*=9,Y+=_[s],Q+=_[s];var ie=G+3*Y;if(n){if(L&1||L>12||L<4)throw new U;var ye=(12-L)/2,Ne=e.OUTSIDE_ODD_WIDEST[ye],Ge=9-Ne,At=oo.getRSSvalue(v,Ne,!1),nt=oo.getRSSvalue(_,Ge,!0),wt=e.OUTSIDE_EVEN_TOTAL_SUBSET[ye],Ur=e.OUTSIDE_GSUM[ye];return new la(At*wt+nt+Ur,ie)}else{if(Q&1||Q>10||Q<4)throw new U;var ye=(10-Q)/2,Ne=e.INSIDE_ODD_WIDEST[ye],Ge=9-Ne,At=oo.getRSSvalue(v,Ne,!0),nt=oo.getRSSvalue(_,Ge,!1),ji=e.INSIDE_ODD_TOTAL_SUBSET[ye],Ur=e.INSIDE_GSUM[ye];return new la(nt*ji+At+Ur,ie)}},e.prototype.findFinderPattern=function(t,i){var n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;for(var o=t.getSize(),a=!1,s=0;s<o&&(a=!t.get(s),i!==a);)s++;for(var l=0,d=s,h=s;h<o;h++)if(t.get(h)!==a)n[l]++;else{if(l===3){if(kn.isFinderPattern(n))return[d,h];d+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,l--}else l++;n[l]=1,a=!a}throw new U},e.prototype.parseFoundFinderPattern=function(t,i,n,o){for(var a=t.get(o[0]),s=o[0]-1;s>=0&&a!==t.get(s);)s--;s++;var l=o[0]-s,d=this.getDecodeFinderCounters(),h=new Int32Array(d.length);tt.arraycopy(d,0,h,1,d.length-1),h[0]=l;var p=this.parseFinderValue(h,e.FINDER_PATTERNS),v=s,_=o[1];return n&&(v=t.getSize()-1-v,_=t.getSize()-1-_),new Cd(p,[s,o[1]],v,_,i)},e.prototype.adjustOddEvenCounts=function(t,i){var n=rt.sum(new Int32Array(this.getOddCounts())),o=rt.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1,l=!1,d=!1;t?(n>12?s=!0:n<4&&(a=!0),o>12?d=!0:o<4&&(l=!0)):(n>11?s=!0:n<5&&(a=!0),o>10?d=!0:o<4&&(l=!0));var h=n+o-i,p=(n&1)===(t?1:0),v=(o&1)===1;if(h===1)if(p){if(v)throw new U;s=!0}else{if(!v)throw new U;d=!0}else if(h===-1)if(p){if(v)throw new U;a=!0}else{if(!v)throw new U;l=!0}else if(h===0){if(p){if(!v)throw new U;n<o?(a=!0,d=!0):(s=!0,l=!0)}else if(v)throw new U}else throw new U;if(a){if(s)throw new U;kn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&kn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(d)throw new U;kn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&kn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(kn),Td=nM;var oM=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),aM=function(r){oM(e,r);function e(t){var i=r.call(this)||this;i.readers=[];var n=t?t.get(st.POSSIBLE_FORMATS):null,o=t&&t.get(st.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,a=t&&t.get(st.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return n&&((n.includes(le.EAN_13)||n.includes(le.UPC_A)||n.includes(le.EAN_8)||n.includes(le.UPC_E))&&i.readers.push(new Id(t)),n.includes(le.CODE_39)&&i.readers.push(new xd(o,a)),n.includes(le.CODE_93)&&i.readers.push(new Ed),n.includes(le.CODE_128)&&i.readers.push(new bd),n.includes(le.ITF)&&i.readers.push(new wd),n.includes(le.CODABAR)&&i.readers.push(new qm),n.includes(le.RSS_14)&&i.readers.push(new Td),n.includes(le.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),i.readers.push(new Km))),i.readers.length===0&&(i.readers.push(new Id(t)),i.readers.push(new xd),i.readers.push(new Ed),i.readers.push(new Id(t)),i.readers.push(new bd),i.readers.push(new wd),i.readers.push(new Td)),i}return e.prototype.decodeRow=function(t,i,n){for(var o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(t,i,n)}catch{}throw new U},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(kt),co=aM;var sM=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),qU=function(r){sM(e,r);function e(t,i){return t===void 0&&(t=500),r.call(this,new co(i),t,i)||this}return e}(Bi);var Mb=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lt=function(){function r(e,t,i){this.ecCodewords=e,this.ecBlocks=[t],i&&this.ecBlocks.push(i)}return r.prototype.getECCodewords=function(){return this.ecCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r}();var Ot=function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r}();var lM=function(){function r(e,t,i,n,o,a){var s,l;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=i,this.dataRegionSizeRows=n,this.dataRegionSizeColumns=o,this.ecBlocks=a;var d=0,h=a.getECCodewords(),p=a.getECBlocks();try{for(var v=Mb(p),_=v.next();!_.done;_=v.next()){var E=_.value;d+=E.getCount()*(E.getDataCodewords()+h)}}catch(A){s={error:A}}finally{try{_&&!_.done&&(l=v.return)&&l.call(v)}finally{if(s)throw s.error}}this.totalCodewords=d}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},r.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},r.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},r.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r.getVersionForDimensions=function(e,t){var i,n;if(e&1||t&1)throw new J;try{for(var o=Mb(r.VERSIONS),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===t)return s}}catch(l){i={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}throw new J},r.prototype.toString=function(){return""+this.versionNumber},r.buildVersions=function(){return[new r(1,10,10,8,8,new Lt(5,new Ot(1,3))),new r(2,12,12,10,10,new Lt(7,new Ot(1,5))),new r(3,14,14,12,12,new Lt(10,new Ot(1,8))),new r(4,16,16,14,14,new Lt(12,new Ot(1,12))),new r(5,18,18,16,16,new Lt(14,new Ot(1,18))),new r(6,20,20,18,18,new Lt(18,new Ot(1,22))),new r(7,22,22,20,20,new Lt(20,new Ot(1,30))),new r(8,24,24,22,22,new Lt(24,new Ot(1,36))),new r(9,26,26,24,24,new Lt(28,new Ot(1,44))),new r(10,32,32,14,14,new Lt(36,new Ot(1,62))),new r(11,36,36,16,16,new Lt(42,new Ot(1,86))),new r(12,40,40,18,18,new Lt(48,new Ot(1,114))),new r(13,44,44,20,20,new Lt(56,new Ot(1,144))),new r(14,48,48,22,22,new Lt(68,new Ot(1,174))),new r(15,52,52,24,24,new Lt(42,new Ot(2,102))),new r(16,64,64,14,14,new Lt(56,new Ot(2,140))),new r(17,72,72,16,16,new Lt(36,new Ot(4,92))),new r(18,80,80,18,18,new Lt(48,new Ot(4,114))),new r(19,88,88,20,20,new Lt(56,new Ot(4,144))),new r(20,96,96,22,22,new Lt(68,new Ot(4,174))),new r(21,104,104,24,24,new Lt(56,new Ot(6,136))),new r(22,120,120,18,18,new Lt(68,new Ot(6,175))),new r(23,132,132,20,20,new Lt(62,new Ot(8,163))),new r(24,144,144,22,22,new Lt(62,new Ot(8,156),new Ot(2,155))),new r(25,8,18,6,16,new Lt(7,new Ot(1,5))),new r(26,8,32,6,14,new Lt(11,new Ot(1,10))),new r(27,12,26,10,24,new Lt(14,new Ot(1,16))),new r(28,12,36,10,16,new Lt(18,new Ot(1,22))),new r(29,16,36,14,16,new Lt(24,new Ot(1,32))),new r(30,16,48,14,22,new Lt(28,new Ot(1,49)))]},r.VERSIONS=r.buildVersions(),r}(),Pb=lM;var cM=function(){function r(e){var t=e.getHeight();if(t<8||t>144||t&1)throw new J;this.version=r.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Zt(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return r.prototype.getVersion=function(){return this.version},r.readVersion=function(e){var t=e.getHeight(),i=e.getWidth();return Pb.getVersionForDimensions(t,i)},r.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,i=4,n=0,o=this.mappingBitMatrix.getHeight(),a=this.mappingBitMatrix.getWidth(),s=!1,l=!1,d=!1,h=!1;do if(i===o&&n===0&&!s)e[t++]=this.readCorner1(o,a)&255,i-=2,n+=2,s=!0;else if(i===o-2&&n===0&&a&3&&!l)e[t++]=this.readCorner2(o,a)&255,i-=2,n+=2,l=!0;else if(i===o+4&&n===2&&!(a&7)&&!d)e[t++]=this.readCorner3(o,a)&255,i-=2,n+=2,d=!0;else if(i===o-2&&n===0&&(a&7)===4&&!h)e[t++]=this.readCorner4(o,a)&255,i-=2,n+=2,h=!0;else{do i<o&&n>=0&&!this.readMappingMatrix.get(n,i)&&(e[t++]=this.readUtah(i,n,o,a)&255),i-=2,n+=2;while(i>=0&&n<a);i+=1,n+=3;do i>=0&&n<a&&!this.readMappingMatrix.get(n,i)&&(e[t++]=this.readUtah(i,n,o,a)&255),i+=2,n-=2;while(i<o&&n>=0);i+=3,n+=1}while(i<o||n<a);if(t!==this.version.getTotalCodewords())throw new J;return e},r.prototype.readModule=function(e,t,i,n){return e<0&&(e+=i,t+=4-(i+4&7)),t<0&&(t+=n,e+=4-(n+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},r.prototype.readUtah=function(e,t,i,n){var o=0;return this.readModule(e-2,t-2,i,n)&&(o|=1),o<<=1,this.readModule(e-2,t-1,i,n)&&(o|=1),o<<=1,this.readModule(e-1,t-2,i,n)&&(o|=1),o<<=1,this.readModule(e-1,t-1,i,n)&&(o|=1),o<<=1,this.readModule(e-1,t,i,n)&&(o|=1),o<<=1,this.readModule(e,t-2,i,n)&&(o|=1),o<<=1,this.readModule(e,t-1,i,n)&&(o|=1),o<<=1,this.readModule(e,t,i,n)&&(o|=1),o},r.prototype.readCorner1=function(e,t){var i=0;return this.readModule(e-1,0,e,t)&&(i|=1),i<<=1,this.readModule(e-1,1,e,t)&&(i|=1),i<<=1,this.readModule(e-1,2,e,t)&&(i|=1),i<<=1,this.readModule(0,t-2,e,t)&&(i|=1),i<<=1,this.readModule(0,t-1,e,t)&&(i|=1),i<<=1,this.readModule(1,t-1,e,t)&&(i|=1),i<<=1,this.readModule(2,t-1,e,t)&&(i|=1),i<<=1,this.readModule(3,t-1,e,t)&&(i|=1),i},r.prototype.readCorner2=function(e,t){var i=0;return this.readModule(e-3,0,e,t)&&(i|=1),i<<=1,this.readModule(e-2,0,e,t)&&(i|=1),i<<=1,this.readModule(e-1,0,e,t)&&(i|=1),i<<=1,this.readModule(0,t-4,e,t)&&(i|=1),i<<=1,this.readModule(0,t-3,e,t)&&(i|=1),i<<=1,this.readModule(0,t-2,e,t)&&(i|=1),i<<=1,this.readModule(0,t-1,e,t)&&(i|=1),i<<=1,this.readModule(1,t-1,e,t)&&(i|=1),i},r.prototype.readCorner3=function(e,t){var i=0;return this.readModule(e-1,0,e,t)&&(i|=1),i<<=1,this.readModule(e-1,t-1,e,t)&&(i|=1),i<<=1,this.readModule(0,t-3,e,t)&&(i|=1),i<<=1,this.readModule(0,t-2,e,t)&&(i|=1),i<<=1,this.readModule(0,t-1,e,t)&&(i|=1),i<<=1,this.readModule(1,t-3,e,t)&&(i|=1),i<<=1,this.readModule(1,t-2,e,t)&&(i|=1),i<<=1,this.readModule(1,t-1,e,t)&&(i|=1),i},r.prototype.readCorner4=function(e,t){var i=0;return this.readModule(e-3,0,e,t)&&(i|=1),i<<=1,this.readModule(e-2,0,e,t)&&(i|=1),i<<=1,this.readModule(e-1,0,e,t)&&(i|=1),i<<=1,this.readModule(0,t-2,e,t)&&(i|=1),i<<=1,this.readModule(0,t-1,e,t)&&(i|=1),i<<=1,this.readModule(1,t-1,e,t)&&(i|=1),i<<=1,this.readModule(2,t-1,e,t)&&(i|=1),i<<=1,this.readModule(3,t-1,e,t)&&(i|=1),i},r.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),i=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new ae("Dimension of bitMatrix must match the version size");for(var n=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),a=t/n|0,s=i/o|0,l=a*n,d=s*o,h=new Zt(d,l),p=0;p<a;++p)for(var v=p*n,_=0;_<s;++_)for(var E=_*o,A=0;A<n;++A)for(var N=p*(n+2)+1+A,F=v+A,P=0;P<o;++P){var L=_*(o+2)+1+P;if(e.get(L,N)){var G=E+P;h.set(G,F)}}return h},r}(),Nb=cM;var Fb=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uM=function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t){var i,n,o,a,s=t.getECBlocks(),l=0,d=s.getECBlocks();try{for(var h=Fb(d),p=h.next();!p.done;p=h.next()){var v=p.value;l+=v.getCount()}}catch(Ur){i={error:Ur}}finally{try{p&&!p.done&&(n=h.return)&&n.call(h)}finally{if(i)throw i.error}}var _=new Array(l),E=0;try{for(var A=Fb(d),N=A.next();!N.done;N=A.next())for(var v=N.value,F=0;F<v.getCount();F++){var P=v.getDataCodewords(),L=s.getECCodewords()+P;_[E++]=new r(P,new Uint8Array(L))}}catch(Ur){o={error:Ur}}finally{try{N&&!N.done&&(a=A.return)&&a.call(A)}finally{if(o)throw o.error}}for(var G=_[0].codewords.length,Y=G-s.getECCodewords(),Q=Y-1,ie=0,F=0;F<Q;F++)for(var ye=0;ye<E;ye++)_[ye].codewords[F]=e[ie++];for(var Ne=t.getVersionNumber()===24,Ge=Ne?8:E,ye=0;ye<Ge;ye++)_[ye].codewords[Y-1]=e[ie++];for(var At=_[0].codewords.length,F=Y;F<At;F++)for(var ye=0;ye<E;ye++){var nt=Ne?(ye+8)%E:ye,wt=Ne&&nt>7?F-1:F;_[nt].codewords[wt]=e[ie++]}if(ie!==e.length)throw new ae;return _},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r}(),kb=uM;var dM=function(){function r(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return r.prototype.getBitOffset=function(){return this.bitOffset},r.prototype.getByteOffset=function(){return this.byteOffset},r.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new ae(""+e);var t=0,i=this.bitOffset,n=this.byteOffset,o=this.bytes;if(i>0){var a=8-i,s=e<a?e:a,l=a-s,d=255>>8-s<<l;t=(o[n]&d)>>l,e-=s,i+=s,i===8&&(i=0,n++)}if(e>0){for(;e>=8;)t=t<<8|o[n]&255,n++,e-=8;if(e>0){var l=8-e,d=255>>l<<l;t=t<<e|(o[n]&d)>>l,i+=e}}return this.bitOffset=i,this.byteOffset=n,t},r.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},r}(),ec=dM;var Br=function(r){return r[r.PAD_ENCODE=0]="PAD_ENCODE",r[r.ASCII_ENCODE=1]="ASCII_ENCODE",r[r.C40_ENCODE=2]="C40_ENCODE",r[r.TEXT_ENCODE=3]="TEXT_ENCODE",r[r.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",r[r.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",r[r.BASE256_ENCODE=6]="BASE256_ENCODE",r}(Br||{}),fM=function(){function r(){}return r.decode=function(e){var t=new ec(e),i=new we,n=new we,o=new Array,a=Br.ASCII_ENCODE;do if(a===Br.ASCII_ENCODE)a=this.decodeAsciiSegment(t,i,n);else{switch(a){case Br.C40_ENCODE:this.decodeC40Segment(t,i);break;case Br.TEXT_ENCODE:this.decodeTextSegment(t,i);break;case Br.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,i);break;case Br.EDIFACT_ENCODE:this.decodeEdifactSegment(t,i);break;case Br.BASE256_ENCODE:this.decodeBase256Segment(t,i,o);break;default:throw new J}a=Br.ASCII_ENCODE}while(a!==Br.PAD_ENCODE&&t.available()>0);return n.length()>0&&i.append(n.toString()),new Nn(e,i.toString(),o.length===0?null:o,null)},r.decodeAsciiSegment=function(e,t,i){var n=!1;do{var o=e.readBits(8);if(o===0)throw new J;if(o<=128)return n&&(o+=128),t.append(String.fromCharCode(o-1)),Br.ASCII_ENCODE;if(o===129)return Br.PAD_ENCODE;if(o<=229){var a=o-130;a<10&&t.append("0"),t.append(""+a)}else switch(o){case 230:return Br.C40_ENCODE;case 231:return Br.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:n=!0;break;case 236:t.append("[)>05"),i.insert(0,"");break;case 237:t.append("[)>06"),i.insert(0,"");break;case 238:return Br.ANSIX12_ENCODE;case 239:return Br.TEXT_ENCODE;case 240:return Br.EDIFACT_ENCODE;case 241:break;default:if(o!==254||e.available()!==0)throw new J;break}}while(e.available()>0);return Br.ASCII_ENCODE},r.decodeC40Segment=function(e,t){var i=!1,n=[],o=0;do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),n);for(var s=0;s<3;s++){var l=n[s];switch(o){case 0:if(l<3)o=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var d=this.C40_BASIC_SET_CHARS[l];i?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),i=!1):t.append(d)}else throw new J;break;case 1:i?(t.append(String.fromCharCode(l+128)),i=!1):t.append(String.fromCharCode(l)),o=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var d=this.C40_SHIFT2_SET_CHARS[l];i?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),i=!1):t.append(d)}else switch(l){case 27:t.append("");break;case 30:i=!0;break;default:throw new J}o=0;break;case 3:i?(t.append(String.fromCharCode(l+224)),i=!1):t.append(String.fromCharCode(l+96)),o=0;break;default:throw new J}}}while(e.available()>0)},r.decodeTextSegment=function(e,t){var i=!1,n=[],o=0;do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),n);for(var s=0;s<3;s++){var l=n[s];switch(o){case 0:if(l<3)o=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var d=this.TEXT_BASIC_SET_CHARS[l];i?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),i=!1):t.append(d)}else throw new J;break;case 1:i?(t.append(String.fromCharCode(l+128)),i=!1):t.append(String.fromCharCode(l)),o=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var d=this.TEXT_SHIFT2_SET_CHARS[l];i?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),i=!1):t.append(d)}else switch(l){case 27:t.append("");break;case 30:i=!0;break;default:throw new J}o=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var d=this.TEXT_SHIFT3_SET_CHARS[l];i?(t.append(String.fromCharCode(d.charCodeAt(0)+128)),i=!1):t.append(d),o=0}else throw new J;break;default:throw new J}}}while(e.available()>0)},r.decodeAnsiX12Segment=function(e,t){var i=[];do{if(e.available()===8)return;var n=e.readBits(8);if(n===254)return;this.parseTwoBytes(n,e.readBits(8),i);for(var o=0;o<3;o++){var a=i[o];switch(a){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(a<14)t.append(String.fromCharCode(a+44));else if(a<40)t.append(String.fromCharCode(a+51));else throw new J;break}}}while(e.available()>0)},r.parseTwoBytes=function(e,t,i){var n=(e<<8)+t-1,o=Math.floor(n/1600);i[0]=o,n-=o*1600,o=Math.floor(n/40),i[1]=o,i[2]=n-o*40},r.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var i=0;i<4;i++){var n=e.readBits(6);if(n===31){var o=8-e.getBitOffset();o!==8&&e.readBits(o);return}n&32||(n|=64),t.append(String.fromCharCode(n))}}while(e.available()>0)},r.decodeBase256Segment=function(e,t,i){var n=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),n++),a;if(o===0?a=e.available()/8|0:o<250?a=o:a=250*(o-249)+this.unrandomize255State(e.readBits(8),n++),a<0)throw new J;for(var s=new Uint8Array(a),l=0;l<a;l++){if(e.available()<8)throw new J;s[l]=this.unrandomize255State(e.readBits(8),n++)}i.push(s);try{t.append(Pr.decode(s,We.ISO88591))}catch(d){throw new Wr("Platform does not support required encoding: "+d.message)}},r.unrandomize255State=function(e,t){var i=149*t%255+1,n=e-i;return n>=0?n:n+256},r.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],r.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],r.TEXT_SHIFT2_SET_CHARS=r.C40_SHIFT2_SET_CHARS,r.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~","\x7F"],r}(),Jm=fM;var hM=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pM=function(){function r(){this.rsDecoder=new Fn(_r.DATA_MATRIX_FIELD_256)}return r.prototype.decode=function(e){var t,i,n=new Nb(e),o=n.getVersion(),a=n.readCodewords(),s=kb.getDataBlocks(a,o),l=0;try{for(var d=hM(s),h=d.next();!h.done;h=d.next()){var p=h.value;l+=p.getNumDataCodewords()}}catch(L){t={error:L}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(t)throw t.error}}for(var v=new Uint8Array(l),_=s.length,E=0;E<_;E++){var A=s[E],N=A.getCodewords(),F=A.getNumDataCodewords();this.correctErrors(N,F);for(var P=0;P<F;P++)v[P*_+E]=N[P]}return Jm.decode(v)},r.prototype.correctErrors=function(e,t){var i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-t)}catch{throw new Ut}for(var n=0;n<t;n++)e[n]=i[n]},r}(),Lb=pM;var mM=function(){function r(e){this.image=e,this.rectangleDetector=new ms(this.image)}return r.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new U;t=this.shiftToModuleCenter(t);var i=t[0],n=t[1],o=t[2],a=t[3],s=this.transitionsBetween(i,a)+1,l=this.transitionsBetween(o,a)+1;(s&1)===1&&(s+=1),(l&1)===1&&(l+=1),4*s<7*l&&4*l<7*s&&(s=l=Math.max(s,l));var d=r.sampleGrid(this.image,i,n,o,a,s,l);return new aa(d,[i,n,o,a])},r.shiftPoint=function(e,t,i){var n=(t.getX()-e.getX())/(i+1),o=(t.getY()-e.getY())/(i+1);return new ue(e.getX()+n,e.getY()+o)},r.moveAway=function(e,t,i){var n=e.getX(),o=e.getY();return n<t?n-=1:n+=1,o<i?o-=1:o+=1,new ue(n,o)},r.prototype.detectSolid1=function(e){var t=e[0],i=e[1],n=e[3],o=e[2],a=this.transitionsBetween(t,i),s=this.transitionsBetween(i,n),l=this.transitionsBetween(n,o),d=this.transitionsBetween(o,t),h=a,p=[o,t,i,n];return h>s&&(h=s,p[0]=t,p[1]=i,p[2]=n,p[3]=o),h>l&&(h=l,p[0]=i,p[1]=n,p[2]=o,p[3]=t),h>d&&(p[0]=n,p[1]=o,p[2]=t,p[3]=i),p},r.prototype.detectSolid2=function(e){var t=e[0],i=e[1],n=e[2],o=e[3],a=this.transitionsBetween(t,o),s=r.shiftPoint(i,n,(a+1)*4),l=r.shiftPoint(n,i,(a+1)*4),d=this.transitionsBetween(s,t),h=this.transitionsBetween(l,o);return d<h?(e[0]=t,e[1]=i,e[2]=n,e[3]=o):(e[0]=i,e[1]=n,e[2]=o,e[3]=t),e},r.prototype.correctTopRight=function(e){var t=e[0],i=e[1],n=e[2],o=e[3],a=this.transitionsBetween(t,o),s=this.transitionsBetween(i,o),l=r.shiftPoint(t,i,(s+1)*4),d=r.shiftPoint(n,i,(a+1)*4);a=this.transitionsBetween(l,o),s=this.transitionsBetween(d,o);var h=new ue(o.getX()+(n.getX()-i.getX())/(a+1),o.getY()+(n.getY()-i.getY())/(a+1)),p=new ue(o.getX()+(t.getX()-i.getX())/(s+1),o.getY()+(t.getY()-i.getY())/(s+1));if(!this.isValid(h))return this.isValid(p)?p:null;if(!this.isValid(p))return h;var v=this.transitionsBetween(l,h)+this.transitionsBetween(d,h),_=this.transitionsBetween(l,p)+this.transitionsBetween(d,p);return v>_?h:p},r.prototype.shiftToModuleCenter=function(e){var t=e[0],i=e[1],n=e[2],o=e[3],a=this.transitionsBetween(t,o)+1,s=this.transitionsBetween(n,o)+1,l=r.shiftPoint(t,i,s*4),d=r.shiftPoint(n,i,a*4);a=this.transitionsBetween(l,o)+1,s=this.transitionsBetween(d,o)+1,(a&1)===1&&(a+=1),(s&1)===1&&(s+=1);var h=(t.getX()+i.getX()+n.getX()+o.getX())/4,p=(t.getY()+i.getY()+n.getY()+o.getY())/4;t=r.moveAway(t,h,p),i=r.moveAway(i,h,p),n=r.moveAway(n,h,p),o=r.moveAway(o,h,p);var v,_;return l=r.shiftPoint(t,i,s*4),l=r.shiftPoint(l,o,a*4),v=r.shiftPoint(i,t,s*4),v=r.shiftPoint(v,n,a*4),d=r.shiftPoint(n,o,s*4),d=r.shiftPoint(d,i,a*4),_=r.shiftPoint(o,n,s*4),_=r.shiftPoint(_,t,a*4),[l,v,d,_]},r.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},r.sampleGrid=function(e,t,i,n,o,a,s){var l=sa.getInstance();return l.sampleGrid(e,a,s,.5,.5,a-.5,.5,a-.5,s-.5,.5,s-.5,t.getX(),t.getY(),o.getX(),o.getY(),n.getX(),n.getY(),i.getX(),i.getY())},r.prototype.transitionsBetween=function(e,t){var i=Math.trunc(e.getX()),n=Math.trunc(e.getY()),o=Math.trunc(t.getX()),a=Math.trunc(t.getY()),s=Math.abs(a-n)>Math.abs(o-i);if(s){var l=i;i=n,n=l,l=o,o=a,a=l}for(var d=Math.abs(o-i),h=Math.abs(a-n),p=-d/2,v=n<a?1:-1,_=i<o?1:-1,E=0,A=this.image.get(s?n:i,s?i:n),N=i,F=n;N!==o;N+=_){var P=this.image.get(s?F:N,s?N:F);if(P!==A&&(E++,A=P),p+=h,p>0){if(F===a)break;F+=v,p-=d}}return E},r}(),Bb=mM;var gM=function(){function r(){this.decoder=new Lb}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var i,n;if(t!=null&&t.has(st.PURE_BARCODE)){var o=r.extractPureBits(e.getBlackMatrix());i=this.decoder.decode(o),n=r.NO_POINTS}else{var a=new Bb(e.getBlackMatrix()).detect();i=this.decoder.decode(a.getBits()),n=a.getPoints()}var s=i.getRawBytes(),l=new Et(i.getText(),s,8*s.length,n,le.DATA_MATRIX,tt.currentTimeMillis()),d=i.getByteSegments();d!=null&&l.putMetadata(Jt.BYTE_SEGMENTS,d);var h=i.getECLevel();return h!=null&&l.putMetadata(Jt.ERROR_CORRECTION_LEVEL,h),l},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(t==null||i==null)throw new U;var n=this.moduleSize(t,e),o=t[1],a=i[1],s=t[0],l=i[0],d=(l-s+1)/n,h=(a-o+1)/n;if(d<=0||h<=0)throw new U;var p=n/2;o+=p,s+=p;for(var v=new Zt(d,h),_=0;_<h;_++)for(var E=o+_*n,A=0;A<d;A++)e.get(s+A*n,E)&&v.set(A,_);return v},r.moduleSize=function(e,t){for(var i=t.getWidth(),n=e[0],o=e[1];n<i&&t.get(n,o);)n++;if(n===i)throw new U;var a=n-e[0];if(a===0)throw new U;return a},r.NO_POINTS=[],r}(),xs=gM;var vM=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),UG=function(r){vM(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new xs,t)||this}return e}(Bi);var tc=function(r){return r[r.L=0]="L",r[r.M=1]="M",r[r.Q=2]="Q",r[r.H=3]="H",r}(tc||{}),_M=function(){function r(e,t,i){this.value=e,this.stringValue=t,this.bits=i,r.FOR_BITS.set(i,this),r.FOR_VALUE.set(e,this)}return r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.fromString=function(e){switch(e){case"L":return r.L;case"M":return r.M;case"Q":return r.Q;case"H":return r.H;default:throw new vi(e+"not available")}},r.prototype.toString=function(){return this.stringValue},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.forBits=function(e){if(e<0||e>=r.FOR_BITS.size)throw new ae;return r.FOR_BITS.get(e)},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.L=new r(tc.L,"L",1),r.M=new r(tc.M,"M",0),r.Q=new r(tc.Q,"Q",3),r.H=new r(tc.H,"H",2),r}(),Bn=_M;var yM=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bM=function(){function r(e){this.errorCorrectionLevel=Bn.forBits(e>>3&3),this.dataMask=e&7}return r.numBitsDiffering=function(e,t){return Pe.bitCount(e^t)},r.decodeFormatInformation=function(e,t){var i=r.doDecodeFormatInformation(e,t);return i!==null?i:r.doDecodeFormatInformation(e^r.FORMAT_INFO_MASK_QR,t^r.FORMAT_INFO_MASK_QR)},r.doDecodeFormatInformation=function(e,t){var i,n,o=Number.MAX_SAFE_INTEGER,a=0;try{for(var s=yM(r.FORMAT_INFO_DECODE_LOOKUP),l=s.next();!l.done;l=s.next()){var d=l.value,h=d[0];if(h===e||h===t)return new r(d[1]);var p=r.numBitsDiffering(e,h);p<o&&(a=d[1],o=p),e!==t&&(p=r.numBitsDiffering(t,h),p<o&&(a=d[1],o=p))}}catch(v){i={error:v}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o<=3?new r(a):null},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getDataMask=function(){return this.dataMask},r.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},r.FORMAT_INFO_MASK_QR=21522,r.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],r}(),rc=bM;var xM=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},EM=function(){function r(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return r.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},r.prototype.getNumBlocks=function(){var e,t,i=0,n=this.ecBlocks;try{for(var o=xM(n),a=o.next();!a.done;a=o.next()){var s=a.value;i+=s.getCount()}}catch(l){e={error:l}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return i},r.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},r.prototype.getECBlocks=function(){return this.ecBlocks},r}(),j=EM;var wM=function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r}(),O=wM;var IM=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CM=function(){function r(e,t){for(var i,n,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=o;var s=0,l=o[0].getECCodewordsPerBlock(),d=o[0].getECBlocks();try{for(var h=IM(d),p=h.next();!p.done;p=h.next()){var v=p.value;s+=v.getCount()*(v.getDataCodewords()+l)}}catch(_){i={error:_}}finally{try{p&&!p.done&&(n=h.return)&&n.call(h)}finally{if(i)throw i.error}}this.totalCodewords=s}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},r.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},r.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new J;try{return this.getVersionForNumber((e-17)/4)}catch{throw new J}},r.getVersionForNumber=function(e){if(e<1||e>40)throw new ae;return r.VERSIONS[e-1]},r.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,i=0,n=0;n<r.VERSION_DECODE_INFO.length;n++){var o=r.VERSION_DECODE_INFO[n];if(o===e)return r.getVersionForNumber(n+7);var a=rc.numBitsDiffering(e,o);a<t&&(i=n+7,t=a)}return t<=3?r.getVersionForNumber(i):null},r.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new Zt(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var i=this.alignmentPatternCenters.length,n=0;n<i;n++)for(var o=this.alignmentPatternCenters[n]-2,a=0;a<i;a++)n===0&&(a===0||a===i-1)||n===i-1&&a===0||t.setRegion(this.alignmentPatternCenters[a]-2,o,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},r.prototype.toString=function(){return""+this.versionNumber},r.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),r.VERSIONS=[new r(1,new Int32Array(0),new j(7,new O(1,19)),new j(10,new O(1,16)),new j(13,new O(1,13)),new j(17,new O(1,9))),new r(2,Int32Array.from([6,18]),new j(10,new O(1,34)),new j(16,new O(1,28)),new j(22,new O(1,22)),new j(28,new O(1,16))),new r(3,Int32Array.from([6,22]),new j(15,new O(1,55)),new j(26,new O(1,44)),new j(18,new O(2,17)),new j(22,new O(2,13))),new r(4,Int32Array.from([6,26]),new j(20,new O(1,80)),new j(18,new O(2,32)),new j(26,new O(2,24)),new j(16,new O(4,9))),new r(5,Int32Array.from([6,30]),new j(26,new O(1,108)),new j(24,new O(2,43)),new j(18,new O(2,15),new O(2,16)),new j(22,new O(2,11),new O(2,12))),new r(6,Int32Array.from([6,34]),new j(18,new O(2,68)),new j(16,new O(4,27)),new j(24,new O(4,19)),new j(28,new O(4,15))),new r(7,Int32Array.from([6,22,38]),new j(20,new O(2,78)),new j(18,new O(4,31)),new j(18,new O(2,14),new O(4,15)),new j(26,new O(4,13),new O(1,14))),new r(8,Int32Array.from([6,24,42]),new j(24,new O(2,97)),new j(22,new O(2,38),new O(2,39)),new j(22,new O(4,18),new O(2,19)),new j(26,new O(4,14),new O(2,15))),new r(9,Int32Array.from([6,26,46]),new j(30,new O(2,116)),new j(22,new O(3,36),new O(2,37)),new j(20,new O(4,16),new O(4,17)),new j(24,new O(4,12),new O(4,13))),new r(10,Int32Array.from([6,28,50]),new j(18,new O(2,68),new O(2,69)),new j(26,new O(4,43),new O(1,44)),new j(24,new O(6,19),new O(2,20)),new j(28,new O(6,15),new O(2,16))),new r(11,Int32Array.from([6,30,54]),new j(20,new O(4,81)),new j(30,new O(1,50),new O(4,51)),new j(28,new O(4,22),new O(4,23)),new j(24,new O(3,12),new O(8,13))),new r(12,Int32Array.from([6,32,58]),new j(24,new O(2,92),new O(2,93)),new j(22,new O(6,36),new O(2,37)),new j(26,new O(4,20),new O(6,21)),new j(28,new O(7,14),new O(4,15))),new r(13,Int32Array.from([6,34,62]),new j(26,new O(4,107)),new j(22,new O(8,37),new O(1,38)),new j(24,new O(8,20),new O(4,21)),new j(22,new O(12,11),new O(4,12))),new r(14,Int32Array.from([6,26,46,66]),new j(30,new O(3,115),new O(1,116)),new j(24,new O(4,40),new O(5,41)),new j(20,new O(11,16),new O(5,17)),new j(24,new O(11,12),new O(5,13))),new r(15,Int32Array.from([6,26,48,70]),new j(22,new O(5,87),new O(1,88)),new j(24,new O(5,41),new O(5,42)),new j(30,new O(5,24),new O(7,25)),new j(24,new O(11,12),new O(7,13))),new r(16,Int32Array.from([6,26,50,74]),new j(24,new O(5,98),new O(1,99)),new j(28,new O(7,45),new O(3,46)),new j(24,new O(15,19),new O(2,20)),new j(30,new O(3,15),new O(13,16))),new r(17,Int32Array.from([6,30,54,78]),new j(28,new O(1,107),new O(5,108)),new j(28,new O(10,46),new O(1,47)),new j(28,new O(1,22),new O(15,23)),new j(28,new O(2,14),new O(17,15))),new r(18,Int32Array.from([6,30,56,82]),new j(30,new O(5,120),new O(1,121)),new j(26,new O(9,43),new O(4,44)),new j(28,new O(17,22),new O(1,23)),new j(28,new O(2,14),new O(19,15))),new r(19,Int32Array.from([6,30,58,86]),new j(28,new O(3,113),new O(4,114)),new j(26,new O(3,44),new O(11,45)),new j(26,new O(17,21),new O(4,22)),new j(26,new O(9,13),new O(16,14))),new r(20,Int32Array.from([6,34,62,90]),new j(28,new O(3,107),new O(5,108)),new j(26,new O(3,41),new O(13,42)),new j(30,new O(15,24),new O(5,25)),new j(28,new O(15,15),new O(10,16))),new r(21,Int32Array.from([6,28,50,72,94]),new j(28,new O(4,116),new O(4,117)),new j(26,new O(17,42)),new j(28,new O(17,22),new O(6,23)),new j(30,new O(19,16),new O(6,17))),new r(22,Int32Array.from([6,26,50,74,98]),new j(28,new O(2,111),new O(7,112)),new j(28,new O(17,46)),new j(30,new O(7,24),new O(16,25)),new j(24,new O(34,13))),new r(23,Int32Array.from([6,30,54,78,102]),new j(30,new O(4,121),new O(5,122)),new j(28,new O(4,47),new O(14,48)),new j(30,new O(11,24),new O(14,25)),new j(30,new O(16,15),new O(14,16))),new r(24,Int32Array.from([6,28,54,80,106]),new j(30,new O(6,117),new O(4,118)),new j(28,new O(6,45),new O(14,46)),new j(30,new O(11,24),new O(16,25)),new j(30,new O(30,16),new O(2,17))),new r(25,Int32Array.from([6,32,58,84,110]),new j(26,new O(8,106),new O(4,107)),new j(28,new O(8,47),new O(13,48)),new j(30,new O(7,24),new O(22,25)),new j(30,new O(22,15),new O(13,16))),new r(26,Int32Array.from([6,30,58,86,114]),new j(28,new O(10,114),new O(2,115)),new j(28,new O(19,46),new O(4,47)),new j(28,new O(28,22),new O(6,23)),new j(30,new O(33,16),new O(4,17))),new r(27,Int32Array.from([6,34,62,90,118]),new j(30,new O(8,122),new O(4,123)),new j(28,new O(22,45),new O(3,46)),new j(30,new O(8,23),new O(26,24)),new j(30,new O(12,15),new O(28,16))),new r(28,Int32Array.from([6,26,50,74,98,122]),new j(30,new O(3,117),new O(10,118)),new j(28,new O(3,45),new O(23,46)),new j(30,new O(4,24),new O(31,25)),new j(30,new O(11,15),new O(31,16))),new r(29,Int32Array.from([6,30,54,78,102,126]),new j(30,new O(7,116),new O(7,117)),new j(28,new O(21,45),new O(7,46)),new j(30,new O(1,23),new O(37,24)),new j(30,new O(19,15),new O(26,16))),new r(30,Int32Array.from([6,26,52,78,104,130]),new j(30,new O(5,115),new O(10,116)),new j(28,new O(19,47),new O(10,48)),new j(30,new O(15,24),new O(25,25)),new j(30,new O(23,15),new O(25,16))),new r(31,Int32Array.from([6,30,56,82,108,134]),new j(30,new O(13,115),new O(3,116)),new j(28,new O(2,46),new O(29,47)),new j(30,new O(42,24),new O(1,25)),new j(30,new O(23,15),new O(28,16))),new r(32,Int32Array.from([6,34,60,86,112,138]),new j(30,new O(17,115)),new j(28,new O(10,46),new O(23,47)),new j(30,new O(10,24),new O(35,25)),new j(30,new O(19,15),new O(35,16))),new r(33,Int32Array.from([6,30,58,86,114,142]),new j(30,new O(17,115),new O(1,116)),new j(28,new O(14,46),new O(21,47)),new j(30,new O(29,24),new O(19,25)),new j(30,new O(11,15),new O(46,16))),new r(34,Int32Array.from([6,34,62,90,118,146]),new j(30,new O(13,115),new O(6,116)),new j(28,new O(14,46),new O(23,47)),new j(30,new O(44,24),new O(7,25)),new j(30,new O(59,16),new O(1,17))),new r(35,Int32Array.from([6,30,54,78,102,126,150]),new j(30,new O(12,121),new O(7,122)),new j(28,new O(12,47),new O(26,48)),new j(30,new O(39,24),new O(14,25)),new j(30,new O(22,15),new O(41,16))),new r(36,Int32Array.from([6,24,50,76,102,128,154]),new j(30,new O(6,121),new O(14,122)),new j(28,new O(6,47),new O(34,48)),new j(30,new O(46,24),new O(10,25)),new j(30,new O(2,15),new O(64,16))),new r(37,Int32Array.from([6,28,54,80,106,132,158]),new j(30,new O(17,122),new O(4,123)),new j(28,new O(29,46),new O(14,47)),new j(30,new O(49,24),new O(10,25)),new j(30,new O(24,15),new O(46,16))),new r(38,Int32Array.from([6,32,58,84,110,136,162]),new j(30,new O(4,122),new O(18,123)),new j(28,new O(13,46),new O(32,47)),new j(30,new O(48,24),new O(14,25)),new j(30,new O(42,15),new O(32,16))),new r(39,Int32Array.from([6,26,54,82,110,138,166]),new j(30,new O(20,117),new O(4,118)),new j(28,new O(40,47),new O(7,48)),new j(30,new O(43,24),new O(22,25)),new j(30,new O(10,15),new O(67,16))),new r(40,Int32Array.from([6,30,58,86,114,142,170]),new j(30,new O(19,118),new O(6,119)),new j(28,new O(18,47),new O(31,48)),new j(30,new O(34,24),new O(34,25)),new j(30,new O(20,15),new O(61,16)))],r}(),tn=CM;var Xr=function(r){return r[r.DATA_MASK_000=0]="DATA_MASK_000",r[r.DATA_MASK_001=1]="DATA_MASK_001",r[r.DATA_MASK_010=2]="DATA_MASK_010",r[r.DATA_MASK_011=3]="DATA_MASK_011",r[r.DATA_MASK_100=4]="DATA_MASK_100",r[r.DATA_MASK_101=5]="DATA_MASK_101",r[r.DATA_MASK_110=6]="DATA_MASK_110",r[r.DATA_MASK_111=7]="DATA_MASK_111",r}(Xr||{}),AM=function(){function r(e,t){this.value=e,this.isMasked=t}return r.prototype.unmaskBitMatrix=function(e,t){for(var i=0;i<t;i++)for(var n=0;n<t;n++)this.isMasked(i,n)&&e.flip(n,i)},r.values=new Map([[Xr.DATA_MASK_000,new r(Xr.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[Xr.DATA_MASK_001,new r(Xr.DATA_MASK_001,function(e,t){return(e&1)===0})],[Xr.DATA_MASK_010,new r(Xr.DATA_MASK_010,function(e,t){return t%3===0})],[Xr.DATA_MASK_011,new r(Xr.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[Xr.DATA_MASK_100,new r(Xr.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[Xr.DATA_MASK_101,new r(Xr.DATA_MASK_101,function(e,t){return e*t%6===0})],[Xr.DATA_MASK_110,new r(Xr.DATA_MASK_110,function(e,t){return e*t%6<3})],[Xr.DATA_MASK_111,new r(Xr.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),r}(),Dd=AM;var SM=function(){function r(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new J;this.bitMatrix=e}return r.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var i=5;i>=0;i--)e=this.copyBit(8,i,e);for(var n=this.bitMatrix.getHeight(),o=0,a=n-7,i=n-1;i>=a;i--)o=this.copyBit(8,i,o);for(var t=n-8;t<n;t++)o=this.copyBit(t,8,o);if(this.parsedFormatInfo=rc.decodeFormatInformation(e,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new J},r.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return tn.getVersionForNumber(t);for(var i=0,n=e-11,o=5;o>=0;o--)for(var a=e-9;a>=n;a--)i=this.copyBit(a,o,i);var s=tn.decodeVersionInformation(i);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;i=0;for(var a=5;a>=0;a--)for(var o=e-9;o>=n;o--)i=this.copyBit(a,o,i);if(s=tn.decodeVersionInformation(i),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new J},r.prototype.copyBit=function(e,t,i){var n=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return n?i<<1|1:i<<1},r.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),i=Dd.values.get(e.getDataMask()),n=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,n);for(var o=t.buildFunctionPattern(),a=!0,s=new Uint8Array(t.getTotalCodewords()),l=0,d=0,h=0,p=n-1;p>0;p-=2){p===6&&p--;for(var v=0;v<n;v++)for(var _=a?n-1-v:v,E=0;E<2;E++)o.get(p-E,_)||(h++,d<<=1,this.bitMatrix.get(p-E,_)&&(d|=1),h===8&&(s[l++]=d,h=0,d=0));a=!a}if(l!==t.getTotalCodewords())throw new J;return s},r.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=Dd.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},r.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},r.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,i=e.getWidth();t<i;t++)for(var n=t+1,o=e.getHeight();n<o;n++)e.get(t,n)!==e.get(n,t)&&(e.flip(n,t),e.flip(t,n))},r}(),Vb=SM;var Ub=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TM=function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t,i){var n,o,a,s;if(e.length!==t.getTotalCodewords())throw new ae;var l=t.getECBlocksForLevel(i),d=0,h=l.getECBlocks();try{for(var p=Ub(h),v=p.next();!v.done;v=p.next()){var _=v.value;d+=_.getCount()}}catch(wt){n={error:wt}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(n)throw n.error}}var E=new Array(d),A=0;try{for(var N=Ub(h),F=N.next();!F.done;F=N.next())for(var _=F.value,P=0;P<_.getCount();P++){var L=_.getDataCodewords(),G=l.getECCodewordsPerBlock()+L;E[A++]=new r(L,new Uint8Array(G))}}catch(wt){a={error:wt}}finally{try{F&&!F.done&&(s=N.return)&&s.call(N)}finally{if(a)throw a.error}}for(var Y=E[0].codewords.length,Q=E.length-1;Q>=0;){var ie=E[Q].codewords.length;if(ie===Y)break;Q--}Q++;for(var ye=Y-l.getECCodewordsPerBlock(),Ne=0,P=0;P<ye;P++)for(var Ge=0;Ge<A;Ge++)E[Ge].codewords[P]=e[Ne++];for(var Ge=Q;Ge<A;Ge++)E[Ge].codewords[ye]=e[Ne++];for(var At=E[0].codewords.length,P=ye;P<At;P++)for(var Ge=0;Ge<A;Ge++){var nt=Ge<Q?P:P+1;E[Ge].codewords[nt]=e[Ne++]}return E},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r}(),Gb=TM;var rn=function(r){return r[r.TERMINATOR=0]="TERMINATOR",r[r.NUMERIC=1]="NUMERIC",r[r.ALPHANUMERIC=2]="ALPHANUMERIC",r[r.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",r[r.BYTE=4]="BYTE",r[r.ECI=5]="ECI",r[r.KANJI=6]="KANJI",r[r.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",r[r.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",r[r.HANZI=9]="HANZI",r}(rn||{}),DM=function(){function r(e,t,i,n){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=i,this.bits=n,r.FOR_BITS.set(n,this),r.FOR_VALUE.set(e,this)}return r.forBits=function(e){var t=r.FOR_BITS.get(e);if(t===void 0)throw new ae;return t},r.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),i;return t<=9?i=0:t<=26?i=1:i=2,this.characterCountBitsForVersions[i]},r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.toString=function(){return this.stringValue},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.TERMINATOR=new r(rn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),r.NUMERIC=new r(rn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),r.ALPHANUMERIC=new r(rn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),r.STRUCTURED_APPEND=new r(rn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),r.BYTE=new r(rn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),r.ECI=new r(rn.ECI,"ECI",Int32Array.from([0,0,0]),7),r.KANJI=new r(rn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),r.FNC1_FIRST_POSITION=new r(rn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),r.FNC1_SECOND_POSITION=new r(rn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),r.HANZI=new r(rn.HANZI,"HANZI",Int32Array.from([8,10,12]),13),r}(),Ht=DM;var OM=function(){function r(){}return r.decode=function(e,t,i,n){var o=new ec(e),a=new we,s=new Array,l=-1,d=-1;try{var h=null,p=!1,v=void 0;do{if(o.available()<4)v=Ht.TERMINATOR;else{var _=o.readBits(4);v=Ht.forBits(_)}switch(v){case Ht.TERMINATOR:break;case Ht.FNC1_FIRST_POSITION:case Ht.FNC1_SECOND_POSITION:p=!0;break;case Ht.STRUCTURED_APPEND:if(o.available()<16)throw new J;l=o.readBits(8),d=o.readBits(8);break;case Ht.ECI:var E=r.parseECIValue(o);if(h=$t.getCharacterSetECIByValue(E),h===null)throw new J;break;case Ht.HANZI:var A=o.readBits(4),N=o.readBits(v.getCharacterCountBits(t));A===r.GB2312_SUBSET&&r.decodeHanziSegment(o,a,N);break;default:var F=o.readBits(v.getCharacterCountBits(t));switch(v){case Ht.NUMERIC:r.decodeNumericSegment(o,a,F);break;case Ht.ALPHANUMERIC:r.decodeAlphanumericSegment(o,a,F,p);break;case Ht.BYTE:r.decodeByteSegment(o,a,F,h,s,n);break;case Ht.KANJI:r.decodeKanjiSegment(o,a,F);break;default:throw new J}break}}while(v!==Ht.TERMINATOR)}catch{throw new J}return new Nn(e,a.toString(),s.length===0?null:s,i===null?null:i.toString(),l,d)},r.decodeHanziSegment=function(e,t,i){if(i*13>e.available())throw new J;for(var n=new Uint8Array(2*i),o=0;i>0;){var a=e.readBits(13),s=a/96<<8&4294967295|a%96;s<959?s+=41377:s+=42657,n[o]=s>>8&255,n[o+1]=s&255,o+=2,i--}try{t.append(Pr.decode(n,We.GB2312))}catch(l){throw new J(l)}},r.decodeKanjiSegment=function(e,t,i){if(i*13>e.available())throw new J;for(var n=new Uint8Array(2*i),o=0;i>0;){var a=e.readBits(13),s=a/192<<8&4294967295|a%192;s<7936?s+=33088:s+=49472,n[o]=s>>8,n[o+1]=s,o+=2,i--}try{t.append(Pr.decode(n,We.SHIFT_JIS))}catch(l){throw new J(l)}},r.decodeByteSegment=function(e,t,i,n,o,a){if(8*i>e.available())throw new J;for(var s=new Uint8Array(i),l=0;l<i;l++)s[l]=e.readBits(8);var d;n===null?d=We.guessEncoding(s,a):d=n.getName();try{t.append(Pr.decode(s,d))}catch(h){throw new J(h)}o.push(s)},r.toAlphaNumericChar=function(e){if(e>=r.ALPHANUMERIC_CHARS.length)throw new J;return r.ALPHANUMERIC_CHARS[e]},r.decodeAlphanumericSegment=function(e,t,i,n){for(var o=t.length();i>1;){if(e.available()<11)throw new J;var a=e.readBits(11);t.append(r.toAlphaNumericChar(Math.floor(a/45))),t.append(r.toAlphaNumericChar(a%45)),i-=2}if(i===1){if(e.available()<6)throw new J;t.append(r.toAlphaNumericChar(e.readBits(6)))}if(n)for(var s=o;s<t.length();s++)t.charAt(s)==="%"&&(s<t.length()-1&&t.charAt(s+1)==="%"?t.deleteCharAt(s+1):t.setCharAt(s,""))},r.decodeNumericSegment=function(e,t,i){for(;i>=3;){if(e.available()<10)throw new J;var n=e.readBits(10);if(n>=1e3)throw new J;t.append(r.toAlphaNumericChar(Math.floor(n/100))),t.append(r.toAlphaNumericChar(Math.floor(n/10)%10)),t.append(r.toAlphaNumericChar(n%10)),i-=3}if(i===2){if(e.available()<7)throw new J;var o=e.readBits(7);if(o>=100)throw new J;t.append(r.toAlphaNumericChar(Math.floor(o/10))),t.append(r.toAlphaNumericChar(o%10))}else if(i===1){if(e.available()<4)throw new J;var a=e.readBits(4);if(a>=10)throw new J;t.append(r.toAlphaNumericChar(a))}},r.parseECIValue=function(e){var t=e.readBits(8);if(!(t&128))return t&127;if((t&192)===128){var i=e.readBits(8);return(t&63)<<8&4294967295|i}if((t&224)===192){var n=e.readBits(16);return(t&31)<<16&4294967295|n}throw new J},r.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",r.GB2312_SUBSET=1,r}(),eg=OM;var RM=function(){function r(e){this.mirrored=e}return r.prototype.isMirrored=function(){return this.mirrored},r.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},r}(),Od=RM;var jb=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},MM=function(){function r(){this.rsDecoder=new Fn(_r.QR_CODE_FIELD_256)}return r.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(Zt.parseFromBooleanArray(e),t)},r.prototype.decodeBitMatrix=function(e,t){var i=new Vb(e),n=null;try{return this.decodeBitMatrixParser(i,t)}catch(a){n=a}try{i.remask(),i.setMirror(!0),i.readVersion(),i.readFormatInformation(),i.mirror();var o=this.decodeBitMatrixParser(i,t);return o.setOther(new Od(!0)),o}catch(a){throw n!==null?n:a}},r.prototype.decodeBitMatrixParser=function(e,t){var i,n,o,a,s=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),d=e.readCodewords(),h=Gb.getDataBlocks(d,s,l),p=0;try{for(var v=jb(h),_=v.next();!_.done;_=v.next()){var E=_.value;p+=E.getNumDataCodewords()}}catch(Q){i={error:Q}}finally{try{_&&!_.done&&(n=v.return)&&n.call(v)}finally{if(i)throw i.error}}var A=new Uint8Array(p),N=0;try{for(var F=jb(h),P=F.next();!P.done;P=F.next()){var E=P.value,L=E.getCodewords(),G=E.getNumDataCodewords();this.correctErrors(L,G);for(var Y=0;Y<G;Y++)A[N++]=L[Y]}}catch(Q){o={error:Q}}finally{try{P&&!P.done&&(a=F.return)&&a.call(F)}finally{if(o)throw o.error}}return eg.decode(A,s,l,t)},r.prototype.correctErrors=function(e,t){var i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-t)}catch{throw new Ut}for(var n=0;n<t;n++)e[n]=i[n]},r}(),zb=MM;var PM=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),NM=function(r){PM(e,r);function e(t,i,n){var o=r.call(this,t,i)||this;return o.estimatedModuleSize=n,o}return e.prototype.aboutEquals=function(t,i,n){if(Math.abs(i-this.getY())<=t&&Math.abs(n-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,i,n){var o=(this.getX()+i)/2,a=(this.getY()+t)/2,s=(this.estimatedModuleSize+n)/2;return new e(o,a,s)},e}(ue),Hb=NM;var FM=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kM=function(){function r(e,t,i,n,o,a,s){this.image=e,this.startX=t,this.startY=i,this.width=n,this.height=o,this.moduleSize=a,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return r.prototype.find=function(){for(var e=this.startX,t=this.height,i=this.width,n=e+i,o=this.startY+t/2,a=new Int32Array(3),s=this.image,l=0;l<t;l++){var d=o+(l&1?-Math.floor((l+1)/2):Math.floor((l+1)/2));a[0]=0,a[1]=0,a[2]=0;for(var h=e;h<n&&!s.get(h,d);)h++;for(var p=0;h<n;){if(s.get(h,d))if(p===1)a[1]++;else if(p===2){if(this.foundPatternCross(a)){var v=this.handlePossibleCenter(a,d,h);if(v!==null)return v}a[0]=a[2],a[1]=1,a[2]=0,p=1}else a[++p]++;else p===1&&p++,a[p]++;h++}if(this.foundPatternCross(a)){var v=this.handlePossibleCenter(a,d,n);if(v!==null)return v}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new U},r.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},r.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,i=t/2,n=0;n<3;n++)if(Math.abs(t-e[n])>=i)return!1;return!0},r.prototype.crossCheckVertical=function(e,t,i,n){var o=this.image,a=o.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var l=e;l>=0&&o.get(t,l)&&s[1]<=i;)s[1]++,l--;if(l<0||s[1]>i)return NaN;for(;l>=0&&!o.get(t,l)&&s[0]<=i;)s[0]++,l--;if(s[0]>i)return NaN;for(l=e+1;l<a&&o.get(t,l)&&s[1]<=i;)s[1]++,l++;if(l===a||s[1]>i)return NaN;for(;l<a&&!o.get(t,l)&&s[2]<=i;)s[2]++,l++;if(s[2]>i)return NaN;var d=s[0]+s[1]+s[2];return 5*Math.abs(d-n)>=2*n?NaN:this.foundPatternCross(s)?r.centerFromEnd(s,l):NaN},r.prototype.handlePossibleCenter=function(e,t,i){var n,o,a=e[0]+e[1]+e[2],s=r.centerFromEnd(e,i),l=this.crossCheckVertical(t,s,2*e[1],a);if(!isNaN(l)){var d=(e[0]+e[1]+e[2])/3;try{for(var h=FM(this.possibleCenters),p=h.next();!p.done;p=h.next()){var v=p.value;if(v.aboutEquals(d,l,s))return v.combineEstimate(l,s,d)}}catch(E){n={error:E}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}var _=new Hb(s,l,d);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null},r}(),Wb=kM;var LM=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),BM=function(r){LM(e,r);function e(t,i,n,o){var a=r.call(this,t,i)||this;return a.estimatedModuleSize=n,a.count=o,o===void 0&&(a.count=1),a}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,i,n){if(Math.abs(i-this.getY())<=t&&Math.abs(n-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,i,n){var o=this.count+1,a=(this.count*this.getX()+i)/o,s=(this.count*this.getY()+t)/o,l=(this.count*this.estimatedModuleSize+n)/o;return new e(a,s,l,o)},e}(ue),Xb=BM;var VM=function(){function r(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r}(),Yb=VM;var ic=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},UM=function(){function r(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return r.prototype.getImage=function(){return this.image},r.prototype.getPossibleCenters=function(){return this.possibleCenters},r.prototype.find=function(e){var t=e!=null&&e.get(st.TRY_HARDER)!==void 0,i=e!=null&&e.get(st.PURE_BARCODE)!==void 0,n=this.image,o=n.getHeight(),a=n.getWidth(),s=Math.floor(3*o/(4*r.MAX_MODULES));(s<r.MIN_SKIP||t)&&(s=r.MIN_SKIP);for(var l=!1,d=new Int32Array(5),h=s-1;h<o&&!l;h+=s){d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0;for(var p=0,v=0;v<a;v++)if(n.get(v,h))(p&1)===1&&p++,d[p]++;else if(p&1)d[p]++;else if(p===4)if(r.foundPatternCross(d)){var _=this.handlePossibleCenter(d,h,v,i);if(_===!0)if(s=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var E=this.findRowSkip();E>d[2]&&(h+=E-d[2]-s,v=a-1)}else{d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,p=3;continue}p=0,d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0}else d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,p=3;else d[++p]++;if(r.foundPatternCross(d)){var _=this.handlePossibleCenter(d,h,a,i);_===!0&&(s=d[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var A=this.selectBestPatterns();return ue.orderBestPatterns(A),new Yb(A)},r.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},r.foundPatternCross=function(e){for(var t=0,i=0;i<5;i++){var n=e[i];if(n===0)return!1;t+=n}if(t<7)return!1;var o=t/7,a=o/2;return Math.abs(o-e[0])<a&&Math.abs(o-e[1])<a&&Math.abs(3*o-e[2])<3*a&&Math.abs(o-e[3])<a&&Math.abs(o-e[4])<a},r.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},r.prototype.crossCheckDiagonal=function(e,t,i,n){for(var o=this.getCrossCheckStateCount(),a=0,s=this.image;e>=a&&t>=a&&s.get(t-a,e-a);)o[2]++,a++;if(e<a||t<a)return!1;for(;e>=a&&t>=a&&!s.get(t-a,e-a)&&o[1]<=i;)o[1]++,a++;if(e<a||t<a||o[1]>i)return!1;for(;e>=a&&t>=a&&s.get(t-a,e-a)&&o[0]<=i;)o[0]++,a++;if(o[0]>i)return!1;var l=s.getHeight(),d=s.getWidth();for(a=1;e+a<l&&t+a<d&&s.get(t+a,e+a);)o[2]++,a++;if(e+a>=l||t+a>=d)return!1;for(;e+a<l&&t+a<d&&!s.get(t+a,e+a)&&o[3]<i;)o[3]++,a++;if(e+a>=l||t+a>=d||o[3]>=i)return!1;for(;e+a<l&&t+a<d&&s.get(t+a,e+a)&&o[4]<i;)o[4]++,a++;if(o[4]>=i)return!1;var h=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(h-n)<2*n&&r.foundPatternCross(o)},r.prototype.crossCheckVertical=function(e,t,i,n){for(var o=this.image,a=o.getHeight(),s=this.getCrossCheckStateCount(),l=e;l>=0&&o.get(t,l);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!o.get(t,l)&&s[1]<=i;)s[1]++,l--;if(l<0||s[1]>i)return NaN;for(;l>=0&&o.get(t,l)&&s[0]<=i;)s[0]++,l--;if(s[0]>i)return NaN;for(l=e+1;l<a&&o.get(t,l);)s[2]++,l++;if(l===a)return NaN;for(;l<a&&!o.get(t,l)&&s[3]<i;)s[3]++,l++;if(l===a||s[3]>=i)return NaN;for(;l<a&&o.get(t,l)&&s[4]<i;)s[4]++,l++;if(s[4]>=i)return NaN;var d=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(d-n)>=2*n?NaN:r.foundPatternCross(s)?r.centerFromEnd(s,l):NaN},r.prototype.crossCheckHorizontal=function(e,t,i,n){for(var o=this.image,a=o.getWidth(),s=this.getCrossCheckStateCount(),l=e;l>=0&&o.get(l,t);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!o.get(l,t)&&s[1]<=i;)s[1]++,l--;if(l<0||s[1]>i)return NaN;for(;l>=0&&o.get(l,t)&&s[0]<=i;)s[0]++,l--;if(s[0]>i)return NaN;for(l=e+1;l<a&&o.get(l,t);)s[2]++,l++;if(l===a)return NaN;for(;l<a&&!o.get(l,t)&&s[3]<i;)s[3]++,l++;if(l===a||s[3]>=i)return NaN;for(;l<a&&o.get(l,t)&&s[4]<i;)s[4]++,l++;if(s[4]>=i)return NaN;var d=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(d-n)>=n?NaN:r.foundPatternCross(s)?r.centerFromEnd(s,l):NaN},r.prototype.handlePossibleCenter=function(e,t,i,n){var o=e[0]+e[1]+e[2]+e[3]+e[4],a=r.centerFromEnd(e,i),s=this.crossCheckVertical(t,Math.floor(a),e[2],o);if(!isNaN(s)&&(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(s),e[2],o),!isNaN(a)&&(!n||this.crossCheckDiagonal(Math.floor(s),Math.floor(a),e[2],o)))){for(var l=o/7,d=!1,h=this.possibleCenters,p=0,v=h.length;p<v;p++){var _=h[p];if(_.aboutEquals(l,s,a)){h[p]=_.combineEstimate(s,a,l),d=!0;break}}if(!d){var E=new Xb(a,s,l);h.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return!0}return!1},r.prototype.findRowSkip=function(){var e,t,i=this.possibleCenters.length;if(i<=1)return 0;var n=null;try{for(var o=ic(this.possibleCenters),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.getCount()>=r.CENTER_QUORUM)if(n==null)n=s;else return this.hasSkipped=!0,Math.floor((Math.abs(n.getX()-s.getX())-Math.abs(n.getY()-s.getY()))/2)}}catch(l){e={error:l}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return 0},r.prototype.haveMultiplyConfirmedCenters=function(){var e,t,i,n,o=0,a=0,s=this.possibleCenters.length;try{for(var l=ic(this.possibleCenters),d=l.next();!d.done;d=l.next()){var h=d.value;h.getCount()>=r.CENTER_QUORUM&&(o++,a+=h.getEstimatedModuleSize())}}catch(A){e={error:A}}finally{try{d&&!d.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}if(o<3)return!1;var p=a/s,v=0;try{for(var _=ic(this.possibleCenters),E=_.next();!E.done;E=_.next()){var h=E.value;v+=Math.abs(h.getEstimatedModuleSize()-p)}}catch(A){i={error:A}}finally{try{E&&!E.done&&(n=_.return)&&n.call(_)}finally{if(i)throw i.error}}return v<=.05*a},r.prototype.selectBestPatterns=function(){var e,t,i,n,o=this.possibleCenters.length;if(o<3)throw new U;var a=this.possibleCenters,s;if(o>3){var l=0,d=0;try{for(var h=ic(this.possibleCenters),p=h.next();!p.done;p=h.next()){var v=p.value,_=v.getEstimatedModuleSize();l+=_,d+=_*_}}catch(Y){e={error:Y}}finally{try{p&&!p.done&&(t=h.return)&&t.call(h)}finally{if(e)throw e.error}}s=l/o;var E=Math.sqrt(d/o-s*s);a.sort(function(Y,Q){var ie=Math.abs(Q.getEstimatedModuleSize()-s),ye=Math.abs(Y.getEstimatedModuleSize()-s);return ie<ye?-1:ie>ye?1:0});for(var A=Math.max(.2*s,E),N=0;N<a.length&&a.length>3;N++){var F=a[N];Math.abs(F.getEstimatedModuleSize()-s)>A&&(a.splice(N,1),N--)}}if(a.length>3){var l=0;try{for(var P=ic(a),L=P.next();!L.done;L=P.next()){var G=L.value;l+=G.getEstimatedModuleSize()}}catch(Q){i={error:Q}}finally{try{L&&!L.done&&(n=P.return)&&n.call(P)}finally{if(i)throw i.error}}s=l/a.length,a.sort(function(Q,ie){if(ie.getCount()===Q.getCount()){var ye=Math.abs(ie.getEstimatedModuleSize()-s),Ne=Math.abs(Q.getEstimatedModuleSize()-s);return ye<Ne?1:ye>Ne?-1:0}else return ie.getCount()-Q.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]},r.CENTER_QUORUM=2,r.MIN_SKIP=3,r.MAX_MODULES=57,r}(),qb=UM;var GM=function(){function r(e){this.image=e}return r.prototype.getImage=function(){return this.image},r.prototype.getResultPointCallback=function(){return this.resultPointCallback},r.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(st.NEED_RESULT_POINT_CALLBACK);var t=new qb(this.image,this.resultPointCallback),i=t.find(e);return this.processFinderPatternInfo(i)},r.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),i=e.getTopRight(),n=e.getBottomLeft(),o=this.calculateModuleSize(t,i,n);if(o<1)throw new U("No pattern found in proccess finder.");var a=r.computeDimension(t,i,n,o),s=tn.getProvisionalVersionForDimension(a),l=s.getDimensionForVersion()-7,d=null;if(s.getAlignmentPatternCenters().length>0)for(var h=i.getX()-t.getX()+n.getX(),p=i.getY()-t.getY()+n.getY(),v=1-3/l,_=Math.floor(t.getX()+v*(h-t.getX())),E=Math.floor(t.getY()+v*(p-t.getY())),A=4;A<=16;A<<=1)try{d=this.findAlignmentInRegion(o,_,E,A);break}catch(L){if(!(L instanceof U))throw L}var N=r.createTransform(t,i,n,d,a),F=r.sampleGrid(this.image,N,a),P;return d===null?P=[n,t,i]:P=[n,t,i,d],new aa(F,P)},r.createTransform=function(e,t,i,n,o){var a=o-3.5,s,l,d,h;return n!==null?(s=n.getX(),l=n.getY(),d=a-3,h=d):(s=t.getX()-e.getX()+i.getX(),l=t.getY()-e.getY()+i.getY(),d=a,h=a),Ql.quadrilateralToQuadrilateral(3.5,3.5,a,3.5,d,h,3.5,a,e.getX(),e.getY(),t.getX(),t.getY(),s,l,i.getX(),i.getY())},r.sampleGrid=function(e,t,i){var n=sa.getInstance();return n.sampleGridWithTransform(e,i,i,t)},r.computeDimension=function(e,t,i,n){var o=rt.round(ue.distance(e,t)/n),a=rt.round(ue.distance(e,i)/n),s=Math.floor((o+a)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new U("Dimensions could be not found.")}return s},r.prototype.calculateModuleSize=function(e,t,i){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,i))/2},r.prototype.calculateModuleSizeOneWay=function(e,t){var i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(i)?n/7:isNaN(n)?i/7:(i+n)/14},r.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,i,n){var o=this.sizeOfBlackWhiteBlackRun(e,t,i,n),a=1,s=e-(i-e);s<0?(a=e/(e-s),s=0):s>=this.image.getWidth()&&(a=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var l=Math.floor(t-(n-t)*a);return a=1,l<0?(a=t/(t-l),l=0):l>=this.image.getHeight()&&(a=(this.image.getHeight()-1-t)/(l-t),l=this.image.getHeight()-1),s=Math.floor(e+(s-e)*a),o+=this.sizeOfBlackWhiteBlackRun(e,t,s,l),o-1},r.prototype.sizeOfBlackWhiteBlackRun=function(e,t,i,n){var o=Math.abs(n-t)>Math.abs(i-e);if(o){var a=e;e=t,t=a,a=i,i=n,n=a}for(var s=Math.abs(i-e),l=Math.abs(n-t),d=-s/2,h=e<i?1:-1,p=t<n?1:-1,v=0,_=i+h,E=e,A=t;E!==_;E+=h){var N=o?A:E,F=o?E:A;if(v===1===this.image.get(N,F)){if(v===2)return rt.distance(E,A,e,t);v++}if(d+=l,d>0){if(A===n)break;A+=p,d-=s}}return v===2?rt.distance(i+h,n,e,t):NaN},r.prototype.findAlignmentInRegion=function(e,t,i,n){var o=Math.floor(n*e),a=Math.max(0,t-o),s=Math.min(this.image.getWidth()-1,t+o);if(s-a<e*3)throw new U("Alignment top exceeds estimated module size.");var l=Math.max(0,i-o),d=Math.min(this.image.getHeight()-1,i+o);if(d-l<e*3)throw new U("Alignment bottom exceeds estimated module size.");var h=new Wb(this.image,a,l,s-a,d-l,e,this.resultPointCallback);return h.find()},r}(),$b=GM;var jM=function(){function r(){this.decoder=new zb}return r.prototype.getDecoder=function(){return this.decoder},r.prototype.decode=function(e,t){var i,n;if(t!=null&&t.get(st.PURE_BARCODE)!==void 0){var o=r.extractPureBits(e.getBlackMatrix());i=this.decoder.decodeBitMatrix(o,t),n=r.NO_POINTS}else{var a=new $b(e.getBlackMatrix()).detect(t);i=this.decoder.decodeBitMatrix(a.getBits(),t),n=a.getPoints()}i.getOther()instanceof Od&&i.getOther().applyMirroredCorrection(n);var s=new Et(i.getText(),i.getRawBytes(),void 0,n,le.QR_CODE,void 0),l=i.getByteSegments();l!==null&&s.putMetadata(Jt.BYTE_SEGMENTS,l);var d=i.getECLevel();return d!==null&&s.putMetadata(Jt.ERROR_CORRECTION_LEVEL,d),i.hasStructuredAppend()&&(s.putMetadata(Jt.STRUCTURED_APPEND_SEQUENCE,i.getStructuredAppendSequenceNumber()),s.putMetadata(Jt.STRUCTURED_APPEND_PARITY,i.getStructuredAppendParity())),s},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(t===null||i===null)throw new U;var n=this.moduleSize(t,e),o=t[1],a=i[1],s=t[0],l=i[0];if(s>=l||o>=a)throw new U;if(a-o!==l-s&&(l=s+(a-o),l>=e.getWidth()))throw new U;var d=Math.round((l-s+1)/n),h=Math.round((a-o+1)/n);if(d<=0||h<=0)throw new U;if(h!==d)throw new U;var p=Math.floor(n/2);o+=p,s+=p;var v=s+Math.floor((d-1)*n)-l;if(v>0){if(v>p)throw new U;s-=v}var _=o+Math.floor((h-1)*n)-a;if(_>0){if(_>p)throw new U;o-=_}for(var E=new Zt(d,h),A=0;A<h;A++)for(var N=o+Math.floor(A*n),F=0;F<d;F++)e.get(s+Math.floor(F*n),N)&&E.set(F,A);return E},r.moduleSize=function(e,t){for(var i=t.getHeight(),n=t.getWidth(),o=e[0],a=e[1],s=!0,l=0;o<n&&a<i;){if(s!==t.get(o,a)){if(++l===5)break;s=!s}o++,a++}if(o===n||a===i)throw new U;return(o-e[0])/7},r.NO_POINTS=new Array,r}(),Es=jM;var zM=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HM=function(){function r(){}return r.prototype.PDF417Common=function(){},r.getBitCountSum=function(e){return rt.sum(e)},r.toIntArray=function(e){var t,i;if(e==null||!e.length)return r.EMPTY_INT_ARRAY;var n=new Int32Array(e.length),o=0;try{for(var a=zM(e),s=a.next();!s.done;s=a.next()){var l=s.value;n[o++]=l}}catch(d){t={error:d}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(t)throw t.error}}return n},r.getCodeword=function(e){var t=Ct.binarySearch(r.SYMBOL_TABLE,e&262143);return t<0?-1:(r.CODEWORD_TABLE[t]-1)%r.NUMBER_OF_CODEWORDS},r.NUMBER_OF_CODEWORDS=929,r.MAX_CODEWORDS_IN_BARCODE=r.NUMBER_OF_CODEWORDS-1,r.MIN_ROWS_IN_BARCODE=3,r.MAX_ROWS_IN_BARCODE=90,r.MODULES_IN_CODEWORD=17,r.MODULES_IN_STOP_PATTERN=18,r.BARS_IN_MODULE=8,r.EMPTY_INT_ARRAY=new Int32Array([]),r.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),r.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),r}(),lt=HM;var WM=function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r}(),Zb=WM;var XM=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YM=function(){function r(){}return r.detectMultiple=function(e,t,i){var n=e.getBlackMatrix(),o=r.detect(i,n);return o.length||(n=n.clone(),n.rotate180(),o=r.detect(i,n)),new Zb(n,o)},r.detect=function(e,t){for(var i,n,o=new Array,a=0,s=0,l=!1;a<t.getHeight();){var d=r.findVertices(t,a,s);if(d[0]==null&&d[3]==null){if(!l)break;l=!1,s=0;try{for(var h=(i=void 0,XM(o)),p=h.next();!p.done;p=h.next()){var v=p.value;v[1]!=null&&(a=Math.trunc(Math.max(a,v[1].getY()))),v[3]!=null&&(a=Math.max(a,Math.trunc(v[3].getY())))}}catch(_){i={error:_}}finally{try{p&&!p.done&&(n=h.return)&&n.call(h)}finally{if(i)throw i.error}}a+=r.ROW_STEP;continue}if(l=!0,o.push(d),!e)break;d[2]!=null?(s=Math.trunc(d[2].getX()),a=Math.trunc(d[2].getY())):(s=Math.trunc(d[4].getX()),a=Math.trunc(d[4].getY()))}return o},r.findVertices=function(e,t,i){var n=e.getHeight(),o=e.getWidth(),a=new Array(8);return r.copyToResult(a,r.findRowsWithPattern(e,n,o,t,i,r.START_PATTERN),r.INDEXES_START_PATTERN),a[4]!=null&&(i=Math.trunc(a[4].getX()),t=Math.trunc(a[4].getY())),r.copyToResult(a,r.findRowsWithPattern(e,n,o,t,i,r.STOP_PATTERN),r.INDEXES_STOP_PATTERN),a},r.copyToResult=function(e,t,i){for(var n=0;n<i.length;n++)e[i[n]]=t[n]},r.findRowsWithPattern=function(e,t,i,n,o,a){for(var s=new Array(4),l=!1,d=new Int32Array(a.length);n<t;n+=r.ROW_STEP){var h=r.findGuardPattern(e,o,n,i,!1,a,d);if(h!=null){for(;n>0;){var p=r.findGuardPattern(e,o,--n,i,!1,a,d);if(p!=null)h=p;else{n++;break}}s[0]=new ue(h[0],n),s[1]=new ue(h[1],n),l=!0;break}}var v=n+1;if(l){for(var _=0,p=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);v<t;v++){var h=r.findGuardPattern(e,p[0],v,i,!1,a,d);if(h!=null&&Math.abs(p[0]-h[0])<r.MAX_PATTERN_DRIFT&&Math.abs(p[1]-h[1])<r.MAX_PATTERN_DRIFT)p=h,_=0;else{if(_>r.SKIPPED_ROW_COUNT_MAX)break;_++}}v-=_+1,s[2]=new ue(p[0],v),s[3]=new ue(p[1],v)}return v-n<r.BARCODE_MIN_HEIGHT&&Ct.fill(s,null),s},r.findGuardPattern=function(e,t,i,n,o,a,s){Ct.fillWithin(s,0,s.length,0);for(var l=t,d=0;e.get(l,i)&&l>0&&d++<r.MAX_PIXEL_DRIFT;)l--;for(var h=l,p=0,v=a.length,_=o;h<n;h++){var E=e.get(h,i);if(E!==_)s[p]++;else{if(p===v-1){if(r.patternMatchVariance(s,a,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE)return new Int32Array([l,h]);l+=s[0]+s[1],tt.arraycopy(s,2,s,0,p-1),s[p-1]=0,s[p]=0,p--}else p++;s[p]=1,_=!_}}return p===v-1&&r.patternMatchVariance(s,a,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE?new Int32Array([l,h-1]):null},r.patternMatchVariance=function(e,t,i){for(var n=e.length,o=0,a=0,s=0;s<n;s++)o+=e[s],a+=t[s];if(o<a)return 1/0;var l=o/a;i*=l;for(var d=0,h=0;h<n;h++){var p=e[h],v=t[h]*l,_=p>v?p-v:v-p;if(_>i)return 1/0;d+=_}return d/o},r.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),r.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),r.MAX_AVG_VARIANCE=.42,r.MAX_INDIVIDUAL_VARIANCE=.8,r.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),r.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),r.MAX_PIXEL_DRIFT=3,r.MAX_PATTERN_DRIFT=5,r.SKIPPED_ROW_COUNT_MAX=25,r.ROW_STEP=5,r.BARCODE_MIN_HEIGHT=10,r}(),Kb=YM;var qM=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$M=function(){function r(e,t){if(t.length===0)throw new ae;this.field=e;var i=t.length;if(i>1&&t[0]===0){for(var n=1;n<i&&t[n]===0;)n++;n===i?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(i-n),tt.arraycopy(t,n,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){var t,i;if(e===0)return this.getCoefficient(0);if(e===1){var n=0;try{for(var o=qM(this.coefficients),a=o.next();!a.done;a=o.next()){var s=a.value;n=this.field.add(n,s)}}catch(p){t={error:p}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return n}for(var l=this.coefficients[0],d=this.coefficients.length,h=1;h<d;h++)l=this.field.add(this.field.multiply(e,l),this.coefficients[h]);return l},r.prototype.add=function(e){if(!this.field.equals(e.field))throw new ae("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,i=e.coefficients;if(t.length>i.length){var n=t;t=i,i=n}var o=new Int32Array(i.length),a=i.length-t.length;tt.arraycopy(i,0,o,0,a);for(var s=a;s<i.length;s++)o[s]=this.field.add(t[s-a],i[s]);return new r(this.field,o)},r.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new ae("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},r.prototype.multiply=function(e){return e instanceof r?this.multiplyOther(e):this.multiplyScalar(e)},r.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new ae("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new r(this.field,new Int32Array([0]));for(var t=this.coefficients,i=t.length,n=e.coefficients,o=n.length,a=new Int32Array(i+o-1),s=0;s<i;s++)for(var l=t[s],d=0;d<o;d++)a[s+d]=this.field.add(a[s+d],this.field.multiply(l,n[d]));return new r(this.field,a)},r.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),i=0;i<e;i++)t[i]=this.field.subtract(0,this.coefficients[i]);return new r(this.field,t)},r.prototype.multiplyScalar=function(e){if(e===0)return new r(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,i=new Int32Array(t),n=0;n<t;n++)i[n]=this.field.multiply(this.coefficients[n],e);return new r(this.field,i)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new ae;if(t===0)return new r(this.field,new Int32Array([0]));for(var i=this.coefficients.length,n=new Int32Array(i+e),o=0;o<i;o++)n[o]=this.field.multiply(this.coefficients[o],t);return new r(this.field,n)},r.prototype.toString=function(){for(var e=new we,t=this.getDegree();t>=0;t--){var i=this.getCoefficient(t);i!==0&&(i<0?(e.append(" - "),i=-i):e.length()>0&&e.append(" + "),(t===0||i!==1)&&e.append(i),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},r}(),Vn=$M;var ZM=function(){function r(){}return r.prototype.add=function(e,t){return(e+t)%this.modulus},r.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new ae;return this.logTable[e]},r.prototype.inverse=function(e){if(e===0)throw new Zl;return this.expTable[this.modulus-this.logTable[e]-1]},r.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},r.prototype.getSize=function(){return this.modulus},r.prototype.equals=function(e){return e===this},r}(),Qb=ZM;var KM=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),QM=function(r){KM(e,r);function e(t,i){var n=r.call(this)||this;n.modulus=t,n.expTable=new Int32Array(t),n.logTable=new Int32Array(t);for(var o=1,a=0;a<t;a++)n.expTable[a]=o,o=o*i%t;for(var a=0;a<t-1;a++)n.logTable[n.expTable[a]]=a;return n.zero=new Vn(n,new Int32Array([0])),n.one=new Vn(n,new Int32Array([1])),n}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,i){if(t<0)throw new ae;if(i===0)return this.zero;var n=new Int32Array(t+1);return n[0]=i,new Vn(this,n)},e.PDF417_GF=new e(lt.NUMBER_OF_CODEWORDS,3),e}(Qb),Jb=QM;var JM=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},e3=function(){function r(){this.field=Jb.PDF417_GF}return r.prototype.decode=function(e,t,i){for(var n,o,a=new Vn(this.field,e),s=new Int32Array(t),l=!1,d=t;d>0;d--){var h=a.evaluateAt(this.field.exp(d));s[t-d]=h,h!==0&&(l=!0)}if(!l)return 0;var p=this.field.getOne();if(i!=null)try{for(var v=JM(i),_=v.next();!_.done;_=v.next()){var E=_.value,A=this.field.exp(e.length-1-E),N=new Vn(this.field,new Int32Array([this.field.subtract(0,A),1]));p=p.multiply(N)}}catch(ye){n={error:ye}}finally{try{_&&!_.done&&(o=v.return)&&o.call(v)}finally{if(n)throw n.error}}for(var F=new Vn(this.field,s),P=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),F,t),L=P[0],G=P[1],Y=this.findErrorLocations(L),Q=this.findErrorMagnitudes(G,L,Y),d=0;d<Y.length;d++){var ie=e.length-1-this.field.log(Y[d]);if(ie<0)throw Ut.getChecksumInstance();e[ie]=this.field.subtract(e[ie],Q[d])}return Y.length},r.prototype.runEuclideanAlgorithm=function(e,t,i){if(e.getDegree()<t.getDegree()){var n=e;e=t,t=n}for(var o=e,a=t,s=this.field.getZero(),l=this.field.getOne();a.getDegree()>=Math.round(i/2);){var d=o,h=s;if(o=a,s=l,o.isZero())throw Ut.getChecksumInstance();a=d;for(var p=this.field.getZero(),v=o.getCoefficient(o.getDegree()),_=this.field.inverse(v);a.getDegree()>=o.getDegree()&&!a.isZero();){var E=a.getDegree()-o.getDegree(),A=this.field.multiply(a.getCoefficient(a.getDegree()),_);p=p.add(this.field.buildMonomial(E,A)),a=a.subtract(o.multiplyByMonomial(E,A))}l=p.multiply(s).subtract(h).negative()}var N=l.getCoefficient(0);if(N===0)throw Ut.getChecksumInstance();var F=this.field.inverse(N),P=l.multiply(F),L=a.multiply(F);return[P,L]},r.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),i=new Int32Array(t),n=0,o=1;o<this.field.getSize()&&n<t;o++)e.evaluateAt(o)===0&&(i[n]=this.field.inverse(o),n++);if(n!==t)throw Ut.getChecksumInstance();return i},r.prototype.findErrorMagnitudes=function(e,t,i){for(var n=t.getDegree(),o=new Int32Array(n),a=1;a<=n;a++)o[n-a]=this.field.multiply(a,t.getCoefficient(a));for(var s=new Vn(this.field,o),l=i.length,d=new Int32Array(l),a=0;a<l;a++){var h=this.field.inverse(i[a]),p=this.field.subtract(0,e.evaluateAt(h)),v=this.field.inverse(s.evaluateAt(h));d[a]=this.field.multiply(p,v)}return d},r}(),tg=e3;var t3=function(){function r(e,t,i,n,o){e instanceof r?this.constructor_2(e):this.constructor_1(e,t,i,n,o)}return r.prototype.constructor_1=function(e,t,i,n,o){var a=t==null||i==null,s=n==null||o==null;if(a&&s)throw new U;a?(t=new ue(0,n.getY()),i=new ue(0,o.getY())):s&&(n=new ue(e.getWidth()-1,t.getY()),o=new ue(e.getWidth()-1,i.getY())),this.image=e,this.topLeft=t,this.bottomLeft=i,this.topRight=n,this.bottomRight=o,this.minX=Math.trunc(Math.min(t.getX(),i.getX())),this.maxX=Math.trunc(Math.max(n.getX(),o.getX())),this.minY=Math.trunc(Math.min(t.getY(),n.getY())),this.maxY=Math.trunc(Math.max(i.getY(),o.getY()))},r.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},r.merge=function(e,t){return e==null?t:t==null?e:new r(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},r.prototype.addMissingRows=function(e,t,i){var n=this.topLeft,o=this.bottomLeft,a=this.topRight,s=this.bottomRight;if(e>0){var l=i?this.topLeft:this.topRight,d=Math.trunc(l.getY()-e);d<0&&(d=0);var h=new ue(l.getX(),d);i?n=h:a=h}if(t>0){var p=i?this.bottomLeft:this.bottomRight,v=Math.trunc(p.getY()+t);v>=this.image.getHeight()&&(v=this.image.getHeight()-1);var _=new ue(p.getX(),v);i?o=_:s=_}return new r(this.image,n,o,a,s)},r.prototype.getMinX=function(){return this.minX},r.prototype.getMaxX=function(){return this.maxX},r.prototype.getMinY=function(){return this.minY},r.prototype.getMaxY=function(){return this.maxY},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getBottomRight=function(){return this.bottomRight},r}(),nc=t3;var r3=function(){function r(e,t,i,n){this.columnCount=e,this.errorCorrectionLevel=n,this.rowCountUpperPart=t,this.rowCountLowerPart=i,this.rowCount=t+i}return r.prototype.getColumnCount=function(){return this.columnCount},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getRowCount=function(){return this.rowCount},r.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},r.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},r}(),ex=r3;var i3=function(){function r(){this.buffer=""}return r.form=function(e,t){var i=-1;function n(a,s,l,d,h,p){if(a==="%%")return"%";if(t[++i]!==void 0){a=d?parseInt(d.substr(1)):void 0;var v=h?parseInt(h.substr(1)):void 0,_;switch(p){case"s":_=t[i];break;case"c":_=t[i][0];break;case"f":_=parseFloat(t[i]).toFixed(a);break;case"p":_=parseFloat(t[i]).toPrecision(a);break;case"e":_=parseFloat(t[i]).toExponential(a);break;case"x":_=parseInt(t[i]).toString(v||16);break;case"d":_=parseFloat(parseInt(t[i],v||10).toPrecision(a)).toFixed(0);break}_=typeof _=="object"?JSON.stringify(_):(+_).toString(v);for(var E=parseInt(l),A=l&&l[0]+""=="0"?"0":" ";_.length<E;)_=s!==void 0?_+A:A+_;return _}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,n)},r.prototype.format=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.buffer+=r.form(e,t)},r.prototype.toString=function(){return this.buffer},r}(),ws=i3;var n3=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o3=function(){function r(e){this.boundingBox=new nc(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return r.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var i=1;i<r.MAX_NEARBY_DISTANCE;i++){var n=this.imageRowToCodewordIndex(e)-i;if(n>=0&&(t=this.codewords[n],t!=null)||(n=this.imageRowToCodewordIndex(e)+i,n<this.codewords.length&&(t=this.codewords[n],t!=null)))return t}return null},r.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},r.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},r.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.getCodewords=function(){return this.codewords},r.prototype.toString=function(){var e,t,i=new ws,n=0;try{for(var o=n3(this.codewords),a=o.next();!a.done;a=o.next()){var s=a.value;if(s==null){i.format("%3d:    |   %n",n++);continue}i.format("%3d: %3d|%3d%n",n++,s.getRowNumber(),s.getValue())}}catch(l){e={error:l}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return i.toString()},r.MAX_NEARBY_DISTANCE=5,r}(),Rd=o3;var a3=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s3=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,o=[],a;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}return o},l3=function(){function r(){this.values=new Map}return r.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},r.prototype.getValue=function(){var e,t,i=-1,n=new Array,o=function(p,v){var _={getKey:function(){return p},getValue:function(){return v}};_.getValue()>i?(i=_.getValue(),n=[],n.push(_.getKey())):_.getValue()===i&&n.push(_.getKey())};try{for(var a=a3(this.values.entries()),s=a.next();!s.done;s=a.next()){var l=s3(s.value,2),d=l[0],h=l[1];o(d,h)}}catch(p){e={error:p}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return lt.toIntArray(n)},r.prototype.getConfidence=function(e){return this.values.get(e)},r}(),ua=l3;var c3=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),rg=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u3=function(r){c3(e,r);function e(t,i){var n=r.call(this,t)||this;return n._isLeft=i,n}return e.prototype.setRowNumbers=function(){var t,i;try{for(var n=rg(this.getCodewords()),o=n.next();!o.done;o=n.next()){var a=o.value;a?.setRowNumberAsRowIndicatorColumn()}}catch(s){t={error:s}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,t);for(var n=this.getBoundingBox(),o=this._isLeft?n.getTopLeft():n.getTopRight(),a=this._isLeft?n.getBottomLeft():n.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(o.getY())),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),d=-1,h=1,p=0,v=s;v<l;v++)if(i[v]!=null){var _=i[v],E=_.getRowNumber()-d;if(E===0)p++;else if(E===1)h=Math.max(h,p),p=1,d=_.getRowNumber();else if(E<0||_.getRowNumber()>=t.getRowCount()||E>v)i[v]=null;else{var A=void 0;h>2?A=(h-2)*E:A=E;for(var N=A>=v,F=1;F<=A&&!N;F++)N=i[v-F]!=null;N?i[v]=null:(d=_.getRowNumber(),p=1)}}},e.prototype.getRowHeights=function(){var t,i,n=this.getBarcodeMetadata();if(n==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);var o=new Int32Array(n.getRowCount());try{for(var a=rg(this.getCodewords()),s=a.next();!s.done;s=a.next()){var l=s.value;if(l!=null){var d=l.getRowNumber();if(d>=o.length)continue;o[d]++}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(t)throw t.error}}return o},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var i=this.getBoundingBox(),n=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(n.getY())),s=this.imageRowToCodewordIndex(Math.trunc(o.getY())),l=this.getCodewords(),d=-1,h=1,p=0,v=a;v<s;v++)if(l[v]!=null){var _=l[v];_.setRowNumberAsRowIndicatorColumn();var E=_.getRowNumber()-d;E===0?p++:E===1?(h=Math.max(h,p),p=1,d=_.getRowNumber()):_.getRowNumber()>=t.getRowCount()?l[v]=null:(d=_.getRowNumber(),p=1)}},e.prototype.getBarcodeMetadata=function(){var t,i,n=this.getCodewords(),o=new ua,a=new ua,s=new ua,l=new ua;try{for(var d=rg(n),h=d.next();!h.done;h=d.next()){var p=h.value;if(p!=null){p.setRowNumberAsRowIndicatorColumn();var v=p.getValue()%30,_=p.getRowNumber();switch(this._isLeft||(_+=2),_%3){case 0:a.setValue(v*3+1);break;case 1:l.setValue(v/3),s.setValue(v%3);break;case 2:o.setValue(v+1);break}}}}catch(A){t={error:A}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(t)throw t.error}}if(o.getValue().length===0||a.getValue().length===0||s.getValue().length===0||l.getValue().length===0||o.getValue()[0]<1||a.getValue()[0]+s.getValue()[0]<lt.MIN_ROWS_IN_BARCODE||a.getValue()[0]+s.getValue()[0]>lt.MAX_ROWS_IN_BARCODE)return null;var E=new ex(o.getValue()[0],a.getValue()[0],s.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(n,E),E},e.prototype.removeIncorrectCodewords=function(t,i){for(var n=0;n<t.length;n++){var o=t[n];if(t[n]!=null){var a=o.getValue()%30,s=o.getRowNumber();if(s>i.getRowCount()){t[n]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:a*3+1!==i.getRowCountUpperPart()&&(t[n]=null);break;case 1:(Math.trunc(a/3)!==i.getErrorCorrectionLevel()||a%3!==i.getRowCountLowerPart())&&(t[n]=null);break;case 2:a+1!==i.getColumnCount()&&(t[n]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+r.prototype.toString.call(this)},e}(Rd),ig=u3;var d3=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},f3=function(){function r(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return r.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=lt.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},r.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},r.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var i=this.detectionResultColumns[t].getCodewords(),n=0;n<i.length;n++)i[n]!=null&&(i[n].hasValidRowNumber()||this.adjustRowNumbers(t,n,i));return e},r.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},r.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),i=0;i<e.length;i++)if(e[i]!=null&&t[i]!=null&&e[i].getRowNumber()===t[i].getRowNumber())for(var n=1;n<=this.barcodeColumnCount;n++){var o=this.detectionResultColumns[n].getCodewords()[i];o!=null&&(o.setRowNumber(e[i].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[n].getCodewords()[i]=null))}}},r.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),i=0;i<t.length;i++)if(t[i]!=null)for(var n=t[i].getRowNumber(),o=0,a=this.barcodeColumnCount+1;a>0&&o<this.ADJUST_ROW_NUMBER_SKIP;a--){var s=this.detectionResultColumns[a].getCodewords()[i];s!=null&&(o=r.adjustRowNumberIfValid(n,o,s),s.hasValidRowNumber()||e++)}return e},r.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),i=0;i<t.length;i++)if(t[i]!=null)for(var n=t[i].getRowNumber(),o=0,a=1;a<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;a++){var s=this.detectionResultColumns[a].getCodewords()[i];s!=null&&(o=r.adjustRowNumberIfValid(n,o,s),s.hasValidRowNumber()||e++)}return e},r.adjustRowNumberIfValid=function(e,t,i){return i==null||i.hasValidRowNumber()||(i.isValidRowNumber(e)?(i.setRowNumber(e),t=0):++t),t},r.prototype.adjustRowNumbers=function(e,t,i){var n,o;if(this.detectionResultColumns[e-1]!=null){var a=i[t],s=this.detectionResultColumns[e-1].getCodewords(),l=s;this.detectionResultColumns[e+1]!=null&&(l=this.detectionResultColumns[e+1].getCodewords());var d=new Array(14);d[2]=s[t],d[3]=l[t],t>0&&(d[0]=i[t-1],d[4]=s[t-1],d[5]=l[t-1]),t>1&&(d[8]=i[t-2],d[10]=s[t-2],d[11]=l[t-2]),t<i.length-1&&(d[1]=i[t+1],d[6]=s[t+1],d[7]=l[t+1]),t<i.length-2&&(d[9]=i[t+2],d[12]=s[t+2],d[13]=l[t+2]);try{for(var h=d3(d),p=h.next();!p.done;p=h.next()){var v=p.value;if(r.adjustRowNumber(a,v))return}}catch(_){n={error:_}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}}},r.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},r.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},r.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},r.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},r.prototype.setBoundingBox=function(e){this.boundingBox=e},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},r.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},r.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new ws,i=0;i<e.getCodewords().length;i++){t.format("CW %3d:",i);for(var n=0;n<this.barcodeColumnCount+2;n++){if(this.detectionResultColumns[n]==null){t.format("    |   ");continue}var o=this.detectionResultColumns[n].getCodewords()[i];if(o==null){t.format("    |   ");continue}t.format(" %3d|%3d",o.getRowNumber(),o.getValue())}t.format("%n")}return t.toString()},r}(),tx=f3;var h3=function(){function r(e,t,i,n){this.rowNumber=r.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(i),this.value=Math.trunc(n)}return r.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},r.prototype.isValidRowNumber=function(e){return e!==r.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},r.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},r.prototype.getWidth=function(){return this.endX-this.startX},r.prototype.getStartX=function(){return this.startX},r.prototype.getEndX=function(){return this.endX},r.prototype.getBucket=function(){return this.bucket},r.prototype.getValue=function(){return this.value},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.setRowNumber=function(e){this.rowNumber=e},r.prototype.toString=function(){return this.rowNumber+"|"+this.value},r.BARCODE_ROW_UNKNOWN=-1,r}(),rx=h3;var p3=function(){function r(){}return r.initialize=function(){for(var e=0;e<lt.SYMBOL_TABLE.length;e++)for(var t=lt.SYMBOL_TABLE[e],i=t&1,n=0;n<lt.BARS_IN_MODULE;n++){for(var o=0;(t&1)===i;)o+=1,t>>=1;i=t&1,r.RATIOS_TABLE[e]||(r.RATIOS_TABLE[e]=new Array(lt.BARS_IN_MODULE)),r.RATIOS_TABLE[e][lt.BARS_IN_MODULE-n-1]=Math.fround(o/lt.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},r.getDecodedValue=function(e){var t=r.getDecodedCodewordValue(r.sampleBitCounts(e));return t!==-1?t:r.getClosestDecodedValue(e)},r.sampleBitCounts=function(e){for(var t=rt.sum(e),i=new Int32Array(lt.BARS_IN_MODULE),n=0,o=0,a=0;a<lt.MODULES_IN_CODEWORD;a++){var s=t/(2*lt.MODULES_IN_CODEWORD)+a*t/lt.MODULES_IN_CODEWORD;o+e[n]<=s&&(o+=e[n],n++),i[n]++}return i},r.getDecodedCodewordValue=function(e){var t=r.getBitValue(e);return lt.getCodeword(t)===-1?-1:t},r.getBitValue=function(e){for(var t=0,i=0;i<e.length;i++)for(var n=0;n<e[i];n++)t=t<<1|(i%2===0?1:0);return Math.trunc(t)},r.getClosestDecodedValue=function(e){var t=rt.sum(e),i=new Array(lt.BARS_IN_MODULE);if(t>1)for(var n=0;n<i.length;n++)i[n]=Math.fround(e[n]/t);var o=Kl.MAX_VALUE,a=-1;this.bSymbolTableReady||r.initialize();for(var s=0;s<r.RATIOS_TABLE.length;s++){for(var l=0,d=r.RATIOS_TABLE[s],h=0;h<lt.BARS_IN_MODULE;h++){var p=Math.fround(d[h]-i[h]);if(l+=Math.fround(p*p),l>=o)break}l<o&&(o=l,a=lt.SYMBOL_TABLE[s])}return a},r.bSymbolTableReady=!1,r.RATIOS_TABLE=new Array(lt.SYMBOL_TABLE.length).map(function(e){return e=new Array(lt.BARS_IN_MODULE)}),r}(),ix=p3;var m3=function(){function r(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return r.prototype.getSegmentIndex=function(){return this.segmentIndex},r.prototype.setSegmentIndex=function(e){this.segmentIndex=e},r.prototype.getFileId=function(){return this.fileId},r.prototype.setFileId=function(e){this.fileId=e},r.prototype.getOptionalData=function(){return this.optionalData},r.prototype.setOptionalData=function(e){this.optionalData=e},r.prototype.isLastSegment=function(){return this.lastSegment},r.prototype.setLastSegment=function(e){this.lastSegment=e},r.prototype.getSegmentCount=function(){return this.segmentCount},r.prototype.setSegmentCount=function(e){this.segmentCount=e},r.prototype.getSender=function(){return this.sender||null},r.prototype.setSender=function(e){this.sender=e},r.prototype.getAddressee=function(){return this.addressee||null},r.prototype.setAddressee=function(e){this.addressee=e},r.prototype.getFileName=function(){return this.fileName},r.prototype.setFileName=function(e){this.fileName=e},r.prototype.getFileSize=function(){return this.fileSize},r.prototype.setFileSize=function(e){this.fileSize=e},r.prototype.getChecksum=function(){return this.checksum},r.prototype.setChecksum=function(e){this.checksum=e},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.setTimestamp=function(e){this.timestamp=e},r}(),ng=m3;var g3=function(){function r(){}return r.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r}(),og=g3;var v3=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),_3=function(r){v3(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Vt),nx=_3;var y3=function(){function r(){}return r.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},r.prototype.writeBytesOffset=function(e,t,i){if(e==null)throw new nx;if(t<0||t>e.length||i<0||t+i>e.length||t+i<0)throw new hs;if(i===0)return;for(var n=0;n<i;n++)this.write(e[t+n])},r.prototype.flush=function(){},r.prototype.close=function(){},r}(),ox=y3;var b3=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),x3=function(r){b3(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Vt),ax=x3;var E3=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),w3=function(r){E3(e,r);function e(t){t===void 0&&(t=32);var i=r.call(this)||this;if(i.count=0,t<0)throw new ae("Negative initial size: "+t);return i.buf=new Uint8Array(t),i}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var i=this.buf.length,n=i<<1;if(n-t<0&&(n=t),n<0){if(t<0)throw new ax;n=Pe.MAX_VALUE}this.buf=Ct.copyOfUint8Array(this.buf,n)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,i,n){if(i<0||i>t.length||n<0||i+n-t.length>0)throw new hs;this.ensureCapacity(this.count+n),tt.arraycopy(t,i,this.buf,this.count,n),this.count+=n},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Ct.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(ox),sx=w3;var Kt=function(r){return r[r.ALPHA=0]="ALPHA",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.PUNCT=3]="PUNCT",r[r.ALPHA_SHIFT=4]="ALPHA_SHIFT",r[r.PUNCT_SHIFT=5]="PUNCT_SHIFT",r}(Kt||{});function lx(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Md;function uo(r){if(typeof Md>"u"&&(Md=lx()),Md===null)throw new Error("BigInt is not supported!");return Md(r)}function I3(){var r=[];r[0]=uo(1);var e=uo(900);r[1]=e;for(var t=2;t<16;t++)r[t]=r[t-1]*e;return r}var C3=function(){function r(){}return r.decode=function(e,t){var i=new we(""),n=$t.ISO8859_1;i.enableDecoding(n);for(var o=1,a=e[o++],s=new ng;o<e[0];){switch(a){case r.TEXT_COMPACTION_MODE_LATCH:o=r.textCompaction(e,o,i);break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:o=r.byteCompaction(a,e,n,o,i);break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[o++]);break;case r.NUMERIC_COMPACTION_MODE_LATCH:o=r.numericCompaction(e,o,i);break;case r.ECI_CHARSET:var l=$t.getCharacterSetECIByValue(e[o++]);break;case r.ECI_GENERAL_PURPOSE:o+=2;break;case r.ECI_USER_DEFINED:o++;break;case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=r.decodeMacroBlock(e,o,s);break;case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:throw new J;default:o--,o=r.textCompaction(e,o,i);break}if(o<e.length)a=e[o++];else throw J.getFormatInstance()}if(i.length()===0)throw J.getFormatInstance();var d=new Nn(null,i.toString(),null,t);return d.setOther(s),d},r.decodeMacroBlock=function(e,t,i){if(t+r.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw J.getFormatInstance();for(var n=new Int32Array(r.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<r.NUMBER_OF_SEQUENCE_CODEWORDS;o++,t++)n[o]=e[t];i.setSegmentIndex(Pe.parseInt(r.decodeBase900toBase10(n,r.NUMBER_OF_SEQUENCE_CODEWORDS)));var a=new we;t=r.textCompaction(e,t,a),i.setFileId(a.toString());var s=-1;for(e[t]===r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new we;t=r.textCompaction(e,t+1,l),i.setFileName(l.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var d=new we;t=r.textCompaction(e,t+1,d),i.setSender(d.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var h=new we;t=r.textCompaction(e,t+1,h),i.setAddressee(h.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var p=new we;t=r.numericCompaction(e,t+1,p),i.setSegmentCount(Pe.parseInt(p.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var v=new we;t=r.numericCompaction(e,t+1,v),i.setTimestamp(og.parseLong(v.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var _=new we;t=r.numericCompaction(e,t+1,_),i.setChecksum(Pe.parseInt(_.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var E=new we;t=r.numericCompaction(e,t+1,E),i.setFileSize(og.parseLong(E.toString()));break;default:throw J.getFormatInstance()}break;case r.MACRO_PDF417_TERMINATOR:t++,i.setLastSegment(!0);break;default:throw J.getFormatInstance()}if(s!==-1){var A=t-s;i.isLastSegment()&&A--,i.setOptionalData(Ct.copyOfRange(e,s,s+A))}return t},r.textCompaction=function(e,t,i){for(var n=new Int32Array((e[0]-t)*2),o=new Int32Array((e[0]-t)*2),a=0,s=!1;t<e[0]&&!s;){var l=e[t++];if(l<r.TEXT_COMPACTION_MODE_LATCH)n[a]=l/30,n[a+1]=l%30,a+=2;else switch(l){case r.TEXT_COMPACTION_MODE_LATCH:n[a++]=r.TEXT_COMPACTION_MODE_LATCH;break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,s=!0;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n[a]=r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=e[t++],o[a]=l,a++;break}}return r.decodeTextCompaction(n,o,a,i),t},r.decodeTextCompaction=function(e,t,i,n){for(var o=Kt.ALPHA,a=Kt.ALPHA,s=0;s<i;){var l=e[s],d="";switch(o){case Kt.ALPHA:if(l<26)d=String.fromCharCode(65+l);else switch(l){case 26:d=" ";break;case r.LL:o=Kt.LOWER;break;case r.ML:o=Kt.MIXED;break;case r.PS:a=o,o=Kt.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:o=Kt.ALPHA;break}break;case Kt.LOWER:if(l<26)d=String.fromCharCode(97+l);else switch(l){case 26:d=" ";break;case r.AS:a=o,o=Kt.ALPHA_SHIFT;break;case r.ML:o=Kt.MIXED;break;case r.PS:a=o,o=Kt.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:o=Kt.ALPHA;break}break;case Kt.MIXED:if(l<r.PL)d=r.MIXED_CHARS[l];else switch(l){case r.PL:o=Kt.PUNCT;break;case 26:d=" ";break;case r.LL:o=Kt.LOWER;break;case r.AL:o=Kt.ALPHA;break;case r.PS:a=o,o=Kt.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:o=Kt.ALPHA;break}break;case Kt.PUNCT:if(l<r.PAL)d=r.PUNCT_CHARS[l];else switch(l){case r.PAL:o=Kt.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:o=Kt.ALPHA;break}break;case Kt.ALPHA_SHIFT:if(o=a,l<26)d=String.fromCharCode(65+l);else switch(l){case 26:d=" ";break;case r.TEXT_COMPACTION_MODE_LATCH:o=Kt.ALPHA;break}break;case Kt.PUNCT_SHIFT:if(o=a,l<r.PAL)d=r.PUNCT_CHARS[l];else switch(l){case r.PAL:o=Kt.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:o=Kt.ALPHA;break}break}d!==""&&n.append(d),s++}},r.byteCompaction=function(e,t,i,n,o){var a=new sx,s=0,l=0,d=!1;switch(e){case r.BYTE_COMPACTION_MODE_LATCH:for(var h=new Int32Array(6),p=t[n++];n<t[0]&&!d;)switch(h[s++]=p,l=900*l+p,p=t[n++],p){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:n--,d=!0;break;default:if(s%5===0&&s>0){for(var v=0;v<6;++v)a.write(Number(uo(l)>>uo(8*(5-v))));l=0,s=0}break}n===t[0]&&p<r.TEXT_COMPACTION_MODE_LATCH&&(h[s++]=p);for(var _=0;_<s;_++)a.write(h[_]);break;case r.BYTE_COMPACTION_MODE_LATCH_6:for(;n<t[0]&&!d;){var E=t[n++];if(E<r.TEXT_COMPACTION_MODE_LATCH)s++,l=900*l+E;else switch(E){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:n--,d=!0;break}if(s%5===0&&s>0){for(var v=0;v<6;++v)a.write(Number(uo(l)>>uo(8*(5-v))));l=0,s=0}}break}return o.append(Pr.decode(a.toByteArray(),i)),n},r.numericCompaction=function(e,t,i){for(var n=0,o=!1,a=new Int32Array(r.MAX_NUMERIC_CODEWORDS);t<e[0]&&!o;){var s=e[t++];if(t===e[0]&&(o=!0),s<r.TEXT_COMPACTION_MODE_LATCH)a[n]=s,n++;else switch(s){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,o=!0;break}(n%r.MAX_NUMERIC_CODEWORDS===0||s===r.NUMERIC_COMPACTION_MODE_LATCH||o)&&n>0&&(i.append(r.decodeBase900toBase10(a,n)),n=0)}return t},r.decodeBase900toBase10=function(e,t){for(var i=uo(0),n=0;n<t;n++)i+=r.EXP900[t-n-1]*uo(e[n]);var o=i.toString();if(o.charAt(0)!=="1")throw new J;return o.substring(1)},r.TEXT_COMPACTION_MODE_LATCH=900,r.BYTE_COMPACTION_MODE_LATCH=901,r.NUMERIC_COMPACTION_MODE_LATCH=902,r.BYTE_COMPACTION_MODE_LATCH_6=924,r.ECI_USER_DEFINED=925,r.ECI_GENERAL_PURPOSE=926,r.ECI_CHARSET=927,r.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,r.MACRO_PDF417_TERMINATOR=922,r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,r.MAX_NUMERIC_CODEWORDS=15,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,r.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,r.PL=25,r.LL=27,r.AS=27,r.ML=28,r.AL=28,r.PS=29,r.PAL=29,r.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,r.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",r.EXP900=lx()?I3():[],r.NUMBER_OF_SEQUENCE_CODEWORDS=2,r}(),ag=C3;var oc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},A3=function(){function r(){}return r.decode=function(e,t,i,n,o,a,s){for(var l=new nc(e,t,i,n,o),d=null,h=null,p,v=!0;;v=!1){if(t!=null&&(d=r.getRowIndicatorColumn(e,l,t,!0,a,s)),n!=null&&(h=r.getRowIndicatorColumn(e,l,n,!1,a,s)),p=r.merge(d,h),p==null)throw U.getNotFoundInstance();var _=p.getBoundingBox();if(v&&_!=null&&(_.getMinY()<l.getMinY()||_.getMaxY()>l.getMaxY()))l=_;else break}p.setBoundingBox(l);var E=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,d),p.setDetectionResultColumn(E,h);for(var A=d!=null,N=1;N<=E;N++){var F=A?N:E-N;if(p.getDetectionResultColumn(F)===void 0){var P=void 0;F===0||F===E?P=new ig(l,F===0):P=new Rd(l),p.setDetectionResultColumn(F,P);for(var L=-1,G=L,Y=l.getMinY();Y<=l.getMaxY();Y++){if(L=r.getStartColumn(p,F,Y,A),L<0||L>l.getMaxX()){if(G===-1)continue;L=G}var Q=r.detectCodeword(e,l.getMinX(),l.getMaxX(),A,L,Y,a,s);Q!=null&&(P.setCodeword(Y,Q),G=L,a=Math.min(a,Q.getWidth()),s=Math.max(s,Q.getWidth()))}}}return r.createDecoderResult(p)},r.merge=function(e,t){if(e==null&&t==null)return null;var i=r.getBarcodeMetadata(e,t);if(i==null)return null;var n=nc.merge(r.adjustBoundingBox(e),r.adjustBoundingBox(t));return new tx(i,n)},r.adjustBoundingBox=function(e){var t,i;if(e==null)return null;var n=e.getRowHeights();if(n==null)return null;var o=r.getMax(n),a=0;try{for(var s=oc(n),l=s.next();!l.done;l=s.next()){var d=l.value;if(a+=o-d,d>0)break}}catch(_){t={error:_}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(t)throw t.error}}for(var h=e.getCodewords(),p=0;a>0&&h[p]==null;p++)a--;for(var v=0,p=n.length-1;p>=0&&(v+=o-n[p],!(n[p]>0));p--);for(var p=h.length-1;v>0&&h[p]==null;p--)v--;return e.getBoundingBox().addMissingRows(a,v,e.isLeft())},r.getMax=function(e){var t,i,n=-1;try{for(var o=oc(e),a=o.next();!a.done;a=o.next()){var s=a.value;n=Math.max(n,s)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return n},r.getBarcodeMetadata=function(e,t){var i;if(e==null||(i=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var n;return t==null||(n=t.getBarcodeMetadata())==null?i:i.getColumnCount()!==n.getColumnCount()&&i.getErrorCorrectionLevel()!==n.getErrorCorrectionLevel()&&i.getRowCount()!==n.getRowCount()?null:i},r.getRowIndicatorColumn=function(e,t,i,n,o,a){for(var s=new ig(t,n),l=0;l<2;l++)for(var d=l===0?1:-1,h=Math.trunc(Math.trunc(i.getX())),p=Math.trunc(Math.trunc(i.getY()));p<=t.getMaxY()&&p>=t.getMinY();p+=d){var v=r.detectCodeword(e,0,e.getWidth(),n,h,p,o,a);v!=null&&(s.setCodeword(p,v),n?h=v.getStartX():h=v.getEndX())}return s},r.adjustCodewordCount=function(e,t){var i=t[0][1],n=i.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-r.getNumberOfECCodeWords(e.getBarcodeECLevel());if(n.length===0){if(o<1||o>lt.MAX_CODEWORDS_IN_BARCODE)throw U.getNotFoundInstance();i.setValue(o)}else n[0]!==o&&i.setValue(o)},r.createDecoderResult=function(e){var t=r.createBarcodeMatrix(e);r.adjustCodewordCount(e,t);for(var i=new Array,n=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],a=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var l=0;l<e.getBarcodeColumnCount();l++){var d=t[s][l+1].getValue(),h=s*e.getBarcodeColumnCount()+l;d.length===0?i.push(h):d.length===1?n[h]=d[0]:(a.push(h),o.push(d))}for(var p=new Array(o.length),v=0;v<p.length;v++)p[v]=o[v];return r.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),n,lt.toIntArray(i),lt.toIntArray(a),p)},r.createDecoderResultFromAmbiguousValues=function(e,t,i,n,o){for(var a=new Int32Array(n.length),s=100;s-- >0;){for(var l=0;l<a.length;l++)t[n[l]]=o[l][a[l]];try{return r.decodeCodewords(t,e,i)}catch(h){var d=h instanceof Ut;if(!d)throw h}if(a.length===0)throw Ut.getChecksumInstance();for(var l=0;l<a.length;l++)if(a[l]<o[l].length-1){a[l]++;break}else if(a[l]=0,l===a.length-1)throw Ut.getChecksumInstance()}throw Ut.getChecksumInstance()},r.createBarcodeMatrix=function(e){for(var t,i,n,o,a=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<a.length;s++)for(var l=0;l<a[s].length;l++)a[s][l]=new ua;var d=0;try{for(var h=oc(e.getDetectionResultColumns()),p=h.next();!p.done;p=h.next()){var v=p.value;if(v!=null)try{for(var _=(n=void 0,oc(v.getCodewords())),E=_.next();!E.done;E=_.next()){var A=E.value;if(A!=null){var N=A.getRowNumber();if(N>=0){if(N>=a.length)continue;a[N][d].setValue(A.getValue())}}}}catch(F){n={error:F}}finally{try{E&&!E.done&&(o=_.return)&&o.call(_)}finally{if(n)throw n.error}}d++}}catch(F){t={error:F}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(t)throw t.error}}return a},r.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},r.getStartColumn=function(e,t,i,n){var o,a,s=n?1:-1,l=null;if(r.isValidBarcodeColumn(e,t-s)&&(l=e.getDetectionResultColumn(t-s).getCodeword(i)),l!=null)return n?l.getEndX():l.getStartX();if(l=e.getDetectionResultColumn(t).getCodewordNearby(i),l!=null)return n?l.getStartX():l.getEndX();if(r.isValidBarcodeColumn(e,t-s)&&(l=e.getDetectionResultColumn(t-s).getCodewordNearby(i)),l!=null)return n?l.getEndX():l.getStartX();for(var d=0;r.isValidBarcodeColumn(e,t-s);){t-=s;try{for(var h=(o=void 0,oc(e.getDetectionResultColumn(t).getCodewords())),p=h.next();!p.done;p=h.next()){var v=p.value;if(v!=null)return(n?v.getEndX():v.getStartX())+s*d*(v.getEndX()-v.getStartX())}}catch(_){o={error:_}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}d++}return n?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},r.detectCodeword=function(e,t,i,n,o,a,s,l){o=r.adjustCodewordStartColumn(e,t,i,n,o,a);var d=r.getModuleBitCount(e,t,i,n,o,a);if(d==null)return null;var h,p=rt.sum(d);if(n)h=o+p;else{for(var v=0;v<d.length/2;v++){var _=d[v];d[v]=d[d.length-1-v],d[d.length-1-v]=_}h=o,o=h-p}if(!r.checkCodewordSkew(p,s,l))return null;var E=ix.getDecodedValue(d),A=lt.getCodeword(E);return A===-1?null:new rx(o,h,r.getCodewordBucketNumber(E),A)},r.getModuleBitCount=function(e,t,i,n,o,a){for(var s=o,l=new Int32Array(8),d=0,h=n?1:-1,p=n;(n?s<i:s>=t)&&d<l.length;)e.get(s,a)===p?(l[d]++,s+=h):(d++,p=!p);return d===l.length||s===(n?i:t)&&d===l.length-1?l:null},r.getNumberOfECCodeWords=function(e){return 2<<e},r.adjustCodewordStartColumn=function(e,t,i,n,o,a){for(var s=o,l=n?-1:1,d=0;d<2;d++){for(;(n?s>=t:s<i)&&n===e.get(s,a);){if(Math.abs(o-s)>r.CODEWORD_SKEW_SIZE)return o;s+=l}l=-l,n=!n}return s},r.checkCodewordSkew=function(e,t,i){return t-r.CODEWORD_SKEW_SIZE<=e&&e<=i+r.CODEWORD_SKEW_SIZE},r.decodeCodewords=function(e,t,i){if(e.length===0)throw J.getFormatInstance();var n=1<<t+1,o=r.correctErrors(e,i,n);r.verifyCodewordCount(e,n);var a=ag.decode(e,""+t);return a.setErrorsCorrected(o),a.setErasures(i.length),a},r.correctErrors=function(e,t,i){if(t!=null&&t.length>i/2+r.MAX_ERRORS||i<0||i>r.MAX_EC_CODEWORDS)throw Ut.getChecksumInstance();return r.errorCorrection.decode(e,i,t)},r.verifyCodewordCount=function(e,t){if(e.length<4)throw J.getFormatInstance();var i=e[0];if(i>e.length)throw J.getFormatInstance();if(i===0)if(t<e.length)e[0]=e.length-t;else throw J.getFormatInstance()},r.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),i=0,n=t.length-1;!((e&1)!==i&&(i=e&1,n--,n<0));)t[n]++,e>>=1;return t},r.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},r.getCodewordBucketNumber_number=function(e){return r.getCodewordBucketNumber(r.getBitCountForCodeword(e))},r.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},r.toString=function(e){for(var t=new ws,i=0;i<e.length;i++){t.format("Row %2d: ",i);for(var n=0;n<e[i].length;n++){var o=e[i][n];o.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}t.format("%n")}return t.toString()},r.CODEWORD_SKEW_SIZE=2,r.MAX_ERRORS=3,r.MAX_EC_CODEWORDS=512,r.errorCorrection=new tg,r}(),cx=A3;var S3=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},T3=function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var i=r.decode(e,t,!1);if(i==null||i.length===0||i[0]==null)throw U.getNotFoundInstance();return i[0]},r.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return r.decode(e,t,!0)}catch(i){throw i instanceof J||i instanceof Ut?U.getNotFoundInstance():i}},r.decode=function(e,t,i){var n,o,a=new Array,s=Kb.detectMultiple(e,t,i);try{for(var l=S3(s.getPoints()),d=l.next();!d.done;d=l.next()){var h=d.value,p=cx.decode(s.getBits(),h[4],h[5],h[6],h[7],r.getMinCodewordWidth(h),r.getMaxCodewordWidth(h)),v=new Et(p.getText(),p.getRawBytes(),void 0,h,le.PDF_417);v.putMetadata(Jt.ERROR_CORRECTION_LEVEL,p.getECLevel());var _=p.getOther();_!=null&&v.putMetadata(Jt.PDF417_EXTRA_METADATA,_),a.push(v)}}catch(E){n={error:E}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}return a.map(function(E){return E})},r.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMinWidth=function(e,t){return e==null||t==null?Pe.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(r.getMaxWidth(e[0],e[4]),r.getMaxWidth(e[6],e[2])*lt.MODULES_IN_CODEWORD/lt.MODULES_IN_STOP_PATTERN),Math.max(r.getMaxWidth(e[1],e[5]),r.getMaxWidth(e[7],e[3])*lt.MODULES_IN_CODEWORD/lt.MODULES_IN_STOP_PATTERN)))},r.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(r.getMinWidth(e[0],e[4]),r.getMinWidth(e[6],e[2])*lt.MODULES_IN_CODEWORD/lt.MODULES_IN_STOP_PATTERN),Math.min(r.getMinWidth(e[1],e[5]),r.getMinWidth(e[7],e[3])*lt.MODULES_IN_CODEWORD/lt.MODULES_IN_STOP_PATTERN)))},r.prototype.reset=function(){},r}(),Is=T3;var D3=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),O3=function(r){D3(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReaderException",e}(Vt),Pd=O3;var ux=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},R3=function(){function r(){}return r.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},r.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},r.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(st.TRY_HARDER)!==void 0,i=e==null?null:e.get(st.POSSIBLE_FORMATS),n=new Array;if(i!=null){var o=i.some(function(a){return a===le.UPC_A||a===le.UPC_E||a===le.EAN_13||a===le.EAN_8||a===le.CODABAR||a===le.CODE_39||a===le.CODE_93||a===le.CODE_128||a===le.ITF||a===le.RSS_14||a===le.RSS_EXPANDED});o&&!t&&n.push(new co(e)),i.includes(le.QR_CODE)&&n.push(new Es),i.includes(le.DATA_MATRIX)&&n.push(new xs),i.includes(le.AZTEC)&&n.push(new gs),i.includes(le.PDF_417)&&n.push(new Is),o&&t&&n.push(new co(e))}n.length===0&&(t||n.push(new co(e)),n.push(new Es),n.push(new xs),n.push(new gs),n.push(new Is),t&&n.push(new co(e))),this.readers=n},r.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var i=ux(this.readers),n=i.next();!n.done;n=i.next()){var o=n.value;o.reset()}}catch(a){e={error:a}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},r.prototype.decodeInternal=function(e){var t,i;if(this.readers===null)throw new Pd("No readers where selected, nothing can be read.");try{for(var n=ux(this.readers),o=n.next();!o.done;o=n.next()){var a=o.value;try{return a.decode(e,this.hints)}catch(s){if(s instanceof Pd)continue}}}catch(s){t={error:s}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}throw new U("No MultiFormat Readers were able to detect the code.")},r}(),sg=R3;var M3=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),dx=function(r){M3(e,r);function e(t,i){t===void 0&&(t=null),i===void 0&&(i=500);var n=this,o=new sg;return o.setHints(t),n=r.call(this,o,i)||this,n}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e}(Bi);var P3=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),CW=function(r){P3(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new Is,t)||this}return e}(Bi);var N3=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),DW=function(r){N3(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new Es,t)||this}return e}(Bi);var fx=function(r){return r[r.ERROR_CORRECTION=0]="ERROR_CORRECTION",r[r.CHARACTER_SET=1]="CHARACTER_SET",r[r.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",r[r.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",r[r.MIN_SIZE=4]="MIN_SIZE",r[r.MAX_SIZE=5]="MAX_SIZE",r[r.MARGIN=6]="MARGIN",r[r.PDF417_COMPACT=7]="PDF417_COMPACT",r[r.PDF417_COMPACTION=8]="PDF417_COMPACTION",r[r.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",r[r.AZTEC_LAYERS=10]="AZTEC_LAYERS",r[r.QR_VERSION=11]="QR_VERSION",r[r.GS1_FORMAT=12]="GS1_FORMAT",r[r.FORCE_C40=13]="FORCE_C40",r}(fx||{}),pt=fx;var F3=function(){function r(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Vi(e,Int32Array.from([1])))}return r.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var i=t[t.length-1],n=this.field,o=t.length;o<=e;o++){var a=i.multiply(new Vi(n,Int32Array.from([1,n.exp(o-1+n.getGeneratorBase())])));t.push(a),i=a}return t[e]},r.prototype.encode=function(e,t){if(t===0)throw new ae("No error correction bytes");var i=e.length-t;if(i<=0)throw new ae("No data bytes provided");var n=this.buildGenerator(t),o=new Int32Array(i);tt.arraycopy(e,0,o,0,i);var a=new Vi(this.field,o);a=a.multiplyByMonomial(t,1);for(var s=a.divide(n)[1],l=s.getCoefficients(),d=t-l.length,h=0;h<d;h++)e[i+h]=0;tt.arraycopy(l,0,e,i+d,l.length)},r}(),ac=F3;var k3=function(){function r(){}return r.applyMaskPenaltyRule1=function(e){return r.applyMaskPenaltyRule1Internal(e,!0)+r.applyMaskPenaltyRule1Internal(e,!1)},r.applyMaskPenaltyRule2=function(e){for(var t=0,i=e.getArray(),n=e.getWidth(),o=e.getHeight(),a=0;a<o-1;a++)for(var s=i[a],l=0;l<n-1;l++){var d=s[l];d===s[l+1]&&d===i[a+1][l]&&d===i[a+1][l+1]&&t++}return r.N2*t},r.applyMaskPenaltyRule3=function(e){for(var t=0,i=e.getArray(),n=e.getWidth(),o=e.getHeight(),a=0;a<o;a++)for(var s=0;s<n;s++){var l=i[a];s+6<n&&l[s]===1&&l[s+1]===0&&l[s+2]===1&&l[s+3]===1&&l[s+4]===1&&l[s+5]===0&&l[s+6]===1&&(r.isWhiteHorizontal(l,s-4,s)||r.isWhiteHorizontal(l,s+7,s+11))&&t++,a+6<o&&i[a][s]===1&&i[a+1][s]===0&&i[a+2][s]===1&&i[a+3][s]===1&&i[a+4][s]===1&&i[a+5][s]===0&&i[a+6][s]===1&&(r.isWhiteVertical(i,s,a-4,a)||r.isWhiteVertical(i,s,a+7,a+11))&&t++}return t*r.N3},r.isWhiteHorizontal=function(e,t,i){t=Math.max(t,0),i=Math.min(i,e.length);for(var n=t;n<i;n++)if(e[n]===1)return!1;return!0},r.isWhiteVertical=function(e,t,i,n){i=Math.max(i,0),n=Math.min(n,e.length);for(var o=i;o<n;o++)if(e[o][t]===1)return!1;return!0},r.applyMaskPenaltyRule4=function(e){for(var t=0,i=e.getArray(),n=e.getWidth(),o=e.getHeight(),a=0;a<o;a++)for(var s=i[a],l=0;l<n;l++)s[l]===1&&t++;var d=e.getHeight()*e.getWidth(),h=Math.floor(Math.abs(t*2-d)*10/d);return h*r.N4},r.getDataMaskBit=function(e,t,i){var n,o;switch(e){case 0:n=i+t&1;break;case 1:n=i&1;break;case 2:n=t%3;break;case 3:n=(i+t)%3;break;case 4:n=Math.floor(i/2)+Math.floor(t/3)&1;break;case 5:o=i*t,n=(o&1)+o%3;break;case 6:o=i*t,n=(o&1)+o%3&1;break;case 7:o=i*t,n=o%3+(i+t&1)&1;break;default:throw new ae("Invalid mask pattern: "+e)}return n===0},r.applyMaskPenaltyRule1Internal=function(e,t){for(var i=0,n=t?e.getHeight():e.getWidth(),o=t?e.getWidth():e.getHeight(),a=e.getArray(),s=0;s<n;s++){for(var l=0,d=-1,h=0;h<o;h++){var p=t?a[s][h]:a[h][s];p===d?l++:(l>=5&&(i+=r.N1+(l-5)),l=1,d=p)}l>=5&&(i+=r.N1+(l-5))}return i},r.N1=3,r.N2=3,r.N3=40,r.N4=10,r}(),fo=k3;var L3=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},B3=function(){function r(e,t){this.width=e,this.height=t;for(var i=new Array(t),n=0;n!==t;n++)i[n]=new Uint8Array(e);this.bytes=i}return r.prototype.getHeight=function(){return this.height},r.prototype.getWidth=function(){return this.width},r.prototype.get=function(e,t){return this.bytes[t][e]},r.prototype.getArray=function(){return this.bytes},r.prototype.setNumber=function(e,t,i){this.bytes[t][e]=i},r.prototype.setBoolean=function(e,t,i){this.bytes[t][e]=i?1:0},r.prototype.clear=function(e){var t,i;try{for(var n=L3(this.bytes),o=n.next();!o.done;o=n.next()){var a=o.value;Ct.fill(a,e)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var i=0,n=this.height;i<n;++i)for(var o=this.bytes[i],a=t.bytes[i],s=0,l=this.width;s<l;++s)if(o[s]!==a[s])return!1;return!0},r.prototype.toString=function(){for(var e=new we,t=0,i=this.height;t<i;++t){for(var n=this.bytes[t],o=0,a=this.width;o<a;++o)switch(n[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},r}(),sc=B3;var V3=function(){function r(){this.maskPattern=-1}return r.prototype.getMode=function(){return this.mode},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getVersion=function(){return this.version},r.prototype.getMaskPattern=function(){return this.maskPattern},r.prototype.getMatrix=function(){return this.matrix},r.prototype.toString=function(){var e=new we;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},r.prototype.setMode=function(e){this.mode=e},r.prototype.setECLevel=function(e){this.ecLevel=e},r.prototype.setVersion=function(e){this.version=e},r.prototype.setMaskPattern=function(e){this.maskPattern=e},r.prototype.setMatrix=function(e){this.matrix=e},r.isValidMaskPattern=function(e){return e>=0&&e<r.NUM_MASK_PATTERNS},r.NUM_MASK_PATTERNS=8,r}(),Cs=V3;var U3=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),G3=function(r){U3(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="WriterException",e}(Vt),Wt=G3;var j3=function(){function r(){}return r.clearMatrix=function(e){e.clear(255)},r.buildMatrix=function(e,t,i,n,o){r.clearMatrix(o),r.embedBasicPatterns(i,o),r.embedTypeInfo(t,n,o),r.maybeEmbedVersionInfo(i,o),r.embedDataBits(e,n,o)},r.embedBasicPatterns=function(e,t){r.embedPositionDetectionPatternsAndSeparators(t),r.embedDarkDotAtLeftBottomCorner(t),r.maybeEmbedPositionAdjustmentPatterns(e,t),r.embedTimingPatterns(t)},r.embedTypeInfo=function(e,t,i){var n=new qt;r.makeTypeInfoBits(e,t,n);for(var o=0,a=n.getSize();o<a;++o){var s=n.get(n.getSize()-1-o),l=r.TYPE_INFO_COORDINATES[o],d=l[0],h=l[1];if(i.setBoolean(d,h,s),o<8){var p=i.getWidth()-o-1,v=8;i.setBoolean(p,v,s)}else{var p=8,v=i.getHeight()-7+(o-8);i.setBoolean(p,v,s)}}},r.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var i=new qt;r.makeVersionInfoBits(e,i);for(var n=6*3-1,o=0;o<6;++o)for(var a=0;a<3;++a){var s=i.get(n);n--,t.setBoolean(o,t.getHeight()-11+a,s),t.setBoolean(t.getHeight()-11+a,o,s)}}},r.embedDataBits=function(e,t,i){for(var n=0,o=-1,a=i.getWidth()-1,s=i.getHeight()-1;a>0;){for(a===6&&(a-=1);s>=0&&s<i.getHeight();){for(var l=0;l<2;++l){var d=a-l;if(r.isEmpty(i.get(d,s))){var h=void 0;n<e.getSize()?(h=e.get(n),++n):h=!1,t!==255&&fo.getDataMaskBit(t,d,s)&&(h=!h),i.setBoolean(d,s,h)}}s+=o}o=-o,s+=o,a-=2}if(n!==e.getSize())throw new Wt("Not all bits consumed: "+n+"/"+e.getSize())},r.findMSBSet=function(e){return 32-Pe.numberOfLeadingZeros(e)},r.calculateBCHCode=function(e,t){if(t===0)throw new ae("0 polynomial");var i=r.findMSBSet(t);for(e<<=i-1;r.findMSBSet(e)>=i;)e^=t<<r.findMSBSet(e)-i;return e},r.makeTypeInfoBits=function(e,t,i){if(!Cs.isValidMaskPattern(t))throw new Wt("Invalid mask pattern");var n=e.getBits()<<3|t;i.appendBits(n,5);var o=r.calculateBCHCode(n,r.TYPE_INFO_POLY);i.appendBits(o,10);var a=new qt;if(a.appendBits(r.TYPE_INFO_MASK_PATTERN,15),i.xor(a),i.getSize()!==15)throw new Wt("should not happen but we got: "+i.getSize())},r.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var i=r.calculateBCHCode(e.getVersionNumber(),r.VERSION_INFO_POLY);if(t.appendBits(i,12),t.getSize()!==18)throw new Wt("should not happen but we got: "+t.getSize())},r.isEmpty=function(e){return e===255},r.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var i=(t+1)%2;r.isEmpty(e.get(t,6))&&e.setNumber(t,6,i),r.isEmpty(e.get(6,t))&&e.setNumber(6,t,i)}},r.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Wt;e.setNumber(8,e.getHeight()-8,1)},r.embedHorizontalSeparationPattern=function(e,t,i){for(var n=0;n<8;++n){if(!r.isEmpty(i.get(e+n,t)))throw new Wt;i.setNumber(e+n,t,0)}},r.embedVerticalSeparationPattern=function(e,t,i){for(var n=0;n<7;++n){if(!r.isEmpty(i.get(e,t+n)))throw new Wt;i.setNumber(e,t+n,0)}},r.embedPositionAdjustmentPattern=function(e,t,i){for(var n=0;n<5;++n)for(var o=r.POSITION_ADJUSTMENT_PATTERN[n],a=0;a<5;++a)i.setNumber(e+a,t+n,o[a])},r.embedPositionDetectionPattern=function(e,t,i){for(var n=0;n<7;++n)for(var o=r.POSITION_DETECTION_PATTERN[n],a=0;a<7;++a)i.setNumber(e+a,t+n,o[a])},r.embedPositionDetectionPatternsAndSeparators=function(e){var t=r.POSITION_DETECTION_PATTERN[0].length;r.embedPositionDetectionPattern(0,0,e),r.embedPositionDetectionPattern(e.getWidth()-t,0,e),r.embedPositionDetectionPattern(0,e.getWidth()-t,e);var i=8;r.embedHorizontalSeparationPattern(0,i-1,e),r.embedHorizontalSeparationPattern(e.getWidth()-i,i-1,e),r.embedHorizontalSeparationPattern(0,e.getWidth()-i,e);var n=7;r.embedVerticalSeparationPattern(n,0,e),r.embedVerticalSeparationPattern(e.getHeight()-n-1,0,e),r.embedVerticalSeparationPattern(n,e.getHeight()-n,e)},r.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var i=e.getVersionNumber()-1,n=r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[i],o=0,a=n.length;o!==a;o++){var s=n[o];if(s>=0)for(var l=0;l!==a;l++){var d=n[l];d>=0&&r.isEmpty(t.get(d,s))&&r.embedPositionAdjustmentPattern(d-2,s-2,t)}}},r.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),r.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),r.VERSION_INFO_POLY=7973,r.TYPE_INFO_POLY=1335,r.TYPE_INFO_MASK_PATTERN=21522,r}(),Nd=j3;var z3=function(){function r(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return r.prototype.getDataBytes=function(){return this.dataBytes},r.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},r}(),hx=z3;var px=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},H3=function(){function r(){}return r.calculateMaskPenalty=function(e){return fo.applyMaskPenaltyRule1(e)+fo.applyMaskPenaltyRule2(e)+fo.applyMaskPenaltyRule3(e)+fo.applyMaskPenaltyRule4(e)},r.encode=function(e,t,i){i===void 0&&(i=null);var n=r.DEFAULT_BYTE_MODE_ENCODING,o=i!==null&&i.get(pt.CHARACTER_SET)!==void 0;o&&(n=i.get(pt.CHARACTER_SET).toString());var a=this.chooseMode(e,n),s=new qt;if(a===Ht.BYTE&&(o||r.DEFAULT_BYTE_MODE_ENCODING!==n)){var l=$t.getCharacterSetECIByName(n);l!==void 0&&this.appendECI(l,s)}this.appendModeInfo(a,s);var d=new qt;this.appendBytes(e,a,d,n);var h;if(i!==null&&i.get(pt.QR_VERSION)!==void 0){var p=Number.parseInt(i.get(pt.QR_VERSION).toString(),10);h=tn.getVersionForNumber(p);var v=this.calculateBitsNeeded(a,s,d,h);if(!this.willFit(v,h,t))throw new Wt("Data too big for requested version")}else h=this.recommendVersion(t,a,s,d);var _=new qt;_.appendBitArray(s);var E=a===Ht.BYTE?d.getSizeInBytes():e.length;this.appendLengthInfo(E,h,a,_),_.appendBitArray(d);var A=h.getECBlocksForLevel(t),N=h.getTotalCodewords()-A.getTotalECCodewords();this.terminateBits(N,_);var F=this.interleaveWithECBytes(_,h.getTotalCodewords(),N,A.getNumBlocks()),P=new Cs;P.setECLevel(t),P.setMode(a),P.setVersion(h);var L=h.getDimensionForVersion(),G=new sc(L,L),Y=this.chooseMaskPattern(F,t,h,G);return P.setMaskPattern(Y),Nd.buildMatrix(F,t,h,Y,G),P.setMatrix(G),P},r.recommendVersion=function(e,t,i,n){var o=this.calculateBitsNeeded(t,i,n,tn.getVersionForNumber(1)),a=this.chooseVersion(o,e),s=this.calculateBitsNeeded(t,i,n,a);return this.chooseVersion(s,e)},r.calculateBitsNeeded=function(e,t,i,n){return t.getSize()+e.getCharacterCountBits(n)+i.getSize()},r.getAlphanumericCode=function(e){return e<r.ALPHANUMERIC_TABLE.length?r.ALPHANUMERIC_TABLE[e]:-1},r.chooseMode=function(e,t){if(t===void 0&&(t=null),$t.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Ht.KANJI;for(var i=!1,n=!1,o=0,a=e.length;o<a;++o){var s=e.charAt(o);if(r.isDigit(s))i=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)n=!0;else return Ht.BYTE}return n?Ht.ALPHANUMERIC:i?Ht.NUMERIC:Ht.BYTE},r.isOnlyDoubleByteKanji=function(e){var t;try{t=Pr.encode(e,$t.SJIS)}catch{return!1}var i=t.length;if(i%2!==0)return!1;for(var n=0;n<i;n+=2){var o=t[n]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0},r.chooseMaskPattern=function(e,t,i,n){for(var o=Number.MAX_SAFE_INTEGER,a=-1,s=0;s<Cs.NUM_MASK_PATTERNS;s++){Nd.buildMatrix(e,t,i,s,n);var l=this.calculateMaskPenalty(n);l<o&&(o=l,a=s)}return a},r.chooseVersion=function(e,t){for(var i=1;i<=40;i++){var n=tn.getVersionForNumber(i);if(r.willFit(e,n,t))return n}throw new Wt("Data too big")},r.willFit=function(e,t,i){var n=t.getTotalCodewords(),o=t.getECBlocksForLevel(i),a=o.getTotalECCodewords(),s=n-a,l=(e+7)/8;return s>=l},r.terminateBits=function(e,t){var i=e*8;if(t.getSize()>i)throw new Wt("data bits cannot fit in the QR Code"+t.getSize()+" > "+i);for(var n=0;n<4&&t.getSize()<i;++n)t.appendBit(!1);var o=t.getSize()&7;if(o>0)for(var n=o;n<8;n++)t.appendBit(!1);for(var a=e-t.getSizeInBytes(),n=0;n<a;++n)t.appendBits(n&1?17:236,8);if(t.getSize()!==i)throw new Wt("Bits size does not equal capacity")},r.getNumDataBytesAndNumECBytesForBlockID=function(e,t,i,n,o,a){if(n>=i)throw new Wt("Block ID too large");var s=e%i,l=i-s,d=Math.floor(e/i),h=d+1,p=Math.floor(t/i),v=p+1,_=d-p,E=h-v;if(_!==E)throw new Wt("EC bytes mismatch");if(i!==l+s)throw new Wt("RS blocks mismatch");if(e!==(p+_)*l+(v+E)*s)throw new Wt("Total bytes mismatch");n<l?(o[0]=p,a[0]=_):(o[0]=v,a[0]=E)},r.interleaveWithECBytes=function(e,t,i,n){var o,a,s,l;if(e.getSizeInBytes()!==i)throw new Wt("Number of bits and data bytes does not match");for(var d=0,h=0,p=0,v=new Array,_=0;_<n;++_){var E=new Int32Array(1),A=new Int32Array(1);r.getNumDataBytesAndNumECBytesForBlockID(t,i,n,_,E,A);var N=E[0],F=new Uint8Array(N);e.toBytes(8*d,F,0,N);var P=r.generateECBytes(F,A[0]);v.push(new hx(F,P)),h=Math.max(h,N),p=Math.max(p,P.length),d+=E[0]}if(i!==d)throw new Wt("Data bytes does not match offset");for(var L=new qt,_=0;_<h;++_)try{for(var G=(o=void 0,px(v)),Y=G.next();!Y.done;Y=G.next()){var Q=Y.value,F=Q.getDataBytes();_<F.length&&L.appendBits(F[_],8)}}catch(Ge){o={error:Ge}}finally{try{Y&&!Y.done&&(a=G.return)&&a.call(G)}finally{if(o)throw o.error}}for(var _=0;_<p;++_)try{for(var ie=(s=void 0,px(v)),ye=ie.next();!ye.done;ye=ie.next()){var Q=ye.value,P=Q.getErrorCorrectionBytes();_<P.length&&L.appendBits(P[_],8)}}catch(Ge){s={error:Ge}}finally{try{ye&&!ye.done&&(l=ie.return)&&l.call(ie)}finally{if(s)throw s.error}}if(t!==L.getSizeInBytes())throw new Wt("Interleaving error: "+t+" and "+L.getSizeInBytes()+" differ.");return L},r.generateECBytes=function(e,t){for(var i=e.length,n=new Int32Array(i+t),o=0;o<i;o++)n[o]=e[o]&255;new ac(_r.QR_CODE_FIELD_256).encode(n,t);for(var a=new Uint8Array(t),o=0;o<t;o++)a[o]=n[i+o];return a},r.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},r.appendLengthInfo=function(e,t,i,n){var o=i.getCharacterCountBits(t);if(e>=1<<o)throw new Wt(e+" is bigger than "+((1<<o)-1));n.appendBits(e,o)},r.appendBytes=function(e,t,i,n){switch(t){case Ht.NUMERIC:r.appendNumericBytes(e,i);break;case Ht.ALPHANUMERIC:r.appendAlphanumericBytes(e,i);break;case Ht.BYTE:r.append8BitBytes(e,i,n);break;case Ht.KANJI:r.appendKanjiBytes(e,i);break;default:throw new Wt("Invalid mode: "+t)}},r.getDigit=function(e){return e.charCodeAt(0)-48},r.isDigit=function(e){var t=r.getDigit(e);return t>=0&&t<=9},r.appendNumericBytes=function(e,t){for(var i=e.length,n=0;n<i;){var o=r.getDigit(e.charAt(n));if(n+2<i){var a=r.getDigit(e.charAt(n+1)),s=r.getDigit(e.charAt(n+2));t.appendBits(o*100+a*10+s,10),n+=3}else if(n+1<i){var a=r.getDigit(e.charAt(n+1));t.appendBits(o*10+a,7),n+=2}else t.appendBits(o,4),n++}},r.appendAlphanumericBytes=function(e,t){for(var i=e.length,n=0;n<i;){var o=r.getAlphanumericCode(e.charCodeAt(n));if(o===-1)throw new Wt;if(n+1<i){var a=r.getAlphanumericCode(e.charCodeAt(n+1));if(a===-1)throw new Wt;t.appendBits(o*45+a,11),n+=2}else t.appendBits(o,6),n++}},r.append8BitBytes=function(e,t,i){var n;try{n=Pr.encode(e,i)}catch(l){throw new Wt(l)}for(var o=0,a=n.length;o!==a;o++){var s=n[o];t.appendBits(s,8)}},r.appendKanjiBytes=function(e,t){var i;try{i=Pr.encode(e,$t.SJIS)}catch(p){throw new Wt(p)}for(var n=i.length,o=0;o<n;o+=2){var a=i[o]&255,s=i[o+1]&255,l=a<<8&4294967295|s,d=-1;if(l>=33088&&l<=40956?d=l-33088:l>=57408&&l<=60351&&(d=l-49472),d===-1)throw new Wt("Invalid byte sequence");var h=(d>>8)*192+(d&255);t.appendBits(h,13)}},r.appendECI=function(e,t){t.appendBits(Ht.ECI.getBits(),4),t.appendBits(e.getValue(),8)},r.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),r.DEFAULT_BYTE_MODE_ENCODING=$t.UTF8.getName(),r}(),lc=H3;var yX=function(){function r(){}return r.prototype.write=function(e,t,i,n){if(n===void 0&&(n=null),e.length===0)throw new ae("Found empty contents");if(t<0||i<0)throw new ae("Requested dimensions are too small: "+t+"x"+i);var o=Bn.L,a=r.QUIET_ZONE_SIZE;n!==null&&(n.get(pt.ERROR_CORRECTION)!==void 0&&(o=Bn.fromString(n.get(pt.ERROR_CORRECTION).toString())),n.get(pt.MARGIN)!==void 0&&(a=Number.parseInt(n.get(pt.MARGIN).toString(),10)));var s=lc.encode(e,o,n);return this.renderResult(s,t,i,a)},r.prototype.writeToDom=function(e,t,i,n,o){o===void 0&&(o=null),typeof e=="string"&&(e=document.querySelector(e));var a=this.write(t,i,n,o);e&&e.appendChild(a)},r.prototype.renderResult=function(e,t,i,n){var o=e.getMatrix();if(o===null)throw new Wr;for(var a=o.getWidth(),s=o.getHeight(),l=a+n*2,d=s+n*2,h=Math.max(t,l),p=Math.max(i,d),v=Math.min(Math.floor(h/l),Math.floor(p/d)),_=Math.floor((h-a*v)/2),E=Math.floor((p-s*v)/2),A=this.createSVGElement(h,p),N=0,F=E;N<s;N++,F+=v)for(var P=0,L=_;P<a;P++,L+=v)if(o.get(P,N)===1){var G=this.createSvgRectElement(L,F,v,v);A.appendChild(G)}return A},r.prototype.createSVGElement=function(e,t){var i=document.createElementNS(r.SVG_NS,"svg");return i.setAttributeNS(null,"height",e.toString()),i.setAttributeNS(null,"width",t.toString()),i},r.prototype.createSvgRectElement=function(e,t,i,n){var o=document.createElementNS(r.SVG_NS,"rect");return o.setAttributeNS(null,"x",e.toString()),o.setAttributeNS(null,"y",t.toString()),o.setAttributeNS(null,"height",i.toString()),o.setAttributeNS(null,"width",n.toString()),o.setAttributeNS(null,"fill","#000000"),o},r.QUIET_ZONE_SIZE=4,r.SVG_NS="http://www.w3.org/2000/svg",r}();var W3=function(){function r(){}return r.prototype.encode=function(e,t,i,n,o){if(e.length===0)throw new ae("Found empty contents");if(t!==le.QR_CODE)throw new ae("Can only encode QR_CODE, but got "+t);if(i<0||n<0)throw new ae("Requested dimensions are too small: "+i+"x"+n);var a=Bn.L,s=r.QUIET_ZONE_SIZE;o!==null&&(o.get(pt.ERROR_CORRECTION)!==void 0&&(a=Bn.fromString(o.get(pt.ERROR_CORRECTION).toString())),o.get(pt.MARGIN)!==void 0&&(s=Number.parseInt(o.get(pt.MARGIN).toString(),10)));var l=lc.encode(e,a,o);return r.renderResult(l,i,n,s)},r.renderResult=function(e,t,i,n){var o=e.getMatrix();if(o===null)throw new Wr;for(var a=o.getWidth(),s=o.getHeight(),l=a+n*2,d=s+n*2,h=Math.max(t,l),p=Math.max(i,d),v=Math.min(Math.floor(h/l),Math.floor(p/d)),_=Math.floor((h-a*v)/2),E=Math.floor((p-s*v)/2),A=new Zt(h,p),N=0,F=E;N<s;N++,F+=v)for(var P=0,L=_;P<a;P++,L+=v)o.get(P,N)===1&&A.setRegion(L,F,v,v);return A},r.QUIET_ZONE_SIZE=4,r}(),lg=W3;var WX=function(){function r(){}return r.prototype.encode=function(e,t,i,n,o){var a;switch(t){case le.QR_CODE:a=new lg;break;default:throw new ae("No encoder available for format "+t)}return a.encode(e,t,i,n,o)},r}();var X3=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),KX=function(r){X3(e,r);function e(t,i,n,o,a,s,l,d){var h=r.call(this,s,l)||this;if(h.yuvData=t,h.dataWidth=i,h.dataHeight=n,h.left=o,h.top=a,o+s>i||a+l>n)throw new ae("Crop rectangle does not fit within image data.");return d&&h.reverseHorizontal(s,l),h}return e.prototype.getRow=function(t,i){if(t<0||t>=this.getHeight())throw new ae("Requested row is outside the image: "+t);var n=this.getWidth();(i==null||i.length<n)&&(i=new Uint8ClampedArray(n));var o=(t+this.top)*this.dataWidth+this.left;return tt.arraycopy(this.yuvData,o,i,0,n),i},e.prototype.getMatrix=function(){var t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.yuvData;var n=t*i,o=new Uint8ClampedArray(n),a=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return tt.arraycopy(this.yuvData,a,o,0,n),o;for(var s=0;s<i;s++){var l=s*t;tt.arraycopy(this.yuvData,a,o,l,t),a+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,i,n,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+i,n,o,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(t*i),o=this.yuvData,a=this.top*this.dataWidth+this.left,s=0;s<i;s++){for(var l=s*t,d=0;d<t;d++){var h=o[a+d*e.THUMBNAIL_SCALE_FACTOR]&255;n[l+d]=4278190080|h*65793}a+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return n},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,i){for(var n=this.yuvData,o=0,a=this.top*this.dataWidth+this.left;o<i;o++,a+=this.dataWidth)for(var s=a+t/2,l=a,d=a+t-1;l<s;l++,d--){var h=n[l];n[l]=n[d],n[d]=h}},e.prototype.invert=function(){return new na(this)},e.THUMBNAIL_SCALE_FACTOR=2,e}(Pn);var Y3=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),nY=function(r){Y3(e,r);function e(t,i,n,o,a,s,l){var d=r.call(this,i,n)||this;if(d.dataWidth=o,d.dataHeight=a,d.left=s,d.top=l,t.BYTES_PER_ELEMENT===4){for(var h=i*n,p=new Uint8ClampedArray(h),v=0;v<h;v++){var _=t[v],E=_>>16&255,A=_>>7&510,N=_&255;p[v]=(E+A+N)/4&255}d.luminances=p}else d.luminances=t;if(o===void 0&&(d.dataWidth=i),a===void 0&&(d.dataHeight=n),s===void 0&&(d.left=0),l===void 0&&(d.top=0),d.left+i>d.dataWidth||d.top+n>d.dataHeight)throw new ae("Crop rectangle does not fit within image data.");return d}return e.prototype.getRow=function(t,i){if(t<0||t>=this.getHeight())throw new ae("Requested row is outside the image: "+t);var n=this.getWidth();(i==null||i.length<n)&&(i=new Uint8ClampedArray(n));var o=(t+this.top)*this.dataWidth+this.left;return tt.arraycopy(this.luminances,o,i,0,n),i},e.prototype.getMatrix=function(){var t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.luminances;var n=t*i,o=new Uint8ClampedArray(n),a=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return tt.arraycopy(this.luminances,a,o,0,n),o;for(var s=0;s<i;s++){var l=s*t;tt.arraycopy(this.luminances,a,o,l,t),a+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,i,n,o){return new e(this.luminances,n,o,this.dataWidth,this.dataHeight,this.left+t,this.top+i)},e.prototype.invert=function(){return new na(this)},e}(Pn);var q3=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),$3=function(r){q3(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}($t),da=$3;var Z3=function(){function r(){}return r.ISO_8859_1=$t.ISO8859_1,r}(),cc=Z3;var K3=function(){function r(e,t,i){this.codewords=e,this.numcols=t,this.numrows=i,this.bits=new Uint8Array(t*i),Ct.fill(this.bits,2)}return r.prototype.getNumrows=function(){return this.numrows},r.prototype.getNumcols=function(){return this.numcols},r.prototype.getBits=function(){return this.bits},r.prototype.getBit=function(e,t){return this.bits[t*this.numcols+e]===1},r.prototype.setBit=function(e,t,i){this.bits[t*this.numcols+e]=i?1:0},r.prototype.noBit=function(e,t){return this.bits[t*this.numcols+e]===2},r.prototype.place=function(){var e=0,t=4,i=0;do{t===this.numrows&&i===0&&this.corner1(e++),t===this.numrows-2&&i===0&&this.numcols%4!==0&&this.corner2(e++),t===this.numrows-2&&i===0&&this.numcols%8===4&&this.corner3(e++),t===this.numrows+4&&i===2&&this.numcols%8===0&&this.corner4(e++);do t<this.numrows&&i>=0&&this.noBit(i,t)&&this.utah(t,i,e++),t-=2,i+=2;while(t>=0&&i<this.numcols);t++,i+=3;do t>=0&&i<this.numcols&&this.noBit(i,t)&&this.utah(t,i,e++),t+=2,i-=2;while(t<this.numrows&&i>=0);t+=3,i++}while(t<this.numrows||i<this.numcols);this.noBit(this.numcols-1,this.numrows-1)&&(this.setBit(this.numcols-1,this.numrows-1,!0),this.setBit(this.numcols-2,this.numrows-2,!0))},r.prototype.module=function(e,t,i,n){e<0&&(e+=this.numrows,t+=4-(this.numrows+4)%8),t<0&&(t+=this.numcols,e+=4-(this.numcols+4)%8);var o=this.codewords.charCodeAt(i);o&=1<<8-n,this.setBit(t,e,o!==0)},r.prototype.utah=function(e,t,i){this.module(e-2,t-2,i,1),this.module(e-2,t-1,i,2),this.module(e-1,t-2,i,3),this.module(e-1,t-1,i,4),this.module(e-1,t,i,5),this.module(e,t-2,i,6),this.module(e,t-1,i,7),this.module(e,t,i,8)},r.prototype.corner1=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,1,e,2),this.module(this.numrows-1,2,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},r.prototype.corner2=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-4,e,4),this.module(0,this.numcols-3,e,5),this.module(0,this.numcols-2,e,6),this.module(0,this.numcols-1,e,7),this.module(1,this.numcols-1,e,8)},r.prototype.corner3=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},r.prototype.corner4=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,this.numcols-1,e,2),this.module(0,this.numcols-3,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-3,e,6),this.module(1,this.numcols-2,e,7),this.module(1,this.numcols-1,e,8)},r}(),Fd=K3;var cg,ug=[5,7,10,11,12,14,18,20,24,28,36,42,48,56,62,68],mx=[[228,48,15,111,62],[23,68,144,134,240,92,254],[28,24,185,166,223,248,116,255,110,61],[175,138,205,12,194,168,39,245,60,97,120],[41,153,158,91,61,42,142,213,97,178,100,242],[156,97,192,252,95,9,157,119,138,45,18,186,83,185],[83,195,100,39,188,75,66,61,241,213,109,129,94,254,225,48,90,188],[15,195,244,9,233,71,168,2,188,160,153,145,253,79,108,82,27,174,186,172],[52,190,88,205,109,39,176,21,155,197,251,223,155,21,5,172,254,124,12,181,184,96,50,193],[211,231,43,97,71,96,103,174,37,151,170,53,75,34,249,121,17,138,110,213,141,136,120,151,233,168,93,255],[245,127,242,218,130,250,162,181,102,120,84,179,220,251,80,182,229,18,2,4,68,33,101,137,95,119,115,44,175,184,59,25,225,98,81,112],[77,193,137,31,19,38,22,153,247,105,122,2,245,133,242,8,175,95,100,9,167,105,214,111,57,121,21,1,253,57,54,101,248,202,69,50,150,177,226,5,9,5],[245,132,172,223,96,32,117,22,238,133,238,231,205,188,237,87,191,106,16,147,118,23,37,90,170,205,131,88,120,100,66,138,186,240,82,44,176,87,187,147,160,175,69,213,92,253,225,19],[175,9,223,238,12,17,220,208,100,29,175,170,230,192,215,235,150,159,36,223,38,200,132,54,228,146,218,234,117,203,29,232,144,238,22,150,201,117,62,207,164,13,137,245,127,67,247,28,155,43,203,107,233,53,143,46],[242,93,169,50,144,210,39,118,202,188,201,189,143,108,196,37,185,112,134,230,245,63,197,190,250,106,185,221,175,64,114,71,161,44,147,6,27,218,51,63,87,10,40,130,188,17,163,31,176,170,4,107,232,7,94,166,224,124,86,47,11,204],[220,228,173,89,251,149,159,56,89,33,147,244,154,36,73,127,213,136,248,180,234,197,158,177,68,122,93,213,15,160,227,236,66,139,153,185,202,167,179,25,220,232,96,210,231,136,223,239,181,241,59,52,172,25,49,232,211,189,64,54,108,153,132,63,96,103,82,186]],Q3=301,J3=function(r,e){for(var t=1,i=0;i<255;i++)e[i]=t,r[t]=i,t*=2,t>=256&&(t^=Q3);return{LOG:r,ALOG:e}},uc=(cg=J3([],[]),cg.LOG),dg=cg.ALOG;var fg=129,kd=230,gx=231,vx=235,_x=236,yx=237,bx=238,xx=239,Ex=240,Ld=254,wx=254,As="[)>05",Ss="[)>06",Ts="",mt=0,Or=1,Vr=2,yr=3,Cr=4,Nr=5;var eP=function(){function r(){}return r.encodeECC200=function(e,t){if(e.length!==t.getDataCapacity())throw new Error("The number of codewords does not match the selected symbol");var i=new we;i.append(e);var n=t.getInterleavedBlockCount();if(n===1){var o=this.createECCBlock(e,t.getErrorCodewords());i.append(o)}else{for(var a=[],s=[],l=0;l<n;l++)a[l]=t.getDataLengthForInterleavedBlock(l+1),s[l]=t.getErrorLengthForInterleavedBlock(l+1);for(var d=0;d<n;d++){for(var h=new we,p=d;p<t.getDataCapacity();p+=n)h.append(e.charAt(p));for(var o=this.createECCBlock(h.toString(),s[d]),v=0,_=d;_<s[d]*n;_+=n)i.setCharAt(t.getDataCapacity()+_,o.charAt(v++))}}return i.toString()},r.createECCBlock=function(e,t){for(var i=-1,n=0;n<ug.length;n++)if(ug[n]===t){i=n;break}if(i<0)throw new Error("Illegal number of error correction codewords specified: "+t);for(var o=mx[i],a=[],n=0;n<t;n++)a[n]=0;for(var n=0;n<e.length;n++){for(var s=a[t-1]^e.charAt(n).charCodeAt(0),l=t-1;l>0;l--)s!==0&&o[l]!==0?a[l]=a[l-1]^dg[(uc[s]+uc[o[l]])%255]:a[l]=a[l-1];s!==0&&o[0]!==0?a[0]=dg[(uc[s]+uc[o[0]])%255]:a[0]=0}for(var d=[],n=0;n<t;n++)d[n]=a[t-n-1];return d.map(function(h){return String.fromCharCode(h)}).join("")},r}(),Bd=eP;var hg=function(){function r(){}return r.prototype.getEncodingMode=function(){return mt},r.prototype.encode=function(e){var t=qe.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var i=e.getCurrentChar(),n=qe.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(n!==this.getEncodingMode())switch(n){case Nr:e.writeCodeword(gx),e.signalEncoderChange(Nr);return;case Or:e.writeCodeword(kd),e.signalEncoderChange(Or);return;case yr:e.writeCodeword(bx),e.signalEncoderChange(yr);break;case Vr:e.writeCodeword(xx),e.signalEncoderChange(Vr);break;case Cr:e.writeCodeword(Ex),e.signalEncoderChange(Cr);break;default:throw new Error("Illegal mode: "+n)}else qe.isExtendedASCII(i)?(e.writeCodeword(vx),e.writeCodeword(i-128+1),e.pos++):(e.writeCodeword(i+1),e.pos++)}},r.prototype.encodeASCIIDigits=function(e,t){if(qe.isDigit(e)&&qe.isDigit(t)){var i=(e-48)*10+(t-48);return i+130}throw new Error("not digits: "+e+t)},r}();var pg=function(){function r(){}return r.prototype.getEncodingMode=function(){return Nr},r.prototype.encode=function(e){var t=new we;for(t.append(0);e.hasMoreCharacters();){var i=e.getCurrentChar();t.append(i),e.pos++;var n=qe.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(n!==this.getEncodingMode()){e.signalEncoderChange(mt);break}}var o=t.length()-1,a=1,s=e.getCodewordCount()+o+a;e.updateSymbolInfo(s);var l=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||l)if(o<=249)t.setCharAt(0,We.getCharAt(o));else if(o<=1555)t.setCharAt(0,We.getCharAt(Math.floor(o/250)+249)),t.insert(1,We.getCharAt(o%250));else throw new Error("Message length not in valid ranges: "+o);for(var d=0,i=t.length();d<i;d++)e.writeCodeword(this.randomize255State(t.charAt(d).charCodeAt(0),e.getCodewordCount()+1))},r.prototype.randomize255State=function(e,t){var i=149*t%255+1,n=e+i;return n<=255?n:n-256},r}();var fa=function(){function r(){}return r.prototype.getEncodingMode=function(){return Or},r.prototype.encodeMaximal=function(e){for(var t=new we,i=0,n=e.pos,o=0;e.hasMoreCharacters();){var a=e.getCurrentChar();e.pos++,i=this.encodeChar(a,t),t.length()%3===0&&(n=e.pos,o=t.length())}if(o!==t.length()){var s=Math.floor(t.length()/3*2),l=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(l);var d=e.getSymbolInfo().getDataCapacity()-l,h=Math.floor(t.length()%3);(h===2&&d!==2||h===1&&(i>3||d!==1))&&(e.pos=n)}t.length()>0&&e.writeCodeword(kd),this.handleEOD(e,t)},r.prototype.encode=function(e){for(var t=new we;e.hasMoreCharacters();){var i=e.getCurrentChar();e.pos++;var n=this.encodeChar(i,t),o=Math.floor(t.length()/3)*2,a=e.getCodewordCount()+o;e.updateSymbolInfo(a);var s=e.getSymbolInfo().getDataCapacity()-a;if(!e.hasMoreCharacters()){var l=new we;for(t.length()%3===2&&s!==2&&(n=this.backtrackOneCharacter(e,t,l,n));t.length()%3===1&&(n>3||s!==1);)n=this.backtrackOneCharacter(e,t,l,n);break}var d=t.length();if(d%3===0){var h=qe.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(h!==this.getEncodingMode()){e.signalEncoderChange(mt);break}}}this.handleEOD(e,t)},r.prototype.backtrackOneCharacter=function(e,t,i,n){var o=t.length(),a=t.toString().substring(0,o-n);t.setLengthToZero(),t.append(a),e.pos--;var s=e.getCurrentChar();return n=this.encodeChar(s,i),e.resetSymbolInfo(),n},r.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var i=t.toString().substring(3);t.setLengthToZero(),t.append(i)},r.prototype.handleEOD=function(e,t){var i=Math.floor(t.length()/3*2),n=t.length()%3,o=e.getCodewordCount()+i;e.updateSymbolInfo(o);var a=e.getSymbolInfo().getDataCapacity()-o;if(n===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Ld)}else if(a===1&&n===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Ld),e.pos--}else if(n===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(a>0||e.hasMoreCharacters())&&e.writeCodeword(Ld)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(mt)},r.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var i=2;return i+=this.encodeChar(e-128,t),i},r.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,i=t/256,n=t%256,o=new we;return o.append(i),o.append(n),o.toString()},r}();var mg=function(){function r(){}return r.prototype.getEncodingMode=function(){return Cr},r.prototype.encode=function(e){for(var t=new we;e.hasMoreCharacters();){var i=e.getCurrentChar();this.encodeChar(i,t),e.pos++;var n=t.length();if(n>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var o=t.toString().substring(4);t.setLengthToZero(),t.append(o);var a=qe.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(mt);break}}}t.append(We.getCharAt(31)),this.handleEOD(e,t)},r.prototype.handleEOD=function(e,t){try{var i=t.length();if(i===0)return;if(i===1){e.updateSymbolInfo();var n=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>n&&(e.updateSymbolInfo(e.getCodewordCount()+1),n=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=n&&n<=2)return}if(i>4)throw new Error("Count must not exceed 4");var a=i-1,s=this.encodeToCodewords(t.toString()),l=!e.hasMoreCharacters(),d=l&&a<=2;if(a<=2){e.updateSymbolInfo(e.getCodewordCount()+a);var n=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();n>=3&&(d=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}d?(e.resetSymbolInfo(),e.pos-=a):e.writeCodewords(s)}finally{e.signalEncoderChange(mt)}},r.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(We.getCharAt(e-64)):qe.illegalCharacter(We.getCharAt(e))},r.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var i=e.charAt(0).charCodeAt(0),n=t>=2?e.charAt(1).charCodeAt(0):0,o=t>=3?e.charAt(2).charCodeAt(0):0,a=t>=4?e.charAt(3).charCodeAt(0):0,s=(i<<18)+(n<<12)+(o<<6)+a,l=s>>16&255,d=s>>8&255,h=s&255,p=new we;return p.append(l),t>=2&&p.append(d),t>=3&&p.append(h),p.toString()},r}();var tP=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),rP=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rt=function(){function r(e,t,i,n,o,a,s,l){s===void 0&&(s=0),l===void 0&&(l=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=i,this.matrixWidth=n,this.matrixHeight=o,this.dataRegions=a,this.rsBlockData=s,this.rsBlockError=l}return r.lookup=function(e,t,i,n,o){var a,s;t===void 0&&(t=0),i===void 0&&(i=null),n===void 0&&(n=null),o===void 0&&(o=!0);try{for(var l=rP(nP),d=l.next();!d.done;d=l.next()){var h=d.value;if(!(t===1&&h.rectangular)&&!(t===2&&!h.rectangular)&&!(i!=null&&(h.getSymbolWidth()<i.getWidth()||h.getSymbolHeight()<i.getHeight()))&&!(n!=null&&(h.getSymbolWidth()>n.getWidth()||h.getSymbolHeight()>n.getHeight()))&&e<=h.dataCapacity)return h}}catch(p){a={error:p}}finally{try{d&&!d.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},r.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},r.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},r.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},r.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},r.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},r.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},r.prototype.getDataCapacity=function(){return this.dataCapacity},r.prototype.getErrorCodewords=function(){return this.errorCodewords},r.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},r.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},r}(),Ds=Rt,iP=function(r){tP(e,r);function e(){return r.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(Rt),nP=[new Rt(!1,3,5,8,8,1),new Rt(!1,5,7,10,10,1),new Rt(!0,5,7,16,6,1),new Rt(!1,8,10,12,12,1),new Rt(!0,10,11,14,6,2),new Rt(!1,12,12,14,14,1),new Rt(!0,16,14,24,10,1),new Rt(!1,18,14,16,16,1),new Rt(!1,22,18,18,18,1),new Rt(!0,22,18,16,10,2),new Rt(!1,30,20,20,20,1),new Rt(!0,32,24,16,14,2),new Rt(!1,36,24,22,22,1),new Rt(!1,44,28,24,24,1),new Rt(!0,49,28,22,14,2),new Rt(!1,62,36,14,14,4),new Rt(!1,86,42,16,16,4),new Rt(!1,114,48,18,18,4),new Rt(!1,144,56,20,20,4),new Rt(!1,174,68,22,22,4),new Rt(!1,204,84,24,24,4,102,42),new Rt(!1,280,112,14,14,16,140,56),new Rt(!1,368,144,16,16,16,92,36),new Rt(!1,456,192,18,18,16,114,48),new Rt(!1,576,224,20,20,16,144,56),new Rt(!1,696,272,22,22,16,174,68),new Rt(!1,816,336,24,24,16,136,56),new Rt(!1,1050,408,18,18,36,175,68),new Rt(!1,1304,496,20,20,36,163,62),new iP];var gg=function(){function r(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(s){return s.charCodeAt(0)}),i=new we,n=0,o=t.length;n<o;n++){var a=String.fromCharCode(t[n]&255);if(a==="?"&&e.charAt(n)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");i.append(a)}this.msg=i.toString(),this.shape=0,this.codewords=new we,this.newEncoding=-1}return r.prototype.setSymbolShape=function(e){this.shape=e},r.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},r.prototype.getMessage=function(){return this.msg},r.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},r.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCodewords=function(){return this.codewords},r.prototype.writeCodewords=function(e){this.codewords.append(e)},r.prototype.writeCodeword=function(e){this.codewords.append(e)},r.prototype.getCodewordCount=function(){return this.codewords.length()},r.prototype.getNewEncoding=function(){return this.newEncoding},r.prototype.signalEncoderChange=function(e){this.newEncoding=e},r.prototype.resetEncoderSignal=function(){this.newEncoding=-1},r.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},r.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},r.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},r.prototype.getSymbolInfo=function(){return this.symbolInfo},r.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Ds.lookup(e,this.shape,this.minSize,this.maxSize,!0))},r.prototype.resetSymbolInfo=function(){this.symbolInfo=null},r}();var oP=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),vg=function(r){oP(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return yr},e.prototype.encode=function(t){for(var i=new we;t.hasMoreCharacters();){var n=t.getCurrentChar();t.pos++,this.encodeChar(n,i);var o=i.length();if(o%3===0){this.writeNextTriplet(t,i);var a=qe.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){t.signalEncoderChange(mt);break}}}this.handleEOD(t,i)},e.prototype.encodeChar=function(t,i){switch(t){case 13:i.append(0);break;case 42:i.append(1);break;case 62:i.append(2);break;case 32:i.append(3);break;default:t>=48&&t<=57?i.append(t-48+4):t>=65&&t<=90?i.append(t-65+14):qe.illegalCharacter(We.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,i){t.updateSymbolInfo();var n=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),o=i.length();t.pos-=o,(t.getRemainingCharacters()>1||n>1||t.getRemainingCharacters()!==n)&&t.writeCodeword(wx),t.getNewEncoding()<0&&t.signalEncoderChange(mt)},e}(fa);var aP=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),_g=function(r){aP(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Vr},e.prototype.encodeChar=function(t,i){if(t===32)return i.append(3),1;if(t>=48&&t<=57)return i.append(t-48+4),1;if(t>=97&&t<=122)return i.append(t-97+14),1;if(t<32)return i.append(0),i.append(t),2;if(t<=47)return i.append(1),i.append(t-33),2;if(t<=64)return i.append(1),i.append(t-58+15),2;if(t>=91&&t<=95)return i.append(1),i.append(t-91+22),2;if(t===96)return i.append(2),i.append(0),2;if(t<=90)return i.append(2),i.append(t-65+1),2;if(t<=127)return i.append(2),i.append(t-123+27),2;i.append("1");var n=2;return n+=this.encodeChar(t-128,i),n},e}(fa);var sP=function(){function r(){}return r.randomize253State=function(e){var t=149*e%253+1,i=fg+t;return i<=254?i:i-254},r.encodeHighLevel=function(e,t,i,n,o){t===void 0&&(t=0),i===void 0&&(i=null),n===void 0&&(n=null),o===void 0&&(o=!1);var a=new fa,s=[new hg,a,new _g,new vg,new mg,new pg],l=new gg(e);l.setSymbolShape(t),l.setSizeConstraints(i,n),e.startsWith(As)&&e.endsWith(Ts)?(l.writeCodeword(_x),l.setSkipAtEnd(2),l.pos+=As.length):e.startsWith(Ss)&&e.endsWith(Ts)&&(l.writeCodeword(yx),l.setSkipAtEnd(2),l.pos+=Ss.length);var d=mt;for(o&&(a.encodeMaximal(l),d=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)s[d].encode(l),l.getNewEncoding()>=0&&(d=l.getNewEncoding(),l.resetEncoderSignal());var h=l.getCodewordCount();l.updateSymbolInfo();var p=l.getSymbolInfo().getDataCapacity();h<p&&d!==mt&&d!==Nr&&d!==Cr&&l.writeCodeword("\xFE");var v=l.getCodewords();for(v.length()<p&&v.append(fg);v.length()<p;)v.append(this.randomize253State(v.length()+1));return l.getCodewords().toString()},r.lookAheadTest=function(e,t,i){var n=this.lookAheadTestIntern(e,t,i);if(i===yr&&n===yr){for(var o=Math.min(t+3,e.length),a=t;a<o;a++)if(!this.isNativeX12(e.charCodeAt(a)))return mt}else if(i===Cr&&n===Cr){for(var o=Math.min(t+4,e.length),a=t;a<o;a++)if(!this.isNativeEDIFACT(e.charCodeAt(a)))return mt}return n},r.lookAheadTestIntern=function(e,t,i){if(t>=e.length)return i;var n;i===mt?n=[0,1,1,1,1,1.25]:(n=[1,2,2,2,2,2.25],n[i]=0);for(var o=0,a=new Uint8Array(6),s=[];;){if(t+o===e.length){Ct.fill(a,0),Ct.fill(s,0);var l=this.findMinimums(n,s,Pe.MAX_VALUE,a),d=this.getMinimumCount(a);if(s[mt]===l)return mt;if(d===1){if(a[Nr]>0)return Nr;if(a[Cr]>0)return Cr;if(a[Vr]>0)return Vr;if(a[yr]>0)return yr}return Or}var h=e.charCodeAt(t+o);if(o++,this.isDigit(h)?n[mt]+=.5:this.isExtendedASCII(h)?(n[mt]=Math.ceil(n[mt]),n[mt]+=2):(n[mt]=Math.ceil(n[mt]),n[mt]++),this.isNativeC40(h)?n[Or]+=2/3:this.isExtendedASCII(h)?n[Or]+=8/3:n[Or]+=4/3,this.isNativeText(h)?n[Vr]+=2/3:this.isExtendedASCII(h)?n[Vr]+=8/3:n[Vr]+=4/3,this.isNativeX12(h)?n[yr]+=2/3:this.isExtendedASCII(h)?n[yr]+=13/3:n[yr]+=10/3,this.isNativeEDIFACT(h)?n[Cr]+=3/4:this.isExtendedASCII(h)?n[Cr]+=17/4:n[Cr]+=13/4,this.isSpecialB256(h)?n[Nr]+=4:n[Nr]++,o>=4){if(Ct.fill(a,0),Ct.fill(s,0),this.findMinimums(n,s,Pe.MAX_VALUE,a),s[mt]<this.min(s[Nr],s[Or],s[Vr],s[yr],s[Cr]))return mt;if(s[Nr]<s[mt]||s[Nr]+1<this.min(s[Or],s[Vr],s[yr],s[Cr]))return Nr;if(s[Cr]+1<this.min(s[Nr],s[Or],s[Vr],s[yr],s[mt]))return Cr;if(s[Vr]+1<this.min(s[Nr],s[Or],s[Cr],s[yr],s[mt]))return Vr;if(s[yr]+1<this.min(s[Nr],s[Or],s[Cr],s[Vr],s[mt]))return yr;if(s[Or]+1<this.min(s[mt],s[Nr],s[Cr],s[Vr])){if(s[Or]<s[yr])return Or;if(s[Or]===s[yr]){for(var p=t+o+1;p<e.length;){var v=e.charCodeAt(p);if(this.isX12TermSep(v))return yr;if(!this.isNativeX12(v))break;p++}return Or}}}}},r.min=function(e,t,i,n,o){var a=Math.min(e,Math.min(t,Math.min(i,n)));return o===void 0?a:Math.min(a,o)},r.findMinimums=function(e,t,i,n){for(var o=0;o<6;o++){var a=t[o]=Math.ceil(e[o]);i>a&&(i=a,Ct.fill(n,0)),i===a&&(n[o]=n[o]+1)}return i},r.getMinimumCount=function(e){for(var t=0,i=0;i<6;i++)t+=e[i];return t||0},r.isDigit=function(e){return e>=48&&e<=57},r.isExtendedASCII=function(e){return e>=128&&e<=255},r.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},r.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},r.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},r.isX12TermSep=function(e){return e===13||e===42||e===62},r.isNativeEDIFACT=function(e){return e>=32&&e<=94},r.isSpecialB256=function(e){return!1},r.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var i=e.length,n=t;n<i&&this.isDigit(e.charCodeAt(n));)n++;return n-t},r.illegalCharacter=function(e){var t=Pe.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},r}(),qe=sP;var yg=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ix=function(){function r(e){this.charset=e,this.name=e.name}return r.prototype.canEncode=function(e){try{return Pr.encode(e,this.charset)!=null}catch{return!1}},r}(),Cx=function(){function r(e,t,i){var n,o,a,s,l,d;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(Ne){return new Ix(da.forName(Ne))}),this.encoders=[];var h=[];h.push(new Ix(cc.ISO_8859_1));for(var p=t!=null&&t.name.startsWith("UTF"),v=0;v<e.length;v++){var _=!1;try{for(var E=(n=void 0,yg(h)),A=E.next();!A.done;A=E.next()){var N=A.value,F=e.charAt(v),P=F.charCodeAt(0);if(P===i||N.canEncode(F)){_=!0;break}}}catch(Ne){n={error:Ne}}finally{try{A&&!A.done&&(o=E.return)&&o.call(E)}finally{if(n)throw n.error}}if(!_)try{for(var L=(a=void 0,yg(this.ENCODERS)),G=L.next();!G.done;G=L.next()){var N=G.value;if(N.canEncode(e.charAt(v))){h.push(N),_=!0;break}}}catch(Ne){a={error:Ne}}finally{try{G&&!G.done&&(s=L.return)&&s.call(L)}finally{if(a)throw a.error}}_||(p=!0)}if(h.length===1&&!p)this.encoders=[h[0]];else{this.encoders=[];var Y=0;try{for(var Q=yg(h),ie=Q.next();!ie.done;ie=Q.next()){var N=ie.value;this.encoders[Y++]=N}}catch(Ne){l={error:Ne}}finally{try{ie&&!ie.done&&(d=Q.return)&&d.call(Q)}finally{if(l)throw l.error}}}var ye=-1;if(t!=null){for(var v=0;v<this.encoders.length;v++)if(this.encoders[v]!=null&&t.name===this.encoders[v].name){ye=v;break}}this.priorityEncoderIndex=ye}return r.prototype.length=function(){return this.encoders.length},r.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},r.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},r.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},r.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},r.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},r.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return Pr.encode(We.getCharAt(e),this.encoders[t].name)},r}();var lP=3,Sx=function(){function r(e,t,i){this.fnc1=i;var n=new Cx(e,t,i);if(n.length()===1)for(var o=0;o<this.bytes.length;o++){var a=e.charAt(o).charCodeAt(0);this.bytes[o]=a===i?1e3:a}else this.bytes=this.encodeMinimally(e,n,i)}return r.prototype.getFNC1Character=function(){return this.fnc1},r.prototype.length=function(){return this.bytes.length},r.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var i=0;i<t;i++)if(this.isECI(e+i))return!1;return!0},r.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},r.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var i=new we,n=e;n<t;n++){if(this.isECI(n))throw new Error("value at "+n+" is not a character but an ECI");i.append(this.charAt(n))}return i.toString()},r.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},r.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},r.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},r.prototype.addEdge=function(e,t,i){(e[t][i.encoderIndex]==null||e[t][i.encoderIndex].cachedTotalSize>i.cachedTotalSize)&&(e[t][i.encoderIndex]=i)},r.prototype.addEdges=function(e,t,i,n,o,a){var s=e.charAt(n).charCodeAt(0),l=0,d=t.length();t.getPriorityEncoderIndex()>=0&&(s===a||t.canEncode(s,t.getPriorityEncoderIndex()))&&(l=t.getPriorityEncoderIndex(),d=l+1);for(var h=l;h<d;h++)(s===a||t.canEncode(s,h))&&this.addEdge(i,n+1,new Ax(s,t,h,o,a))},r.prototype.encodeMinimally=function(e,t,i){var n=e.length,o=new Ax[n+1][t.length()];this.addEdges(e,t,o,0,null,i);for(var a=1;a<=n;a++){for(var s=0;s<t.length();s++)o[a][s]!=null&&a<n&&this.addEdges(e,t,o,a,o[a][s],i);for(var s=0;s<t.length();s++)o[a-1][s]=null}for(var l=-1,d=Pe.MAX_VALUE,s=0;s<t.length();s++)if(o[n][s]!=null){var h=o[n][s];h.cachedTotalSize<d&&(d=h.cachedTotalSize,l=s)}if(l<0)throw new Error('Failed to encode "'+e+'"');for(var p=[],v=o[n][l];v!=null;){if(v.isFNC1())p.unshift(1e3);else for(var _=t.encode(v.c,v.encoderIndex),a=_.length-1;a>=0;a--)p.unshift(_[a]&255);var E=v.previous===null?0:v.previous.encoderIndex;E!==v.encoderIndex&&p.unshift(256+t.getECIValue(v.encoderIndex)),v=v.previous}for(var A=[],a=0;a<A.length;a++)A[a]=p[a];return A},r}();var Ax=function(){function r(e,t,i,n,o){this.c=e,this.encoderSet=t,this.encoderIndex=i,this.previous=n,this.fnc1=o,this.c=e===o?1e3:e;var a=this.isFNC1()?1:t.encode(e,i).length,s=n===null?0:n.encoderIndex;s!==i&&(a+=lP),n!=null&&(a+=n.cachedTotalSize),this.cachedTotalSize=a}return r.prototype.isFNC1=function(){return this.c===1e3},r}();var cP=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),dc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uP=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,o=[],a;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}return o},dP=function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(uP(arguments[e]));return r},pe=function(r){return r[r.ASCII=0]="ASCII",r[r.C40=1]="C40",r[r.TEXT=2]="TEXT",r[r.X12=3]="X12",r[r.EDF=4]="EDF",r[r.B256=5]="B256",r}(pe||{}),fP=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Jr=function(){function r(){}return r.isExtendedASCII=function(e,t){return e!==t&&e>=128&&e<=255},r.isInC40Shift1Set=function(e){return e<=31},r.isInC40Shift2Set=function(e,t){var i,n;try{for(var o=dc(fP),a=o.next();!a.done;a=o.next()){var s=a.value;if(s.charCodeAt(0)===e)return!0}}catch(l){i={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return e===t},r.isInTextShift1Set=function(e){return this.isInC40Shift1Set(e)},r.isInTextShift2Set=function(e,t){return this.isInC40Shift2Set(e,t)},r.encodeHighLevel=function(e,t,i,n){t===void 0&&(t=null),i===void 0&&(i=-1),n===void 0&&(n=0);var o=0;return e.startsWith(As)&&e.endsWith(Ts)?(o=5,e=e.substring(As.length,e.length-2)):e.startsWith(Ss)&&e.endsWith(Ts)&&(o=6,e=e.substring(Ss.length,e.length-2)),decodeURIComponent(escape(String.fromCharCode.apply(String,dP(this.encode(e,t,i,n,o)))))},r.encode=function(e,t,i,n,o){return this.encodeMinimally(new pP(e,t,i,n,o)).getBytes()},r.addEdge=function(e,t){var i=t.fromPosition+t.characterLength;(e[i][t.getEndMode()]===null||e[i][t.getEndMode()].cachedTotalSize>t.cachedTotalSize)&&(e[i][t.getEndMode()]=t)},r.getNumberOfC40Words=function(e,t,i,n){for(var o=0,a=t;a<e.length();a++){if(e.isECI(a))return n[0]=0,0;var s=e.charAt(a);if(i&&qe.isNativeC40(s)||!i&&qe.isNativeText(s))o++;else if(!r.isExtendedASCII(s,e.getFNC1Character()))o+=2;else{var l=s&255;l>=128&&(i&&qe.isNativeC40(l-128)||!i&&qe.isNativeText(l-128))?o+=3:o+=4}if(o%3===0||(o-2)%3===0&&a+1===e.length())return n[0]=a-t+1,Math.ceil(o/3)}return n[0]=0,0},r.addEdges=function(e,t,i,n){var o,a;if(e.isECI(i)){this.addEdge(t,new Gi(e,pe.ASCII,i,1,n));return}var s=e.charAt(i);if(n===null||n.getEndMode()!==pe.EDF){qe.isDigit(s)&&e.haveNCharacters(i,2)&&qe.isDigit(e.charAt(i+1))?this.addEdge(t,new Gi(e,pe.ASCII,i,2,n)):this.addEdge(t,new Gi(e,pe.ASCII,i,1,n));var l=[pe.C40,pe.TEXT];try{for(var d=dc(l),h=d.next();!h.done;h=d.next()){var p=h.value,v=[];r.getNumberOfC40Words(e,i,p===pe.C40,v)>0&&this.addEdge(t,new Gi(e,p,i,v[0],n))}}catch(A){o={error:A}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}e.haveNCharacters(i,3)&&qe.isNativeX12(e.charAt(i))&&qe.isNativeX12(e.charAt(i+1))&&qe.isNativeX12(e.charAt(i+2))&&this.addEdge(t,new Gi(e,pe.X12,i,3,n)),this.addEdge(t,new Gi(e,pe.B256,i,1,n))}var _;for(_=0;_<3;_++){var E=i+_;if(e.haveNCharacters(E,1)&&qe.isNativeEDIFACT(e.charAt(E)))this.addEdge(t,new Gi(e,pe.EDF,i,_+1,n));else break}_===3&&e.haveNCharacters(i,4)&&qe.isNativeEDIFACT(e.charAt(i+3))&&this.addEdge(t,new Gi(e,pe.EDF,i,4,n))},r.encodeMinimally=function(e){var t=e.length(),i=Array(t+1).fill(null).map(function(){return Array(6).fill(0)});this.addEdges(e,i,0,null);for(var n=1;n<=t;n++){for(var o=0;o<6;o++)i[n][o]!==null&&n<t&&this.addEdges(e,i,n,i[n][o]);for(var o=0;o<6;o++)i[n-1][o]=null}for(var a=-1,s=Pe.MAX_VALUE,o=0;o<6;o++)if(i[t][o]!==null){var l=i[t][o],d=o>=1&&o<=3?l.cachedTotalSize+1:l.cachedTotalSize;d<s&&(s=d,a=o)}if(a<0)throw new Error('Failed to encode "'+e+'"');return new hP(i[t][a])},r}();var hP=function(){function r(e){var t=e.input,i=0,n=[],o=[],a=[];(e.mode===pe.C40||e.mode===pe.TEXT||e.mode===pe.X12)&&e.getEndMode()!==pe.ASCII&&(i+=this.prepend(Gi.getBytes(254),n));for(var s=e;s!==null;)i+=this.prepend(s.getDataBytes(),n),(s.previous===null||s.getPreviousStartMode()!==s.getMode())&&(s.getMode()===pe.B256&&(i<=249?(n.unshift(i),i++):(n.unshift(i%250),n.unshift(i/250+249),i+=2),o.push(n.length),a.push(i)),this.prepend(s.getLatchBytes(),n),i=0),s=s.previous;t.getMacroId()===5?i+=this.prepend(Gi.getBytes(236),n):t.getMacroId()===6&&(i+=this.prepend(Gi.getBytes(237),n)),t.getFNC1Character()>0&&(i+=this.prepend(Gi.getBytes(232),n));for(var l=0;l<o.length;l++)this.applyRandomPattern(n,n.length-o[l],a[l]);var d=e.getMinSymbolSize(n.length);for(n.length<d&&n.push(129);n.length<d;)n.push(this.randomize253State(n.length+1));this.bytes=new Uint8Array(n.length);for(var l=0;l<this.bytes.length;l++)this.bytes[l]=n[l]}return r.prototype.prepend=function(e,t){for(var i=e.length-1;i>=0;i--)t.unshift(e[i]);return e.length},r.prototype.randomize253State=function(e){var t=149*e%253+1,i=129+t;return i<=254?i:i-254},r.prototype.applyRandomPattern=function(e,t,i){for(var n=0;n<i;n++){var o=t+n,a=e[o]&255,s=149*(o+1)%255+1,l=a+s;e[o]=l<=255?l:l-256}},r.prototype.getBytes=function(){return this.bytes},r}(),Gi=function(){function r(e,t,i,n,o){if(this.input=e,this.mode=t,this.fromPosition=i,this.characterLength=n,this.previous=o,this.allCodewordCapacities=[3,5,8,10,12,16,18,22,30,32,36,44,49,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.squareCodewordCapacities=[3,5,8,12,18,22,30,36,44,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.rectangularCodewordCapacities=[5,10,16,33,32,49],!(i+n<=e.length()))throw new Error("Invalid edge");var a=o!==null?o.cachedTotalSize:0,s=this.getPreviousMode();switch(t){case pe.ASCII:a++,(e.isECI(i)||Jr.isExtendedASCII(e.charAt(i),e.getFNC1Character()))&&a++,(s===pe.C40||s===pe.TEXT||s===pe.X12)&&a++;break;case pe.B256:a++,(s!==pe.B256||this.getB256Size()===250)&&a++,s===pe.ASCII?a++:(s===pe.C40||s===pe.TEXT||s===pe.X12)&&(a+=2);break;case pe.C40:case pe.TEXT:case pe.X12:if(t===pe.X12)a+=2;else{var l=[];a+=Jr.getNumberOfC40Words(e,i,t===pe.C40,l)*2}s===pe.ASCII||s===pe.B256?a++:s!==t&&(s===pe.C40||s===pe.TEXT||s===pe.X12)&&(a+=2);break;case pe.EDF:a+=3,s===pe.ASCII||s===pe.B256?a++:(s===pe.C40||s===pe.TEXT||s===pe.X12)&&(a+=2);break}this.cachedTotalSize=a}return r.prototype.getB256Size=function(){for(var e=0,t=this;t!==null&&t.mode===pe.B256&&e<=250;)e++,t=t.previous;return e},r.prototype.getPreviousStartMode=function(){return this.previous===null?pe.ASCII:this.previous.mode},r.prototype.getPreviousMode=function(){return this.previous===null?pe.ASCII:this.previous.getEndMode()},r.prototype.getEndMode=function(){if(this.mode===pe.EDF){if(this.characterLength<4)return pe.ASCII;var e=this.getLastASCII();if(e>0&&this.getCodewordsRemaining(this.cachedTotalSize+e)<=2-e)return pe.ASCII}if(this.mode===pe.C40||this.mode===pe.TEXT||this.mode===pe.X12){if(this.fromPosition+this.characterLength>=this.input.length()&&this.getCodewordsRemaining(this.cachedTotalSize)===0)return pe.ASCII;var e=this.getLastASCII();if(e===1&&this.getCodewordsRemaining(this.cachedTotalSize+1)===0)return pe.ASCII}return this.mode},r.prototype.getMode=function(){return this.mode},r.prototype.getLastASCII=function(){var e=this.input.length(),t=this.fromPosition+this.characterLength;return e-t>4||t>=e?0:e-t===1?Jr.isExtendedASCII(this.input.charAt(t),this.input.getFNC1Character())?0:1:e-t===2?Jr.isExtendedASCII(this.input.charAt(t),this.input.getFNC1Character())||Jr.isExtendedASCII(this.input.charAt(t+1),this.input.getFNC1Character())?0:qe.isDigit(this.input.charAt(t))&&qe.isDigit(this.input.charAt(t+1))?1:2:e-t===3?qe.isDigit(this.input.charAt(t))&&qe.isDigit(this.input.charAt(t+1))&&!Jr.isExtendedASCII(this.input.charAt(t+2),this.input.getFNC1Character())||qe.isDigit(this.input.charAt(t+1))&&qe.isDigit(this.input.charAt(t+2))&&!Jr.isExtendedASCII(this.input.charAt(t),this.input.getFNC1Character())?2:0:qe.isDigit(this.input.charAt(t))&&qe.isDigit(this.input.charAt(t+1))&&qe.isDigit(this.input.charAt(t+2))&&qe.isDigit(this.input.charAt(t+3))?2:0},r.prototype.getMinSymbolSize=function(e){var t,i,n,o,a,s;switch(this.input.getShapeHint()){case 1:try{for(var l=dc(this.squareCodewordCapacities),d=l.next();!d.done;d=l.next()){var h=d.value;if(h>=e)return h}}catch(A){t={error:A}}finally{try{d&&!d.done&&(i=l.return)&&i.call(l)}finally{if(t)throw t.error}}break;case 2:try{for(var p=dc(this.rectangularCodewordCapacities),v=p.next();!v.done;v=p.next()){var h=v.value;if(h>=e)return h}}catch(A){n={error:A}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(n)throw n.error}}break}try{for(var _=dc(this.allCodewordCapacities),E=_.next();!E.done;E=_.next()){var h=E.value;if(h>=e)return h}}catch(A){a={error:A}}finally{try{E&&!E.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}return this.allCodewordCapacities[this.allCodewordCapacities.length-1]},r.prototype.getCodewordsRemaining=function(e){return this.getMinSymbolSize(e)-e},r.getBytes=function(e,t){var i=new Uint8Array(t?2:1);return i[0]=e,t&&(i[1]=t),i},r.prototype.setC40Word=function(e,t,i,n,o){var a=1600*(i&255)+40*(n&255)+(o&255)+1;e[t]=a/256,e[t+1]=a%256},r.prototype.getX12Value=function(e){return e===13?0:e===42?1:e===62?2:e===32?3:e>=48&&e<=57?e-44:e>=65&&e<=90?e-51:e},r.prototype.getX12Words=function(){if(this.characterLength%3!==0)throw new Error("X12 words must be a multiple of 3");for(var e=new Uint8Array(this.characterLength/3*2),t=0;t<e.length;t+=2)this.setC40Word(e,t,this.getX12Value(this.input.charAt(this.fromPosition+t/2*3)),this.getX12Value(this.input.charAt(this.fromPosition+t/2*3+1)),this.getX12Value(this.input.charAt(this.fromPosition+t/2*3+2)));return e},r.prototype.getShiftValue=function(e,t,i){return t&&Jr.isInC40Shift1Set(e)||!t&&Jr.isInTextShift1Set(e)?0:t&&Jr.isInC40Shift2Set(e,i)||!t&&Jr.isInTextShift2Set(e,i)?1:2},r.prototype.getC40Value=function(e,t,i,n){if(i===n){if(t!==2)throw new Error("FNC1 cannot be used in C40 shift 2");return 27}return e?i<=31?i:i===32?3:i<=47?i-33:i<=57?i-44:i<=64?i-43:i<=90?i-51:i<=95?i-69:i<=127?i-96:i:i===0?0:t===0&&i<=3?i-1:t===1&&i<=31?i:i===32?3:i>=33&&i<=47?i-33:i>=48&&i<=57?i-44:i>=58&&i<=64?i-43:i>=65&&i<=90?i-64:i>=91&&i<=95?i-69:i===96?0:i>=97&&i<=122?i-83:i>=123&&i<=127?i-96:i},r.prototype.getC40Words=function(e,t){for(var i=[],n=0;n<this.characterLength;n++){var o=this.input.charAt(this.fromPosition+n);if(e&&qe.isNativeC40(o)||!e&&qe.isNativeText(o))i.push(this.getC40Value(e,0,o,t));else if(Jr.isExtendedASCII(o,t)){var s=(o&255)-128;if(e&&qe.isNativeC40(s)||!e&&qe.isNativeText(s))i.push(1),i.push(30),i.push(this.getC40Value(e,0,s,t));else{i.push(1),i.push(30);var a=this.getShiftValue(s,e,t);i.push(a),i.push(this.getC40Value(e,a,s,t))}}else{var a=this.getShiftValue(o,e,t);i.push(a),i.push(this.getC40Value(e,a,o,t))}}if(i.length%3!==0){if(!((i.length-2)%3===0&&this.fromPosition+this.characterLength===this.input.length()))throw new Error("C40 words must be a multiple of 3");i.push(0)}for(var l=new Uint8Array(i.length/3*2),d=0,n=0;n<i.length;n+=3)this.setC40Word(l,d,i[n]&255,i[n+1]&255,i[n+2]&255),d+=2;return l},r.prototype.getEDFBytes=function(){for(var e=Math.ceil(this.characterLength/4),t=new Uint8Array(e*3),i=this.fromPosition,n=Math.min(this.fromPosition+this.characterLength-1,this.input.length()-1),o=0;o<e;o+=3){for(var a=[],s=0;s<4;s++)i<=n?a[s]=this.input.charAt(i++)&63:a[s]=i===n+1?31:0;var l=a[0]<<18;l|=a[1]<<12,l|=a[2]<<6,l|=a[3],t[o]=l>>16&255,t[o+1]=l>>8&255,t[o+2]=l&255}return t},r.prototype.getLatchBytes=function(){switch(this.getPreviousMode()){case pe.ASCII:case pe.B256:switch(this.mode){case pe.B256:return r.getBytes(231);case pe.C40:return r.getBytes(230);case pe.TEXT:return r.getBytes(239);case pe.X12:return r.getBytes(238);case pe.EDF:return r.getBytes(240)}break;case pe.C40:case pe.TEXT:case pe.X12:if(this.mode!==this.getPreviousMode())switch(this.mode){case pe.ASCII:return r.getBytes(254);case pe.B256:return r.getBytes(254,231);case pe.C40:return r.getBytes(254,230);case pe.TEXT:return r.getBytes(254,239);case pe.X12:return r.getBytes(254,238);case pe.EDF:return r.getBytes(254,240)}break;case pe.EDF:if(this.mode!==pe.EDF)throw new Error("Cannot switch from EDF to "+this.mode);break}return new Uint8Array(0)},r.prototype.getDataBytes=function(){switch(this.mode){case pe.ASCII:return this.input.isECI(this.fromPosition)?r.getBytes(241,this.input.getECIValue(this.fromPosition)+1):Jr.isExtendedASCII(this.input.charAt(this.fromPosition),this.input.getFNC1Character())?r.getBytes(235,this.input.charAt(this.fromPosition)-127):this.characterLength===2?r.getBytes(this.input.charAt(this.fromPosition)*10+this.input.charAt(this.fromPosition+1)+130):this.input.isFNC1(this.fromPosition)?r.getBytes(232):r.getBytes(this.input.charAt(this.fromPosition)+1);case pe.B256:return r.getBytes(this.input.charAt(this.fromPosition));case pe.C40:return this.getC40Words(!0,this.input.getFNC1Character());case pe.TEXT:return this.getC40Words(!1,this.input.getFNC1Character());case pe.X12:return this.getX12Words();case pe.EDF:return this.getEDFBytes()}},r}(),pP=function(r){cP(e,r);function e(t,i,n,o,a){var s=r.call(this,t,i,n)||this;return s.shape=o,s.macroId=a,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e}(Sx);var kq=function(){function r(){}return r.prototype.encode=function(e,t,i,n,o){if(o===void 0&&(o=null),e.trim()==="")throw new Error("Found empty contents");if(t!==le.DATA_MATRIX)throw new Error("Can only encode DATA_MATRIX, but got "+t);if(i<0||n<0)throw new Error("Requested dimensions can't be negative: "+i+"x"+n);var a=0,s=null,l=null;if(o!=null){var d=o.get(pt.DATA_MATRIX_SHAPE);d!=null&&(a=d);var h=o.get(pt.MIN_SIZE);h!=null&&(s=h);var p=o.get(pt.MAX_SIZE);p!=null&&(l=p)}var v,_=o!=null&&o.has(pt.DATA_MATRIX_COMPACT)&&!!o.get(pt.DATA_MATRIX_COMPACT).toString();if(_){var E=o.has(pt.GS1_FORMAT)&&!!o.get(pt.GS1_FORMAT).toString(),A=null,N=o.has(pt.CHARACTER_SET);N&&(A=da.forName(o.get(pt.CHARACTER_SET).toString())),v=Jr.encodeHighLevel(e,A,E?29:-1,a)}else{var F=o!=null&&o.has(pt.FORCE_C40)&&!!o.get(pt.FORCE_C40).toString();v=qe.encodeHighLevel(e,a,s,l,F)}var P=Ds.lookup(v.length,a,s,l,!0),L=Bd.encodeECC200(v,P),G=new Fd(L,P.getSymbolDataWidth(),P.getSymbolDataHeight());return G.place(),this.encodeLowLevel(G,P,i,n)},r.prototype.encodeLowLevel=function(e,t,i,n){for(var o=t.getSymbolDataWidth(),a=t.getSymbolDataHeight(),s=new sc(t.getSymbolWidth(),t.getSymbolHeight()),l=0,d=0;d<a;d++){var h=void 0;if(d%t.matrixHeight===0){h=0;for(var p=0;p<t.getSymbolWidth();p++)s.setBoolean(h,l,p%2===0),h++;l++}h=0;for(var p=0;p<o;p++)p%t.matrixWidth===0&&(s.setBoolean(h,l,!0),h++),s.setBoolean(h,l,e.getBit(p,d)),h++,p%t.matrixWidth===t.matrixWidth-1&&(s.setBoolean(h,l,d%2===0),h++);if(l++,d%t.matrixHeight===t.matrixHeight-1){h=0;for(var p=0;p<t.getSymbolWidth();p++)s.setBoolean(h,l,!0),h++;l++}}return this.convertByteMatrixToBitMatrix(s,i,n)},r.prototype.convertByteMatrixToBitMatrix=function(e,t,i){var n=e.getWidth(),o=e.getHeight(),a=Math.max(t,n),s=Math.max(i,o),l=Math.min(a/n,s/o),d=(a-n*l)/2,h=(s-o*l)/2,p;i<o||t<n?(d=0,h=0,p=new Zt(n,o)):p=new Zt(t,i),p.clear();for(var v=0,_=h;v<o;v++,_+=l)for(var E=0,A=d;E<n;E++,A+=l)e.get(E,v)===1&&p.setRegion(A,_,l,l);return p},r}();var mP=function(){function r(){}return r.prototype.isCompact=function(){return this.compact},r.prototype.setCompact=function(e){this.compact=e},r.prototype.getSize=function(){return this.size},r.prototype.setSize=function(e){this.size=e},r.prototype.getLayers=function(){return this.layers},r.prototype.setLayers=function(e){this.layers=e},r.prototype.getCodeWords=function(){return this.codeWords},r.prototype.setCodeWords=function(e){this.codeWords=e},r.prototype.getMatrix=function(){return this.matrix},r.prototype.setMatrix=function(e){this.matrix=e},r}(),bg=mP;var gP=function(){function r(){}return r.singletonList=function(e){return[e]},r.min=function(e,t){return e.sort(t)[0]},r}(),xg=gP;var vP=function(){function r(e){this.previous=e}return r.prototype.getPrevious=function(){return this.previous},r}(),Tx=vP;var _P=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),yP=function(r){_P(e,r);function e(t,i,n){var o=r.call(this,t)||this;return o.value=i,o.bitCount=n,o}return e.prototype.appendTo=function(t,i){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,i){return new e(this,t,i)},e.prototype.addBinaryShift=function(t,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,i)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Pe.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(Tx),Os=yP;var bP=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o])},r(e,t)};return function(e,t){r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),xP=function(r){bP(e,r);function e(t,i,n){var o=r.call(this,t,0,0)||this;return o.binaryShiftStart=i,o.binaryShiftByteCount=n,o}return e.prototype.appendTo=function(t,i){for(var n=0;n<this.binaryShiftByteCount;n++)(n===0||n===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):n===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(i[this.binaryShiftStart+n],8)},e.prototype.addBinaryShift=function(t,i){return new e(this,t,i)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(Os),Dx=xP;function Ox(r,e,t){return new Dx(r,e,t)}function Rs(r,e,t){return new Os(r,e,t)}var Rx=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],nn=0,Ms=1,ei=2,Vd=3,_i=4,Mx=new Os(null,0,0);var Gd=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];var IP=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function CP(r){var e,t;try{for(var i=IP(r),n=i.next();!n.done;n=i.next()){var o=n.value;Ct.fill(o,-1)}}catch(a){e={error:a}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r[nn][_i]=0,r[Ms][_i]=0,r[Ms][nn]=28,r[Vd][_i]=0,r[ei][_i]=0,r[ei][nn]=15,r}var jd=CP(Ct.createInt32Array(6,6));var AP=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SP=function(){function r(e,t,i,n){this.token=e,this.mode=t,this.binaryShiftByteCount=i,this.bitCount=n}return r.prototype.getMode=function(){return this.mode},r.prototype.getToken=function(){return this.token},r.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},r.prototype.getBitCount=function(){return this.bitCount},r.prototype.latchAndAppend=function(e,t){var i=this.bitCount,n=this.token;if(e!==this.mode){var o=Gd[this.mode][e];n=Rs(n,o&65535,o>>16),i+=o>>16}var a=e===ei?4:5;return n=Rs(n,t,a),new r(n,e,0,i+a)},r.prototype.shiftAndAppend=function(e,t){var i=this.token,n=this.mode===ei?4:5;return i=Rs(i,jd[this.mode][e],n),i=Rs(i,t,5),new r(i,this.mode,0,this.bitCount+n+5)},r.prototype.addBinaryShiftChar=function(e){var t=this.token,i=this.mode,n=this.bitCount;if(this.mode===_i||this.mode===ei){var o=Gd[i][nn];t=Rs(t,o&65535,o>>16),n+=o>>16,i=nn}var a=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new r(t,i,this.binaryShiftByteCount+1,n+a);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s},r.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=Ox(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new r(t,this.mode,0,this.bitCount)},r.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(Gd[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=r.calculateBinaryShiftCost(e)-r.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},r.prototype.toBitArray=function(e){for(var t,i,n=[],o=this.endBinaryShift(e.length).token;o!==null;o=o.getPrevious())n.unshift(o);var a=new qt;try{for(var s=AP(n),l=s.next();!l.done;l=s.next()){var d=l.value;d.appendTo(a,e)}}catch(h){t={error:h}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(t)throw t.error}}return a},r.prototype.toString=function(){return We.format("%s bits=%d bytes=%d",Rx[this.mode],this.bitCount,this.binaryShiftByteCount)},r.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},r.INITIAL_STATE=new r(Mx,nn,0,0),r}(),Nx=SP;function TP(r){var e=We.getCharCode(" "),t=We.getCharCode("."),i=We.getCharCode(",");r[nn][e]=1;for(var n=We.getCharCode("Z"),o=We.getCharCode("A"),a=o;a<=n;a++)r[nn][a]=a-o+2;r[Ms][e]=1;for(var s=We.getCharCode("z"),l=We.getCharCode("a"),a=l;a<=s;a++)r[Ms][a]=a-l+2;r[ei][e]=1;for(var d=We.getCharCode("9"),h=We.getCharCode("0"),a=h;a<=d;a++)r[ei][a]=a-h+2;r[ei][i]=12,r[ei][t]=13;for(var p=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F"],v=0;v<p.length;v++)r[Vd][We.getCharCode(p[v])]=v;for(var _=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],v=0;v<_.length;v++)We.getCharCode(_[v])>0&&(r[_i][We.getCharCode(_[v])]=v);return r}var zd=TP(Ct.createInt32Array(5,256));var Hd=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OP=function(){function r(e){this.text=e}return r.prototype.encode=function(){for(var e=We.getCharCode(" "),t=We.getCharCode(`
`),i=xg.singletonList(Nx.INITIAL_STATE),n=0;n<this.text.length;n++){var o=void 0,a=n+1<this.text.length?this.text[n+1]:0;switch(this.text[n]){case We.getCharCode("\r"):o=a===t?2:0;break;case We.getCharCode("."):o=a===e?3:0;break;case We.getCharCode(","):o=a===e?4:0;break;case We.getCharCode(":"):o=a===e?5:0;break;default:o=0}o>0?(i=r.updateStateListForPair(i,n,o),n++):i=this.updateStateListForChar(i,n)}var s=xg.min(i,function(l,d){return l.getBitCount()-d.getBitCount()});return s.toBitArray(this.text)},r.prototype.updateStateListForChar=function(e,t){var i,n,o=[];try{for(var a=Hd(e),s=a.next();!s.done;s=a.next()){var l=s.value;this.updateStateForChar(l,t,o)}}catch(d){i={error:d}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return r.simplifyStates(o)},r.prototype.updateStateForChar=function(e,t,i){for(var n=this.text[t]&255,o=zd[e.getMode()][n]>0,a=null,s=0;s<=_i;s++){var l=zd[s][n];if(l>0){if(a==null&&(a=e.endBinaryShift(t)),!o||s===e.getMode()||s===ei){var d=a.latchAndAppend(s,l);i.push(d)}if(!o&&jd[e.getMode()][s]>=0){var h=a.shiftAndAppend(s,l);i.push(h)}}}if(e.getBinaryShiftByteCount()>0||zd[e.getMode()][n]===0){var p=e.addBinaryShiftChar(t);i.push(p)}},r.updateStateListForPair=function(e,t,i){var n,o,a=[];try{for(var s=Hd(e),l=s.next();!l.done;l=s.next()){var d=l.value;this.updateStateForPair(d,t,i,a)}}catch(h){n={error:h}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return this.simplifyStates(a)},r.updateStateForPair=function(e,t,i,n){var o=e.endBinaryShift(t);if(n.push(o.latchAndAppend(_i,i)),e.getMode()!==_i&&n.push(o.shiftAndAppend(_i,i)),i===3||i===4){var a=o.latchAndAppend(ei,16-i).latchAndAppend(ei,1);n.push(a)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);n.push(s)}},r.simplifyStates=function(e){var t,i,n,o,a=[];try{for(var s=Hd(e),l=s.next();!l.done;l=s.next()){var d=l.value,h=!0,p=function(N){if(N.isBetterThanOrEqualTo(d))return h=!1,"break";d.isBetterThanOrEqualTo(N)&&(a=a.filter(function(F){return F!==N}))};try{for(var v=(n=void 0,Hd(a)),_=v.next();!_.done;_=v.next()){var E=_.value,A=p(E);if(A==="break")break}}catch(N){n={error:N}}finally{try{_&&!_.done&&(o=v.return)&&o.call(v)}finally{if(n)throw n.error}}h&&a.push(d)}}catch(N){t={error:N}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(t)throw t.error}}return a},r}(),Eg=OP;var RP=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},MP=function(){function r(){}return r.encodeBytes=function(e){return r.encode(e,r.DEFAULT_EC_PERCENT,r.DEFAULT_AZTEC_LAYERS)},r.encode=function(e,t,i){var n=new Eg(e).encode(),o=Pe.truncDivision(n.getSize()*t,100)+11,a=n.getSize()+o,s,l,d,h,p;if(i!==r.DEFAULT_AZTEC_LAYERS){if(s=i<0,l=Math.abs(i),l>(s?r.MAX_NB_BITS_COMPACT:r.MAX_NB_BITS))throw new ae(We.format("Illegal value %s for layers",i));d=r.totalBitsInLayer(l,s),h=r.WORD_SIZE[l];var v=d-d%h;if(p=r.stuffBits(n,h),p.getSize()+o>v)throw new ae("Data to large for user specified layer");if(s&&p.getSize()>h*64)throw new ae("Data to large for user specified layer")}else{h=0,p=null;for(var _=0;;_++){if(_>r.MAX_NB_BITS)throw new ae("Data too large for an Aztec code");if(s=_<=3,l=s?_+1:_,d=r.totalBitsInLayer(l,s),!(a>d)){(p==null||h!==r.WORD_SIZE[l])&&(h=r.WORD_SIZE[l],p=r.stuffBits(n,h));var v=d-d%h;if(!(s&&p.getSize()>h*64)&&p.getSize()+o<=v)break}}}var E=r.generateCheckWords(p,d,h),A=p.getSize()/h,N=r.generateModeMessage(s,l,A),F=(s?11:14)+l*4,P=new Int32Array(F),L;if(s){L=F;for(var _=0;_<P.length;_++)P[_]=_}else{L=F+1+2*Pe.truncDivision(Pe.truncDivision(F,2)-1,15);for(var G=Pe.truncDivision(F,2),Y=Pe.truncDivision(L,2),_=0;_<G;_++){var Q=_+Pe.truncDivision(_,15);P[G-_-1]=Y-Q-1,P[G+_]=Y+Q+1}}for(var ie=new Zt(L),_=0,ye=0;_<l;_++){for(var Ne=(l-_)*4+(s?9:12),Ge=0;Ge<Ne;Ge++)for(var At=Ge*2,nt=0;nt<2;nt++)E.get(ye+At+nt)&&ie.set(P[_*2+nt],P[_*2+Ge]),E.get(ye+Ne*2+At+nt)&&ie.set(P[_*2+Ge],P[F-1-_*2-nt]),E.get(ye+Ne*4+At+nt)&&ie.set(P[F-1-_*2-nt],P[F-1-_*2-Ge]),E.get(ye+Ne*6+At+nt)&&ie.set(P[F-1-_*2-Ge],P[_*2+nt]);ye+=Ne*8}if(r.drawModeMessage(ie,s,L,N),s)r.drawBullsEye(ie,Pe.truncDivision(L,2),5);else{r.drawBullsEye(ie,Pe.truncDivision(L,2),7);for(var _=0,Ge=0;_<Pe.truncDivision(F,2)-1;_+=15,Ge+=16)for(var nt=Pe.truncDivision(L,2)&1;nt<L;nt+=2)ie.set(Pe.truncDivision(L,2)-Ge,nt),ie.set(Pe.truncDivision(L,2)+Ge,nt),ie.set(nt,Pe.truncDivision(L,2)-Ge),ie.set(nt,Pe.truncDivision(L,2)+Ge)}var wt=new bg;return wt.setCompact(s),wt.setSize(L),wt.setLayers(l),wt.setCodeWords(A),wt.setMatrix(ie),wt},r.drawBullsEye=function(e,t,i){for(var n=0;n<i;n+=2)for(var o=t-n;o<=t+n;o++)e.set(o,t-n),e.set(o,t+n),e.set(t-n,o),e.set(t+n,o);e.set(t-i,t-i),e.set(t-i+1,t-i),e.set(t-i,t-i+1),e.set(t+i,t-i),e.set(t+i,t-i+1),e.set(t+i,t+i-1)},r.generateModeMessage=function(e,t,i){var n=new qt;return e?(n.appendBits(t-1,2),n.appendBits(i-1,6),n=r.generateCheckWords(n,28,4)):(n.appendBits(t-1,5),n.appendBits(i-1,11),n=r.generateCheckWords(n,40,4)),n},r.drawModeMessage=function(e,t,i,n){var o=Pe.truncDivision(i,2);if(t)for(var a=0;a<7;a++){var s=o-3+a;n.get(a)&&e.set(s,o-5),n.get(a+7)&&e.set(o+5,s),n.get(20-a)&&e.set(s,o+5),n.get(27-a)&&e.set(o-5,s)}else for(var a=0;a<10;a++){var s=o-5+a+Pe.truncDivision(a,5);n.get(a)&&e.set(s,o-7),n.get(a+10)&&e.set(o+7,s),n.get(29-a)&&e.set(s,o+7),n.get(39-a)&&e.set(o-7,s)}},r.generateCheckWords=function(e,t,i){var n,o,a=e.getSize()/i,s=new ac(r.getGF(i)),l=Pe.truncDivision(t,i),d=r.bitsToWords(e,i,l);s.encode(d,l-a);var h=t%i,p=new qt;p.appendBits(0,h);try{for(var v=RP(Array.from(d)),_=v.next();!_.done;_=v.next()){var E=_.value;p.appendBits(E,i)}}catch(A){n={error:A}}finally{try{_&&!_.done&&(o=v.return)&&o.call(v)}finally{if(n)throw n.error}}return p},r.bitsToWords=function(e,t,i){var n=new Int32Array(i),o,a;for(o=0,a=e.getSize()/t;o<a;o++){for(var s=0,l=0;l<t;l++)s|=e.get(o*t+l)?1<<t-l-1:0;n[o]=s}return n},r.getGF=function(e){switch(e){case 4:return _r.AZTEC_PARAM;case 6:return _r.AZTEC_DATA_6;case 8:return _r.AZTEC_DATA_8;case 10:return _r.AZTEC_DATA_10;case 12:return _r.AZTEC_DATA_12;default:throw new ae("Unsupported word size "+e)}},r.stuffBits=function(e,t){for(var i=new qt,n=e.getSize(),o=(1<<t)-2,a=0;a<n;a+=t){for(var s=0,l=0;l<t;l++)(a+l>=n||e.get(a+l))&&(s|=1<<t-1-l);(s&o)===o?(i.appendBits(s&o,t),a--):s&o?i.appendBits(s,t):(i.appendBits(s|1,t),a--)}return i},r.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.DEFAULT_EC_PERCENT=33,r.DEFAULT_AZTEC_LAYERS=0,r.MAX_NB_BITS=32,r.MAX_NB_BITS_COMPACT=4,r.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),r}(),fc=MP;var C$=function(){function r(){}return r.prototype.encode=function(e,t,i,n){return this.encodeWithHints(e,t,i,n,null)},r.prototype.encodeWithHints=function(e,t,i,n,o){var a=cc.ISO_8859_1,s=fc.DEFAULT_EC_PERCENT,l=fc.DEFAULT_AZTEC_LAYERS;return o!=null&&(o.has(pt.CHARACTER_SET)&&(a=da.forName(o.get(pt.CHARACTER_SET).toString())),o.has(pt.ERROR_CORRECTION)&&(s=Pe.parseInt(o.get(pt.ERROR_CORRECTION).toString())),o.has(pt.AZTEC_LAYERS)&&(l=Pe.parseInt(o.get(pt.AZTEC_LAYERS).toString()))),r.encodeLayers(e,t,i,n,a,s,l)},r.encodeLayers=function(e,t,i,n,o,a,s){if(t!==le.AZTEC)throw new ae("Can only encode AZTEC, but got "+t);var l=fc.encode(We.getBytes(e,o),a,s);return r.renderResult(l,i,n)},r.renderResult=function(e,t,i){var n=e.getMatrix();if(n==null)throw new Wr;for(var o=n.getWidth(),a=n.getHeight(),s=Math.max(t,o),l=Math.max(i,a),d=Math.min(s/o,l/a),h=(s-o*d)/2,p=(l-a*d)/2,v=new Zt(s,l),_=0,E=p;_<a;_++,E+=d)for(var A=0,N=h;A<o;A++,N+=d)n.get(A,_)&&v.setRegion(N,E,d,d);return v},r}();var NP=["stepper"],FP=["backPond"];function kP(r,e){r&1&&Dt(0,"Upload Front of License")}function LP(r,e){if(r&1&&(Le(0,"div",15),Qt(1,"img",16),He()),r&2){let t=It();Ue(),_t("src",t.frontImagePreview,eh)}}function BP(r,e){r&1&&Dt(0,"Upload Back of License")}function VP(r,e){if(r&1&&(Le(0,"div",15)(1,"p"),Dt(2,"Back Image Preview:"),He(),Qt(3,"img",17),He()),r&2){let t=It();Ue(3),_t("src",t.backImagePreview,eh)}}function UP(r,e){r&1&&(Le(0,"div",18),Qt(1,"mat-progress-bar",19),Le(2,"p"),Dt(3,"Processing..."),He()())}function GP(r,e){if(r&1&&(Le(0,"div")(1,"p",20),Dt(2),He()()),r&2){let t=It();Ue(2),gi(t.errorMessage)}}function jP(r,e){r&1&&Dt(0,"Review License Data")}function zP(r,e){r&1&&(Le(0,"div",18),Qt(1,"mat-progress-bar",19),Le(2,"p"),Dt(3,"Processing..."),He()())}function HP(r,e){if(r&1){let t=un();Le(0,"div")(1,"h3"),Dt(2,"Extracted License Data"),He(),Le(3,"pre"),Dt(4),nh(5,"json"),He(),Le(6,"div",21)(7,"button",22),pr("click",function(){Zr(t);let n=It();return Kr(n.copyToClipboard())}),Dt(8," Copy JSON "),He(),Le(9,"button",23),pr("click",function(){Zr(t);let n=It();return Kr(n.downloadJSON())}),Dt(10," Download JSON "),He()()()}if(r&2){let t=It();Ue(4),gi(oh(5,1,t.licenseData))}}function WP(r,e){if(r&1){let t=un();Le(0,"div")(1,"p",20),Dt(2),He(),Le(3,"div",15)(4,"button",24),pr("click",function(){Zr(t);let n=It();return Kr(n.retry())}),Dt(5," Retry "),He()()()}if(r&2){let t=It();Ue(2),gi(t.errorMessage)}}(0,Om.registerPlugin)(Fx.default,kx.default);var Wd=class r{constructor(e,t){this.fb=e;this.breakpointObserver=t;this.frontForm=this.fb.group({frontImage:[null,Gl.required]}),this.backForm=this.fb.group({backImage:[null,Gl.required]}),this.stepperOrientation=this.breakpointObserver.observe([iy.HandsetPortrait]).pipe(Xe(({matches:i})=>i?"vertical":"horizontal"))}frontForm;backForm;frontImage=null;backImage=void 0;frontImagePreview=null;backImagePreview=null;originalBackImagePreview=null;licenseData=null;isProcessing=!1;errorMessage=null;stepper;backPondComponent;backFiles=[];frontFiles=[];upscaleAttempt=0;maxUpscaleAttempts=3;isBackImageProcessing=!1;upscaleWidth=1920;upscaleHeight=1920;frontPondOptions={allowImageCrop:!1,acceptedFileTypes:["image/jpeg","image/png"],maxFileSize:"100MB",allowMultiple:!1,labelIdle:'Drag & Drop your front license or <span class="filepond--label-action">Browse</span>'};backPondOptions={allowImageCrop:!1,acceptedFileTypes:["image/jpeg","image/png"],maxFileSize:"100MB",allowMultiple:!1,labelIdle:'Drag & Drop your back license or <span class="filepond--label-action">Browse</span>'};stepperOrientation;ngOnInit(){}onFrontImageAdded(e){let t=e.file.file;if(this.validateImage(t)){this.frontImage=t,this.frontForm.patchValue({frontImage:t}),this.frontFiles=[t];let i=new FileReader;i.onload=()=>{this.frontImagePreview=i.result},i.readAsDataURL(t)}else alert("Invalid front image. Please upload a valid JPEG or PNG image under 100MB."),e.file.rejectFile()}onBackImageAdded(e){let t=e.file.file;if(this.validateImage(t)){this.backImage=t,this.backForm.patchValue({backImage:t}),this.backFiles=[t];let i=new FileReader;i.onload=()=>{this.backImagePreview=i.result,this.originalBackImagePreview=this.backImagePreview,this.isBackImageProcessing=!1,this.errorMessage=null,this.upscaleAttempt=0},i.readAsDataURL(t)}else alert("Invalid back image. Please upload a valid JPEG or PNG image under 100MB."),e.file.rejectFile()}processBackImage(){return Oe(this,null,function*(){if(!this.backImagePreview){alert("Please upload the back image first.");return}this.isProcessing=!0,this.isBackImageProcessing=!0,this.errorMessage=null;try{let e=yield this.extractBarcodeData(this.backImagePreview);this.licenseData=this.parseBarcodeData(e),this.isProcessing=!1,this.isBackImageProcessing=!1,console.log("License Data:",this.licenseData),this.stepper.selectedIndex=2}catch{console.warn("Initial barcode extraction failed. Attempting upscaling...");try{yield this.upscaleBackImage();let t=yield this.extractBarcodeData(this.backImagePreview);this.licenseData=this.parseBarcodeData(t),this.isProcessing=!1,this.isBackImageProcessing=!1,console.log("License Data after upscaling:",this.licenseData),this.stepper.selectedIndex=2}catch(t){console.error("Barcode extraction failed after upscaling:",t),this.isProcessing=!1,this.isBackImageProcessing=!1,this.errorMessage="Failed to extract data from the barcode. Please try uploading a clearer image.",alert(this.errorMessage)}}})}upscaleBackImage(){return Oe(this,null,function*(){if(!this.originalBackImagePreview)return;this.upscaleWidth=3e3,this.upscaleHeight=3e3;let e=yield this.upscaleImage(this.originalBackImagePreview,this.upscaleWidth,this.upscaleHeight);this.backImage=this.base64ToFile(e,"upscaled-back-image.png"),this.backImagePreview=e,this.backFiles=[this.backImage]})}onFrontImageRemoved(e){this.frontImage=null,this.frontImagePreview=null,this.frontFiles=[],this.frontForm.patchValue({frontImage:null})}onBackImageRemoved(e){this.backImage=void 0,this.backImagePreview=null,this.originalBackImagePreview=null,this.backFiles=[],this.backForm.patchValue({backImage:null}),this.upscaleAttempt=0,this.isBackImageProcessing=!1,this.errorMessage=null,this.upscaleWidth=1920,this.upscaleHeight=1920}onBackImageNext(){this.processBackImage()}upscaleImage(e,t,i){return Oe(this,null,function*(){return new Promise((n,o)=>Oe(this,null,function*(){let a=new Image;a.src=e,a.crossOrigin="Anonymous",a.onload=()=>Oe(this,null,function*(){let s=yield YP(e),l=document.createElement("canvas"),d=l.getContext("2d");if(!d){o("Cannot get canvas context");return}switch(s>4?(l.width=i,l.height=t):(l.width=t,l.height=i),s){case 2:d.translate(l.width,0),d.scale(-1,1);break;case 3:d.translate(l.width,l.height),d.rotate(Math.PI);break;case 4:d.translate(0,l.height),d.scale(1,-1);break;case 5:d.rotate(.5*Math.PI),d.scale(1,-1);break;case 6:d.translate(l.width,0),d.rotate(.5*Math.PI);break;case 7:d.translate(l.width,0),d.rotate(.5*Math.PI),d.scale(-1,1);break;case 8:d.translate(0,l.height),d.rotate(-.5*Math.PI);break;default:break}d.drawImage(a,0,0,l.width,l.height);let h=l.toDataURL("image/png",.9);n(h)}),a.onerror=s=>o(s)}))})}validateImage(e){return!(!["image/jpeg","image/png"].includes(e.type)||e.size>104857600)}extractBarcodeData(e){return Oe(this,null,function*(){let t=this.base64ToFile(e,"back-image.png"),i=new Map;i.set(st.POSSIBLE_FORMATS,[le.PDF_417]);let n=new dx(i);try{return(yield n.decodeFromImageUrl(XP(t))).getText()}catch(o){throw console.log(o,"extractBarcodeData"),new Error("Barcode decoding failed.")}})}base64ToFile(e,t){let i=e.split(","),n=i[0].match(/:(.*?);/)[1],o=atob(i[1]),a=o.length,s=new Uint8Array(a);for(;a--;)s[a]=o.charCodeAt(a);return new File([s],t,{type:n})}parseBarcodeData(e){let t={},i=e.split(/\r?\n/),n={DAA:"FullName",DCS:"CustomerFamilyName",DAC:"CustomerFirstName",DAD:"MiddleName",DBA:"LicenseExpirationDate",DBB:"DateOfBirth",DBC:"Sex",DBD:"IssueDate",DBE:"Address",DBF:"City",DBG:"State",DBH:"PostalCode",DAJ:"LicenseNumber",DCB:"CustomerSuffix",DCD:"VehicleClass",DCAC:"LicenseType",DDEN:"DenominationCode",DDF:"AlternateFirstName",DADR:"ResidenceStreetAddress",DDGN:"ResidenceStreetAddress2",DAY:"Suffix",DAU:"Height",DAG:"ResidenceCity",DAK:"AuditInformation",DAQ:"DriverLicenseNumber",DCF:"DocumentFilingNumber",DCG:"Country",DAZ:"EyeColor",DCK:"CheckDigit",DCL:"HairColor",DDA:"DocumentDiscriminator",DDB:"DocumentVersion",DAW:"Weight",DDK:"DocumentSecondaryID",ZTZT:"Composite"};for(let o of i){if(!o.trim()||!/^[A-Z]{3}/.test(o))continue;let a=o.substring(0,3),s=o.substring(3).trim();n[a]?["DBA","DBB","DBD"].includes(a)?t[n[a]]=this.formatDate(s):t[n[a]]=s:console.warn(`Unmapped key encountered: ${a} with value: ${s}`)}return t}formatDate(e){if(e.length===6){let t=parseInt(e.substring(0,2),10)+2e3,i=e.substring(2,4),n=e.substring(4,6);return`${t}-${i}-${n}`}return e}copyToClipboard(){let e=JSON.stringify(this.licenseData,null,2);navigator.clipboard.writeText(e).then(()=>{alert("JSON data copied to clipboard.")},()=>{alert("Failed to copy data.")})}downloadJSON(){let e=JSON.stringify(this.licenseData,null,2),t=new Blob([e],{type:"application/json"}),i=window.URL.createObjectURL(t),n=document.createElement("a");n.href=i,n.download="license-data.json",n.click(),window.URL.revokeObjectURL(i)}retry(){this.stepper.selectedIndex=1,this.errorMessage=null,this.isProcessing=!1,this.upscaleAttempt=0,this.isBackImageProcessing=!1,this.upscaleWidth=1920,this.upscaleHeight=1920}static \u0275fac=function(t){return new(t||r)(_e($_),_e(id))};static \u0275cmp=or({type:r,selectors:[["app-stepper"]],viewQuery:function(t,i){if(t&1&&(Ki(NP,5),Ki(FP,5)),t&2){let n;Ar(n=Sr())&&(i.stepper=n.first),Ar(n=Sr())&&(i.backPondComponent=n.first)}},standalone:!0,features:[mr],decls:32,vars:21,consts:[["stepper",""],[3,"linear","orientation"],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],["name","frontImage","aria-label","Upload front image of your driver's license",2,"padding-top","25px",3,"onaddfile","onremovefile","files","options"],["style","margin-top: 20px",4,"ngIf"],[1,"navigation-buttons"],["mat-raised-button","","color","primary","matStepperNext","",3,"disabled"],["name","backImage","aria-label","Upload back image of your driver's license",2,"padding-top","25px",3,"onaddfile","onremovefile","files","options"],["style","margin-bottom: 20px",4,"ngIf"],[4,"ngIf"],["mat-raised-button","","color","warn","matStepperPrevious","",2,"margin-right","10px"],["mat-raised-button","","color","primary",3,"click","disabled"],["mat-raised-button","","color","warn","matStepperPrevious",""],[2,"margin-top","20px"],["alt","Front Image Preview",1,"responsive-image",3,"src"],["alt","Back Image Preview",1,"responsive-image",3,"src"],[2,"margin-bottom","20px"],["mode","indeterminate"],[2,"color","red"],[1,"button-group"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,i){if(t&1){let n=un();Le(0,"div")(1,"mat-stepper",1,0),nh(3,"async"),Le(4,"mat-step",2)(5,"form",3),hr(6,kP,1,0,"ng-template",4),Le(7,"file-pond",5),pr("onaddfile",function(a){return Zr(n),Kr(i.onFrontImageAdded(a))})("onremovefile",function(a){return Zr(n),Kr(i.onFrontImageRemoved(a))}),He(),hr(8,LP,2,1,"div",6),Le(9,"div",7)(10,"button",8),Dt(11," Next "),He()()()(),Le(12,"mat-step",2)(13,"form",3),hr(14,BP,1,0,"ng-template",4),Le(15,"file-pond",9),pr("onaddfile",function(a){return Zr(n),Kr(i.onBackImageAdded(a))})("onremovefile",function(a){return Zr(n),Kr(i.onBackImageRemoved(a))}),He(),hr(16,VP,4,1,"div",6)(17,UP,4,0,"div",10)(18,GP,3,1,"div",11),Le(19,"div",7)(20,"button",12),Dt(21," Back "),He(),Le(22,"button",13),pr("click",function(){return Zr(n),Kr(i.onBackImageNext())}),Dt(23," Next "),He()()()(),Le(24,"mat-step"),hr(25,jP,1,0,"ng-template",4)(26,zP,4,0,"div",10)(27,HP,11,3,"div",11)(28,WP,6,1,"div",11),Le(29,"div",7)(30,"button",14),Dt(31,"Back"),He()()()()()}t&2&&(Ue(),_t("linear",!0)("orientation",oh(3,19,i.stepperOrientation)||"horizontal"),Ue(3),_t("stepControl",i.frontForm),Ue(),_t("formGroup",i.frontForm),Ue(2),_t("files",i.frontFiles)("options",i.frontPondOptions),Ue(),_t("ngIf",i.frontImagePreview),Ue(2),_t("disabled",!i.frontForm.valid),Ue(2),_t("stepControl",i.backForm),Ue(),_t("formGroup",i.backForm),Ue(2),_t("files",i.backFiles)("options",i.backPondOptions),Ue(),_t("ngIf",i.backImagePreview),Ue(),_t("ngIf",i.isProcessing),Ue(),_t("ngIf",!i.isProcessing&&i.errorMessage),Ue(4),_t("disabled",!i.backForm.valid||i.isProcessing),Ue(4),_t("ngIf",i.isProcessing),Ue(),_t("ngIf",!i.isProcessing&&i.licenseData),Ue(),_t("ngIf",!i.isProcessing&&!i.licenseData&&i.errorMessage))},dependencies:[Qi,Xv,Yv,qv,By,vm,ql,hd,ky,Ly,Uy,Vy,Wy,ib,zy,jy,sb,ab,Z_,q_,z_,qp],styles:["mat-form-field[_ngcontent-%COMP%]{margin-top:20px}button[_ngcontent-%COMP%]{margin-top:20px;margin-right:10px}img[_ngcontent-%COMP%]{margin-top:20px;border:1px solid #ccc;padding:5px}"]})};function XP(r){if(!r.type.startsWith("image/"))throw new Error("File is not an image");return URL.createObjectURL(r)}function YP(r){return Oe(this,null,function*(){let e=r.split(",")[1],t=atob(e),i=new Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);let n=new Uint8Array(i),o=new Blob([n],{type:"image/jpeg"});return(yield ts(o,["Orientation"]))?.Orientation||1})}var Xd=class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=or({type:r,selectors:[["app-root"]],standalone:!0,features:[mr],decls:4,vars:0,consts:[[1,"container"]],template:function(t,i){t&1&&(Le(0,"div",0)(1,"h1"),Dt(2,"Driver's License Scanner"),He(),Qt(3,"app-stepper"),He())},dependencies:[Wd],styles:["h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px;color:#3f51b5}div[_ngcontent-%COMP%]{max-width:800px;margin:auto;background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 5px #0000001a}pre[_ngcontent-%COMP%]{background-color:#e0e0e0;padding:15px;border-radius:5px;overflow-x:auto}"]})};u1(Xd,Q1).catch(r=>console.error(r));
